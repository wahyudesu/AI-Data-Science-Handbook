/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var mY=Object.create;var Mh=Object.defineProperty;var gY=Object.getOwnPropertyDescriptor;var pY=Object.getOwnPropertyNames;var _Y=Object.getPrototypeOf,bY=Object.prototype.hasOwnProperty;var pA=r=>{throw TypeError(r)};var vY=(r,e,t)=>e in r?Mh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ce=(r,e)=>()=>(r&&(e=r(r=0)),e);var ae=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),r9=(r,e)=>{for(var t in e)Mh(r,t,{get:e[t],enumerable:!0})},_A=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pY(e))!bY.call(r,i)&&i!==t&&Mh(r,i,{get:()=>e[i],enumerable:!(n=gY(e,i))||n.enumerable});return r};var wr=(r,e,t)=>(t=r!=null?mY(_Y(r)):{},_A(e||!r||!r.__esModule?Mh(t,"default",{value:r,enumerable:!0}):t,r)),CY=r=>_A(Mh({},"__esModule",{value:!0}),r);var ze=(r,e,t)=>vY(r,typeof e!="symbol"?e+"":e,t),bA=(r,e,t)=>e.has(r)||pA("Cannot "+t);var Gr=(r,e,t)=>(bA(r,e,"read from private field"),t?t.call(r):e.get(r)),Cl=(r,e,t)=>e.has(r)?pA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),oo=(r,e,t,n)=>(bA(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var xb=ae((jb,n9)=>{(function(r,e){typeof jb=="object"&&typeof n9!="undefined"?n9.exports=e():typeof define=="function"&&define.amd?define(e):r.moment=e()})(jb,function(){"use strict";var r;function e(){return r.apply(null,arguments)}function t(m){r=m}function n(m){return m instanceof Array||Object.prototype.toString.call(m)==="[object Array]"}function i(m){return m!=null&&Object.prototype.toString.call(m)==="[object Object]"}function o(m,_){return Object.prototype.hasOwnProperty.call(m,_)}function l(m){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(m).length===0;var _;for(_ in m)if(o(m,_))return!1;return!0}function a(m){return m===void 0}function s(m){return typeof m=="number"||Object.prototype.toString.call(m)==="[object Number]"}function u(m){return m instanceof Date||Object.prototype.toString.call(m)==="[object Date]"}function c(m,_){var E=[],O,W=m.length;for(O=0;O<W;++O)E.push(_(m[O],O));return E}function f(m,_){for(var E in _)o(_,E)&&(m[E]=_[E]);return o(_,"toString")&&(m.toString=_.toString),o(_,"valueOf")&&(m.valueOf=_.valueOf),m}function h(m,_,E,O){return z1(m,_,E,O,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function p(m){return m._pf==null&&(m._pf=d()),m._pf}var v;Array.prototype.some?v=Array.prototype.some:v=function(m){var _=Object(this),E=_.length>>>0,O;for(O=0;O<E;O++)if(O in _&&m.call(this,_[O],O,_))return!0;return!1};function b(m){if(m._isValid==null){var _=p(m),E=v.call(_.parsedDateParts,function(W){return W!=null}),O=!isNaN(m._d.getTime())&&_.overflow<0&&!_.empty&&!_.invalidEra&&!_.invalidMonth&&!_.invalidWeekday&&!_.weekdayMismatch&&!_.nullInput&&!_.invalidFormat&&!_.userInvalidated&&(!_.meridiem||_.meridiem&&E);if(m._strict&&(O=O&&_.charsLeftOver===0&&_.unusedTokens.length===0&&_.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(m))m._isValid=O;else return O}return m._isValid}function C(m){var _=h(NaN);return m!=null?f(p(_),m):p(_).userInvalidated=!0,_}var L=e.momentProperties=[],S=!1;function P(m,_){var E,O,W,ie=L.length;if(a(_._isAMomentObject)||(m._isAMomentObject=_._isAMomentObject),a(_._i)||(m._i=_._i),a(_._f)||(m._f=_._f),a(_._l)||(m._l=_._l),a(_._strict)||(m._strict=_._strict),a(_._tzm)||(m._tzm=_._tzm),a(_._isUTC)||(m._isUTC=_._isUTC),a(_._offset)||(m._offset=_._offset),a(_._pf)||(m._pf=p(_)),a(_._locale)||(m._locale=_._locale),ie>0)for(E=0;E<ie;E++)O=L[E],W=_[O],a(W)||(m[O]=W);return m}function y(m){P(this,m),this._d=new Date(m._d!=null?m._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),S===!1&&(S=!0,e.updateOffset(this),S=!1)}function z(m){return m instanceof y||m!=null&&m._isAMomentObject!=null}function G(m){e.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+m)}function J(m,_){var E=!0;return f(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,m),E){var O=[],W,ie,he,lt=arguments.length;for(ie=0;ie<lt;ie++){if(W="",typeof arguments[ie]=="object"){W+=`
[`+ie+"] ";for(he in arguments[0])o(arguments[0],he)&&(W+=he+": "+arguments[0][he]+", ");W=W.slice(0,-2)}else W=arguments[ie];O.push(W)}G(m+`
Arguments: `+Array.prototype.slice.call(O).join("")+`
`+new Error().stack),E=!1}return _.apply(this,arguments)},_)}var te={};function ne(m,_){e.deprecationHandler!=null&&e.deprecationHandler(m,_),te[m]||(G(_),te[m]=!0)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;function Q(m){return typeof Function!="undefined"&&m instanceof Function||Object.prototype.toString.call(m)==="[object Function]"}function ee(m){var _,E;for(E in m)o(m,E)&&(_=m[E],Q(_)?this[E]=_:this["_"+E]=_);this._config=m,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function se(m,_){var E=f({},m),O;for(O in _)o(_,O)&&(i(m[O])&&i(_[O])?(E[O]={},f(E[O],m[O]),f(E[O],_[O])):_[O]!=null?E[O]=_[O]:delete E[O]);for(O in m)o(m,O)&&!o(_,O)&&i(m[O])&&(E[O]=f({},E[O]));return E}function Pe(m){m!=null&&this.set(m)}var Te;Object.keys?Te=Object.keys:Te=function(m){var _,E=[];for(_ in m)o(m,_)&&E.push(_);return E};var be={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function rt(m,_,E){var O=this._calendar[m]||this._calendar.sameElse;return Q(O)?O.call(_,E):O}function Ee(m,_,E){var O=""+Math.abs(m),W=_-O.length,ie=m>=0;return(ie?E?"+":"":"-")+Math.pow(10,Math.max(0,W)).toString().substr(1)+O}var Re=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,nr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Xt={},Oe={};function fe(m,_,E,O){var W=O;typeof O=="string"&&(W=function(){return this[O]()}),m&&(Oe[m]=W),_&&(Oe[_[0]]=function(){return Ee(W.apply(this,arguments),_[1],_[2])}),E&&(Oe[E]=function(){return this.localeData().ordinal(W.apply(this,arguments),m)})}function hr(m){return m.match(/\[[\s\S]/)?m.replace(/^\[|\]$/g,""):m.replace(/\\/g,"")}function qt(m){var _=m.match(Re),E,O;for(E=0,O=_.length;E<O;E++)Oe[_[E]]?_[E]=Oe[_[E]]:_[E]=hr(_[E]);return function(W){var ie="",he;for(he=0;he<O;he++)ie+=Q(_[he])?_[he].call(W,m):_[he];return ie}}function Mr(m,_){return m.isValid()?(_=sn(_,m.localeData()),Xt[_]=Xt[_]||qt(_),Xt[_](m)):m.localeData().invalidDate()}function sn(m,_){var E=5;function O(W){return _.longDateFormat(W)||W}for(nr.lastIndex=0;E>=0&&nr.test(m);)m=m.replace(nr,O),nr.lastIndex=0,E-=1;return m}var $r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ao(m){var _=this._longDateFormat[m],E=this._longDateFormat[m.toUpperCase()];return _||!E?_:(this._longDateFormat[m]=E.match(Re).map(function(O){return O==="MMMM"||O==="MM"||O==="DD"||O==="dddd"?O.slice(1):O}).join(""),this._longDateFormat[m])}var vn="Invalid date";function Tn(){return this._invalidDate}var Mi="%d",jn=/\d{1,2}/;function ai(m){return this._ordinal.replace("%d",m)}var ke={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Po(m,_,E,O){var W=this._relativeTime[E];return Q(W)?W(m,_,E,O):W.replace(/%d/i,m)}function sl(m,_){var E=this._relativeTime[m>0?"future":"past"];return Q(E)?E(_):E.replace(/%s/i,_)}var Cn={};function Ir(m,_){var E=m.toLowerCase();Cn[E]=Cn[E+"s"]=Cn[_]=m}function we(m){return typeof m=="string"?Cn[m]||Cn[m.toLowerCase()]:void 0}function en(m){var _={},E,O;for(O in m)o(m,O)&&(E=we(O),E&&(_[E]=m[O]));return _}var Qe={};function Ie(m,_){Qe[m]=_}function st(m){var _=[],E;for(E in m)o(m,E)&&_.push({unit:E,priority:Qe[E]});return _.sort(function(O,W){return O.priority-W.priority}),_}function Ve(m){return m%4===0&&m%100!==0||m%400===0}function Me(m){return m<0?Math.ceil(m)||0:Math.floor(m)}function Ae(m){var _=+m,E=0;return _!==0&&isFinite(_)&&(E=Me(_)),E}function nt(m,_){return function(E){return E!=null?(L1(this,m,E),e.updateOffset(this,_),this):Wr(this,m)}}function Wr(m,_){return m.isValid()?m._d["get"+(m._isUTC?"UTC":"")+_]():NaN}function L1(m,_,E){m.isValid()&&!isNaN(E)&&(_==="FullYear"&&Ve(m.year())&&m.month()===1&&m.date()===29?(E=Ae(E),m._d["set"+(m._isUTC?"UTC":"")+_](E,m.month(),t0(E,m.month()))):m._d["set"+(m._isUTC?"UTC":"")+_](E))}function $u(m){return m=we(m),Q(this[m])?this[m]():this}function n7(m,_){if(typeof m=="object"){m=en(m);var E=st(m),O,W=E.length;for(O=0;O<W;O++)this[E[O].unit](m[E[O].unit])}else if(m=we(m),Q(this[m]))return this[m](_);return this}var bc=/\d/,On=/\d\d/,vc=/\d{3}/,rs=/\d{4}/,e0=/[+-]?\d{6}/,Wt=/\d\d?/,ul=/\d\d\d\d?/,ih=/\d\d\d\d\d\d?/,ns=/\d{1,3}/,oh=/\d{1,4}/,E1=/[+-]?\d{1,6}/,is=/\d+/,Cc=/[+-]?\d+/,B_=/Z|[+-]\d\d:?\d\d/gi,wc=/Z|[+-]\d\d(?::?\d\d)?/gi,D_=/[+-]?\d+(\.\d{1,3})?/,S1=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,M1;M1={};function De(m,_,E){M1[m]=Q(_)?_:function(O,W){return O&&E?E:_}}function Z_(m,_){return o(M1,m)?M1[m](_._strict,_._locale):new RegExp($l(m))}function $l(m){return xn(m.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(_,E,O,W,ie){return E||O||W||ie}))}function xn(m){return m.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var lh={};function or(m,_){var E,O=_,W;for(typeof m=="string"&&(m=[m]),s(_)&&(O=function(ie,he){he[_]=Ae(ie)}),W=m.length,E=0;E<W;E++)lh[m[E]]=O}function to(m,_){or(m,function(E,O,W,ie){W._w=W._w||{},_(E,W._w,W,ie)})}function cl(m,_,E){_!=null&&o(lh,m)&&lh[m](_,E._a,E,m)}var zr=0,ro=1,wn=2,qr=3,si=4,To=5,Oo=6,i7=7,o7=8;function l7(m,_){return(m%_+_)%_}var Hr;Array.prototype.indexOf?Hr=Array.prototype.indexOf:Hr=function(m){var _;for(_=0;_<this.length;++_)if(this[_]===m)return _;return-1};function t0(m,_){if(isNaN(m)||isNaN(_))return NaN;var E=l7(_,12);return m+=(_-E)/12,E===1?Ve(m)?29:28:31-E%7%2}fe("M",["MM",2],"Mo",function(){return this.month()+1}),fe("MMM",0,0,function(m){return this.localeData().monthsShort(this,m)}),fe("MMMM",0,0,function(m){return this.localeData().months(this,m)}),Ir("month","M"),Ie("month",8),De("M",Wt),De("MM",Wt,On),De("MMM",function(m,_){return _.monthsShortRegex(m)}),De("MMMM",function(m,_){return _.monthsRegex(m)}),or(["M","MM"],function(m,_){_[ro]=Ae(m)-1}),or(["MMM","MMMM"],function(m,_,E,O){var W=E._locale.monthsParse(m,O,E._strict);W!=null?_[ro]=W:p(E).invalidMonth=m});var ah="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),yc="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),a7=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,F_=S1,j_=S1;function x_(m,_){return m?n(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||a7).test(_)?"format":"standalone"][m.month()]:n(this._months)?this._months:this._months.standalone}function s7(m,_){return m?n(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[a7.test(_)?"format":"standalone"][m.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function A1(m,_,E){var O,W,ie,he=m.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],O=0;O<12;++O)ie=h([2e3,O]),this._shortMonthsParse[O]=this.monthsShort(ie,"").toLocaleLowerCase(),this._longMonthsParse[O]=this.months(ie,"").toLocaleLowerCase();return E?_==="MMM"?(W=Hr.call(this._shortMonthsParse,he),W!==-1?W:null):(W=Hr.call(this._longMonthsParse,he),W!==-1?W:null):_==="MMM"?(W=Hr.call(this._shortMonthsParse,he),W!==-1?W:(W=Hr.call(this._longMonthsParse,he),W!==-1?W:null)):(W=Hr.call(this._longMonthsParse,he),W!==-1?W:(W=Hr.call(this._shortMonthsParse,he),W!==-1?W:null))}function q_(m,_,E){var O,W,ie;if(this._monthsParseExact)return A1.call(this,m,_,E);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),O=0;O<12;O++){if(W=h([2e3,O]),E&&!this._longMonthsParse[O]&&(this._longMonthsParse[O]=new RegExp("^"+this.months(W,"").replace(".","")+"$","i"),this._shortMonthsParse[O]=new RegExp("^"+this.monthsShort(W,"").replace(".","")+"$","i")),!E&&!this._monthsParse[O]&&(ie="^"+this.months(W,"")+"|^"+this.monthsShort(W,""),this._monthsParse[O]=new RegExp(ie.replace(".",""),"i")),E&&_==="MMMM"&&this._longMonthsParse[O].test(m))return O;if(E&&_==="MMM"&&this._shortMonthsParse[O].test(m))return O;if(!E&&this._monthsParse[O].test(m))return O}}function r0(m,_){var E;if(!m.isValid())return m;if(typeof _=="string"){if(/^\d+$/.test(_))_=Ae(_);else if(_=m.localeData().monthsParse(_),!s(_))return m}return E=Math.min(m.date(),t0(m.year(),_)),m._d["set"+(m._isUTC?"UTC":"")+"Month"](_,E),m}function P1(m){return m!=null?(r0(this,m),e.updateOffset(this,!0),this):Wr(this,"Month")}function kc(){return t0(this.year(),this.month())}function Ai(m){return this._monthsParseExact?(o(this,"_monthsRegex")||Lc.call(this),m?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=F_),this._monthsShortStrictRegex&&m?this._monthsShortStrictRegex:this._monthsShortRegex)}function u7(m){return this._monthsParseExact?(o(this,"_monthsRegex")||Lc.call(this),m?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=j_),this._monthsStrictRegex&&m?this._monthsStrictRegex:this._monthsRegex)}function Lc(){function m(he,lt){return lt.length-he.length}var _=[],E=[],O=[],W,ie;for(W=0;W<12;W++)ie=h([2e3,W]),_.push(this.monthsShort(ie,"")),E.push(this.months(ie,"")),O.push(this.months(ie,"")),O.push(this.monthsShort(ie,""));for(_.sort(m),E.sort(m),O.sort(m),W=0;W<12;W++)_[W]=xn(_[W]),E[W]=xn(E[W]);for(W=0;W<24;W++)O[W]=xn(O[W]);this._monthsRegex=new RegExp("^("+O.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+E.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+_.join("|")+")","i")}fe("Y",0,0,function(){var m=this.year();return m<=9999?Ee(m,4):"+"+m}),fe(0,["YY",2],0,function(){return this.year()%100}),fe(0,["YYYY",4],0,"year"),fe(0,["YYYYY",5],0,"year"),fe(0,["YYYYYY",6,!0],0,"year"),Ir("year","y"),Ie("year",1),De("Y",Cc),De("YY",Wt,On),De("YYYY",oh,rs),De("YYYYY",E1,e0),De("YYYYYY",E1,e0),or(["YYYYY","YYYYYY"],zr),or("YYYY",function(m,_){_[zr]=m.length===2?e.parseTwoDigitYear(m):Ae(m)}),or("YY",function(m,_){_[zr]=e.parseTwoDigitYear(m)}),or("Y",function(m,_){_[zr]=parseInt(m,10)});function T1(m){return Ve(m)?366:365}e.parseTwoDigitYear=function(m){return Ae(m)+(Ae(m)>68?1900:2e3)};var n0=nt("FullYear",!0);function Ec(){return Ve(this.year())}function c7(m,_,E,O,W,ie,he){var lt;return m<100&&m>=0?(lt=new Date(m+400,_,E,O,W,ie,he),isFinite(lt.getFullYear())&&lt.setFullYear(m)):lt=new Date(m,_,E,O,W,ie,he),lt}function i0(m){var _,E;return m<100&&m>=0?(E=Array.prototype.slice.call(arguments),E[0]=m+400,_=new Date(Date.UTC.apply(null,E)),isFinite(_.getUTCFullYear())&&_.setUTCFullYear(m)):_=new Date(Date.UTC.apply(null,arguments)),_}function Sc(m,_,E){var O=7+_-E,W=(7+i0(m,0,O).getUTCDay()-_)%7;return-W+O-1}function Mc(m,_,E,O,W){var ie=(7+E-O)%7,he=Sc(m,O,W),lt=1+7*(_-1)+ie+he,Rt,gr;return lt<=0?(Rt=m-1,gr=T1(Rt)+lt):lt>T1(m)?(Rt=m+1,gr=lt-T1(m)):(Rt=m,gr=lt),{year:Rt,dayOfYear:gr}}function fl(m,_,E){var O=Sc(m.year(),_,E),W=Math.floor((m.dayOfYear()-O-1)/7)+1,ie,he;return W<1?(he=m.year()-1,ie=W+hl(he,_,E)):W>hl(m.year(),_,E)?(ie=W-hl(m.year(),_,E),he=m.year()+1):(he=m.year(),ie=W),{week:ie,year:he}}function hl(m,_,E){var O=Sc(m,_,E),W=Sc(m+1,_,E);return(T1(m)-O+W)/7}fe("w",["ww",2],"wo","week"),fe("W",["WW",2],"Wo","isoWeek"),Ir("week","w"),Ir("isoWeek","W"),Ie("week",5),Ie("isoWeek",5),De("w",Wt),De("ww",Wt,On),De("W",Wt),De("WW",Wt,On),to(["w","ww","W","WW"],function(m,_,E,O){_[O.substr(0,1)]=Ae(m)});function U_(m){return fl(m,this._week.dow,this._week.doy).week}var W_={dow:0,doy:6};function f7(){return this._week.dow}function h7(){return this._week.doy}function G_(m){var _=this.localeData().week(this);return m==null?_:this.add((m-_)*7,"d")}function d7(m){var _=fl(this,1,4).week;return m==null?_:this.add((m-_)*7,"d")}fe("d",0,"do","day"),fe("dd",0,0,function(m){return this.localeData().weekdaysMin(this,m)}),fe("ddd",0,0,function(m){return this.localeData().weekdaysShort(this,m)}),fe("dddd",0,0,function(m){return this.localeData().weekdays(this,m)}),fe("e",0,0,"weekday"),fe("E",0,0,"isoWeekday"),Ir("day","d"),Ir("weekday","e"),Ir("isoWeekday","E"),Ie("day",11),Ie("weekday",11),Ie("isoWeekday",11),De("d",Wt),De("e",Wt),De("E",Wt),De("dd",function(m,_){return _.weekdaysMinRegex(m)}),De("ddd",function(m,_){return _.weekdaysShortRegex(m)}),De("dddd",function(m,_){return _.weekdaysRegex(m)}),to(["dd","ddd","dddd"],function(m,_,E,O){var W=E._locale.weekdaysParse(m,O,E._strict);W!=null?_.d=W:p(E).invalidWeekday=m}),to(["d","e","E"],function(m,_,E,O){_[O]=Ae(m)});function sh(m,_){return typeof m!="string"?m:isNaN(m)?(m=_.weekdaysParse(m),typeof m=="number"?m:null):parseInt(m,10)}function ea(m,_){return typeof m=="string"?_.weekdaysParse(m)%7||7:isNaN(m)?null:m}function dl(m,_){return m.slice(_,7).concat(m.slice(0,_))}var m7="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),g7="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),p7="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ac=S1,o0=S1,Pc=S1;function Tc(m,_){var E=n(this._weekdays)?this._weekdays:this._weekdays[m&&m!==!0&&this._weekdays.isFormat.test(_)?"format":"standalone"];return m===!0?dl(E,this._week.dow):m?E[m.day()]:E}function Y_(m){return m===!0?dl(this._weekdaysShort,this._week.dow):m?this._weekdaysShort[m.day()]:this._weekdaysShort}function K_(m){return m===!0?dl(this._weekdaysMin,this._week.dow):m?this._weekdaysMin[m.day()]:this._weekdaysMin}function J_(m,_,E){var O,W,ie,he=m.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],O=0;O<7;++O)ie=h([2e3,1]).day(O),this._minWeekdaysParse[O]=this.weekdaysMin(ie,"").toLocaleLowerCase(),this._shortWeekdaysParse[O]=this.weekdaysShort(ie,"").toLocaleLowerCase(),this._weekdaysParse[O]=this.weekdays(ie,"").toLocaleLowerCase();return E?_==="dddd"?(W=Hr.call(this._weekdaysParse,he),W!==-1?W:null):_==="ddd"?(W=Hr.call(this._shortWeekdaysParse,he),W!==-1?W:null):(W=Hr.call(this._minWeekdaysParse,he),W!==-1?W:null):_==="dddd"?(W=Hr.call(this._weekdaysParse,he),W!==-1||(W=Hr.call(this._shortWeekdaysParse,he),W!==-1)?W:(W=Hr.call(this._minWeekdaysParse,he),W!==-1?W:null)):_==="ddd"?(W=Hr.call(this._shortWeekdaysParse,he),W!==-1||(W=Hr.call(this._weekdaysParse,he),W!==-1)?W:(W=Hr.call(this._minWeekdaysParse,he),W!==-1?W:null)):(W=Hr.call(this._minWeekdaysParse,he),W!==-1||(W=Hr.call(this._weekdaysParse,he),W!==-1)?W:(W=Hr.call(this._shortWeekdaysParse,he),W!==-1?W:null))}function X_(m,_,E){var O,W,ie;if(this._weekdaysParseExact)return J_.call(this,m,_,E);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),O=0;O<7;O++){if(W=h([2e3,1]).day(O),E&&!this._fullWeekdaysParse[O]&&(this._fullWeekdaysParse[O]=new RegExp("^"+this.weekdays(W,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[O]=new RegExp("^"+this.weekdaysShort(W,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[O]=new RegExp("^"+this.weekdaysMin(W,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[O]||(ie="^"+this.weekdays(W,"")+"|^"+this.weekdaysShort(W,"")+"|^"+this.weekdaysMin(W,""),this._weekdaysParse[O]=new RegExp(ie.replace(".",""),"i")),E&&_==="dddd"&&this._fullWeekdaysParse[O].test(m))return O;if(E&&_==="ddd"&&this._shortWeekdaysParse[O].test(m))return O;if(E&&_==="dd"&&this._minWeekdaysParse[O].test(m))return O;if(!E&&this._weekdaysParse[O].test(m))return O}}function Q_(m){if(!this.isValid())return m!=null?this:NaN;var _=this._isUTC?this._d.getUTCDay():this._d.getDay();return m!=null?(m=sh(m,this.localeData()),this.add(m-_,"d")):_}function $_(m){if(!this.isValid())return m!=null?this:NaN;var _=(this.day()+7-this.localeData()._week.dow)%7;return m==null?_:this.add(m-_,"d")}function _7(m){if(!this.isValid())return m!=null?this:NaN;if(m!=null){var _=ea(m,this.localeData());return this.day(this.day()%7?_:_-7)}else return this.day()||7}function eb(m){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ro.call(this),m?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Ac),this._weekdaysStrictRegex&&m?this._weekdaysStrictRegex:this._weekdaysRegex)}function tb(m){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ro.call(this),m?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=o0),this._weekdaysShortStrictRegex&&m?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function rb(m){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Ro.call(this),m?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Pc),this._weekdaysMinStrictRegex&&m?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ro(){function m(ci,bs){return bs.length-ci.length}var _=[],E=[],O=[],W=[],ie,he,lt,Rt,gr;for(ie=0;ie<7;ie++)he=h([2e3,1]).day(ie),lt=xn(this.weekdaysMin(he,"")),Rt=xn(this.weekdaysShort(he,"")),gr=xn(this.weekdays(he,"")),_.push(lt),E.push(Rt),O.push(gr),W.push(lt),W.push(Rt),W.push(gr);_.sort(m),E.sort(m),O.sort(m),W.sort(m),this._weekdaysRegex=new RegExp("^("+W.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+O.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+E.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+_.join("|")+")","i")}function Oc(){return this.hours()%12||12}function nb(){return this.hours()||24}fe("H",["HH",2],0,"hour"),fe("h",["hh",2],0,Oc),fe("k",["kk",2],0,nb),fe("hmm",0,0,function(){return""+Oc.apply(this)+Ee(this.minutes(),2)}),fe("hmmss",0,0,function(){return""+Oc.apply(this)+Ee(this.minutes(),2)+Ee(this.seconds(),2)}),fe("Hmm",0,0,function(){return""+this.hours()+Ee(this.minutes(),2)}),fe("Hmmss",0,0,function(){return""+this.hours()+Ee(this.minutes(),2)+Ee(this.seconds(),2)});function uh(m,_){fe(m,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),_)})}uh("a",!0),uh("A",!1),Ir("hour","h"),Ie("hour",13);function os(m,_){return _._meridiemParse}De("a",os),De("A",os),De("H",Wt),De("h",Wt),De("k",Wt),De("HH",Wt,On),De("hh",Wt,On),De("kk",Wt,On),De("hmm",ul),De("hmmss",ih),De("Hmm",ul),De("Hmmss",ih),or(["H","HH"],qr),or(["k","kk"],function(m,_,E){var O=Ae(m);_[qr]=O===24?0:O}),or(["a","A"],function(m,_,E){E._isPm=E._locale.isPM(m),E._meridiem=m}),or(["h","hh"],function(m,_,E){_[qr]=Ae(m),p(E).bigHour=!0}),or("hmm",function(m,_,E){var O=m.length-2;_[qr]=Ae(m.substr(0,O)),_[si]=Ae(m.substr(O)),p(E).bigHour=!0}),or("hmmss",function(m,_,E){var O=m.length-4,W=m.length-2;_[qr]=Ae(m.substr(0,O)),_[si]=Ae(m.substr(O,2)),_[To]=Ae(m.substr(W)),p(E).bigHour=!0}),or("Hmm",function(m,_,E){var O=m.length-2;_[qr]=Ae(m.substr(0,O)),_[si]=Ae(m.substr(O))}),or("Hmmss",function(m,_,E){var O=m.length-4,W=m.length-2;_[qr]=Ae(m.substr(0,O)),_[si]=Ae(m.substr(O,2)),_[To]=Ae(m.substr(W))});function O1(m){return(m+"").toLowerCase().charAt(0)==="p"}var Rc=/[ap]\.?m?\.?/i,b7=nt("Hours",!0);function ib(m,_,E){return m>11?E?"pm":"PM":E?"am":"AM"}var Ic={calendar:be,longDateFormat:$r,invalidDate:vn,ordinal:Mi,dayOfMonthOrdinalParse:jn,relativeTime:ke,months:ah,monthsShort:yc,week:W_,weekdays:m7,weekdaysMin:p7,weekdaysShort:g7,meridiemParse:Rc},dr={},ls={},l0;function ob(m,_){var E,O=Math.min(m.length,_.length);for(E=0;E<O;E+=1)if(m[E]!==_[E])return E;return O}function v7(m){return m&&m.toLowerCase().replace("_","-")}function lb(m){for(var _=0,E,O,W,ie;_<m.length;){for(ie=v7(m[_]).split("-"),E=ie.length,O=v7(m[_+1]),O=O?O.split("-"):null;E>0;){if(W=zc(ie.slice(0,E).join("-")),W)return W;if(O&&O.length>=E&&ob(ie,O)>=E-1)break;E--}_++}return l0}function Io(m){return m.match("^[^/\\\\]*$")!=null}function zc(m){var _=null,E;if(dr[m]===void 0&&typeof n9!="undefined"&&n9&&n9.exports&&Io(m))try{_=l0._abbr,E=require,E("./locale/"+m),ta(_)}catch(O){dr[m]=null}return dr[m]}function ta(m,_){var E;return m&&(a(_)?E=no(m):E=ch(m,_),E?l0=E:typeof console!="undefined"&&console.warn&&console.warn("Locale "+m+" not found. Did you forget to load it?")),l0._abbr}function ch(m,_){if(_!==null){var E,O=Ic;if(_.abbr=m,dr[m]!=null)ne("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),O=dr[m]._config;else if(_.parentLocale!=null)if(dr[_.parentLocale]!=null)O=dr[_.parentLocale]._config;else if(E=zc(_.parentLocale),E!=null)O=E._config;else return ls[_.parentLocale]||(ls[_.parentLocale]=[]),ls[_.parentLocale].push({name:m,config:_}),null;return dr[m]=new Pe(se(O,_)),ls[m]&&ls[m].forEach(function(W){ch(W.name,W.config)}),ta(m),dr[m]}else return delete dr[m],null}function Hc(m,_){if(_!=null){var E,O,W=Ic;dr[m]!=null&&dr[m].parentLocale!=null?dr[m].set(se(dr[m]._config,_)):(O=zc(m),O!=null&&(W=O._config),_=se(W,_),O==null&&(_.abbr=m),E=new Pe(_),E.parentLocale=dr[m],dr[m]=E),ta(m)}else dr[m]!=null&&(dr[m].parentLocale!=null?(dr[m]=dr[m].parentLocale,m===ta()&&ta(m)):dr[m]!=null&&delete dr[m]);return dr[m]}function no(m){var _;if(m&&m._locale&&m._locale._abbr&&(m=m._locale._abbr),!m)return l0;if(!n(m)){if(_=zc(m),_)return _;m=[m]}return lb(m)}function ml(){return Te(dr)}function gl(m){var _,E=m._a;return E&&p(m).overflow===-2&&(_=E[ro]<0||E[ro]>11?ro:E[wn]<1||E[wn]>t0(E[zr],E[ro])?wn:E[qr]<0||E[qr]>24||E[qr]===24&&(E[si]!==0||E[To]!==0||E[Oo]!==0)?qr:E[si]<0||E[si]>59?si:E[To]<0||E[To]>59?To:E[Oo]<0||E[Oo]>999?Oo:-1,p(m)._overflowDayOfYear&&(_<zr||_>wn)&&(_=wn),p(m)._overflowWeeks&&_===-1&&(_=i7),p(m)._overflowWeekday&&_===-1&&(_=o7),p(m).overflow=_),m}var ab=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,C7=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sb=/Z|[+-]\d\d(?::?\d\d)?/,Nc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Vc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ub=/^\/?Date\((-?\d+)/i,w7=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,y7={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fh(m){var _,E,O=m._i,W=ab.exec(O)||C7.exec(O),ie,he,lt,Rt,gr=Nc.length,ci=Vc.length;if(W){for(p(m).iso=!0,_=0,E=gr;_<E;_++)if(Nc[_][1].exec(W[1])){he=Nc[_][0],ie=Nc[_][2]!==!1;break}if(he==null){m._isValid=!1;return}if(W[3]){for(_=0,E=ci;_<E;_++)if(Vc[_][1].exec(W[3])){lt=(W[2]||" ")+Vc[_][0];break}if(lt==null){m._isValid=!1;return}}if(!ie&&lt!=null){m._isValid=!1;return}if(W[4])if(sb.exec(W[4]))Rt="Z";else{m._isValid=!1;return}m._f=he+(lt||"")+(Rt||""),dh(m)}else m._isValid=!1}function R1(m,_,E,O,W,ie){var he=[hh(m),yc.indexOf(_),parseInt(E,10),parseInt(O,10),parseInt(W,10)];return ie&&he.push(parseInt(ie,10)),he}function hh(m){var _=parseInt(m,10);return _<=49?2e3+_:_<=999?1900+_:_}function k7(m){return m.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function cb(m,_,E){if(m){var O=g7.indexOf(m),W=new Date(_[0],_[1],_[2]).getDay();if(O!==W)return p(E).weekdayMismatch=!0,E._isValid=!1,!1}return!0}function Bc(m,_,E){if(m)return y7[m];if(_)return 0;var O=parseInt(E,10),W=O%100,ie=(O-W)/100;return ie*60+W}function L7(m){var _=w7.exec(k7(m._i)),E;if(_){if(E=R1(_[4],_[3],_[2],_[5],_[6],_[7]),!cb(_[1],E,m))return;m._a=E,m._tzm=Bc(_[8],_[9],_[10]),m._d=i0.apply(null,m._a),m._d.setUTCMinutes(m._d.getUTCMinutes()-m._tzm),p(m).rfc2822=!0}else m._isValid=!1}function fb(m){var _=ub.exec(m._i);if(_!==null){m._d=new Date(+_[1]);return}if(fh(m),m._isValid===!1)delete m._isValid;else return;if(L7(m),m._isValid===!1)delete m._isValid;else return;m._strict?m._isValid=!1:e.createFromInputFallback(m)}e.createFromInputFallback=J("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(m){m._d=new Date(m._i+(m._useUTC?" UTC":""))});function as(m,_,E){return m!=null?m:_!=null?_:E}function hb(m){var _=new Date(e.now());return m._useUTC?[_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate()]:[_.getFullYear(),_.getMonth(),_.getDate()]}function I1(m){var _,E,O=[],W,ie,he;if(!m._d){for(W=hb(m),m._w&&m._a[wn]==null&&m._a[ro]==null&&a0(m),m._dayOfYear!=null&&(he=as(m._a[zr],W[zr]),(m._dayOfYear>T1(he)||m._dayOfYear===0)&&(p(m)._overflowDayOfYear=!0),E=i0(he,0,m._dayOfYear),m._a[ro]=E.getUTCMonth(),m._a[wn]=E.getUTCDate()),_=0;_<3&&m._a[_]==null;++_)m._a[_]=O[_]=W[_];for(;_<7;_++)m._a[_]=O[_]=m._a[_]==null?_===2?1:0:m._a[_];m._a[qr]===24&&m._a[si]===0&&m._a[To]===0&&m._a[Oo]===0&&(m._nextDay=!0,m._a[qr]=0),m._d=(m._useUTC?i0:c7).apply(null,O),ie=m._useUTC?m._d.getUTCDay():m._d.getDay(),m._tzm!=null&&m._d.setUTCMinutes(m._d.getUTCMinutes()-m._tzm),m._nextDay&&(m._a[qr]=24),m._w&&typeof m._w.d!="undefined"&&m._w.d!==ie&&(p(m).weekdayMismatch=!0)}}function a0(m){var _,E,O,W,ie,he,lt,Rt,gr;_=m._w,_.GG!=null||_.W!=null||_.E!=null?(ie=1,he=4,E=as(_.GG,m._a[zr],fl(lr(),1,4).year),O=as(_.W,1),W=as(_.E,1),(W<1||W>7)&&(Rt=!0)):(ie=m._locale._week.dow,he=m._locale._week.doy,gr=fl(lr(),ie,he),E=as(_.gg,m._a[zr],gr.year),O=as(_.w,gr.week),_.d!=null?(W=_.d,(W<0||W>6)&&(Rt=!0)):_.e!=null?(W=_.e+ie,(_.e<0||_.e>6)&&(Rt=!0)):W=ie),O<1||O>hl(E,ie,he)?p(m)._overflowWeeks=!0:Rt!=null?p(m)._overflowWeekday=!0:(lt=Mc(E,O,W,ie,he),m._a[zr]=lt.year,m._dayOfYear=lt.dayOfYear)}e.ISO_8601=function(){},e.RFC_2822=function(){};function dh(m){if(m._f===e.ISO_8601){fh(m);return}if(m._f===e.RFC_2822){L7(m);return}m._a=[],p(m).empty=!0;var _=""+m._i,E,O,W,ie,he,lt=_.length,Rt=0,gr,ci;for(W=sn(m._f,m._locale).match(Re)||[],ci=W.length,E=0;E<ci;E++)ie=W[E],O=(_.match(Z_(ie,m))||[])[0],O&&(he=_.substr(0,_.indexOf(O)),he.length>0&&p(m).unusedInput.push(he),_=_.slice(_.indexOf(O)+O.length),Rt+=O.length),Oe[ie]?(O?p(m).empty=!1:p(m).unusedTokens.push(ie),cl(ie,O,m)):m._strict&&!O&&p(m).unusedTokens.push(ie);p(m).charsLeftOver=lt-Rt,_.length>0&&p(m).unusedInput.push(_),m._a[qr]<=12&&p(m).bigHour===!0&&m._a[qr]>0&&(p(m).bigHour=void 0),p(m).parsedDateParts=m._a.slice(0),p(m).meridiem=m._meridiem,m._a[qr]=db(m._locale,m._a[qr],m._meridiem),gr=p(m).era,gr!==null&&(m._a[zr]=m._locale.erasConvertYear(gr,m._a[zr])),I1(m),gl(m)}function db(m,_,E){var O;return E==null?_:m.meridiemHour!=null?m.meridiemHour(_,E):(m.isPM!=null&&(O=m.isPM(E),O&&_<12&&(_+=12),!O&&_===12&&(_=0)),_)}function mh(m){var _,E,O,W,ie,he,lt=!1,Rt=m._f.length;if(Rt===0){p(m).invalidFormat=!0,m._d=new Date(NaN);return}for(W=0;W<Rt;W++)ie=0,he=!1,_=P({},m),m._useUTC!=null&&(_._useUTC=m._useUTC),_._f=m._f[W],dh(_),b(_)&&(he=!0),ie+=p(_).charsLeftOver,ie+=p(_).unusedTokens.length*10,p(_).score=ie,lt?ie<O&&(O=ie,E=_):(O==null||ie<O||he)&&(O=ie,E=_,he&&(lt=!0));f(m,E||_)}function E7(m){if(!m._d){var _=en(m._i),E=_.day===void 0?_.date:_.day;m._a=c([_.year,_.month,E,_.hour,_.minute,_.second,_.millisecond],function(O){return O&&parseInt(O,10)}),I1(m)}}function Dc(m){var _=new y(gl(Zc(m)));return _._nextDay&&(_.add(1,"d"),_._nextDay=void 0),_}function Zc(m){var _=m._i,E=m._f;return m._locale=m._locale||no(m._l),_===null||E===void 0&&_===""?C({nullInput:!0}):(typeof _=="string"&&(m._i=_=m._locale.preparse(_)),z(_)?new y(gl(_)):(u(_)?m._d=_:n(E)?mh(m):E?dh(m):ss(m),b(m)||(m._d=null),m))}function ss(m){var _=m._i;a(_)?m._d=new Date(e.now()):u(_)?m._d=new Date(_.valueOf()):typeof _=="string"?fb(m):n(_)?(m._a=c(_.slice(0),function(E){return parseInt(E,10)}),I1(m)):i(_)?E7(m):s(_)?m._d=new Date(_):e.createFromInputFallback(m)}function z1(m,_,E,O,W){var ie={};return(_===!0||_===!1)&&(O=_,_=void 0),(E===!0||E===!1)&&(O=E,E=void 0),(i(m)&&l(m)||n(m)&&m.length===0)&&(m=void 0),ie._isAMomentObject=!0,ie._useUTC=ie._isUTC=W,ie._l=E,ie._i=m,ie._f=_,ie._strict=O,Dc(ie)}function lr(m,_,E,O){return z1(m,_,E,O,!1)}var S7=J("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var m=lr.apply(null,arguments);return this.isValid()&&m.isValid()?m<this?this:m:C()}),mb=J("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var m=lr.apply(null,arguments);return this.isValid()&&m.isValid()?m>this?this:m:C()});function Fc(m,_){var E,O;if(_.length===1&&n(_[0])&&(_=_[0]),!_.length)return lr();for(E=_[0],O=1;O<_.length;++O)(!_[O].isValid()||_[O][m](E))&&(E=_[O]);return E}function gb(){var m=[].slice.call(arguments,0);return Fc("isBefore",m)}function M7(){var m=[].slice.call(arguments,0);return Fc("isAfter",m)}var jc=function(){return Date.now?Date.now():+new Date},us=["year","quarter","month","week","day","hour","minute","second","millisecond"];function A7(m){var _,E=!1,O,W=us.length;for(_ in m)if(o(m,_)&&!(Hr.call(us,_)!==-1&&(m[_]==null||!isNaN(m[_]))))return!1;for(O=0;O<W;++O)if(m[us[O]]){if(E)return!1;parseFloat(m[us[O]])!==Ae(m[us[O]])&&(E=!0)}return!0}function P7(){return this._isValid}function pb(){return qn(NaN)}function xc(m){var _=en(m),E=_.year||0,O=_.quarter||0,W=_.month||0,ie=_.week||_.isoWeek||0,he=_.day||0,lt=_.hour||0,Rt=_.minute||0,gr=_.second||0,ci=_.millisecond||0;this._isValid=A7(_),this._milliseconds=+ci+gr*1e3+Rt*6e4+lt*1e3*60*60,this._days=+he+ie*7,this._months=+W+O*3+E*12,this._data={},this._locale=no(),this._bubble()}function H1(m){return m instanceof xc}function gh(m){return m<0?Math.round(-1*m)*-1:Math.round(m)}function ph(m,_,E){var O=Math.min(m.length,_.length),W=Math.abs(m.length-_.length),ie=0,he;for(he=0;he<O;he++)(E&&m[he]!==_[he]||!E&&Ae(m[he])!==Ae(_[he]))&&ie++;return ie+W}function T7(m,_){fe(m,0,0,function(){var E=this.utcOffset(),O="+";return E<0&&(E=-E,O="-"),O+Ee(~~(E/60),2)+_+Ee(~~E%60,2)})}T7("Z",":"),T7("ZZ",""),De("Z",wc),De("ZZ",wc),or(["Z","ZZ"],function(m,_,E){E._useUTC=!0,E._tzm=_h(wc,m)});var _b=/([\+\-]|\d\d)/gi;function _h(m,_){var E=(_||"").match(m),O,W,ie;return E===null?null:(O=E[E.length-1]||[],W=(O+"").match(_b)||["-",0,0],ie=+(W[1]*60)+Ae(W[2]),ie===0?0:W[0]==="+"?ie:-ie)}function bh(m,_){var E,O;return _._isUTC?(E=_.clone(),O=(z(m)||u(m)?m.valueOf():lr(m).valueOf())-E.valueOf(),E._d.setTime(E._d.valueOf()+O),e.updateOffset(E,!1),E):lr(m).local()}function qc(m){return-Math.round(m._d.getTimezoneOffset())}e.updateOffset=function(){};function pl(m,_,E){var O=this._offset||0,W;if(!this.isValid())return m!=null?this:NaN;if(m!=null){if(typeof m=="string"){if(m=_h(wc,m),m===null)return this}else Math.abs(m)<16&&!E&&(m=m*60);return!this._isUTC&&_&&(W=qc(this)),this._offset=m,this._isUTC=!0,W!=null&&this.add(W,"m"),O!==m&&(!_||this._changeInProgress?H7(this,qn(m-O,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?O:qc(this)}function Uc(m,_){return m!=null?(typeof m!="string"&&(m=-m),this.utcOffset(m,_),this):-this.utcOffset()}function s0(m){return this.utcOffset(0,m)}function O7(m){return this._isUTC&&(this.utcOffset(0,m),this._isUTC=!1,m&&this.subtract(qc(this),"m")),this}function Wc(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var m=_h(B_,this._i);m!=null?this.utcOffset(m):this.utcOffset(0,!0)}return this}function cs(m){return this.isValid()?(m=m?lr(m).utcOffset():0,(this.utcOffset()-m)%60===0):!1}function N1(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function io(){if(!a(this._isDSTShifted))return this._isDSTShifted;var m={},_;return P(m,this),m=Zc(m),m._a?(_=m._isUTC?h(m._a):lr(m._a),this._isDSTShifted=this.isValid()&&ph(m._a,_.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function vh(){return this.isValid()?!this._isUTC:!1}function bb(){return this.isValid()?this._isUTC:!1}function fs(){return this.isValid()?this._isUTC&&this._offset===0:!1}var R7=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,vb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function qn(m,_){var E=m,O=null,W,ie,he;return H1(m)?E={ms:m._milliseconds,d:m._days,M:m._months}:s(m)||!isNaN(+m)?(E={},_?E[_]=+m:E.milliseconds=+m):(O=R7.exec(m))?(W=O[1]==="-"?-1:1,E={y:0,d:Ae(O[wn])*W,h:Ae(O[qr])*W,m:Ae(O[si])*W,s:Ae(O[To])*W,ms:Ae(gh(O[Oo]*1e3))*W}):(O=vb.exec(m))?(W=O[1]==="-"?-1:1,E={y:hs(O[2],W),M:hs(O[3],W),w:hs(O[4],W),d:hs(O[5],W),h:hs(O[6],W),m:hs(O[7],W),s:hs(O[8],W)}):E==null?E={}:typeof E=="object"&&("from"in E||"to"in E)&&(he=Cb(lr(E.from),lr(E.to)),E={},E.ms=he.milliseconds,E.M=he.months),ie=new xc(E),H1(m)&&o(m,"_locale")&&(ie._locale=m._locale),H1(m)&&o(m,"_isValid")&&(ie._isValid=m._isValid),ie}qn.fn=xc.prototype,qn.invalid=pb;function hs(m,_){var E=m&&parseFloat(m.replace(",","."));return(isNaN(E)?0:E)*_}function I7(m,_){var E={};return E.months=_.month()-m.month()+(_.year()-m.year())*12,m.clone().add(E.months,"M").isAfter(_)&&--E.months,E.milliseconds=+_-+m.clone().add(E.months,"M"),E}function Cb(m,_){var E;return m.isValid()&&_.isValid()?(_=bh(_,m),m.isBefore(_)?E=I7(m,_):(E=I7(_,m),E.milliseconds=-E.milliseconds,E.months=-E.months),E):{milliseconds:0,months:0}}function z7(m,_){return function(E,O){var W,ie;return O!==null&&!isNaN(+O)&&(ne(_,"moment()."+_+"(period, number) is deprecated. Please use moment()."+_+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),ie=E,E=O,O=ie),W=qn(E,O),H7(this,W,m),this}}function H7(m,_,E,O){var W=_._milliseconds,ie=gh(_._days),he=gh(_._months);m.isValid()&&(O=O==null?!0:O,he&&r0(m,Wr(m,"Month")+he*E),ie&&L1(m,"Date",Wr(m,"Date")+ie*E),W&&m._d.setTime(m._d.valueOf()+W*E),O&&e.updateOffset(m,ie||he))}var wb=z7(1,"add"),yb=z7(-1,"subtract");function N7(m){return typeof m=="string"||m instanceof String}function kb(m){return z(m)||u(m)||N7(m)||s(m)||Eb(m)||Lb(m)||m===null||m===void 0}function Lb(m){var _=i(m)&&!l(m),E=!1,O=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],W,ie,he=O.length;for(W=0;W<he;W+=1)ie=O[W],E=E||o(m,ie);return _&&E}function Eb(m){var _=n(m),E=!1;return _&&(E=m.filter(function(O){return!s(O)&&N7(m)}).length===0),_&&E}function Sb(m){var _=i(m)&&!l(m),E=!1,O=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],W,ie;for(W=0;W<O.length;W+=1)ie=O[W],E=E||o(m,ie);return _&&E}function Mb(m,_){var E=m.diff(_,"days",!0);return E<-6?"sameElse":E<-1?"lastWeek":E<0?"lastDay":E<1?"sameDay":E<2?"nextDay":E<7?"nextWeek":"sameElse"}function V7(m,_){arguments.length===1&&(arguments[0]?kb(arguments[0])?(m=arguments[0],_=void 0):Sb(arguments[0])&&(_=arguments[0],m=void 0):(m=void 0,_=void 0));var E=m||lr(),O=bh(E,this).startOf("day"),W=e.calendarFormat(this,O)||"sameElse",ie=_&&(Q(_[W])?_[W].call(this,E):_[W]);return this.format(ie||this.localeData().calendar(W,this,lr(E)))}function Ab(){return new y(this)}function Pb(m,_){var E=z(m)?m:lr(m);return this.isValid()&&E.isValid()?(_=we(_)||"millisecond",_==="millisecond"?this.valueOf()>E.valueOf():E.valueOf()<this.clone().startOf(_).valueOf()):!1}function yn(m,_){var E=z(m)?m:lr(m);return this.isValid()&&E.isValid()?(_=we(_)||"millisecond",_==="millisecond"?this.valueOf()<E.valueOf():this.clone().endOf(_).valueOf()<E.valueOf()):!1}function u0(m,_,E,O){var W=z(m)?m:lr(m),ie=z(_)?_:lr(_);return this.isValid()&&W.isValid()&&ie.isValid()?(O=O||"()",(O[0]==="("?this.isAfter(W,E):!this.isBefore(W,E))&&(O[1]===")"?this.isBefore(ie,E):!this.isAfter(ie,E))):!1}function B7(m,_){var E=z(m)?m:lr(m),O;return this.isValid()&&E.isValid()?(_=we(_)||"millisecond",_==="millisecond"?this.valueOf()===E.valueOf():(O=E.valueOf(),this.clone().startOf(_).valueOf()<=O&&O<=this.clone().endOf(_).valueOf())):!1}function Ch(m,_){return this.isSame(m,_)||this.isAfter(m,_)}function ra(m,_){return this.isSame(m,_)||this.isBefore(m,_)}function na(m,_,E){var O,W,ie;if(!this.isValid())return NaN;if(O=bh(m,this),!O.isValid())return NaN;switch(W=(O.utcOffset()-this.utcOffset())*6e4,_=we(_),_){case"year":ie=Un(this,O)/12;break;case"month":ie=Un(this,O);break;case"quarter":ie=Un(this,O)/3;break;case"second":ie=(this-O)/1e3;break;case"minute":ie=(this-O)/6e4;break;case"hour":ie=(this-O)/36e5;break;case"day":ie=(this-O-W)/864e5;break;case"week":ie=(this-O-W)/6048e5;break;default:ie=this-O}return E?ie:Me(ie)}function Un(m,_){if(m.date()<_.date())return-Un(_,m);var E=(_.year()-m.year())*12+(_.month()-m.month()),O=m.clone().add(E,"months"),W,ie;return _-O<0?(W=m.clone().add(E-1,"months"),ie=(_-O)/(O-W)):(W=m.clone().add(E+1,"months"),ie=(_-O)/(W-O)),-(E+ie)||0}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function c0(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function D7(m){if(!this.isValid())return null;var _=m!==!0,E=_?this.clone().utc():this;return E.year()<0||E.year()>9999?Mr(E,_?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Q(Date.prototype.toISOString)?_?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Mr(E,"Z")):Mr(E,_?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ds(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var m="moment",_="",E,O,W,ie;return this.isLocal()||(m=this.utcOffset()===0?"moment.utc":"moment.parseZone",_="Z"),E="["+m+'("]',O=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",W="-MM-DD[T]HH:mm:ss.SSS",ie=_+'[")]',this.format(E+O+W+ie)}function Z7(m){m||(m=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var _=Mr(this,m);return this.localeData().postformat(_)}function F7(m,_){return this.isValid()&&(z(m)&&m.isValid()||lr(m).isValid())?qn({to:this,from:m}).locale(this.locale()).humanize(!_):this.localeData().invalidDate()}function Gc(m){return this.from(lr(),m)}function j7(m,_){return this.isValid()&&(z(m)&&m.isValid()||lr(m).isValid())?qn({from:this,to:m}).locale(this.locale()).humanize(!_):this.localeData().invalidDate()}function x7(m){return this.to(lr(),m)}function wh(m){var _;return m===void 0?this._locale._abbr:(_=no(m),_!=null&&(this._locale=_),this)}var f0=J("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(m){return m===void 0?this.localeData():this.locale(m)});function yh(){return this._locale}var h0=1e3,V1=60*h0,Yc=60*V1,q7=(365*400+97)*24*Yc;function B1(m,_){return(m%_+_)%_}function U7(m,_,E){return m<100&&m>=0?new Date(m+400,_,E)-q7:new Date(m,_,E).valueOf()}function d0(m,_,E){return m<100&&m>=0?Date.UTC(m+400,_,E)-q7:Date.UTC(m,_,E)}function Tb(m){var _,E;if(m=we(m),m===void 0||m==="millisecond"||!this.isValid())return this;switch(E=this._isUTC?d0:U7,m){case"year":_=E(this.year(),0,1);break;case"quarter":_=E(this.year(),this.month()-this.month()%3,1);break;case"month":_=E(this.year(),this.month(),1);break;case"week":_=E(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":_=E(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":_=E(this.year(),this.month(),this.date());break;case"hour":_=this._d.valueOf(),_-=B1(_+(this._isUTC?0:this.utcOffset()*V1),Yc);break;case"minute":_=this._d.valueOf(),_-=B1(_,V1);break;case"second":_=this._d.valueOf(),_-=B1(_,h0);break}return this._d.setTime(_),e.updateOffset(this,!0),this}function W7(m){var _,E;if(m=we(m),m===void 0||m==="millisecond"||!this.isValid())return this;switch(E=this._isUTC?d0:U7,m){case"year":_=E(this.year()+1,0,1)-1;break;case"quarter":_=E(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":_=E(this.year(),this.month()+1,1)-1;break;case"week":_=E(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":_=E(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":_=E(this.year(),this.month(),this.date()+1)-1;break;case"hour":_=this._d.valueOf(),_+=Yc-B1(_+(this._isUTC?0:this.utcOffset()*V1),Yc)-1;break;case"minute":_=this._d.valueOf(),_+=V1-B1(_,V1)-1;break;case"second":_=this._d.valueOf(),_+=h0-B1(_,h0)-1;break}return this._d.setTime(_),e.updateOffset(this,!0),this}function G7(){return this._d.valueOf()-(this._offset||0)*6e4}function kh(){return Math.floor(this.valueOf()/1e3)}function Lh(){return new Date(this.valueOf())}function Kc(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function ia(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function Jc(){return this.isValid()?this.toISOString():null}function Ob(){return b(this)}function Rb(){return f({},p(this))}function Xc(){return p(this).overflow}function Y7(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}fe("N",0,0,"eraAbbr"),fe("NN",0,0,"eraAbbr"),fe("NNN",0,0,"eraAbbr"),fe("NNNN",0,0,"eraName"),fe("NNNNN",0,0,"eraNarrow"),fe("y",["y",1],"yo","eraYear"),fe("y",["yy",2],0,"eraYear"),fe("y",["yyy",3],0,"eraYear"),fe("y",["yyyy",4],0,"eraYear"),De("N",oa),De("NN",oa),De("NNN",oa),De("NNNN",J7),De("NNNNN",g),or(["N","NN","NNN","NNNN","NNNNN"],function(m,_,E,O){var W=E._locale.erasParse(m,O,E._strict);W?p(E).era=W:p(E).invalidEra=m}),De("y",is),De("yy",is),De("yyy",is),De("yyyy",is),De("yo",w),or(["y","yy","yyy","yyyy"],zr),or(["yo"],function(m,_,E,O){var W;E._locale._eraYearOrdinalRegex&&(W=m.match(E._locale._eraYearOrdinalRegex)),E._locale.eraYearOrdinalParse?_[zr]=E._locale.eraYearOrdinalParse(m,W):_[zr]=parseInt(m,10)});function Ib(m,_){var E,O,W,ie=this._eras||no("en")._eras;for(E=0,O=ie.length;E<O;++E){switch(typeof ie[E].since){case"string":W=e(ie[E].since).startOf("day"),ie[E].since=W.valueOf();break}switch(typeof ie[E].until){case"undefined":ie[E].until=1/0;break;case"string":W=e(ie[E].until).startOf("day").valueOf(),ie[E].until=W.valueOf();break}}return ie}function K7(m,_,E){var O,W,ie=this.eras(),he,lt,Rt;for(m=m.toUpperCase(),O=0,W=ie.length;O<W;++O)if(he=ie[O].name.toUpperCase(),lt=ie[O].abbr.toUpperCase(),Rt=ie[O].narrow.toUpperCase(),E)switch(_){case"N":case"NN":case"NNN":if(lt===m)return ie[O];break;case"NNNN":if(he===m)return ie[O];break;case"NNNNN":if(Rt===m)return ie[O];break}else if([he,lt,Rt].indexOf(m)>=0)return ie[O]}function zb(m,_){var E=m.since<=m.until?1:-1;return _===void 0?e(m.since).year():e(m.since).year()+(_-m.offset)*E}function Hb(){var m,_,E,O=this.localeData().eras();for(m=0,_=O.length;m<_;++m)if(E=this.clone().startOf("day").valueOf(),O[m].since<=E&&E<=O[m].until||O[m].until<=E&&E<=O[m].since)return O[m].name;return""}function Nb(){var m,_,E,O=this.localeData().eras();for(m=0,_=O.length;m<_;++m)if(E=this.clone().startOf("day").valueOf(),O[m].since<=E&&E<=O[m].until||O[m].until<=E&&E<=O[m].since)return O[m].narrow;return""}function Vb(){var m,_,E,O=this.localeData().eras();for(m=0,_=O.length;m<_;++m)if(E=this.clone().startOf("day").valueOf(),O[m].since<=E&&E<=O[m].until||O[m].until<=E&&E<=O[m].since)return O[m].abbr;return""}function Bb(){var m,_,E,O,W=this.localeData().eras();for(m=0,_=W.length;m<_;++m)if(E=W[m].since<=W[m].until?1:-1,O=this.clone().startOf("day").valueOf(),W[m].since<=O&&O<=W[m].until||W[m].until<=O&&O<=W[m].since)return(this.year()-e(W[m].since).year())*E+W[m].offset;return this.year()}function Db(m){return o(this,"_erasNameRegex")||T.call(this),m?this._erasNameRegex:this._erasRegex}function Qc(m){return o(this,"_erasAbbrRegex")||T.call(this),m?this._erasAbbrRegex:this._erasRegex}function Eh(m){return o(this,"_erasNarrowRegex")||T.call(this),m?this._erasNarrowRegex:this._erasRegex}function oa(m,_){return _.erasAbbrRegex(m)}function J7(m,_){return _.erasNameRegex(m)}function g(m,_){return _.erasNarrowRegex(m)}function w(m,_){return _._eraYearOrdinalRegex||is}function T(){var m=[],_=[],E=[],O=[],W,ie,he=this.eras();for(W=0,ie=he.length;W<ie;++W)_.push(xn(he[W].name)),m.push(xn(he[W].abbr)),E.push(xn(he[W].narrow)),O.push(xn(he[W].name)),O.push(xn(he[W].abbr)),O.push(xn(he[W].narrow));this._erasRegex=new RegExp("^("+O.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+_.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+m.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+E.join("|")+")","i")}fe(0,["gg",2],0,function(){return this.weekYear()%100}),fe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function $(m,_){fe(0,[m,m.length],0,_)}$("gggg","weekYear"),$("ggggg","weekYear"),$("GGGG","isoWeekYear"),$("GGGGG","isoWeekYear"),Ir("weekYear","gg"),Ir("isoWeekYear","GG"),Ie("weekYear",1),Ie("isoWeekYear",1),De("G",Cc),De("g",Cc),De("GG",Wt,On),De("gg",Wt,On),De("GGGG",oh,rs),De("gggg",oh,rs),De("GGGGG",E1,e0),De("ggggg",E1,e0),to(["gggg","ggggg","GGGG","GGGGG"],function(m,_,E,O){_[O.substr(0,2)]=Ae(m)}),to(["gg","GG"],function(m,_,E,O){_[O]=e.parseTwoDigitYear(m)});function le(m){return vt.call(this,m,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ue(m){return vt.call(this,m,this.isoWeek(),this.isoWeekday(),1,4)}function me(){return hl(this.year(),1,4)}function Be(){return hl(this.isoWeekYear(),1,4)}function ht(){var m=this.localeData()._week;return hl(this.year(),m.dow,m.doy)}function it(){var m=this.localeData()._week;return hl(this.weekYear(),m.dow,m.doy)}function vt(m,_,E,O,W){var ie;return m==null?fl(this,O,W).year:(ie=hl(m,O,W),_>ie&&(_=ie),Ot.call(this,m,_,E,O,W))}function Ot(m,_,E,O,W){var ie=Mc(m,_,E,O,W),he=i0(ie.year,0,ie.dayOfYear);return this.year(he.getUTCFullYear()),this.month(he.getUTCMonth()),this.date(he.getUTCDate()),this}fe("Q",0,"Qo","quarter"),Ir("quarter","Q"),Ie("quarter",7),De("Q",bc),or("Q",function(m,_){_[ro]=(Ae(m)-1)*3});function ur(m){return m==null?Math.ceil((this.month()+1)/3):this.month((m-1)*3+this.month()%3)}fe("D",["DD",2],"Do","date"),Ir("date","D"),Ie("date",9),De("D",Wt),De("DD",Wt,On),De("Do",function(m,_){return m?_._dayOfMonthOrdinalParse||_._ordinalParse:_._dayOfMonthOrdinalParseLenient}),or(["D","DD"],wn),or("Do",function(m,_){_[wn]=Ae(m.match(Wt)[0])});var Pi=nt("Date",!0);fe("DDD",["DDDD",3],"DDDo","dayOfYear"),Ir("dayOfYear","DDD"),Ie("dayOfYear",4),De("DDD",ns),De("DDDD",vc),or(["DDD","DDDD"],function(m,_,E){E._dayOfYear=Ae(m)});function D1(m){var _=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return m==null?_:this.add(m-_,"d")}fe("m",["mm",2],0,"minute"),Ir("minute","m"),Ie("minute",14),De("m",Wt),De("mm",Wt,On),or(["m","mm"],si);var la=nt("Minutes",!1);fe("s",["ss",2],0,"second"),Ir("second","s"),Ie("second",15),De("s",Wt),De("ss",Wt,On),or(["s","ss"],To);var _l=nt("Seconds",!1);fe("S",0,0,function(){return~~(this.millisecond()/100)}),fe(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),fe(0,["SSS",3],0,"millisecond"),fe(0,["SSSS",4],0,function(){return this.millisecond()*10}),fe(0,["SSSSS",5],0,function(){return this.millisecond()*100}),fe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),fe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),fe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),fe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Ir("millisecond","ms"),Ie("millisecond",16),De("S",ns,bc),De("SS",ns,On),De("SSS",ns,vc);var Nr,Rn;for(Nr="SSSS";Nr.length<=9;Nr+="S")De(Nr,is);function Ti(m,_){_[Oo]=Ae(("0."+m)*1e3)}for(Nr="S";Nr.length<=9;Nr+="S")or(Nr,Ti);Rn=nt("Milliseconds",!1),fe("z",0,0,"zoneAbbr"),fe("zz",0,0,"zoneName");function bl(){return this._isUTC?"UTC":""}function at(){return this._isUTC?"Coordinated Universal Time":""}var de=y.prototype;de.add=wb,de.calendar=V7,de.clone=Ab,de.diff=na,de.endOf=W7,de.format=Z7,de.from=F7,de.fromNow=Gc,de.to=j7,de.toNow=x7,de.get=$u,de.invalidAt=Xc,de.isAfter=Pb,de.isBefore=yn,de.isBetween=u0,de.isSame=B7,de.isSameOrAfter=Ch,de.isSameOrBefore=ra,de.isValid=Ob,de.lang=f0,de.locale=wh,de.localeData=yh,de.max=mb,de.min=S7,de.parsingFlags=Rb,de.set=n7,de.startOf=Tb,de.subtract=yb,de.toArray=Kc,de.toObject=ia,de.toDate=Lh,de.toISOString=D7,de.inspect=ds,typeof Symbol!="undefined"&&Symbol.for!=null&&(de[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),de.toJSON=Jc,de.toString=c0,de.unix=kh,de.valueOf=G7,de.creationData=Y7,de.eraName=Hb,de.eraNarrow=Nb,de.eraAbbr=Vb,de.eraYear=Bb,de.year=n0,de.isLeapYear=Ec,de.weekYear=le,de.isoWeekYear=ue,de.quarter=de.quarters=ur,de.month=P1,de.daysInMonth=kc,de.week=de.weeks=G_,de.isoWeek=de.isoWeeks=d7,de.weeksInYear=ht,de.weeksInWeekYear=it,de.isoWeeksInYear=me,de.isoWeeksInISOWeekYear=Be,de.date=Pi,de.day=de.days=Q_,de.weekday=$_,de.isoWeekday=_7,de.dayOfYear=D1,de.hour=de.hours=b7,de.minute=de.minutes=la,de.second=de.seconds=_l,de.millisecond=de.milliseconds=Rn,de.utcOffset=pl,de.utc=s0,de.local=O7,de.parseZone=Wc,de.hasAlignedHourOffset=cs,de.isDST=N1,de.isLocal=vh,de.isUtcOffset=bb,de.isUtc=fs,de.isUTC=fs,de.zoneAbbr=bl,de.zoneName=at,de.dates=J("dates accessor is deprecated. Use date instead.",Pi),de.months=J("months accessor is deprecated. Use month instead",P1),de.years=J("years accessor is deprecated. Use year instead",n0),de.zone=J("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Uc),de.isDSTShifted=J("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",io);function mr(m){return lr(m*1e3)}function ui(){return lr.apply(null,arguments).parseZone()}function ms(m){return m}var Nt=Pe.prototype;Nt.calendar=rt,Nt.longDateFormat=Ao,Nt.invalidDate=Tn,Nt.ordinal=ai,Nt.preparse=ms,Nt.postformat=ms,Nt.relativeTime=Po,Nt.pastFuture=sl,Nt.set=ee,Nt.eras=Ib,Nt.erasParse=K7,Nt.erasConvertYear=zb,Nt.erasAbbrRegex=Qc,Nt.erasNameRegex=Db,Nt.erasNarrowRegex=Eh,Nt.months=x_,Nt.monthsShort=s7,Nt.monthsParse=q_,Nt.monthsRegex=u7,Nt.monthsShortRegex=Ai,Nt.week=U_,Nt.firstDayOfYear=h7,Nt.firstDayOfWeek=f7,Nt.weekdays=Tc,Nt.weekdaysMin=K_,Nt.weekdaysShort=Y_,Nt.weekdaysParse=X_,Nt.weekdaysRegex=eb,Nt.weekdaysShortRegex=tb,Nt.weekdaysMinRegex=rb,Nt.isPM=O1,Nt.meridiem=ib;function vl(m,_,E,O){var W=no(),ie=h().set(O,_);return W[E](ie,m)}function m0(m,_,E){if(s(m)&&(_=m,m=void 0),m=m||"",_!=null)return vl(m,_,E,"month");var O,W=[];for(O=0;O<12;O++)W[O]=vl(m,O,E,"month");return W}function $c(m,_,E,O){typeof m=="boolean"?(s(_)&&(E=_,_=void 0),_=_||""):(_=m,E=_,m=!1,s(_)&&(E=_,_=void 0),_=_||"");var W=no(),ie=m?W._week.dow:0,he,lt=[];if(E!=null)return vl(_,(E+ie)%7,O,"day");for(he=0;he<7;he++)lt[he]=vl(_,(he+ie)%7,O,"day");return lt}function Sh(m,_){return m0(m,_,"months")}function zG(m,_){return m0(m,_,"monthsShort")}function HG(m,_,E){return $c(m,_,E,"weekdays")}function NG(m,_,E){return $c(m,_,E,"weekdaysShort")}function VG(m,_,E){return $c(m,_,E,"weekdaysMin")}ta("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(m){var _=m%10,E=Ae(m%100/10)===1?"th":_===1?"st":_===2?"nd":_===3?"rd":"th";return m+E}}),e.lang=J("moment.lang is deprecated. Use moment.locale instead.",ta),e.langData=J("moment.langData is deprecated. Use moment.localeData instead.",no);var gs=Math.abs;function BG(){var m=this._data;return this._milliseconds=gs(this._milliseconds),this._days=gs(this._days),this._months=gs(this._months),m.milliseconds=gs(m.milliseconds),m.seconds=gs(m.seconds),m.minutes=gs(m.minutes),m.hours=gs(m.hours),m.months=gs(m.months),m.years=gs(m.years),this}function dA(m,_,E,O){var W=qn(_,E);return m._milliseconds+=O*W._milliseconds,m._days+=O*W._days,m._months+=O*W._months,m._bubble()}function DG(m,_){return dA(this,m,_,1)}function ZG(m,_){return dA(this,m,_,-1)}function mA(m){return m<0?Math.floor(m):Math.ceil(m)}function FG(){var m=this._milliseconds,_=this._days,E=this._months,O=this._data,W,ie,he,lt,Rt;return m>=0&&_>=0&&E>=0||m<=0&&_<=0&&E<=0||(m+=mA(Zb(E)+_)*864e5,_=0,E=0),O.milliseconds=m%1e3,W=Me(m/1e3),O.seconds=W%60,ie=Me(W/60),O.minutes=ie%60,he=Me(ie/60),O.hours=he%24,_+=Me(he/24),Rt=Me(gA(_)),E+=Rt,_-=mA(Zb(Rt)),lt=Me(E/12),E%=12,O.days=_,O.months=E,O.years=lt,this}function gA(m){return m*4800/146097}function Zb(m){return m*146097/4800}function jG(m){if(!this.isValid())return NaN;var _,E,O=this._milliseconds;if(m=we(m),m==="month"||m==="quarter"||m==="year")switch(_=this._days+O/864e5,E=this._months+gA(_),m){case"month":return E;case"quarter":return E/3;case"year":return E/12}else switch(_=this._days+Math.round(Zb(this._months)),m){case"week":return _/7+O/6048e5;case"day":return _+O/864e5;case"hour":return _*24+O/36e5;case"minute":return _*1440+O/6e4;case"second":return _*86400+O/1e3;case"millisecond":return Math.floor(_*864e5)+O;default:throw new Error("Unknown unit "+m)}}function xG(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Ae(this._months/12)*31536e6:NaN}function ps(m){return function(){return this.as(m)}}var qG=ps("ms"),UG=ps("s"),WG=ps("m"),GG=ps("h"),YG=ps("d"),KG=ps("w"),JG=ps("M"),XG=ps("Q"),QG=ps("y");function $G(){return qn(this)}function eY(m){return m=we(m),this.isValid()?this[m+"s"]():NaN}function g0(m){return function(){return this.isValid()?this._data[m]:NaN}}var tY=g0("milliseconds"),rY=g0("seconds"),nY=g0("minutes"),iY=g0("hours"),oY=g0("days"),lY=g0("months"),aY=g0("years");function sY(){return Me(this.days()/7)}var _s=Math.round,e9={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function uY(m,_,E,O,W){return W.relativeTime(_||1,!!E,m,O)}function cY(m,_,E,O){var W=qn(m).abs(),ie=_s(W.as("s")),he=_s(W.as("m")),lt=_s(W.as("h")),Rt=_s(W.as("d")),gr=_s(W.as("M")),ci=_s(W.as("w")),bs=_s(W.as("y")),Z1=ie<=E.ss&&["s",ie]||ie<E.s&&["ss",ie]||he<=1&&["m"]||he<E.m&&["mm",he]||lt<=1&&["h"]||lt<E.h&&["hh",lt]||Rt<=1&&["d"]||Rt<E.d&&["dd",Rt];return E.w!=null&&(Z1=Z1||ci<=1&&["w"]||ci<E.w&&["ww",ci]),Z1=Z1||gr<=1&&["M"]||gr<E.M&&["MM",gr]||bs<=1&&["y"]||["yy",bs],Z1[2]=_,Z1[3]=+m>0,Z1[4]=O,uY.apply(null,Z1)}function fY(m){return m===void 0?_s:typeof m=="function"?(_s=m,!0):!1}function hY(m,_){return e9[m]===void 0?!1:_===void 0?e9[m]:(e9[m]=_,m==="s"&&(e9.ss=_-1),!0)}function dY(m,_){if(!this.isValid())return this.localeData().invalidDate();var E=!1,O=e9,W,ie;return typeof m=="object"&&(_=m,m=!1),typeof m=="boolean"&&(E=m),typeof _=="object"&&(O=Object.assign({},e9,_),_.s!=null&&_.ss==null&&(O.ss=_.s-1)),W=this.localeData(),ie=cY(this,!E,O,W),E&&(ie=W.pastFuture(+this,ie)),W.postformat(ie)}var Fb=Math.abs;function t9(m){return(m>0)-(m<0)||+m}function X7(){if(!this.isValid())return this.localeData().invalidDate();var m=Fb(this._milliseconds)/1e3,_=Fb(this._days),E=Fb(this._months),O,W,ie,he,lt=this.asSeconds(),Rt,gr,ci,bs;return lt?(O=Me(m/60),W=Me(O/60),m%=60,O%=60,ie=Me(E/12),E%=12,he=m?m.toFixed(3).replace(/\.?0+$/,""):"",Rt=lt<0?"-":"",gr=t9(this._months)!==t9(lt)?"-":"",ci=t9(this._days)!==t9(lt)?"-":"",bs=t9(this._milliseconds)!==t9(lt)?"-":"",Rt+"P"+(ie?gr+ie+"Y":"")+(E?gr+E+"M":"")+(_?ci+_+"D":"")+(W||O||m?"T":"")+(W?bs+W+"H":"")+(O?bs+O+"M":"")+(m?bs+he+"S":"")):"P0D"}var Qt=xc.prototype;Qt.isValid=P7,Qt.abs=BG,Qt.add=DG,Qt.subtract=ZG,Qt.as=jG,Qt.asMilliseconds=qG,Qt.asSeconds=UG,Qt.asMinutes=WG,Qt.asHours=GG,Qt.asDays=YG,Qt.asWeeks=KG,Qt.asMonths=JG,Qt.asQuarters=XG,Qt.asYears=QG,Qt.valueOf=xG,Qt._bubble=FG,Qt.clone=$G,Qt.get=eY,Qt.milliseconds=tY,Qt.seconds=rY,Qt.minutes=nY,Qt.hours=iY,Qt.days=oY,Qt.weeks=sY,Qt.months=lY,Qt.years=aY,Qt.humanize=dY,Qt.toISOString=X7,Qt.toString=X7,Qt.toJSON=X7,Qt.locale=wh,Qt.localeData=yh,Qt.toIsoString=J("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",X7),Qt.lang=f0,fe("X",0,0,"unix"),fe("x",0,0,"valueOf"),De("x",Cc),De("X",D_),or("X",function(m,_,E){E._d=new Date(parseFloat(m)*1e3)}),or("x",function(m,_,E){E._d=new Date(Ae(m))});return e.version="2.29.4",t(lr),e.fn=de,e.min=gb,e.max=M7,e.now=jc,e.utc=h,e.unix=mr,e.months=Sh,e.isDate=u,e.locale=ta,e.invalid=C,e.duration=qn,e.isMoment=z,e.weekdays=HG,e.parseZone=ui,e.localeData=no,e.isDuration=H1,e.monthsShort=zG,e.weekdaysMin=VG,e.defineLocale=ch,e.updateLocale=Hc,e.locales=ml,e.weekdaysShort=NG,e.normalizeUnits=we,e.relativeTimeRounding=fY,e.relativeTimeThreshold=hY,e.calendarFormat=Mb,e.prototype=de,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var Ft,Ub,Ze,aa,Ah=ce(()=>{(function(r){r.assertEqual=i=>{};function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{let o={};for(let l of i)o[l]=l;return o},r.getValidEnumValues=i=>{let o=r.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),l={};for(let a of o)l[a]=i[a];return r.objectValues(l)},r.objectValues=i=>r.objectKeys(i).map(function(o){return i[o]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.push(l);return o},r.find=(i,o)=>{for(let l of i)if(o(l))return l},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}r.joinValues=n,r.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ft||(Ft={}));(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Ub||(Ub={}));Ze=Ft.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),aa=r=>{switch(typeof r){case"undefined":return Ze.undefined;case"string":return Ze.string;case"number":return Number.isNaN(r)?Ze.nan:Ze.number;case"boolean":return Ze.boolean;case"function":return Ze.function;case"bigint":return Ze.bigint;case"symbol":return Ze.symbol;case"object":return Array.isArray(r)?Ze.array:r===null?Ze.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?Ze.promise:typeof Map!="undefined"&&r instanceof Map?Ze.map:typeof Set!="undefined"&&r instanceof Set?Ze.set:typeof Date!="undefined"&&r instanceof Date?Ze.date:Ze.object;default:return Ze.unknown}}});var Ce,yY,Oi,Q7=ce(()=>{Ah();Ce=Ft.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),yY=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),Oi=class r extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(t(l));else{let a=n,s=0;for(;s<l.path.length;){let u=l.path[s];s===l.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(l))):a[u]=a[u]||{_errors:[]},a=a[u],s++}}};return i(this),n}static assert(e){if(!(e instanceof r))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ft.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};Oi.create=r=>new Oi(r)});var kY,vs,Wb=ce(()=>{Q7();Ah();kY=(r,e)=>{let t;switch(r.code){case Ce.invalid_type:r.received===Ze.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Ce.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Ft.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:t=`Unrecognized key(s) in object: ${Ft.joinValues(r.keys,", ")}`;break;case Ce.invalid_union:t="Invalid input";break;case Ce.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Ft.joinValues(r.options)}`;break;case Ce.invalid_enum_value:t=`Invalid enum value. Expected ${Ft.joinValues(r.options)}, received '${r.received}'`;break;case Ce.invalid_arguments:t="Invalid function arguments";break;case Ce.invalid_return_type:t="Invalid function return type";break;case Ce.invalid_date:t="Invalid date";break;case Ce.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Ft.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Ce.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case Ce.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case Ce.custom:t="Invalid input";break;case Ce.invalid_intersection_types:t="Intersection results could not be merged";break;case Ce.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Ce.not_finite:t="Number must be finite";break;default:t=e.defaultError,Ft.assertNever(r)}return{message:t}},vs=kY});function LY(r){wA=r}function i9(){return wA}var wA,$7=ce(()=>{Wb();wA=vs});function He(r,e){let t=i9(),n=Ph({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===vs?void 0:vs].filter(i=>!!i)});r.common.issues.push(n)}var Ph,EY,In,ut,p0,Wn,e8,t8,F1,o9,Gb=ce(()=>{$7();Wb();Ph=r=>{let{data:e,path:t,errorMaps:n,issueData:i}=r,o=[...t,...i.path||[]],l={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="",s=n.filter(u=>!!u).slice().reverse();for(let u of s)a=u(l,{data:e,defaultError:a}).message;return{...i,path:o,message:a}},EY=[];In=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let i of t){if(i.status==="aborted")return ut;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let i of t){let o=await i.key,l=await i.value;n.push({key:o,value:l})}return r.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let i of t){let{key:o,value:l}=i;if(o.status==="aborted"||l.status==="aborted")return ut;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value!="undefined"||i.alwaysSet)&&(n[o.value]=l.value)}return{status:e.value,value:n}}},ut=Object.freeze({status:"aborted"}),p0=r=>({status:"dirty",value:r}),Wn=r=>({status:"valid",value:r}),e8=r=>r.status==="aborted",t8=r=>r.status==="dirty",F1=r=>r.status==="valid",o9=r=>typeof Promise!="undefined"&&r instanceof Promise});var yA=ce(()=>{});var Je,kA=ce(()=>{(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Je||(Je={}))});function At(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,a)=>{var u,c;let{message:s}=r;return l.code==="invalid_enum_value"?{message:s!=null?s:a.defaultError}:typeof a.data=="undefined"?{message:(u=s!=null?s:n)!=null?u:a.defaultError}:l.code!=="invalid_type"?{message:a.defaultError}:{message:(c=s!=null?s:t)!=null?c:a.defaultError}},description:i}}function MA(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);let t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function jY(r){return new RegExp(`^${MA(r)}$`)}function AA(r){let e=`${SA}T${MA(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function xY(r,e){return!!((e==="v4"||!e)&&HY.test(r)||(e==="v6"||!e)&&VY.test(r))}function qY(r,e){if(!OY.test(r))return!1;try{let[t]=r.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch(t){return!1}}function UY(r,e){return!!((e==="v4"||!e)&&NY.test(r)||(e==="v6"||!e)&&BY.test(r))}function WY(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,o=Number.parseInt(r.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return o%l/10**i}function l9(r){if(r instanceof Ri){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=zo.create(l9(n))}return new Ri({...r._def,shape:()=>e})}else return r instanceof ys?new ys({...r._def,type:l9(r.element)}):r instanceof zo?zo.create(l9(r.unwrap())):r instanceof ua?ua.create(l9(r.unwrap())):r instanceof sa?sa.create(r.items.map(e=>l9(e))):r}function Kb(r,e){let t=aa(r),n=aa(e);if(r===e)return{valid:!0,data:r};if(t===Ze.object&&n===Ze.object){let i=Ft.objectKeys(e),o=Ft.objectKeys(r).filter(a=>i.indexOf(a)!==-1),l={...r,...e};for(let a of o){let s=Kb(r[a],e[a]);if(!s.valid)return{valid:!1};l[a]=s.data}return{valid:!0,data:l}}else if(t===Ze.array&&n===Ze.array){if(r.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<r.length;o++){let l=r[o],a=e[o],s=Kb(l,a);if(!s.valid)return{valid:!1};i.push(s.data)}return{valid:!0,data:i}}else return t===Ze.date&&n===Ze.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}function PA(r,e){return new M0({values:r,typeName:Se.ZodEnum,...At(e)})}function EA(r,e){let t=typeof r=="function"?r(e):typeof r=="string"?{message:r}:r;return typeof t=="string"?{message:t}:t}function TA(r,e={},t){return r?x1.create().superRefine((n,i)=>{var l,a;let o=r(n);if(o instanceof Promise)return o.then(s=>{var u,c;if(!s){let f=EA(e,n),h=(c=(u=f.fatal)!=null?u:t)!=null?c:!0;i.addIssue({code:"custom",...f,fatal:h})}});if(!o){let s=EA(e,n),u=(a=(l=s.fatal)!=null?l:t)!=null?a:!0;i.addIssue({code:"custom",...s,fatal:u})}}):x1.create()}var Ho,LA,It,SY,MY,AY,PY,TY,OY,RY,IY,zY,Yb,HY,NY,VY,BY,DY,ZY,SA,FY,j1,_0,b0,v0,C0,a9,w0,y0,x1,ws,wl,s9,ys,Ri,k0,Cs,r8,L0,sa,n8,u9,c9,i8,E0,S0,M0,A0,q1,No,zo,ua,P0,T0,f9,GY,Th,Oh,O0,YY,Se,KY,OA,RA,JY,XY,IA,QY,$Y,eK,tK,rK,nK,iK,oK,lK,aK,sK,uK,cK,fK,hK,dK,mK,gK,pK,_K,bK,vK,CK,wK,yK,kK,LK,EK,SK,MK,AK,PK,TK,OK,zA=ce(()=>{Q7();$7();kA();Gb();Ah();Ho=class{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},LA=(r,e)=>{if(F1(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Oi(r.common.issues);return this._error=t,this._error}}};It=class{get description(){return this._def.description}_getType(e){return aa(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new In,ctx:{common:e.parent.common,data:e.data,parsedType:aa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(o9(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var o;let n={common:{issues:[],async:(o=t==null?void 0:t.async)!=null?o:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)},i=this._parseSync({data:e,path:n.path,parent:n});return LA(n,i)}"~validate"(e){var n,i;let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:t});return F1(o)?{value:o.value}:{issues:t.common.issues}}catch(o){(i=(n=o==null?void 0:o.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(o=>F1(o)?{value:o.value}:{issues:t.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:aa(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(o9(i)?i:Promise.resolve(i));return LA(n,o)}refine(e,t){let n=i=>typeof t=="string"||typeof t=="undefined"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{let l=e(i),a=()=>o.addIssue({code:Ce.custom,...n(i)});return typeof Promise!="undefined"&&l instanceof Promise?l.then(s=>s?!0:(a(),!1)):l?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new No({schema:this,typeName:Se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return zo.create(this,this._def)}nullable(){return ua.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ys.create(this)}promise(){return q1.create(this,this._def)}or(e){return k0.create([this,e],this._def)}and(e){return L0.create(this,e,this._def)}transform(e){return new No({...At(this._def),schema:this,typeName:Se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new P0({...At(this._def),innerType:this,defaultValue:t,typeName:Se.ZodDefault})}brand(){return new Th({typeName:Se.ZodBranded,type:this,...At(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new T0({...At(this._def),innerType:this,catchValue:t,typeName:Se.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Oh.create(this,e)}readonly(){return O0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},SY=/^c[^\s-]{8,}$/i,MY=/^[0-9a-z]+$/,AY=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PY=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TY=/^[a-z0-9_-]{21}$/i,OY=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,RY=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IY=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zY="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",HY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NY=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,VY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,BY=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,DY=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ZY=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,SA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",FY=new RegExp(`^${SA}$`);j1=class r extends It{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ze.string){let o=this._getOrReturnCtx(e);return He(o,{code:Ce.invalid_type,expected:Ze.string,received:o.parsedType}),ut}let n=new In,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let l=e.data.length>o.value,a=e.data.length<o.value;(l||a)&&(i=this._getOrReturnCtx(e,i),l?He(i,{code:Ce.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&He(i,{code:Ce.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")IY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"email",code:Ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")Yb||(Yb=new RegExp(zY,"u")),Yb.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"emoji",code:Ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")PY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"uuid",code:Ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")TY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"nanoid",code:Ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")SY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"cuid",code:Ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")MY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"cuid2",code:Ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")AY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"ulid",code:Ce.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch(l){i=this._getOrReturnCtx(e,i),He(i,{validation:"url",code:Ce.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"regex",code:Ce.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?AA(o).test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?FY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?jY(o).test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?RY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"duration",code:Ce.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?xY(e.data,o.version)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"ip",code:Ce.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?qY(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"jwt",code:Ce.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?UY(e.data,o.version)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"cidr",code:Ce.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?DY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"base64",code:Ce.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?ZY.test(e.data)||(i=this._getOrReturnCtx(e,i),He(i,{validation:"base64url",code:Ce.invalid_string,message:o.message}),n.dirty()):Ft.assertNever(o);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:Ce.invalid_string,...Je.errToObj(n)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Je.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Je.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Je.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Je.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Je.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Je.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Je.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Je.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Je.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Je.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Je.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Je.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Je.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!=null?t:!1,local:(n=e==null?void 0:e.local)!=null?n:!1,...Je.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...Je.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Je.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Je.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Je.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Je.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Je.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Je.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Je.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Je.errToObj(t)})}nonempty(e){return this.min(1,Je.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};j1.create=r=>{var e;return new j1({checks:[],typeName:Se.ZodString,coerce:(e=r==null?void 0:r.coerce)!=null?e:!1,...At(r)})};_0=class r extends It{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ze.number){let o=this._getOrReturnCtx(e);return He(o,{code:Ce.invalid_type,expected:Ze.number,received:o.parsedType}),ut}let n,i=new In;for(let o of this._def.checks)o.kind==="int"?Ft.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?WY(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.not_finite,message:o.message}),i.dirty()):Ft.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Je.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Je.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Je.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Je.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Je.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Je.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Je.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Je.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Je.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Je.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Je.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ft.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};_0.create=r=>new _0({checks:[],typeName:Se.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...At(r)});b0=class r extends It{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(o){return this._getInvalidInput(e)}if(this._getType(e)!==Ze.bigint)return this._getInvalidInput(e);let n,i=new In;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),He(n,{code:Ce.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ft.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return He(t,{code:Ce.invalid_type,expected:Ze.bigint,received:t.parsedType}),ut}gte(e,t){return this.setLimit("min",e,!0,Je.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Je.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Je.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Je.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Je.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Je.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Je.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Je.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Je.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Je.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};b0.create=r=>{var e;return new b0({checks:[],typeName:Se.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!=null?e:!1,...At(r)})};v0=class extends It{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ze.boolean){let n=this._getOrReturnCtx(e);return He(n,{code:Ce.invalid_type,expected:Ze.boolean,received:n.parsedType}),ut}return Wn(e.data)}};v0.create=r=>new v0({typeName:Se.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...At(r)});C0=class r extends It{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ze.date){let o=this._getOrReturnCtx(e);return He(o,{code:Ce.invalid_type,expected:Ze.date,received:o.parsedType}),ut}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return He(o,{code:Ce.invalid_date}),ut}let n=new In,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),He(i,{code:Ce.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ft.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Je.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Je.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};C0.create=r=>new C0({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:Se.ZodDate,...At(r)});a9=class extends It{_parse(e){if(this._getType(e)!==Ze.symbol){let n=this._getOrReturnCtx(e);return He(n,{code:Ce.invalid_type,expected:Ze.symbol,received:n.parsedType}),ut}return Wn(e.data)}};a9.create=r=>new a9({typeName:Se.ZodSymbol,...At(r)});w0=class extends It{_parse(e){if(this._getType(e)!==Ze.undefined){let n=this._getOrReturnCtx(e);return He(n,{code:Ce.invalid_type,expected:Ze.undefined,received:n.parsedType}),ut}return Wn(e.data)}};w0.create=r=>new w0({typeName:Se.ZodUndefined,...At(r)});y0=class extends It{_parse(e){if(this._getType(e)!==Ze.null){let n=this._getOrReturnCtx(e);return He(n,{code:Ce.invalid_type,expected:Ze.null,received:n.parsedType}),ut}return Wn(e.data)}};y0.create=r=>new y0({typeName:Se.ZodNull,...At(r)});x1=class extends It{constructor(){super(...arguments),this._any=!0}_parse(e){return Wn(e.data)}};x1.create=r=>new x1({typeName:Se.ZodAny,...At(r)});ws=class extends It{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Wn(e.data)}};ws.create=r=>new ws({typeName:Se.ZodUnknown,...At(r)});wl=class extends It{_parse(e){let t=this._getOrReturnCtx(e);return He(t,{code:Ce.invalid_type,expected:Ze.never,received:t.parsedType}),ut}};wl.create=r=>new wl({typeName:Se.ZodNever,...At(r)});s9=class extends It{_parse(e){if(this._getType(e)!==Ze.undefined){let n=this._getOrReturnCtx(e);return He(n,{code:Ce.invalid_type,expected:Ze.void,received:n.parsedType}),ut}return Wn(e.data)}};s9.create=r=>new s9({typeName:Se.ZodVoid,...At(r)});ys=class r extends It{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==Ze.array)return He(t,{code:Ce.invalid_type,expected:Ze.array,received:t.parsedType}),ut;if(i.exactLength!==null){let l=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(l||a)&&(He(t,{code:l?Ce.too_big:Ce.too_small,minimum:a?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(He(t,{code:Ce.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(He(t,{code:Ce.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((l,a)=>i.type._parseAsync(new Ho(t,l,t.path,a)))).then(l=>In.mergeArray(n,l));let o=[...t.data].map((l,a)=>i.type._parseSync(new Ho(t,l,t.path,a)));return In.mergeArray(n,o)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:Je.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:Je.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:Je.toString(t)}})}nonempty(e){return this.min(1,e)}};ys.create=(r,e)=>new ys({type:r,minLength:null,maxLength:null,exactLength:null,typeName:Se.ZodArray,...At(e)});Ri=class r extends It{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=Ft.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ze.object){let u=this._getOrReturnCtx(e);return He(u,{code:Ce.invalid_type,expected:Ze.object,received:u.parsedType}),ut}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),a=[];if(!(this._def.catchall instanceof wl&&this._def.unknownKeys==="strip"))for(let u in i.data)l.includes(u)||a.push(u);let s=[];for(let u of l){let c=o[u],f=i.data[u];s.push({key:{status:"valid",value:u},value:c._parse(new Ho(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof wl){let u=this._def.unknownKeys;if(u==="passthrough")for(let c of a)s.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(He(i,{code:Ce.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let c of a){let f=i.data[c];s.push({key:{status:"valid",value:c},value:u._parse(new Ho(i,f,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let c of s){let f=await c.key,h=await c.value;u.push({key:f,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>In.mergeObjectSync(n,u)):In.mergeObjectSync(n,s)}get shape(){return this._def.shape()}strict(e){return Je.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var o,l,a,s;let i=(a=(l=(o=this._def).errorMap)==null?void 0:l.call(o,t,n).message)!=null?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(s=Je.errToObj(e).message)!=null?s:i}:{message:i}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Se.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};for(let n of Ft.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new r({...this._def,shape:()=>t})}omit(e){let t={};for(let n of Ft.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new r({...this._def,shape:()=>t})}deepPartial(){return l9(this)}partial(e){let t={};for(let n of Ft.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}return new r({...this._def,shape:()=>t})}required(e){let t={};for(let n of Ft.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof zo;)o=o._def.innerType;t[n]=o}return new r({...this._def,shape:()=>t})}keyof(){return PA(Ft.objectKeys(this.shape))}};Ri.create=(r,e)=>new Ri({shape:()=>r,unknownKeys:"strip",catchall:wl.create(),typeName:Se.ZodObject,...At(e)});Ri.strictCreate=(r,e)=>new Ri({shape:()=>r,unknownKeys:"strict",catchall:wl.create(),typeName:Se.ZodObject,...At(e)});Ri.lazycreate=(r,e)=>new Ri({shape:r,unknownKeys:"strip",catchall:wl.create(),typeName:Se.ZodObject,...At(e)});k0=class extends It{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function i(o){for(let a of o)if(a.result.status==="valid")return a.result;for(let a of o)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;let l=o.map(a=>new Oi(a.ctx.common.issues));return He(t,{code:Ce.invalid_union,unionErrors:l}),ut}if(t.common.async)return Promise.all(n.map(async o=>{let l={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(i);{let o,l=[];for(let s of n){let u={...t,common:{...t.common,issues:[]},parent:null},c=s._parseSync({data:t.data,path:t.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!o&&(o={result:c,ctx:u}),u.common.issues.length&&l.push(u.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;let a=l.map(s=>new Oi(s));return He(t,{code:Ce.invalid_union,unionErrors:a}),ut}}get options(){return this._def.options}};k0.create=(r,e)=>new k0({options:r,typeName:Se.ZodUnion,...At(e)});Cs=r=>r instanceof E0?Cs(r.schema):r instanceof No?Cs(r.innerType()):r instanceof S0?[r.value]:r instanceof M0?r.options:r instanceof A0?Ft.objectValues(r.enum):r instanceof P0?Cs(r._def.innerType):r instanceof w0?[void 0]:r instanceof y0?[null]:r instanceof zo?[void 0,...Cs(r.unwrap())]:r instanceof ua?[null,...Cs(r.unwrap())]:r instanceof Th||r instanceof O0?Cs(r.unwrap()):r instanceof T0?Cs(r._def.innerType):[],r8=class r extends It{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ze.object)return He(t,{code:Ce.invalid_type,expected:Ze.object,received:t.parsedType}),ut;let n=this.discriminator,i=t.data[n],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(He(t,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ut)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let i=new Map;for(let o of t){let l=Cs(o.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of l){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,o)}}return new r({typeName:Se.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...At(n)})}};L0=class extends It{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=(o,l)=>{if(e8(o)||e8(l))return ut;let a=Kb(o.value,l.value);return a.valid?((t8(o)||t8(l))&&t.dirty(),{status:t.value,value:a.data}):(He(n,{code:Ce.invalid_intersection_types}),ut)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,l])=>i(o,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};L0.create=(r,e,t)=>new L0({left:r,right:e,typeName:Se.ZodIntersection,...At(t)});sa=class r extends It{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ze.array)return He(n,{code:Ce.invalid_type,expected:Ze.array,received:n.parsedType}),ut;if(n.data.length<this._def.items.length)return He(n,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ut;!this._def.rest&&n.data.length>this._def.items.length&&(He(n,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let o=[...n.data].map((l,a)=>{let s=this._def.items[a]||this._def.rest;return s?s._parse(new Ho(n,l,n.path,a)):null}).filter(l=>!!l);return n.common.async?Promise.all(o).then(l=>In.mergeArray(t,l)):In.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};sa.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sa({items:r,typeName:Se.ZodTuple,rest:null,...At(e)})};n8=class r extends It{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ze.object)return He(n,{code:Ce.invalid_type,expected:Ze.object,received:n.parsedType}),ut;let i=[],o=this._def.keyType,l=this._def.valueType;for(let a in n.data)i.push({key:o._parse(new Ho(n,a,n.path,a)),value:l._parse(new Ho(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?In.mergeObjectAsync(t,i):In.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof It?new r({keyType:e,valueType:t,typeName:Se.ZodRecord,...At(n)}):new r({keyType:j1.create(),valueType:e,typeName:Se.ZodRecord,...At(t)})}},u9=class extends It{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ze.map)return He(n,{code:Ce.invalid_type,expected:Ze.map,received:n.parsedType}),ut;let i=this._def.keyType,o=this._def.valueType,l=[...n.data.entries()].map(([a,s],u)=>({key:i._parse(new Ho(n,a,n.path,[u,"key"])),value:o._parse(new Ho(n,s,n.path,[u,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let s of l){let u=await s.key,c=await s.value;if(u.status==="aborted"||c.status==="aborted")return ut;(u.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(u.value,c.value)}return{status:t.value,value:a}})}else{let a=new Map;for(let s of l){let u=s.key,c=s.value;if(u.status==="aborted"||c.status==="aborted")return ut;(u.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(u.value,c.value)}return{status:t.value,value:a}}}};u9.create=(r,e,t)=>new u9({valueType:e,keyType:r,typeName:Se.ZodMap,...At(t)});c9=class r extends It{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Ze.set)return He(n,{code:Ce.invalid_type,expected:Ze.set,received:n.parsedType}),ut;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(He(n,{code:Ce.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(He(n,{code:Ce.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let o=this._def.valueType;function l(s){let u=new Set;for(let c of s){if(c.status==="aborted")return ut;c.status==="dirty"&&t.dirty(),u.add(c.value)}return{status:t.value,value:u}}let a=[...n.data.values()].map((s,u)=>o._parse(new Ho(n,s,n.path,u)));return n.common.async?Promise.all(a).then(s=>l(s)):l(a)}min(e,t){return new r({...this._def,minSize:{value:e,message:Je.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:Je.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};c9.create=(r,e)=>new c9({valueType:r,minSize:null,maxSize:null,typeName:Se.ZodSet,...At(e)});i8=class r extends It{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ze.function)return He(t,{code:Ce.invalid_type,expected:Ze.function,received:t.parsedType}),ut;function n(a,s){return Ph({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,i9(),vs].filter(u=>!!u),issueData:{code:Ce.invalid_arguments,argumentsError:s}})}function i(a,s){return Ph({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,i9(),vs].filter(u=>!!u),issueData:{code:Ce.invalid_return_type,returnTypeError:s}})}let o={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof q1){let a=this;return Wn(async function(...s){let u=new Oi([]),c=await a._def.args.parseAsync(s,o).catch(d=>{throw u.addIssue(n(s,d)),u}),f=await Reflect.apply(l,this,c);return await a._def.returns._def.type.parseAsync(f,o).catch(d=>{throw u.addIssue(i(f,d)),u})})}else{let a=this;return Wn(function(...s){let u=a._def.args.safeParse(s,o);if(!u.success)throw new Oi([n(s,u.error)]);let c=Reflect.apply(l,this,u.data),f=a._def.returns.safeParse(c,o);if(!f.success)throw new Oi([i(c,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:sa.create(e).rest(ws.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new r({args:e||sa.create([]).rest(ws.create()),returns:t||ws.create(),typeName:Se.ZodFunction,...At(n)})}},E0=class extends It{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};E0.create=(r,e)=>new E0({getter:r,typeName:Se.ZodLazy,...At(e)});S0=class extends It{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return He(t,{received:t.data,code:Ce.invalid_literal,expected:this._def.value}),ut}return{status:"valid",value:e.data}}get value(){return this._def.value}};S0.create=(r,e)=>new S0({value:r,typeName:Se.ZodLiteral,...At(e)});M0=class r extends It{_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return He(t,{expected:Ft.joinValues(n),received:t.parsedType,code:Ce.invalid_type}),ut}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return He(t,{received:t.data,code:Ce.invalid_enum_value,options:n}),ut}return Wn(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return r.create(e,{...this._def,...t})}exclude(e,t=this._def){return r.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}};M0.create=PA;A0=class extends It{_parse(e){let t=Ft.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Ze.string&&n.parsedType!==Ze.number){let i=Ft.objectValues(t);return He(n,{expected:Ft.joinValues(i),received:n.parsedType,code:Ce.invalid_type}),ut}if(this._cache||(this._cache=new Set(Ft.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=Ft.objectValues(t);return He(n,{received:n.data,code:Ce.invalid_enum_value,options:i}),ut}return Wn(e.data)}get enum(){return this._def.values}};A0.create=(r,e)=>new A0({values:r,typeName:Se.ZodNativeEnum,...At(e)});q1=class extends It{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ze.promise&&t.common.async===!1)return He(t,{code:Ce.invalid_type,expected:Ze.promise,received:t.parsedType}),ut;let n=t.parsedType===Ze.promise?t.data:Promise.resolve(t.data);return Wn(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}};q1.create=(r,e)=>new q1({type:r,typeName:Se.ZodPromise,...At(e)});No=class extends It{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:l=>{He(n,l),l.fatal?t.abort():t.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let l=i.transform(n.data,o);if(n.common.async)return Promise.resolve(l).then(async a=>{if(t.value==="aborted")return ut;let s=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return s.status==="aborted"?ut:s.status==="dirty"?p0(s.value):t.value==="dirty"?p0(s.value):s});{if(t.value==="aborted")return ut;let a=this._def.schema._parseSync({data:l,path:n.path,parent:n});return a.status==="aborted"?ut:a.status==="dirty"?p0(a.value):t.value==="dirty"?p0(a.value):a}}if(i.type==="refinement"){let l=a=>{let s=i.refinement(a,o);if(n.common.async)return Promise.resolve(s);if(s instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?ut:(a.status==="dirty"&&t.dirty(),l(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?ut:(a.status==="dirty"&&t.dirty(),l(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!F1(l))return ut;let a=i.transform(l.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>F1(l)?Promise.resolve(i.transform(l.value,o)).then(a=>({status:t.value,value:a})):ut);Ft.assertNever(i)}};No.create=(r,e,t)=>new No({schema:r,typeName:Se.ZodEffects,effect:e,...At(t)});No.createWithPreprocess=(r,e,t)=>new No({schema:e,effect:{type:"preprocess",transform:r},typeName:Se.ZodEffects,...At(t)});zo=class extends It{_parse(e){return this._getType(e)===Ze.undefined?Wn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};zo.create=(r,e)=>new zo({innerType:r,typeName:Se.ZodOptional,...At(e)});ua=class extends It{_parse(e){return this._getType(e)===Ze.null?Wn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ua.create=(r,e)=>new ua({innerType:r,typeName:Se.ZodNullable,...At(e)});P0=class extends It{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===Ze.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};P0.create=(r,e)=>new P0({innerType:r,typeName:Se.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...At(e)});T0=class extends It{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return o9(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Oi(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Oi(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};T0.create=(r,e)=>new T0({innerType:r,typeName:Se.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...At(e)});f9=class extends It{_parse(e){if(this._getType(e)!==Ze.nan){let n=this._getOrReturnCtx(e);return He(n,{code:Ce.invalid_type,expected:Ze.nan,received:n.parsedType}),ut}return{status:"valid",value:e.data}}};f9.create=r=>new f9({typeName:Se.ZodNaN,...At(r)});GY=Symbol("zod_brand"),Th=class extends It{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},Oh=class r extends It{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ut:o.status==="dirty"?(t.dirty(),p0(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ut:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new r({in:e,out:t,typeName:Se.ZodPipeline})}},O0=class extends It{_parse(e){let t=this._def.innerType._parse(e),n=i=>(F1(i)&&(i.value=Object.freeze(i.value)),i);return o9(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}};O0.create=(r,e)=>new O0({innerType:r,typeName:Se.ZodReadonly,...At(e)});YY={object:Ri.lazycreate};(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(Se||(Se={}));KY=(r,e={message:`Input not instance of ${r.name}`})=>TA(t=>t instanceof r,e),OA=j1.create,RA=_0.create,JY=f9.create,XY=b0.create,IA=v0.create,QY=C0.create,$Y=a9.create,eK=w0.create,tK=y0.create,rK=x1.create,nK=ws.create,iK=wl.create,oK=s9.create,lK=ys.create,aK=Ri.create,sK=Ri.strictCreate,uK=k0.create,cK=r8.create,fK=L0.create,hK=sa.create,dK=n8.create,mK=u9.create,gK=c9.create,pK=i8.create,_K=E0.create,bK=S0.create,vK=M0.create,CK=A0.create,wK=q1.create,yK=No.create,kK=zo.create,LK=ua.create,EK=No.createWithPreprocess,SK=Oh.create,MK=()=>OA().optional(),AK=()=>RA().optional(),PK=()=>IA().optional(),TK={string:r=>j1.create({...r,coerce:!0}),number:r=>_0.create({...r,coerce:!0}),boolean:r=>v0.create({...r,coerce:!0}),bigint:r=>b0.create({...r,coerce:!0}),date:r=>C0.create({...r,coerce:!0})},OK=ut});var Gn={};r9(Gn,{BRAND:()=>GY,DIRTY:()=>p0,EMPTY_PATH:()=>EY,INVALID:()=>ut,NEVER:()=>OK,OK:()=>Wn,ParseStatus:()=>In,Schema:()=>It,ZodAny:()=>x1,ZodArray:()=>ys,ZodBigInt:()=>b0,ZodBoolean:()=>v0,ZodBranded:()=>Th,ZodCatch:()=>T0,ZodDate:()=>C0,ZodDefault:()=>P0,ZodDiscriminatedUnion:()=>r8,ZodEffects:()=>No,ZodEnum:()=>M0,ZodError:()=>Oi,ZodFirstPartyTypeKind:()=>Se,ZodFunction:()=>i8,ZodIntersection:()=>L0,ZodIssueCode:()=>Ce,ZodLazy:()=>E0,ZodLiteral:()=>S0,ZodMap:()=>u9,ZodNaN:()=>f9,ZodNativeEnum:()=>A0,ZodNever:()=>wl,ZodNull:()=>y0,ZodNullable:()=>ua,ZodNumber:()=>_0,ZodObject:()=>Ri,ZodOptional:()=>zo,ZodParsedType:()=>Ze,ZodPipeline:()=>Oh,ZodPromise:()=>q1,ZodReadonly:()=>O0,ZodRecord:()=>n8,ZodSchema:()=>It,ZodSet:()=>c9,ZodString:()=>j1,ZodSymbol:()=>a9,ZodTransformer:()=>No,ZodTuple:()=>sa,ZodType:()=>It,ZodUndefined:()=>w0,ZodUnion:()=>k0,ZodUnknown:()=>ws,ZodVoid:()=>s9,addIssueToContext:()=>He,any:()=>rK,array:()=>lK,bigint:()=>XY,boolean:()=>IA,coerce:()=>TK,custom:()=>TA,date:()=>QY,datetimeRegex:()=>AA,defaultErrorMap:()=>vs,discriminatedUnion:()=>cK,effect:()=>yK,enum:()=>vK,function:()=>pK,getErrorMap:()=>i9,getParsedType:()=>aa,instanceof:()=>KY,intersection:()=>fK,isAborted:()=>e8,isAsync:()=>o9,isDirty:()=>t8,isValid:()=>F1,late:()=>YY,lazy:()=>_K,literal:()=>bK,makeIssue:()=>Ph,map:()=>mK,nan:()=>JY,nativeEnum:()=>CK,never:()=>iK,null:()=>tK,nullable:()=>LK,number:()=>RA,object:()=>aK,objectUtil:()=>Ub,oboolean:()=>PK,onumber:()=>AK,optional:()=>kK,ostring:()=>MK,pipeline:()=>SK,preprocess:()=>EK,promise:()=>wK,quotelessJson:()=>yY,record:()=>dK,set:()=>gK,setErrorMap:()=>LY,strictObject:()=>sK,string:()=>OA,symbol:()=>$Y,transformer:()=>yK,tuple:()=>hK,undefined:()=>eK,union:()=>uK,unknown:()=>nK,util:()=>Ft,void:()=>oK});var Jb=ce(()=>{$7();Gb();yA();Ah();zA();Q7()});var Xb=ce(()=>{Jb();Jb()});var U1=ce(()=>{Xb();Xb()});var NA=ae((N8e,HA)=>{function Vo(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}HA.exports=Vo;Vo.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Vo.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Vo.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},t),this._options.unref&&this._timer.unref(),!0};Vo.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Vo.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};Vo.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};Vo.prototype.start=Vo.prototype.try;Vo.prototype.errors=function(){return this._errors};Vo.prototype.attempts=function(){return this._attempts};Vo.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,n=0;n<this._errors.length;n++){var i=this._errors[n],o=i.message,l=(r[o]||0)+1;r[o]=l,l>=t&&(e=i,t=l)}return e}});var VA=ae(R0=>{var RK=NA();R0.operation=function(r){var e=R0.timeouts(r);return new RK(e,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})};R0.timeouts=function(r){if(r instanceof Array)return[].concat(r);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var t in r)e[t]=r[t];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return r&&r.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(o,l){return o-l}),n};R0.createTimeout=function(r,e){var t=e.randomize?Math.random()+1:1,n=Math.round(t*Math.max(e.minTimeout,1)*Math.pow(e.factor,r));return n=Math.min(n,e.maxTimeout),n};R0.wrap=function(r,e,t){if(e instanceof Array&&(t=e,e=null),!t){t=[];for(var n in r)typeof r[n]=="function"&&t.push(n)}for(var i=0;i<t.length;i++){var o=t[i],l=r[o];r[o]=function(s){var u=R0.operation(e),c=Array.prototype.slice.call(arguments,1),f=c.pop();c.push(function(h){u.retry(h)||(h&&(arguments[0]=u.mainError()),f.apply(this,arguments))}),u.attempt(function(){s.apply(r,c)})}.bind(r,l),r[o].options=e}}});var DA=ae((B8e,BA)=>{BA.exports=VA()});var a8=ae((D8e,l8)=>{"use strict";var IK=DA(),zK=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],o8=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},HK=(r,e,t)=>{let n=t.retries-(e-1);return r.attemptNumber=e,r.retriesLeft=n,r},NK=r=>zK.includes(r),ZA=(r,e)=>new Promise((t,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let i=IK.operation(e);i.attempt(async o=>{try{t(await r(o))}catch(l){if(!(l instanceof Error)){n(new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`));return}if(l instanceof o8)i.stop(),n(l.originalError);else if(l instanceof TypeError&&!NK(l.message))i.stop(),n(l);else{HK(l,o,e);try{await e.onFailedAttempt(l)}catch(a){n(a);return}i.retry(l)||n(i.mainError())}}})});l8.exports=ZA;l8.exports.default=ZA;l8.exports.AbortError=o8});var FA=ae(s8=>{"use strict";Object.defineProperty(s8,"__esModule",{value:!0});s8.default=void 0;var Z8e=s8.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var jA=ae(u8=>{"use strict";Object.defineProperty(u8,"__esModule",{value:!0});u8.default=void 0;var j8e=u8.default="00000000-0000-0000-0000-000000000000"});var xA=ae(c8=>{"use strict";Object.defineProperty(c8,"__esModule",{value:!0});c8.default=void 0;var q8e=c8.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var Rh=ae(f8=>{"use strict";Object.defineProperty(f8,"__esModule",{value:!0});f8.default=void 0;var VK=BK(xA());function BK(r){return r&&r.__esModule?r:{default:r}}function DK(r){return typeof r=="string"&&VK.default.test(r)}var W8e=f8.default=DK});var Ih=ae(h8=>{"use strict";Object.defineProperty(h8,"__esModule",{value:!0});h8.default=void 0;var ZK=FK(Rh());function FK(r){return r&&r.__esModule?r:{default:r}}function jK(r){if(!(0,ZK.default)(r))throw TypeError("Invalid UUID");let e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var Y8e=h8.default=jK});var ks=ae(zh=>{"use strict";Object.defineProperty(zh,"__esModule",{value:!0});zh.default=void 0;zh.unsafeStringify=qA;var xK=qK(Rh());function qK(r){return r&&r.__esModule?r:{default:r}}var zn=[];for(let r=0;r<256;++r)zn.push((r+256).toString(16).slice(1));function qA(r,e=0){return(zn[r[e+0]]+zn[r[e+1]]+zn[r[e+2]]+zn[r[e+3]]+"-"+zn[r[e+4]]+zn[r[e+5]]+"-"+zn[r[e+6]]+zn[r[e+7]]+"-"+zn[r[e+8]]+zn[r[e+9]]+"-"+zn[r[e+10]]+zn[r[e+11]]+zn[r[e+12]]+zn[r[e+13]]+zn[r[e+14]]+zn[r[e+15]]).toLowerCase()}function UK(r,e=0){let t=qA(r,e);if(!(0,xK.default)(t))throw TypeError("Stringified UUID is invalid");return t}var J8e=zh.default=UK});var g8=ae(Qb=>{"use strict";Object.defineProperty(Qb,"__esModule",{value:!0});Qb.default=YK;var WK=GK(require("node:crypto"));function GK(r){return r&&r.__esModule?r:{default:r}}var m8=new Uint8Array(256),d8=m8.length;function YK(){return d8>m8.length-16&&(WK.default.randomFillSync(m8),d8=0),m8.slice(d8,d8+=16)}});var rv=ae(_8=>{"use strict";Object.defineProperty(_8,"__esModule",{value:!0});_8.default=void 0;var KK=XK(g8()),JK=ks();function XK(r){return r&&r.__esModule?r:{default:r}}var $b,p8,ev=0,tv=0;function QK(r,e,t){let n=e&&t||0,i=e||new Array(16);r=r||{};let o=r.node,l=r.clockseq;if(r._v6||(o||(o=$b),l==null&&(l=p8)),o==null||l==null){let h=r.random||(r.rng||KK.default)();o==null&&(o=[h[0],h[1],h[2],h[3],h[4],h[5]],!$b&&!r._v6&&(o[0]|=1,$b=o)),l==null&&(l=(h[6]<<8|h[7])&16383,p8===void 0&&!r._v6&&(p8=l))}let a=r.msecs!==void 0?r.msecs:Date.now(),s=r.nsecs!==void 0?r.nsecs:tv+1,u=a-ev+(s-tv)/1e4;if(u<0&&r.clockseq===void 0&&(l=l+1&16383),(u<0||a>ev)&&r.nsecs===void 0&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ev=a,tv=s,p8=l,a+=122192928e5;let c=((a&268435455)*1e4+s)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;let f=a/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=l>>>8|128,i[n++]=l&255;for(let h=0;h<6;++h)i[n+h]=o[h];return e||(0,JK.unsafeStringify)(i)}var $8e=_8.default=QK});var iv=ae(nv=>{"use strict";Object.defineProperty(nv,"__esModule",{value:!0});nv.default=rJ;var $K=tJ(Ih()),eJ=ks();function tJ(r){return r&&r.__esModule?r:{default:r}}function rJ(r){let e=typeof r=="string"?(0,$K.default)(r):r,t=nJ(e);return typeof r=="string"?(0,eJ.unsafeStringify)(t):t}function nJ(r,e=!1){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}});var ov=ae(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});I0.URL=I0.DNS=void 0;I0.default=cJ;var iJ=ks(),oJ=lJ(Ih());function lJ(r){return r&&r.__esModule?r:{default:r}}function aJ(r){r=unescape(encodeURIComponent(r));let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var sJ=I0.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",uJ=I0.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function cJ(r,e,t){function n(i,o,l,a){var s;if(typeof i=="string"&&(i=aJ(i)),typeof o=="string"&&(o=(0,oJ.default)(o)),((s=o)===null||s===void 0?void 0:s.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=t(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,l){a=a||0;for(let c=0;c<16;++c)l[a+c]=u[c];return l}return(0,iJ.unsafeStringify)(u)}try{n.name=r}catch(i){}return n.DNS=sJ,n.URL=uJ,n}});var UA=ae(b8=>{"use strict";Object.defineProperty(b8,"__esModule",{value:!0});b8.default=void 0;var fJ=hJ(require("node:crypto"));function hJ(r){return r&&r.__esModule?r:{default:r}}function dJ(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),fJ.default.createHash("md5").update(r).digest()}var nme=b8.default=dJ});var GA=ae(v8=>{"use strict";Object.defineProperty(v8,"__esModule",{value:!0});v8.default=void 0;var mJ=WA(ov()),gJ=WA(UA());function WA(r){return r&&r.__esModule?r:{default:r}}var pJ=(0,mJ.default)("v3",48,gJ.default),ome=v8.default=pJ});var YA=ae(C8=>{"use strict";Object.defineProperty(C8,"__esModule",{value:!0});C8.default=void 0;var _J=bJ(require("node:crypto"));function bJ(r){return r&&r.__esModule?r:{default:r}}var ame=C8.default={randomUUID:_J.default.randomUUID}});var XA=ae(w8=>{"use strict";Object.defineProperty(w8,"__esModule",{value:!0});w8.default=void 0;var KA=JA(YA()),vJ=JA(g8()),CJ=ks();function JA(r){return r&&r.__esModule?r:{default:r}}function wJ(r,e,t){if(KA.default.randomUUID&&!e&&!r)return KA.default.randomUUID();r=r||{};let n=r.random||(r.rng||vJ.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return(0,CJ.unsafeStringify)(n)}var ume=w8.default=wJ});var QA=ae(y8=>{"use strict";Object.defineProperty(y8,"__esModule",{value:!0});y8.default=void 0;var yJ=kJ(require("node:crypto"));function kJ(r){return r&&r.__esModule?r:{default:r}}function LJ(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),yJ.default.createHash("sha1").update(r).digest()}var fme=y8.default=LJ});var eP=ae(k8=>{"use strict";Object.defineProperty(k8,"__esModule",{value:!0});k8.default=void 0;var EJ=$A(ov()),SJ=$A(QA());function $A(r){return r&&r.__esModule?r:{default:r}}var MJ=(0,EJ.default)("v5",80,SJ.default),dme=k8.default=MJ});var rP=ae(lv=>{"use strict";Object.defineProperty(lv,"__esModule",{value:!0});lv.default=OJ;var AJ=ks(),PJ=tP(rv()),TJ=tP(iv());function tP(r){return r&&r.__esModule?r:{default:r}}function OJ(r={},e,t=0){let n=(0,PJ.default)({...r,_v6:!0},new Uint8Array(16));if(n=(0,TJ.default)(n),e){for(let i=0;i<16;i++)e[t+i]=n[i];return e}return(0,AJ.unsafeStringify)(n)}});var nP=ae(av=>{"use strict";Object.defineProperty(av,"__esModule",{value:!0});av.default=HJ;var RJ=zJ(Ih()),IJ=ks();function zJ(r){return r&&r.__esModule?r:{default:r}}function HJ(r){let e=typeof r=="string"?(0,RJ.default)(r):r,t=NJ(e);return typeof r=="string"?(0,IJ.unsafeStringify)(t):t}function NJ(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}});var lP=ae(L8=>{"use strict";Object.defineProperty(L8,"__esModule",{value:!0});L8.default=void 0;var VJ=DJ(g8()),BJ=ks();function DJ(r){return r&&r.__esModule?r:{default:r}}var iP=null,oP=null,yl=0;function ZJ(r,e,t){r=r||{};let n=e&&t||0,i=e||new Uint8Array(16),o=r.random||(r.rng||VJ.default)(),l=r.msecs!==void 0?r.msecs:Date.now(),a=r.seq!==void 0?r.seq:null,s=oP,u=iP;return l>yl&&r.msecs===void 0&&(yl=l,a!==null&&(s=null,u=null)),a!==null&&(a>2147483647&&(a=2147483647),s=a>>>19&4095,u=a&524287),(s===null||u===null)&&(s=o[6]&127,s=s<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),l+1e4>yl&&a===null?++u>524287&&(u=0,++s>4095&&(s=0,yl++)):yl=l,oP=s,iP=u,i[n++]=yl/1099511627776&255,i[n++]=yl/4294967296&255,i[n++]=yl/16777216&255,i[n++]=yl/65536&255,i[n++]=yl/256&255,i[n++]=yl&255,i[n++]=s>>>4&15|112,i[n++]=s&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,BJ.unsafeStringify)(i)}var _me=L8.default=ZJ});var aP=ae(E8=>{"use strict";Object.defineProperty(E8,"__esModule",{value:!0});E8.default=void 0;var FJ=jJ(Rh());function jJ(r){return r&&r.__esModule?r:{default:r}}function xJ(r){if(!(0,FJ.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}var vme=E8.default=xJ});var sP=ae(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Object.defineProperty(Yn,"MAX",{enumerable:!0,get:function(){return qJ.default}});Object.defineProperty(Yn,"NIL",{enumerable:!0,get:function(){return UJ.default}});Object.defineProperty(Yn,"parse",{enumerable:!0,get:function(){return WJ.default}});Object.defineProperty(Yn,"stringify",{enumerable:!0,get:function(){return GJ.default}});Object.defineProperty(Yn,"v1",{enumerable:!0,get:function(){return YJ.default}});Object.defineProperty(Yn,"v1ToV6",{enumerable:!0,get:function(){return KJ.default}});Object.defineProperty(Yn,"v3",{enumerable:!0,get:function(){return JJ.default}});Object.defineProperty(Yn,"v4",{enumerable:!0,get:function(){return XJ.default}});Object.defineProperty(Yn,"v5",{enumerable:!0,get:function(){return QJ.default}});Object.defineProperty(Yn,"v6",{enumerable:!0,get:function(){return $J.default}});Object.defineProperty(Yn,"v6ToV1",{enumerable:!0,get:function(){return eX.default}});Object.defineProperty(Yn,"v7",{enumerable:!0,get:function(){return tX.default}});Object.defineProperty(Yn,"validate",{enumerable:!0,get:function(){return rX.default}});Object.defineProperty(Yn,"version",{enumerable:!0,get:function(){return nX.default}});var qJ=Ii(FA()),UJ=Ii(jA()),WJ=Ii(Ih()),GJ=Ii(ks()),YJ=Ii(rv()),KJ=Ii(iv()),JJ=Ii(GA()),XJ=Ii(XA()),QJ=Ii(eP()),$J=Ii(rP()),eX=Ii(nP()),tX=Ii(lP()),rX=Ii(Rh()),nX=Ii(aP());function Ii(r){return r&&r.__esModule?r:{default:r}}});var fi,yme,kme,Lme,Yr,Eme,Sme,Mme,Ame,Pme,Tme,Ome,z0,Rme,Ime,W1=ce(()=>{fi=wr(sP(),1),yme=fi.default.v1,kme=fi.default.v1ToV6,Lme=fi.default.v3,Yr=fi.default.v4,Eme=fi.default.v5,Sme=fi.default.v6,Mme=fi.default.v6ToV1,Ame=fi.default.v7,Pme=fi.default.NIL,Tme=fi.default.MAX,Ome=fi.default.version,z0=fi.default.validate,Rme=fi.default.stringify,Ime=fi.default.parse});var cP=ae((zme,sv)=>{"use strict";var iX=Object.prototype.hasOwnProperty,hi="~";function Hh(){}Object.create&&(Hh.prototype=Object.create(null),new Hh().__proto__||(hi=!1));function oX(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function uP(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new oX(t,n||r,i),l=hi?hi+e:e;return r._events[l]?r._events[l].fn?r._events[l]=[r._events[l],o]:r._events[l].push(o):(r._events[l]=o,r._eventsCount++),r}function M8(r,e){--r._eventsCount===0?r._events=new Hh:delete r._events[e]}function Kn(){this._events=new Hh,this._eventsCount=0}Kn.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)iX.call(t,n)&&e.push(hi?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Kn.prototype.listeners=function(e){var t=hi?hi+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,l=new Array(o);i<o;i++)l[i]=n[i].fn;return l};Kn.prototype.listenerCount=function(e){var t=hi?hi+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Kn.prototype.emit=function(e,t,n,i,o,l){var a=hi?hi+e:e;if(!this._events[a])return!1;var s=this._events[a],u=arguments.length,c,f;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),u){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,n),!0;case 4:return s.fn.call(s.context,t,n,i),!0;case 5:return s.fn.call(s.context,t,n,i,o),!0;case 6:return s.fn.call(s.context,t,n,i,o,l),!0}for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];s.fn.apply(s.context,c)}else{var h=s.length,d;for(f=0;f<h;f++)switch(s[f].once&&this.removeListener(e,s[f].fn,void 0,!0),u){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,t);break;case 3:s[f].fn.call(s[f].context,t,n);break;case 4:s[f].fn.call(s[f].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];s[f].fn.apply(s[f].context,c)}}return!0};Kn.prototype.on=function(e,t,n){return uP(this,e,t,n,!1)};Kn.prototype.once=function(e,t,n){return uP(this,e,t,n,!0)};Kn.prototype.removeListener=function(e,t,n,i){var o=hi?hi+e:e;if(!this._events[o])return this;if(!t)return M8(this,o),this;var l=this._events[o];if(l.fn)l.fn===t&&(!i||l.once)&&(!n||l.context===n)&&M8(this,o);else{for(var a=0,s=[],u=l.length;a<u;a++)(l[a].fn!==t||i&&!l[a].once||n&&l[a].context!==n)&&s.push(l[a]);s.length?this._events[o]=s.length===1?s[0]:s:M8(this,o)}return this};Kn.prototype.removeAllListeners=function(e){var t;return e?(t=hi?hi+e:e,this._events[t]&&M8(this,t)):(this._events=new Hh,this._eventsCount=0),this};Kn.prototype.off=Kn.prototype.removeListener;Kn.prototype.addListener=Kn.prototype.on;Kn.prefixed=hi;Kn.EventEmitter=Kn;typeof sv!="undefined"&&(sv.exports=Kn)});var hP=ae((Hme,fP)=>{"use strict";fP.exports=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})))});var mP=ae((Nme,P8)=>{"use strict";var lX=hP(),A8=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},dP=(r,e,t)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(r);return}let o=setTimeout(()=>{if(typeof t=="function"){try{n(t())}catch(s){i(s)}return}let l=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,a=t instanceof Error?t:new A8(l);typeof r.cancel=="function"&&r.cancel(),i(a)},e);lX(r.then(n,i),()=>{clearTimeout(o)})});P8.exports=dP;P8.exports.default=dP;P8.exports.TimeoutError=A8});var gP=ae(uv=>{"use strict";Object.defineProperty(uv,"__esModule",{value:!0});function aX(r,e,t){let n=0,i=r.length;for(;i>0;){let o=i/2|0,l=n+o;t(r[l],e)<=0?(n=++l,i-=o+1):i=o}return n}uv.default=aX});var pP=ae(fv=>{"use strict";Object.defineProperty(fv,"__esModule",{value:!0});var sX=gP(),cv=class{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);let n={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(n);return}let i=sX.default(this._queue,n,(o,l)=>l.priority-o.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}};fv.default=cv});var O8=ae(dv=>{"use strict";Object.defineProperty(dv,"__esModule",{value:!0});var uX=cP(),_P=mP(),cX=pP(),T8=()=>{},fX=new _P.TimeoutError,hv=class extends uX{constructor(e){var t,n,i,o;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=T8,this._resolveIdle=T8,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:cX.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(o=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=T8,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=T8,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,i)=>{let o=async()=>{this._pendingCount++,this._intervalCount++;try{let l=this._timeout===void 0&&t.timeout===void 0?e():_P.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&i(fX)});n(await l)}catch(l){i(l)}this._next()};this._queue.enqueue(o,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};dv.default=hv});var hX,bP,vP,$e,R8=ce(()=>{Nh();hX=(...r)=>fetch(...r),bP=Symbol.for("ls:fetch_implementation"),vP=()=>{let r=globalThis[bP];return r?typeof r=="function"&&"Headers"in r&&"Request"in r&&"Response"in r:!1},$e=r=>async(...e)=>{var n;if(r||zi("DEBUG")==="true"){let[i,o]=e;console.log(`\u2192 ${(o==null?void 0:o.method)||"GET"} ${i}`)}let t=await((n=globalThis[bP])!=null?n:hX)(...e);return(r||zi("DEBUG")==="true")&&console.log(`\u2190 ${t.status} ${t.statusText} ${t.url}`),t}});var CP,I8,dX,mX,Vh,wP=ce(()=>{CP=wr(a8(),1),I8=wr(O8(),1);R8();dX=[400,401,403,404,405,406,407,408],mX=[409],Vh=class{constructor(e){var t,n;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(t=e.maxConcurrency)!=null?t:1/0,this.maxRetries=(n=e.maxRetries)!=null?n:6,this.debug=e.debug,"default"in I8.default?this.queue=new I8.default.default({concurrency:this.maxConcurrency}):this.queue=new I8.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...t){let n=this.onFailedResponseHook;return this.queue.add(()=>(0,CP.default)(()=>e(...t).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;let o=i==null?void 0:i.response,l=o==null?void 0:o.status;if(l){if(dX.includes(+l))throw i;if(mX.includes(+l))return;n&&await n(o)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((i,o)=>{var l;(l=e.signal)==null||l.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>$e(this.debug)(...e).then(t=>t.ok?t:Promise.reject(t)))}}});function mv(r){return typeof(r==null?void 0:r._getType)=="function"}function gv(r){let e={type:r._getType(),data:{content:r.content}};return r!=null&&r.additional_kwargs&&Object.keys(r.additional_kwargs).length>0&&(e.data.additional_kwargs={...r.additional_kwargs}),e}var yP=ce(()=>{});function Lt(r,e){if(!z0(r)){let t=e!==void 0?`Invalid UUID for ${e}: ${r}`:`Invalid UUID: ${r}`;throw new Error(t)}return r}var kP=ce(()=>{W1()});function z8(r){LP[r]||(console.warn(r),LP[r]=!0)}var LP,pv=ce(()=>{LP={}});var Bh=ae((Gme,EP)=>{"use strict";var gX="2.0.0",pX=Number.MAX_SAFE_INTEGER||9007199254740991,_X=16,bX=250,vX=["major","premajor","minor","preminor","patch","prepatch","prerelease"];EP.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:_X,MAX_SAFE_BUILD_LENGTH:bX,MAX_SAFE_INTEGER:pX,RELEASE_TYPES:vX,SEMVER_SPEC_VERSION:gX,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Dh=ae((Yme,SP)=>{"use strict";var CX=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};SP.exports=CX});var h9=ae((ca,MP)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:_v,MAX_SAFE_BUILD_LENGTH:wX,MAX_LENGTH:yX}=Bh(),kX=Dh();ca=MP.exports={};var LX=ca.re=[],EX=ca.safeRe=[],xe=ca.src=[],SX=ca.safeSrc=[],qe=ca.t={},MX=0,bv="[a-zA-Z0-9-]",AX=[["\\s",1],["\\d",yX],[bv,wX]],PX=r=>{for(let[e,t]of AX)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},Et=(r,e,t)=>{let n=PX(e),i=MX++;kX(r,i,e),qe[r]=i,xe[i]=e,SX[i]=n,LX[i]=new RegExp(e,t?"g":void 0),EX[i]=new RegExp(n,t?"g":void 0)};Et("NUMERICIDENTIFIER","0|[1-9]\\d*");Et("NUMERICIDENTIFIERLOOSE","\\d+");Et("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${bv}*`);Et("MAINVERSION",`(${xe[qe.NUMERICIDENTIFIER]})\\.(${xe[qe.NUMERICIDENTIFIER]})\\.(${xe[qe.NUMERICIDENTIFIER]})`);Et("MAINVERSIONLOOSE",`(${xe[qe.NUMERICIDENTIFIERLOOSE]})\\.(${xe[qe.NUMERICIDENTIFIERLOOSE]})\\.(${xe[qe.NUMERICIDENTIFIERLOOSE]})`);Et("PRERELEASEIDENTIFIER",`(?:${xe[qe.NONNUMERICIDENTIFIER]}|${xe[qe.NUMERICIDENTIFIER]})`);Et("PRERELEASEIDENTIFIERLOOSE",`(?:${xe[qe.NONNUMERICIDENTIFIER]}|${xe[qe.NUMERICIDENTIFIERLOOSE]})`);Et("PRERELEASE",`(?:-(${xe[qe.PRERELEASEIDENTIFIER]}(?:\\.${xe[qe.PRERELEASEIDENTIFIER]})*))`);Et("PRERELEASELOOSE",`(?:-?(${xe[qe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${xe[qe.PRERELEASEIDENTIFIERLOOSE]})*))`);Et("BUILDIDENTIFIER",`${bv}+`);Et("BUILD",`(?:\\+(${xe[qe.BUILDIDENTIFIER]}(?:\\.${xe[qe.BUILDIDENTIFIER]})*))`);Et("FULLPLAIN",`v?${xe[qe.MAINVERSION]}${xe[qe.PRERELEASE]}?${xe[qe.BUILD]}?`);Et("FULL",`^${xe[qe.FULLPLAIN]}$`);Et("LOOSEPLAIN",`[v=\\s]*${xe[qe.MAINVERSIONLOOSE]}${xe[qe.PRERELEASELOOSE]}?${xe[qe.BUILD]}?`);Et("LOOSE",`^${xe[qe.LOOSEPLAIN]}$`);Et("GTLT","((?:<|>)?=?)");Et("XRANGEIDENTIFIERLOOSE",`${xe[qe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Et("XRANGEIDENTIFIER",`${xe[qe.NUMERICIDENTIFIER]}|x|X|\\*`);Et("XRANGEPLAIN",`[v=\\s]*(${xe[qe.XRANGEIDENTIFIER]})(?:\\.(${xe[qe.XRANGEIDENTIFIER]})(?:\\.(${xe[qe.XRANGEIDENTIFIER]})(?:${xe[qe.PRERELEASE]})?${xe[qe.BUILD]}?)?)?`);Et("XRANGEPLAINLOOSE",`[v=\\s]*(${xe[qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${xe[qe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${xe[qe.XRANGEIDENTIFIERLOOSE]})(?:${xe[qe.PRERELEASELOOSE]})?${xe[qe.BUILD]}?)?)?`);Et("XRANGE",`^${xe[qe.GTLT]}\\s*${xe[qe.XRANGEPLAIN]}$`);Et("XRANGELOOSE",`^${xe[qe.GTLT]}\\s*${xe[qe.XRANGEPLAINLOOSE]}$`);Et("COERCEPLAIN",`(^|[^\\d])(\\d{1,${_v}})(?:\\.(\\d{1,${_v}}))?(?:\\.(\\d{1,${_v}}))?`);Et("COERCE",`${xe[qe.COERCEPLAIN]}(?:$|[^\\d])`);Et("COERCEFULL",xe[qe.COERCEPLAIN]+`(?:${xe[qe.PRERELEASE]})?(?:${xe[qe.BUILD]})?(?:$|[^\\d])`);Et("COERCERTL",xe[qe.COERCE],!0);Et("COERCERTLFULL",xe[qe.COERCEFULL],!0);Et("LONETILDE","(?:~>?)");Et("TILDETRIM",`(\\s*)${xe[qe.LONETILDE]}\\s+`,!0);ca.tildeTrimReplace="$1~";Et("TILDE",`^${xe[qe.LONETILDE]}${xe[qe.XRANGEPLAIN]}$`);Et("TILDELOOSE",`^${xe[qe.LONETILDE]}${xe[qe.XRANGEPLAINLOOSE]}$`);Et("LONECARET","(?:\\^)");Et("CARETTRIM",`(\\s*)${xe[qe.LONECARET]}\\s+`,!0);ca.caretTrimReplace="$1^";Et("CARET",`^${xe[qe.LONECARET]}${xe[qe.XRANGEPLAIN]}$`);Et("CARETLOOSE",`^${xe[qe.LONECARET]}${xe[qe.XRANGEPLAINLOOSE]}$`);Et("COMPARATORLOOSE",`^${xe[qe.GTLT]}\\s*(${xe[qe.LOOSEPLAIN]})$|^$`);Et("COMPARATOR",`^${xe[qe.GTLT]}\\s*(${xe[qe.FULLPLAIN]})$|^$`);Et("COMPARATORTRIM",`(\\s*)${xe[qe.GTLT]}\\s*(${xe[qe.LOOSEPLAIN]}|${xe[qe.XRANGEPLAIN]})`,!0);ca.comparatorTrimReplace="$1$2$3";Et("HYPHENRANGE",`^\\s*(${xe[qe.XRANGEPLAIN]})\\s+-\\s+(${xe[qe.XRANGEPLAIN]})\\s*$`);Et("HYPHENRANGELOOSE",`^\\s*(${xe[qe.XRANGEPLAINLOOSE]})\\s+-\\s+(${xe[qe.XRANGEPLAINLOOSE]})\\s*$`);Et("STAR","(<|>)?=?\\s*\\*");Et("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Et("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var H8=ae((Kme,AP)=>{"use strict";var TX=Object.freeze({loose:!0}),OX=Object.freeze({}),RX=r=>r?typeof r!="object"?TX:r:OX;AP.exports=RX});var vv=ae((Jme,OP)=>{"use strict";var PP=/^[0-9]+$/,TP=(r,e)=>{let t=PP.test(r),n=PP.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},IX=(r,e)=>TP(e,r);OP.exports={compareIdentifiers:TP,rcompareIdentifiers:IX}});var Jn=ae((Xme,IP)=>{"use strict";var N8=Dh(),{MAX_LENGTH:RP,MAX_SAFE_INTEGER:V8}=Bh(),{safeRe:B8,t:D8}=h9(),zX=H8(),{compareIdentifiers:d9}=vv(),Cv=class r{constructor(e,t){if(t=zX(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>RP)throw new TypeError(`version is longer than ${RP} characters`);N8("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?B8[D8.LOOSE]:B8[D8.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>V8||this.major<0)throw new TypeError("Invalid major version");if(this.minor>V8||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>V8||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<V8)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(N8("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),d9(this.major,e.major)||d9(this.minor,e.minor)||d9(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(N8("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return d9(n,i)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(N8("build compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return d9(n,i)}while(++t)}inc(e,t,n){if(e.startsWith("pre")){if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let i=`-${t}`.match(this.options.loose?B8[D8.PRERELEASELOOSE]:B8[D8.PRERELEASE]);if(!i||i[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];n===!1&&(o=[t]),d9(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};IP.exports=Cv});var H0=ae((Qme,HP)=>{"use strict";var zP=Jn(),HX=(r,e,t=!1)=>{if(r instanceof zP)return r;try{return new zP(r,e)}catch(n){if(!t)return null;throw n}};HP.exports=HX});var VP=ae(($me,NP)=>{"use strict";var NX=H0(),VX=(r,e)=>{let t=NX(r,e);return t?t.version:null};NP.exports=VX});var DP=ae((e6e,BP)=>{"use strict";var BX=H0(),DX=(r,e)=>{let t=BX(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};BP.exports=DX});var jP=ae((t6e,FP)=>{"use strict";var ZP=Jn(),ZX=(r,e,t,n,i)=>{typeof t=="string"&&(i=n,n=t,t=void 0);try{return new ZP(r instanceof ZP?r.version:r,t).inc(e,n,i).version}catch(o){return null}};FP.exports=ZX});var UP=ae((r6e,qP)=>{"use strict";var xP=H0(),FX=(r,e)=>{let t=xP(r,null,!0),n=xP(e,null,!0),i=t.compare(n);if(i===0)return null;let o=i>0,l=o?t:n,a=o?n:t,s=!!l.prerelease.length;if(!!a.prerelease.length&&!s){if(!a.patch&&!a.minor)return"major";if(a.compareMain(l)===0)return a.minor&&!a.patch?"minor":"patch"}let c=s?"pre":"";return t.major!==n.major?c+"major":t.minor!==n.minor?c+"minor":t.patch!==n.patch?c+"patch":"prerelease"};qP.exports=FX});var GP=ae((n6e,WP)=>{"use strict";var jX=Jn(),xX=(r,e)=>new jX(r,e).major;WP.exports=xX});var KP=ae((i6e,YP)=>{"use strict";var qX=Jn(),UX=(r,e)=>new qX(r,e).minor;YP.exports=UX});var XP=ae((o6e,JP)=>{"use strict";var WX=Jn(),GX=(r,e)=>new WX(r,e).patch;JP.exports=GX});var $P=ae((l6e,QP)=>{"use strict";var YX=H0(),KX=(r,e)=>{let t=YX(r,e);return t&&t.prerelease.length?t.prerelease:null};QP.exports=KX});var Bo=ae((a6e,tT)=>{"use strict";var eT=Jn(),JX=(r,e,t)=>new eT(r,t).compare(new eT(e,t));tT.exports=JX});var nT=ae((s6e,rT)=>{"use strict";var XX=Bo(),QX=(r,e,t)=>XX(e,r,t);rT.exports=QX});var oT=ae((u6e,iT)=>{"use strict";var $X=Bo(),eQ=(r,e)=>$X(r,e,!0);iT.exports=eQ});var Z8=ae((c6e,aT)=>{"use strict";var lT=Jn(),tQ=(r,e,t)=>{let n=new lT(r,t),i=new lT(e,t);return n.compare(i)||n.compareBuild(i)};aT.exports=tQ});var uT=ae((f6e,sT)=>{"use strict";var rQ=Z8(),nQ=(r,e)=>r.sort((t,n)=>rQ(t,n,e));sT.exports=nQ});var fT=ae((h6e,cT)=>{"use strict";var iQ=Z8(),oQ=(r,e)=>r.sort((t,n)=>iQ(n,t,e));cT.exports=oQ});var Zh=ae((d6e,hT)=>{"use strict";var lQ=Bo(),aQ=(r,e,t)=>lQ(r,e,t)>0;hT.exports=aQ});var F8=ae((m6e,dT)=>{"use strict";var sQ=Bo(),uQ=(r,e,t)=>sQ(r,e,t)<0;dT.exports=uQ});var wv=ae((g6e,mT)=>{"use strict";var cQ=Bo(),fQ=(r,e,t)=>cQ(r,e,t)===0;mT.exports=fQ});var yv=ae((p6e,gT)=>{"use strict";var hQ=Bo(),dQ=(r,e,t)=>hQ(r,e,t)!==0;gT.exports=dQ});var j8=ae((_6e,pT)=>{"use strict";var mQ=Bo(),gQ=(r,e,t)=>mQ(r,e,t)>=0;pT.exports=gQ});var x8=ae((b6e,_T)=>{"use strict";var pQ=Bo(),_Q=(r,e,t)=>pQ(r,e,t)<=0;_T.exports=_Q});var kv=ae((v6e,bT)=>{"use strict";var bQ=wv(),vQ=yv(),CQ=Zh(),wQ=j8(),yQ=F8(),kQ=x8(),LQ=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return bQ(r,t,n);case"!=":return vQ(r,t,n);case">":return CQ(r,t,n);case">=":return wQ(r,t,n);case"<":return yQ(r,t,n);case"<=":return kQ(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};bT.exports=LQ});var CT=ae((C6e,vT)=>{"use strict";var EQ=Jn(),SQ=H0(),{safeRe:q8,t:U8}=h9(),MQ=(r,e)=>{if(r instanceof EQ)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?q8[U8.COERCEFULL]:q8[U8.COERCE]);else{let s=e.includePrerelease?q8[U8.COERCERTLFULL]:q8[U8.COERCERTL],u;for(;(u=s.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),s.lastIndex=u.index+u[1].length+u[2].length;s.lastIndex=-1}if(t===null)return null;let n=t[2],i=t[3]||"0",o=t[4]||"0",l=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return SQ(`${n}.${i}.${o}${l}${a}`,e)};vT.exports=MQ});var yT=ae((w6e,wT)=>{"use strict";var Lv=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};wT.exports=Lv});var Do=ae((y6e,ST)=>{"use strict";var AQ=/\s+/g,Ev=class r{constructor(e,t){if(t=TQ(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof Sv)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(AQ," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!LT(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&VQ(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&HQ)|(this.options.loose&&NQ))+":"+e,i=kT.get(n);if(i)return i;let o=this.options.loose,l=o?Hi[di.HYPHENRANGELOOSE]:Hi[di.HYPHENRANGE];e=e.replace(l,GQ(this.options.includePrerelease)),Ar("hyphen replace",e),e=e.replace(Hi[di.COMPARATORTRIM],RQ),Ar("comparator trim",e),e=e.replace(Hi[di.TILDETRIM],IQ),Ar("tilde trim",e),e=e.replace(Hi[di.CARETTRIM],zQ),Ar("caret trim",e);let a=e.split(" ").map(f=>BQ(f,this.options)).join(" ").split(/\s+/).map(f=>WQ(f,this.options));o&&(a=a.filter(f=>(Ar("loose invalid filter",f,this.options),!!f.match(Hi[di.COMPARATORLOOSE])))),Ar("range list",a);let s=new Map,u=a.map(f=>new Sv(f,this.options));for(let f of u){if(LT(f))return[f];s.set(f.value,f)}s.size>1&&s.has("")&&s.delete("");let c=[...s.values()];return kT.set(n,c),c}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>ET(n,t)&&e.set.some(i=>ET(i,t)&&n.every(o=>i.every(l=>o.intersects(l,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new OQ(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(YQ(this.set[t],e,this.options))return!0;return!1}};ST.exports=Ev;var PQ=yT(),kT=new PQ,TQ=H8(),Sv=Fh(),Ar=Dh(),OQ=Jn(),{safeRe:Hi,t:di,comparatorTrimReplace:RQ,tildeTrimReplace:IQ,caretTrimReplace:zQ}=h9(),{FLAG_INCLUDE_PRERELEASE:HQ,FLAG_LOOSE:NQ}=Bh(),LT=r=>r.value==="<0.0.0-0",VQ=r=>r.value==="",ET=(r,e)=>{let t=!0,n=r.slice(),i=n.pop();for(;t&&n.length;)t=n.every(o=>i.intersects(o,e)),i=n.pop();return t},BQ=(r,e)=>(Ar("comp",r,e),r=FQ(r,e),Ar("caret",r),r=DQ(r,e),Ar("tildes",r),r=xQ(r,e),Ar("xrange",r),r=UQ(r,e),Ar("stars",r),r),mi=r=>!r||r.toLowerCase()==="x"||r==="*",DQ=(r,e)=>r.trim().split(/\s+/).map(t=>ZQ(t,e)).join(" "),ZQ=(r,e)=>{let t=e.loose?Hi[di.TILDELOOSE]:Hi[di.TILDE];return r.replace(t,(n,i,o,l,a)=>{Ar("tilde",r,n,i,o,l,a);let s;return mi(i)?s="":mi(o)?s=`>=${i}.0.0 <${+i+1}.0.0-0`:mi(l)?s=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Ar("replaceTilde pr",a),s=`>=${i}.${o}.${l}-${a} <${i}.${+o+1}.0-0`):s=`>=${i}.${o}.${l} <${i}.${+o+1}.0-0`,Ar("tilde return",s),s})},FQ=(r,e)=>r.trim().split(/\s+/).map(t=>jQ(t,e)).join(" "),jQ=(r,e)=>{Ar("caret",r,e);let t=e.loose?Hi[di.CARETLOOSE]:Hi[di.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,o,l,a,s)=>{Ar("caret",r,i,o,l,a,s);let u;return mi(o)?u="":mi(l)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:mi(a)?o==="0"?u=`>=${o}.${l}.0${n} <${o}.${+l+1}.0-0`:u=`>=${o}.${l}.0${n} <${+o+1}.0.0-0`:s?(Ar("replaceCaret pr",s),o==="0"?l==="0"?u=`>=${o}.${l}.${a}-${s} <${o}.${l}.${+a+1}-0`:u=`>=${o}.${l}.${a}-${s} <${o}.${+l+1}.0-0`:u=`>=${o}.${l}.${a}-${s} <${+o+1}.0.0-0`):(Ar("no pr"),o==="0"?l==="0"?u=`>=${o}.${l}.${a}${n} <${o}.${l}.${+a+1}-0`:u=`>=${o}.${l}.${a}${n} <${o}.${+l+1}.0-0`:u=`>=${o}.${l}.${a} <${+o+1}.0.0-0`),Ar("caret return",u),u})},xQ=(r,e)=>(Ar("replaceXRanges",r,e),r.split(/\s+/).map(t=>qQ(t,e)).join(" ")),qQ=(r,e)=>{r=r.trim();let t=e.loose?Hi[di.XRANGELOOSE]:Hi[di.XRANGE];return r.replace(t,(n,i,o,l,a,s)=>{Ar("xRange",r,n,i,o,l,a,s);let u=mi(o),c=u||mi(l),f=c||mi(a),h=f;return i==="="&&h&&(i=""),s=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&h?(c&&(l=0),a=0,i===">"?(i=">=",c?(o=+o+1,l=0,a=0):(l=+l+1,a=0)):i==="<="&&(i="<",c?o=+o+1:l=+l+1),i==="<"&&(s="-0"),n=`${i+o}.${l}.${a}${s}`):c?n=`>=${o}.0.0${s} <${+o+1}.0.0-0`:f&&(n=`>=${o}.${l}.0${s} <${o}.${+l+1}.0-0`),Ar("xRange return",n),n})},UQ=(r,e)=>(Ar("replaceStars",r,e),r.trim().replace(Hi[di.STAR],"")),WQ=(r,e)=>(Ar("replaceGTE0",r,e),r.trim().replace(Hi[e.includePrerelease?di.GTE0PRE:di.GTE0],"")),GQ=r=>(e,t,n,i,o,l,a,s,u,c,f,h)=>(mi(n)?t="":mi(i)?t=`>=${n}.0.0${r?"-0":""}`:mi(o)?t=`>=${n}.${i}.0${r?"-0":""}`:l?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,mi(u)?s="":mi(c)?s=`<${+u+1}.0.0-0`:mi(f)?s=`<${u}.${+c+1}.0-0`:h?s=`<=${u}.${c}.${f}-${h}`:r?s=`<${u}.${c}.${+f+1}-0`:s=`<=${s}`,`${t} ${s}`.trim()),YQ=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(Ar(r[n].semver),r[n].semver!==Sv.ANY&&r[n].semver.prerelease.length>0){let i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Fh=ae((k6e,RT)=>{"use strict";var jh=Symbol("SemVer ANY"),Pv=class r{static get ANY(){return jh}constructor(e,t){if(t=MT(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Av("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===jh?this.value="":this.value=this.operator+this.semver.version,Av("comp",this)}parse(e){let t=this.options.loose?AT[PT.COMPARATORLOOSE]:AT[PT.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new TT(n[2],this.options.loose):this.semver=jh}toString(){return this.value}test(e){if(Av("Comparator.test",e,this.options.loose),this.semver===jh||e===jh)return!0;if(typeof e=="string")try{e=new TT(e,this.options)}catch(t){return!1}return Mv(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new OT(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new OT(this.value,t).test(e.semver):(t=MT(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Mv(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Mv(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};RT.exports=Pv;var MT=H8(),{safeRe:AT,t:PT}=h9(),Mv=kv(),Av=Dh(),TT=Jn(),OT=Do()});var xh=ae((L6e,IT)=>{"use strict";var KQ=Do(),JQ=(r,e,t)=>{try{e=new KQ(e,t)}catch(n){return!1}return e.test(r)};IT.exports=JQ});var HT=ae((E6e,zT)=>{"use strict";var XQ=Do(),QQ=(r,e)=>new XQ(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));zT.exports=QQ});var VT=ae((S6e,NT)=>{"use strict";var $Q=Jn(),e$=Do(),t$=(r,e,t)=>{let n=null,i=null,o=null;try{o=new e$(e,t)}catch(l){return null}return r.forEach(l=>{o.test(l)&&(!n||i.compare(l)===-1)&&(n=l,i=new $Q(n,t))}),n};NT.exports=t$});var DT=ae((M6e,BT)=>{"use strict";var r$=Jn(),n$=Do(),i$=(r,e,t)=>{let n=null,i=null,o=null;try{o=new n$(e,t)}catch(l){return null}return r.forEach(l=>{o.test(l)&&(!n||i.compare(l)===1)&&(n=l,i=new r$(n,t))}),n};BT.exports=i$});var jT=ae((A6e,FT)=>{"use strict";var Tv=Jn(),o$=Do(),ZT=Zh(),l$=(r,e)=>{r=new o$(r,e);let t=new Tv("0.0.0");if(r.test(t)||(t=new Tv("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let i=r.set[n],o=null;i.forEach(l=>{let a=new Tv(l.semver.version);switch(l.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||ZT(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),o&&(!t||ZT(t,o))&&(t=o)}return t&&r.test(t)?t:null};FT.exports=l$});var qT=ae((P6e,xT)=>{"use strict";var a$=Do(),s$=(r,e)=>{try{return new a$(r,e).range||"*"}catch(t){return null}};xT.exports=s$});var W8=ae((T6e,YT)=>{"use strict";var u$=Jn(),GT=Fh(),{ANY:c$}=GT,f$=Do(),h$=xh(),UT=Zh(),WT=F8(),d$=x8(),m$=j8(),g$=(r,e,t,n)=>{r=new u$(r,n),e=new f$(e,n);let i,o,l,a,s;switch(t){case">":i=UT,o=d$,l=WT,a=">",s=">=";break;case"<":i=WT,o=m$,l=UT,a="<",s="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(h$(r,e,n))return!1;for(let u=0;u<e.set.length;++u){let c=e.set[u],f=null,h=null;if(c.forEach(d=>{d.semver===c$&&(d=new GT(">=0.0.0")),f=f||d,h=h||d,i(d.semver,f.semver,n)?f=d:l(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===s||(!h.operator||h.operator===a)&&o(r,h.semver))return!1;if(h.operator===s&&l(r,h.semver))return!1}return!0};YT.exports=g$});var JT=ae((O6e,KT)=>{"use strict";var p$=W8(),_$=(r,e,t)=>p$(r,e,">",t);KT.exports=_$});var QT=ae((R6e,XT)=>{"use strict";var b$=W8(),v$=(r,e,t)=>b$(r,e,"<",t);XT.exports=v$});var tO=ae((I6e,eO)=>{"use strict";var $T=Do(),C$=(r,e,t)=>(r=new $T(r,t),e=new $T(e,t),r.intersects(e,t));eO.exports=C$});var nO=ae((z6e,rO)=>{"use strict";var w$=xh(),y$=Bo();rO.exports=(r,e,t)=>{let n=[],i=null,o=null,l=r.sort((c,f)=>y$(c,f,t));for(let c of l)w$(c,e,t)?(o=c,i||(i=c)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[c,f]of n)c===f?a.push(c):!f&&c===l[0]?a.push("*"):f?c===l[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);let s=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return s.length<u.length?s:e}});var uO=ae((H6e,sO)=>{"use strict";var iO=Do(),Rv=Fh(),{ANY:Ov}=Rv,qh=xh(),Iv=Bo(),k$=(r,e,t={})=>{if(r===e)return!0;r=new iO(r,t),e=new iO(e,t);let n=!1;e:for(let i of r.set){for(let o of e.set){let l=E$(i,o,t);if(n=n||l!==null,l)continue e}if(n)return!1}return!0},L$=[new Rv(">=0.0.0-0")],oO=[new Rv(">=0.0.0")],E$=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===Ov){if(e.length===1&&e[0].semver===Ov)return!0;t.includePrerelease?r=L$:r=oO}if(e.length===1&&e[0].semver===Ov){if(t.includePrerelease)return!0;e=oO}let n=new Set,i,o;for(let d of r)d.operator===">"||d.operator===">="?i=lO(i,d,t):d.operator==="<"||d.operator==="<="?o=aO(o,d,t):n.add(d.semver);if(n.size>1)return null;let l;if(i&&o){if(l=Iv(i.semver,o.semver,t),l>0)return null;if(l===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let d of n){if(i&&!qh(d,String(i),t)||o&&!qh(d,String(o),t))return null;for(let p of e)if(!qh(d,String(p),t))return!1;return!0}let a,s,u,c,f=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(c=c||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=lO(i,d,t),a===d&&a!==i)return!1}else if(i.operator===">="&&!qh(i.semver,String(d),t))return!1}if(o){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(s=aO(o,d,t),s===d&&s!==o)return!1}else if(o.operator==="<="&&!qh(o.semver,String(d),t))return!1}if(!d.operator&&(o||i)&&l!==0)return!1}return!(i&&u&&!o&&l!==0||o&&c&&!i&&l!==0||h||f)},lO=(r,e,t)=>{if(!r)return e;let n=Iv(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},aO=(r,e,t)=>{if(!r)return e;let n=Iv(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};sO.exports=k$});var dO=ae((N6e,hO)=>{"use strict";var zv=h9(),cO=Bh(),S$=Jn(),fO=vv(),M$=H0(),A$=VP(),P$=DP(),T$=jP(),O$=UP(),R$=GP(),I$=KP(),z$=XP(),H$=$P(),N$=Bo(),V$=nT(),B$=oT(),D$=Z8(),Z$=uT(),F$=fT(),j$=Zh(),x$=F8(),q$=wv(),U$=yv(),W$=j8(),G$=x8(),Y$=kv(),K$=CT(),J$=Fh(),X$=Do(),Q$=xh(),$$=HT(),eee=VT(),tee=DT(),ree=jT(),nee=qT(),iee=W8(),oee=JT(),lee=QT(),aee=tO(),see=nO(),uee=uO();hO.exports={parse:M$,valid:A$,clean:P$,inc:T$,diff:O$,major:R$,minor:I$,patch:z$,prerelease:H$,compare:N$,rcompare:V$,compareLoose:B$,compareBuild:D$,sort:Z$,rsort:F$,gt:j$,lt:x$,eq:q$,neq:U$,gte:W$,lte:G$,cmp:Y$,coerce:K$,Comparator:J$,Range:X$,satisfies:Q$,toComparators:$$,maxSatisfying:eee,minSatisfying:tee,minVersion:ree,validRange:nee,outside:iee,gtr:oee,ltr:lee,intersects:aee,simplifyRange:see,subset:uee,SemVer:S$,re:zv.re,src:zv.src,tokens:zv.t,SEMVER_SPEC_VERSION:cO.SEMVER_SPEC_VERSION,RELEASE_TYPES:cO.RELEASE_TYPES,compareIdentifiers:fO.compareIdentifiers,rcompareIdentifiers:fO.rcompareIdentifiers}});function Ls(r){if(!r||r.split("/").length>2||r.startsWith("/")||r.endsWith("/")||r.split(":").length>2)throw new Error(`Invalid identifier format: ${r}`);let[e,t]=r.split(":"),n=t||"latest";if(e.includes("/")){let[i,o]=e.split("/",2);if(!i||!o)throw new Error(`Invalid identifier format: ${r}`);return[i,o,n]}else{if(!e)throw new Error(`Invalid identifier format: ${r}`);return["-",e,n]}}var cee,mO=ce(()=>{cee=wr(dO(),1)});async function Pt(r,e,t){let n;if(r.ok){t&&(n=await r.text());return}n=await r.text();let i=`Failed to ${e}. Received status [${r.status}]: ${r.statusText}. Server response: ${n}`;if(r.status===409)throw new Hv(i);let o=new Error(i);throw o.status=r.status,o}var Hv,gO=ce(()=>{Hv=class extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}});function dee(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function G8(r){return hee.encode(r)}function Ni(r,e,t,n,i){var o;try{let l=JSON.stringify(r,t,n);return G8(l)}catch(l){if(!((o=l.message)!=null&&o.includes("Converting circular structure to JSON")))return console.warn(`[WARNING]: LangSmith received unserializable value.${e?`
Context: ${e}`:""}`),G8("[Unserializable]");console.warn(`[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. ${e?`
Context: ${e}`:""}`),typeof i=="undefined"&&(i=dee()),Vv(r,"",0,[],void 0,0,i);let a;try{m9.length===0?a=JSON.stringify(r,t,n):a=JSON.stringify(r,mee(t),n)}catch(s){return G8("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Y8.length!==0;){let s=Y8.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return G8(a)}}function Nv(r,e,t,n){var i=Object.getOwnPropertyDescriptor(n,t);i.get!==void 0?i.configurable?(Object.defineProperty(n,t,{value:r}),Y8.push([n,t,e,i])):m9.push([e,t,r]):(n[t]=r,Y8.push([n,t,e]))}function Vv(r,e,t,n,i,o,l){o+=1;var a;if(typeof r=="object"&&r!==null){for(a=0;a<n.length;a++)if(n[a]===r){Nv(fee,r,e,i);return}if(typeof l.depthLimit!="undefined"&&o>l.depthLimit){Nv(pO,r,e,i);return}if(typeof l.edgesLimit!="undefined"&&t+1>l.edgesLimit){Nv(pO,r,e,i);return}if(n.push(r),Array.isArray(r))for(a=0;a<r.length;a++)Vv(r[a],a,a,n,r,o,l);else{var s=Object.keys(r);for(a=0;a<s.length;a++){var u=s[a];Vv(r[u],u,a,n,r,o,l)}}n.pop()}}function mee(r){return r=typeof r!="undefined"?r:function(e,t){return t},function(e,t){if(m9.length>0)for(var n=0;n<m9.length;n++){var i=m9[n];if(i[1]===e&&i[0]===t){t=i[2],m9.splice(n,1);break}}return r.call(this,e,t)}}var pO,fee,Y8,m9,hee,_O=ce(()=>{pO="[...]",fee={result:"[Circular]"},Y8=[],m9=[],hee=new TextEncoder});function bO(r){var o,l;let e=X8(),t=wO(),n=(o=r.extra)!=null?o:{},i=n.metadata;return r.extra={...n,runtime:{...e,...n==null?void 0:n.runtime},metadata:{...t,...t.revision_id||r.revision_id?{revision_id:(l=r.revision_id)!=null?l:t.revision_id}:{},...i}},r}async function _ee(r){let e=[];for await(let t of r)e.push(t);return e}function Bv(r){if(r!==void 0)return r.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function vO(r){return typeof r=="number"?Number(r.toFixed(4)):r}function CO(r){return"dataset_id"in r||"dataset_name"in r}var gee,pee,bee,Dv,vee,Cee,N0,Zv=ce(()=>{W1();wP();yP();Nh();J8();kP();pv();mO();gO();R8();_O();gee=r=>{var n;let e=(n=r==null?void 0:r.toString())!=null?n:zi("TRACING_SAMPLING_RATE");if(e===void 0)return;let t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t},pee=r=>{let t=r.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"};bee=async r=>{var e;if((r==null?void 0:r.status)===429){let t=parseInt((e=r.headers.get("retry-after"))!=null?e:"30",10)*1e3;if(t>0)return await new Promise(n=>setTimeout(n,t)),!0}return!1};Dv=class{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t,n=new Promise(o=>{t=o}),i=Ni(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:t,itemPromise:n,size:i}),this.sizeBytes+=i,n}pop(e){var i,o;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");let t=[],n=0;for(;n+((o=(i=this.peek())==null?void 0:i.size)!=null?o:0)<e&&this.items.length>0;){let l=this.items.shift();l&&(t.push(l),n+=l.size,this.sizeBytes-=l.size)}if(t.length===0&&this.items.length>0){let l=this.items.shift();t.push(l),n+=l.size,this.sizeBytes-=l.size}return[t.map(l=>({action:l.action,item:l.payload})),()=>t.forEach(l=>l.itemPromiseResolve())]}},vee=20971520,Cee=2500,N0=class r{constructor(e={}){var n,i,o,l,a,s,u,c,f,h,d,p,v,b,C,L,S,P,y;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new Dv}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:fa("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:fa("LANGSMITH_DEBUG")==="true"});let t=r.getDefaultClientConfig();if(this.tracingSampleRate=gee(e.tracingSamplingRate),this.apiUrl=(i=Bv((n=e.apiUrl)!=null?n:t.apiUrl))!=null?i:"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=Bv((o=e.apiKey)!=null?o:t.apiKey),this.webUrl=Bv((l=e.webUrl)!=null?l:t.webUrl),(a=this.webUrl)!=null&&a.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=(s=e.timeout_ms)!=null?s:9e4,this.caller=new Vh({...(u=e.callerOptions)!=null?u:{},debug:(c=e.debug)!=null?c:this.debug}),this.traceBatchConcurrency=(f=e.traceBatchConcurrency)!=null?f:this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=(h=e.debug)!=null?h:this.debug,this.batchIngestCaller=new Vh({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...(d=e.callerOptions)!=null?d:{},onFailedResponseHook:bee,debug:(p=e.debug)!=null?p:this.debug}),this.hideInputs=(b=(v=e.hideInputs)!=null?v:e.anonymizer)!=null?b:t.hideInputs,this.hideOutputs=(L=(C=e.hideOutputs)!=null?C:e.anonymizer)!=null?L:t.hideOutputs,this.autoBatchTracing=(S=e.autoBatchTracing)!=null?S:this.autoBatchTracing,this.blockOnRootRunFinalization=(P=e.blockOnRootRunFinalization)!=null?P:this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=(y=e.manualFlushMode)!=null?y:this.manualFlushMode}static getDefaultClientConfig(){var o;let e=zi("API_KEY"),t=(o=zi("ENDPOINT"))!=null?o:"https://api.smith.langchain.com",n=zi("HIDE_INPUTS")==="true",i=zi("HIDE_OUTPUTS")==="true";return{apiUrl:t,apiKey:e,webUrl:void 0,hideInputs:n,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:pee(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let e={"User-Agent":`langsmith-js/${K8}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){let t={...e};return t.inputs!==void 0&&(t.inputs=await this.processInputs(t.inputs)),t.outputs!==void 0&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){var l;let n=(l=t==null?void 0:t.toString())!=null?l:"",i=`${this.apiUrl}${e}?${n}`,o=await this.caller.call($e(this.debug),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(o,`Failed to fetch ${e}`),o}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,n){let i=Number(t.get("offset"))||0,o=Number(t.get("limit"))||100;for(;;){t.set("offset",String(i)),t.set("limit",String(o));let l=`${this.apiUrl}${e}?${t}`,a=await this.caller.call($e(this.debug),l,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(a,`Failed to fetch ${e}`);let s=n?n(await a.json()):await a.json();if(s.length===0||(yield s,s.length<o))break;i+=s.length}}async*_getCursorPaginatedList(e,t=null,n="POST",i="runs"){let o=t?{...t}:{};for(;;){let a=await(await this.caller.call($e(this.debug),`${this.apiUrl}${e}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)})).json();if(!a||!a[i])break;yield a[i];let s=a.cursors;if(!s||!s.next)break;o.cursor=s.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){var n;if(this.tracingSampleRate===void 0)return e;if(t){let i=[];for(let o of e)this.filteredPostUuids.has(o.id)?this.filteredPostUuids.delete(o.id):i.push(o);return i}else{let i=[];for(let o of e){let l=(n=o.trace_id)!=null?n:o.id;this.filteredPostUuids.has(l)||(o.id===l?this._shouldSample()?i.push(o):this.filteredPostUuids.add(l):i.push(o))}return i}}async _getBatchSizeLimitBytes(){var t,n,i;let e=await this._ensureServerInfo();return(i=(n=this.batchSizeBytesLimit)!=null?n:(t=e.batch_ingest_config)==null?void 0:t.size_limit_bytes)!=null?i:vee}async _getMultiPartSupport(){var t,n;return(n=(t=(await this._ensureServerInfo()).instance_flags)==null?void 0:t.dataset_examples_multipart_enabled)!=null?n:!1}drainAutoBatchQueue(e){let t=[];for(;this.autoBatchQueue.items.length>0;){let[n,i]=this.autoBatchQueue.pop(e);if(!n.length){i();break}let o=this._processBatch(n,i).catch(console.error);t.push(o)}return Promise.all(t)}async _processBatch(e,t){var n;if(!e.length){t();return}try{let i={runCreates:e.filter(l=>l.action==="create").map(l=>l.item),runUpdates:e.filter(l=>l.action==="update").map(l=>l.item)},o=await this._ensureServerInfo();(n=o==null?void 0:o.batch_ingest_config)!=null&&n.use_multipart_endpoint?await this.multipartIngestRuns(i):await this.batchIngestRuns(i)}finally{t()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=bO(e.item));let t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;let n=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>n&&this.drainAutoBatchQueue(n),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(n)},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){let e=await this.caller.call($e(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(Cee),...this.fetchOptions});await Pt(e,"get server info");let t=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(t,null,2)+`
`),t}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{var e;if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(t){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${t.status}. Falling back to batch operations and default limits.`)}return(e=this._serverInfo)!=null?e:{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){let e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){var a;if(!this._filterForSampling([e]).length)return;let t={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;let i=await this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:(a=e.start_time)!=null?a:Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}let o=bO(i),l=await this.caller.call($e(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:Ni(o,`Creating run with id: ${o.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(l,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:t}){var a,s;if(e===void 0&&t===void 0)return;let n=await Promise.all((a=e==null?void 0:e.map(u=>this.prepareRunCreateOrUpdateInputs(u)))!=null?a:[]),i=await Promise.all((s=t==null?void 0:t.map(u=>this.prepareRunCreateOrUpdateInputs(u)))!=null?s:[]);if(n.length>0&&i.length>0){let u=n.reduce((f,h)=>(h.id&&(f[h.id]=h),f),{}),c=[];for(let f of i)f.id!==void 0&&u[f.id]?u[f.id]={...u[f.id],...f}:c.push(f);n=Object.values(u),i=c}let o={post:n,patch:i};if(!o.post.length&&!o.patch.length)return;let l={post:[],patch:[]};for(let u of["post","patch"]){let c=u,f=o[c].reverse(),h=f.pop();for(;h!==void 0;)l[c].push(h),h=f.pop()}if(l.post.length>0||l.patch.length>0){let u=l.post.map(c=>c.id).concat(l.patch.map(c=>c.id)).join(",");await this._postBatchIngestRuns(Ni(l,`Ingesting runs with ids: ${u}`))}}async _postBatchIngestRuns(e){let t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},n=await this.batchIngestCaller.call($e(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(n,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;let n={},i=[];for(let c of e!=null?e:[]){let f=await this.prepareRunCreateOrUpdateInputs(c);f.id!==void 0&&f.attachments!==void 0&&(n[f.id]=f.attachments),delete f.attachments,i.push(f)}let o=[];for(let c of t!=null?t:[])o.push(await this.prepareRunCreateOrUpdateInputs(c));if(i.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(o.find(c=>c.trace_id===void 0||c.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(i.length>0&&o.length>0){let c=i.reduce((h,d)=>(d.id&&(h[d.id]=d),h),{}),f=[];for(let h of o)h.id!==void 0&&c[h.id]?c[h.id]={...c[h.id],...h}:f.push(h);i=Object.values(c),o=f}if(i.length===0&&o.length===0)return;let s=[],u=[];for(let[c,f]of[["post",i],["patch",o]])for(let h of f){let{inputs:d,outputs:p,events:v,attachments:b,...C}=h,L={inputs:d,outputs:p,events:v},S=Ni(C,`Serializing for multipart ingestion of run with id: ${C.id}`);u.push({name:`${c}.${C.id}`,payload:new Blob([S],{type:`application/json; length=${S.length}`})});for(let[P,y]of Object.entries(L)){if(y===void 0)continue;let z=Ni(y,`Serializing ${P} for multipart ingestion of run with id: ${C.id}`);u.push({name:`${c}.${C.id}.${P}`,payload:new Blob([z],{type:`application/json; length=${z.length}`})})}if(C.id!==void 0){let P=n[C.id];if(P){delete n[C.id];for(let[y,z]of Object.entries(P)){let G,J;if(Array.isArray(z)?[G,J]=z:(G=z.mimeType,J=z.data),y.includes(".")){console.warn(`Skipping attachment '${y}' for run ${C.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}u.push({name:`attachment.${C.id}.${y}`,payload:new Blob([J],{type:`${G}; length=${J.byteLength}`})})}}}s.push(`trace=${C.trace_id},id=${C.id}`)}await this._sendMultipartRequest(u,s.join("; "))}async _createNodeFetchBody(e,t){let n=[];for(let l of e)n.push(new Blob([`--${t}\r
`])),n.push(new Blob([`Content-Disposition: form-data; name="${l.name}"\r
`,`Content-Type: ${l.payload.type}\r
\r
`])),n.push(l.payload),n.push(new Blob([`\r
`]));return n.push(new Blob([`--${t}--\r
`])),await new Blob(n).arrayBuffer()}async _createMultipartStream(e,t){let n=new TextEncoder;return new ReadableStream({async start(o){let l=async a=>{typeof a=="string"?o.enqueue(n.encode(a)):o.enqueue(a)};for(let a of e){await l(`--${t}\r
`),await l(`Content-Disposition: form-data; name="${a.name}"\r
`),await l(`Content-Type: ${a.payload.type}\r
\r
`);let u=a.payload.stream().getReader();try{let c;for(;!(c=await u.read()).done;)o.enqueue(c.value)}finally{u.releaseLock()}await l(`\r
`)}await l(`--${t}--\r
`),o.close()}})}async _sendMultipartRequest(e,t){try{let n="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),i=await(vP()?this._createNodeFetchBody(e,n):this._createMultipartStream(e,n)),o=await this.batchIngestCaller.call($e(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${n}`},body:i,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(o,"ingest multipart runs",!0)}catch(n){console.warn(`${n.message.trim()}

Context: ${t}`)}}async updateRun(e,t){Lt(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));let n={...t,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){if(t.end_time!==void 0&&n.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:n}).catch(console.error);return}else this.processRunOperation({action:"update",item:n}).catch(console.error);return}let i={...this.headers,"Content-Type":"application/json"},o=await this.caller.call($e(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:Ni(t,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(o,"update run",!0)}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){Lt(e);let n=await this._get(`/runs/${e}`);return t&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:t,projectOpts:n}){if(t!==void 0){let i;t.session_id?i=t.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:zi("PROJECT")||"default"})).id;let o=await this._getTenantId();return`${this.getHostUrl()}/o/${o}/projects/p/${i}/r/${t.id}?poll=true`}else if(e!==void 0){let i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){let t=await _ee(this.listRuns({id:e.child_run_ids})),n={},i={};t.sort((o,l)=>{var a,s;return((a=o==null?void 0:o.dotted_order)!=null?a:"").localeCompare((s=l==null?void 0:l.dotted_order)!=null?s:"")});for(let o of t){if(o.parent_run_id===null||o.parent_run_id===void 0)throw new Error(`Child run ${o.id} has no parent`);o.parent_run_id in n||(n[o.parent_run_id]=[]),n[o.parent_run_id].push(o),i[o.id]=o}e.child_runs=n[e.id]||[];for(let o in n)o!==e.id&&(i[o].child_runs=n[o]);return e}async*listRuns(e){let{projectId:t,projectName:n,parentRunId:i,traceId:o,referenceExampleId:l,startTime:a,executionOrder:s,isRoot:u,runType:c,error:f,id:h,query:d,filter:p,traceFilter:v,treeFilter:b,limit:C,select:L,order:S}=e,P=[];if(t&&(P=Array.isArray(t)?t:[t]),n){let J=Array.isArray(n)?n:[n],te=await Promise.all(J.map(ne=>this.readProject({projectName:ne}).then(Q=>Q.id)));P.push(...te)}let y=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],z={session:P.length?P:null,run_type:c,reference_example:l,query:d,filter:p,trace_filter:v,tree_filter:b,execution_order:s,parent_run:i,start_time:a?a.toISOString():null,error:f,id:h,limit:C,trace:o,select:L||y,is_root:u,order:S},G=0;for await(let J of this._getCursorPaginatedList("/runs/query",z))if(C){if(G>=C)break;if(J.length+G>C){yield*J.slice(0,C-G);break}G+=J.length,yield*J}else yield*J}async*listGroupRuns(e){let{projectId:t,projectName:n,groupBy:i,filter:o,startTime:l,endTime:a,limit:s,offset:u}=e,f={session_id:t||(await this.readProject({projectName:n})).id,group_by:i,filter:o,start_time:l?l.toISOString():null,end_time:a?a.toISOString():null,limit:Number(s)||100},h=Number(u)||0,d="/runs/group",p=`${this.apiUrl}${d}`;for(;;){let v={...f,offset:h},b=Object.fromEntries(Object.entries(v).filter(([y,z])=>z!==void 0)),C=await this.caller.call($e(),p,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(C,`Failed to fetch ${d}`);let L=await C.json(),{groups:S,total:P}=L;if(S.length===0)break;for(let y of S)yield y;if(h+=S.length,h>=P)break}}async getRunStats({id:e,trace:t,parentRun:n,runType:i,projectNames:o,projectIds:l,referenceExampleIds:a,startTime:s,endTime:u,error:c,query:f,filter:h,traceFilter:d,treeFilter:p,isRoot:v,dataSourceType:b}){let C=l||[];o&&(C=[...l||[],...await Promise.all(o.map(z=>this.readProject({projectName:z}).then(G=>G.id)))]);let S=Object.fromEntries(Object.entries({id:e,trace:t,parent_run:n,run_type:i,session:C,reference_example:a,start_time:s,end_time:u,error:c,query:f,filter:h,trace_filter:d,tree_filter:p,is_root:v,data_source_type:b}).filter(([z,G])=>G!==void 0));return await(await this.caller.call($e(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(S),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:t}={}){let n={run_id:e,share_token:t||Yr()};Lt(e);let o=await(await this.caller.call($e(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(o===null||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(e){Lt(e);let t=await this.caller.call($e(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(t,"unshare run",!0)}async readRunSharedLink(e){Lt(e);let n=await(await this.caller.call($e(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){let n=new URLSearchParams({share_token:e});if(t!==void 0)for(let l of t)n.append("id",l);return Lt(e),await(await this.caller.call($e(this.debug),`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),Lt(e);let i=await(await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);let n={dataset_id:e};Lt(e);let o=await(await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(e){Lt(e);let t=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(t,"unshare dataset",!0)}async readSharedDataset(e){return Lt(e),await(await this.caller.call($e(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,t){let n={};t!=null&&t.exampleIds&&(n.id=t.exampleIds);let i=new URLSearchParams;Object.entries(n).forEach(([a,s])=>{Array.isArray(s)?s.forEach(u=>i.append(a,u)):i.append(a,s)});let o=await this.caller.call($e(this.debug),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),l=await o.json();if(!o.ok)throw"detail"in l?new Error(`Failed to list shared examples.
Status: ${o.status}
Message: ${Array.isArray(l.detail)?l.detail.join(`
`):"Unspecified error"}`):new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`);return l.map(a=>({...a,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:n=null,upsert:i=!1,projectExtra:o=null,referenceDatasetId:l=null}){let a=i?"?upsert=true":"",s=`${this.apiUrl}/sessions${a}`,u=o||{};n&&(u.metadata=n);let c={name:e,extra:u,description:t};l!==null&&(c.reference_dataset_id=l);let f=await this.caller.call($e(this.debug),s,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(f,"create project"),await f.json()}async updateProject(e,{name:t=null,description:n=null,metadata:i=null,projectExtra:o=null,endTime:l=null}){let a=`${this.apiUrl}/sessions/${e}`,s=o;i&&(s={...s||{},metadata:i});let u={name:t,extra:s,description:n,end_time:l?new Date(l).toISOString():null},c=await this.caller.call($e(this.debug),a,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:t}){let n="/sessions",i=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Lt(e),n+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide projectName or projectId");let o=await this.caller.call($e(this.debug),`${this.apiUrl}${n}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{let l=await o.json();return o.ok?Array.isArray(l)?l.length>0:!0:!1}catch(l){return!1}}async readProject({projectId:e,projectName:t,includeStats:n}){let i="/sessions",o=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Lt(e),i+=`/${e}`;else if(t!==void 0)o.append("name",t);else throw new Error("Must provide projectName or projectId");n!==void 0&&o.append("include_stats",n.toString());let l=await this._get(i,o),a;if(Array.isArray(l)){if(l.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);a=l[0]}else a=l;return a}async getProjectUrl({projectId:e,projectName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either projectName or projectId");let n=await this.readProject({projectId:e,projectName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${n.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");let n=await this.readDataset({datasetId:e,datasetName:t}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:n,referenceDatasetId:i,referenceDatasetName:o,referenceFree:l,metadata:a}={}){let s=new URLSearchParams;if(e!==void 0)for(let u of e)s.append("id",u);if(t!==void 0&&s.append("name",t),n!==void 0&&s.append("name_contains",n),i!==void 0)s.append("reference_dataset",i);else if(o!==void 0){let u=await this.readDataset({datasetName:o});s.append("reference_dataset",u.id)}l!==void 0&&s.append("reference_free",l.toString()),a!==void 0&&s.append("metadata",JSON.stringify(a));for await(let u of this._getPaginated("/sessions",s))yield*u}async deleteProject({projectId:e,projectName:t}){let n;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:t})).id:n=e,Lt(n);let i=await this.caller.call($e(this.debug),`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(i,`delete session ${n} (${t})`,!0)}async uploadCsv({csvFile:e,fileName:t,inputKeys:n,outputKeys:i,description:o,dataType:l,name:a}){let s=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",e,t),n.forEach(h=>{u.append("input_keys",h)}),i.forEach(h=>{u.append("output_keys",h)}),o&&u.append("description",o),l&&u.append("data_type",l),a&&u.append("name",a);let c=await this.caller.call($e(this.debug),s,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(c,"upload CSV"),await c.json()}async createDataset(e,{description:t,dataType:n,inputsSchema:i,outputsSchema:o,metadata:l}={}){let a={name:e,description:t,extra:l?{metadata:l}:void 0};n&&(a.data_type=n),i&&(a.inputs_schema_definition=i),o&&(a.outputs_schema_definition=o);let s=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(s,"create dataset"),await s.json()}async readDataset({datasetId:e,datasetName:t}){let n="/datasets",i=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Lt(e),n+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide datasetName or datasetId");let o=await this._get(n,i),l;if(Array.isArray(o)){if(o.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);l=o[0]}else l=o;return l}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:n,toVersion:i}){let o=e;if(o===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:t})).id);let l=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,l)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){let n="/datasets";if(e===void 0)if(t!==void 0)e=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${n}/${e}/openai_ft`)).text()).trim().split(`
`).map(a=>JSON.parse(a))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:n,datasetName:i,datasetNameContains:o,metadata:l}={}){let a="/datasets",s=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(n!==void 0)for(let u of n)s.append("id",u);i!==void 0&&s.append("name",i),o!==void 0&&s.append("name_contains",o),l!==void 0&&s.append("metadata",JSON.stringify(l));for await(let u of this._getPaginated(a,s))yield*u}async updateDataset(e){let{datasetId:t,datasetName:n,...i}=e;if(!t&&!n)throw new Error("Must provide either datasetName or datasetId");let o=t!=null?t:(await this.readDataset({datasetName:n})).id;Lt(o);let l=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(l,"update dataset"),await l.json()}async updateDatasetTag(e){let{datasetId:t,datasetName:n,asOf:i,tag:o}=e;if(!t&&!n)throw new Error("Must provide either datasetName or datasetId");let l=t!=null?t:(await this.readDataset({datasetName:n})).id;Lt(l);let a=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${l}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof i=="string"?i:i.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(a,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:t}){let n="/datasets",i=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(i=(await this.readDataset({datasetName:t})).id),i!==void 0)Lt(i),n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");let o=await this.caller.call($e(this.debug),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(o,`delete ${n}`),await o.json()}async indexDataset({datasetId:e,datasetName:t,tag:n}){let i=e;if(!i&&!t)throw new Error("Must provide either datasetName or datasetId");if(i&&t)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:t})).id),Lt(i);let o={tag:n},l=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(l,"index dataset"),await l.json()}async similarExamples(e,t,n,{filter:i}={}){let o={limit:n,inputs:e};i!==void 0&&(o.filter=i),Lt(t);let l=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(l,"fetch similar examples"),(await l.json()).examples}async createExample(e,t,n){var c,f;if(CO(e)&&(t!==void 0||n!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let i=t?n==null?void 0:n.datasetId:e.dataset_id,o=t?n==null?void 0:n.datasetName:e.dataset_name;if(i===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:o})).id);let l=(t?n==null?void 0:n.createdAt:e.created_at)||new Date,a;CO(e)?a=e:a={inputs:e,outputs:t,created_at:l==null?void 0:l.toISOString(),id:n==null?void 0:n.exampleId,metadata:n==null?void 0:n.metadata,split:n==null?void 0:n.split,source_run_id:n==null?void 0:n.sourceRunId,use_source_run_io:n==null?void 0:n.useSourceRunIO,use_source_run_attachments:n==null?void 0:n.useSourceRunAttachments,attachments:n==null?void 0:n.attachments};let s=await this._uploadExamplesMultipart(i,[a]);return await this.readExample((f=(c=s.example_ids)==null?void 0:c[0])!=null?f:Yr())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];let L=e,S=L[0].dataset_id,P=L[0].dataset_name;if(S===void 0&&P===void 0)throw new Error("Must provide either datasetName or datasetId");if(S!==void 0&&P!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");S===void 0&&(S=(await this.readDataset({datasetName:P})).id);let y=await this._uploadExamplesMultipart(S,L);return await Promise.all(y.example_ids.map(G=>this.readExample(G)))}let{inputs:t,outputs:n,metadata:i,splits:o,sourceRunIds:l,useSourceRunIOs:a,useSourceRunAttachments:s,attachments:u,exampleIds:c,datasetId:f,datasetName:h}=e;if(t===void 0)throw new Error("Must provide inputs when using legacy parameters");let d=f,p=h;if(d===void 0&&p===void 0)throw new Error("Must provide either datasetName or datasetId");if(d!==void 0&&p!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");d===void 0&&(d=(await this.readDataset({datasetName:p})).id);let v=t.map((L,S)=>({dataset_id:d,inputs:L,outputs:n==null?void 0:n[S],metadata:i==null?void 0:i[S],split:o==null?void 0:o[S],id:c==null?void 0:c[S],attachments:u==null?void 0:u[S],source_run_id:l==null?void 0:l[S],use_source_run_io:a==null?void 0:a[S],use_source_run_attachments:s==null?void 0:s[S]})),b=await this._uploadExamplesMultipart(d,v);return await Promise.all(b.example_ids.map(L=>this.readExample(L)))}async createLLMExample(e,t,n){return this.createExample({input:e},{output:t},n)}async createChatExample(e,t,n){let i=e.map(l=>mv(l)?gv(l):l),o=mv(t)?gv(t):t;return this.createExample({input:i},{output:o},n)}async readExample(e){Lt(e);let t=`/examples/${e}`,n=await this._get(t),{attachment_urls:i,...o}=n,l=o;return i&&(l.attachments=Object.entries(i).reduce((a,[s,u])=>(a[s.slice(11)]={presigned_url:u.presigned_url,mime_type:u.mime_type},a),{})),l}async*listExamples({datasetId:e,datasetName:t,exampleIds:n,asOf:i,splits:o,inlineS3Urls:l,metadata:a,limit:s,offset:u,filter:c,includeAttachments:f}={}){let h;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)h=e;else if(t!==void 0)h=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");let d=new URLSearchParams({dataset:h}),p=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;p&&d.append("as_of",p);let v=l!=null?l:!0;if(d.append("inline_s3_urls",v.toString()),n!==void 0)for(let C of n)d.append("id",C);if(o!==void 0)for(let C of o)d.append("splits",C);if(a!==void 0){let C=JSON.stringify(a);d.append("metadata",C)}s!==void 0&&d.append("limit",s.toString()),u!==void 0&&d.append("offset",u.toString()),c!==void 0&&d.append("filter",c),f===!0&&["attachment_urls","outputs","metadata"].forEach(C=>d.append("select",C));let b=0;for await(let C of this._getPaginated("/examples",d)){for(let L of C){let{attachment_urls:S,...P}=L,y=P;S&&(y.attachments=Object.entries(S).reduce((z,[G,J])=>(z[G.slice(11)]={presigned_url:J.presigned_url,mime_type:J.mime_type||void 0},z),{})),yield y,b++}if(s!==void 0&&b>=s)break}}async deleteExample(e){Lt(e);let t=`/examples/${e}`,n=await this.caller.call($e(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(n,`delete ${t}`),await n.json()}async updateExample(e,t){let n;t?n=e:n=e.id,Lt(n);let i;t?i={id:n,...t}:i=e;let o;return i.dataset_id!==void 0?o=i.dataset_id:o=(await this.readExample(n)).dataset_id,this._updateExamplesMultipart(o,[i])}async updateExamples(e){let t;return e[0].dataset_id===void 0?t=(await this.readExample(e[0].id)).dataset_id:t=e[0].dataset_id,this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:n,tag:i}){let o;if(e?o=e:o=(await this.readDataset({datasetName:t})).id,Lt(o),n&&i||!n&&!i)throw new Error("Exactly one of asOf and tag must be specified.");let l=new URLSearchParams;n!==void 0&&l.append("as_of",typeof n=="string"?n:n.toISOString()),i!==void 0&&l.append("tag",i);let a=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${o}/version?${l.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(a,"read dataset version"),await a.json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:n}){let i;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:t})).id:i=e,Lt(i);let o=new URLSearchParams,l=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;return l&&o.append("as_of",l),await this._get(`/datasets/${i}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:n,exampleIds:i,remove:o=!1}){let l;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?l=(await this.readDataset({datasetName:t})).id:l=e,Lt(l);let a={split_name:n,examples:i.map(u=>(Lt(u),u)),remove:o},s=await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/${l}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(s,"update dataset splits",!0)}async evaluateRun(e,t,{sourceInfo:n,loadChildRuns:i,referenceExample:o}={loadChildRuns:!1}){z8("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let l;if(typeof e=="string")l=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)l=e;else throw new Error(`Invalid run type: ${typeof e}`);l.reference_example_id!==null&&l.reference_example_id!==void 0&&(o=await this.readExample(l.reference_example_id));let a=await t.evaluateRun(l,o),[s,u]=await this._logEvaluationFeedback(a,l,n);return u[0]}async createFeedback(e,t,{score:n,value:i,correction:o,comment:l,sourceInfo:a,feedbackSourceType:s="api",sourceRunId:u,feedbackId:c,feedbackConfig:f,projectId:h,comparativeExperimentId:d}){var L;if(!e&&!h)throw new Error("One of runId or projectId must be provided");if(e&&h)throw new Error("Only one of runId or projectId can be provided");let p={type:s!=null?s:"api",metadata:a!=null?a:{}};u!==void 0&&(p==null?void 0:p.metadata)!==void 0&&!p.metadata.__run&&(p.metadata.__run={run_id:u}),(p==null?void 0:p.metadata)!==void 0&&((L=p.metadata.__run)==null?void 0:L.run_id)!==void 0&&Lt(p.metadata.__run.run_id);let v={id:c!=null?c:Yr(),run_id:e,key:t,score:vO(n),value:i,correction:o,comment:l,feedback_source:p,comparative_experiment_id:d,feedbackConfig:f,session_id:h},b=`${this.apiUrl}/feedback`,C=await this.caller.call($e(this.debug),b,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(v),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(C,"create feedback",!0),v}async updateFeedback(e,{score:t,value:n,correction:i,comment:o}){let l={};t!=null&&(l.score=vO(t)),n!=null&&(l.value=n),i!=null&&(l.correction=i),o!=null&&(l.comment=o),Lt(e);let a=await this.caller.call($e(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(a,"update feedback",!0)}async readFeedback(e){Lt(e);let t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){Lt(e);let t=`/feedback/${e}`,n=await this.caller.call($e(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(n,`delete ${t}`),await n.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:n}={}){let i=new URLSearchParams;if(e&&i.append("run",e.join(",")),t)for(let o of t)i.append("key",o);if(n)for(let o of n)i.append("source",o);for await(let o of this._getPaginated("/feedback",i))yield*o}async createPresignedFeedbackToken(e,t,{expiration:n,feedbackConfig:i}={}){let o={run_id:e,feedback_key:t,feedback_config:i};return n?typeof n=="string"?o.expires_at=n:(n!=null&&n.hours||n!=null&&n.minutes||n!=null&&n.days)&&(o.expires_in=n):o.expires_in={hours:3},await(await this.caller.call($e(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:n,createdAt:i,description:o,metadata:l,id:a}){var c;if(t.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:t[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");let s={id:a,name:e,experiment_ids:t,reference_dataset_id:n,description:o,created_at:(c=i!=null?i:new Date)==null?void 0:c.toISOString(),extra:{}};return l&&(s.extra.metadata=l),await(await this.caller.call($e(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){Lt(e);let t=new URLSearchParams({run_id:e});for await(let n of this._getPaginated("/feedback/tokens",t))yield*n}_selectEvalResults(e){let t;return"results"in e?t=e.results:Array.isArray(e)?t=e:t=[e],t}async _logEvaluationFeedback(e,t,n){let i=this._selectEvalResults(e),o=[];for(let l of i){let a=n||{};l.evaluatorInfo&&(a={...l.evaluatorInfo,...a});let s=null;l.targetRunId?s=l.targetRunId:t&&(s=t.id),o.push(await this.createFeedback(s,l.key,{score:l.score,value:l.value,comment:l.comment,correction:l.correction,sourceInfo:a,sourceRunId:l.sourceRunId,feedbackConfig:l.feedbackConfig,feedbackSourceType:"model"}))}return[i,o]}async logEvaluationFeedback(e,t,n){let[i]=await this._logEvaluationFeedback(e,t,n);return i}async*listAnnotationQueues(e={}){let{queueIds:t,name:n,nameContains:i,limit:o}=e,l=new URLSearchParams;t&&t.forEach((s,u)=>{Lt(s,`queueIds[${u}]`),l.append("ids",s)}),n&&l.append("name",n),i&&l.append("name_contains",i),l.append("limit",(o!==void 0?Math.min(o,100):100).toString());let a=0;for await(let s of this._getPaginated("/annotation-queues",l))if(yield*s,a++,o!==void 0&&a>=o)break}async createAnnotationQueue(e){let{name:t,description:n,queueId:i,rubricInstructions:o}=e,l={name:t,description:n,id:i||Yr(),rubric_instructions:o},a=await this.caller.call($e(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(l).filter(([u,c])=>c!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(a,"create annotation queue"),await a.json()}async readAnnotationQueue(e){let t=await this.caller.call($e(this.debug),`${this.apiUrl}/annotation-queues/${Lt(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(t,"read annotation queue"),await t.json()}async updateAnnotationQueue(e,t){let{name:n,description:i,rubricInstructions:o}=t,l=await this.caller.call($e(this.debug),`${this.apiUrl}/annotation-queues/${Lt(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:n,description:i,rubric_instructions:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(l,"update annotation queue")}async deleteAnnotationQueue(e){let t=await this.caller.call($e(this.debug),`${this.apiUrl}/annotation-queues/${Lt(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){let n=await this.caller.call($e(this.debug),`${this.apiUrl}/annotation-queues/${Lt(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map((i,o)=>Lt(i,`runIds[${o}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(n,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){let n=`/annotation-queues/${Lt(e,"queueId")}/run`,i=await this.caller.call($e(this.debug),`${this.apiUrl}${n}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(i,"get run from annotation queue"),await i.json()}async deleteRunFromAnnotationQueue(e,t){let n=await this.caller.call($e(this.debug),`${this.apiUrl}/annotation-queues/${Lt(e,"queueId")}/runs/${Lt(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(n,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){let t=await this.caller.call($e(this.debug),`${this.apiUrl}/annotation-queues/${Lt(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(t,"get size from annotation queue"),await t.json()}async _currentTenantIsOwner(e){let t=await this._getSettings();return e=="-"||t.tenant_handle===e}async _ownerConflictError(e,t){let n=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${t}`)}async _getLatestCommitHash(e){let t=await this.caller.call($e(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await t.json();if(!t.ok){let i=typeof n.detail=="string"?n.detail:JSON.stringify(n.detail),o=new Error(`Error ${t.status}: ${t.statusText}
${i}`);throw o.statusCode=t.status,o}if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){let[n,i,o]=Ls(e),l=await this.caller.call($e(this.debug),`${this.apiUrl}/likes/${n}/${i}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(l,`${t?"like":"unlike"} prompt`),await l.json()}async _getPromptUrl(e){let[t,n,i]=Ls(e);if(await this._currentTenantIsOwner(t)){let o=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${n}/${i.substring(0,8)}?organizationId=${o.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${o.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${t}/${n}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${n}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(let t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,n=>n.commits))yield*t}async*listPrompts(e){var n;let t=new URLSearchParams;t.append("sort_field",(n=e==null?void 0:e.sortField)!=null?n:"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&t.append("is_public",e.isPublic.toString()),e!=null&&e.query&&t.append("query",e.query);for await(let i of this._getPaginated("/repos",t,o=>o.repos))yield*i}async getPrompt(e){let[t,n,i]=Ls(e),o=await this.caller.call($e(this.debug),`${this.apiUrl}/repos/${t}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(o.status===404)return null;await Pt(o,"get prompt");let l=await o.json();return l.repo?l.repo:null}async createPrompt(e,t){let n=await this._getSettings();if(t!=null&&t.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[i,o,l]=Ls(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);let a={repo_handle:o,...(t==null?void 0:t.description)&&{description:t.description},...(t==null?void 0:t.readme)&&{readme:t.readme},...(t==null?void 0:t.tags)&&{tags:t.tags},is_public:!!(t!=null&&t.isPublic)},s=await this.caller.call($e(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(s,"create prompt");let{repo:u}=await s.json();return u}async createCommit(e,t,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[i,o,l]=Ls(e),a=(n==null?void 0:n.parentCommitHash)==="latest"||!(n!=null&&n.parentCommitHash)?await this._getLatestCommitHash(`${i}/${o}`):n==null?void 0:n.parentCommitHash,s={manifest:JSON.parse(JSON.stringify(t)),parent_commit:a},u=await this.caller.call($e(this.debug),`${this.apiUrl}/commits/${i}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(u,"create commit");let c=await u.json();return this._getPromptUrl(`${i}/${o}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){var a;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let n=new FormData;for(let s of t){let u=s.id,c={...s.metadata&&{metadata:s.metadata},...s.split&&{split:s.split}},f=Ni(c,`Serializing body for example with id: ${u}`),h=new Blob([f],{type:"application/json"});if(n.append(u,h),s.inputs){let d=Ni(s.inputs,`Serializing inputs for example with id: ${u}`),p=new Blob([d],{type:"application/json"});n.append(`${u}.inputs`,p)}if(s.outputs){let d=Ni(s.outputs,`Serializing outputs whle updating example with id: ${u}`),p=new Blob([d],{type:"application/json"});n.append(`${u}.outputs`,p)}if(s.attachments)for(let[d,p]of Object.entries(s.attachments)){let v,b;Array.isArray(p)?[v,b]=p:(v=p.mimeType,b=p.data);let C=new Blob([b],{type:`${v}; length=${b.byteLength}`});n.append(`${u}.attachment.${d}`,C)}if(s.attachments_operations){let d=Ni(s.attachments_operations,`Serializing attachments while updating example with id: ${u}`),p=new Blob([d],{type:"application/json"});n.append(`${u}.attachments_operations`,p)}}let i=e!=null?e:(a=t[0])==null?void 0:a.dataset_id;return await(await this.caller.call($e(this.debug),`${this.apiUrl}/v1/platform/datasets/${i}/examples`,{method:"PATCH",headers:this.headers,body:n})).json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){var l;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");let n=new FormData;for(let a of t){let s=((l=a.id)!=null?l:Yr()).toString(),u={created_at:a.created_at,...a.metadata&&{metadata:a.metadata},...a.split&&{split:a.split},...a.source_run_id&&{source_run_id:a.source_run_id},...a.use_source_run_io&&{use_source_run_io:a.use_source_run_io},...a.use_source_run_attachments&&{use_source_run_attachments:a.use_source_run_attachments}},c=Ni(u,`Serializing body for uploaded example with id: ${s}`),f=new Blob([c],{type:"application/json"});if(n.append(s,f),a.inputs){let h=Ni(a.inputs,`Serializing inputs for uploaded example with id: ${s}`),d=new Blob([h],{type:"application/json"});n.append(`${s}.inputs`,d)}if(a.outputs){let h=Ni(a.outputs,`Serializing outputs for uploaded example with id: ${s}`),d=new Blob([h],{type:"application/json"});n.append(`${s}.outputs`,d)}if(a.attachments)for(let[h,d]of Object.entries(a.attachments)){let p,v;Array.isArray(d)?[p,v]=d:(p=d.mimeType,v=d.data);let b=new Blob([v],{type:`${p}; length=${v.byteLength}`});n.append(`${s}.attachment.${h}`,b)}}let i=await this.caller.call($e(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:n});return await Pt(i,"upload examples"),await i.json()}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[n,i]=Ls(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);let o={};if((t==null?void 0:t.description)!==void 0&&(o.description=t.description),(t==null?void 0:t.readme)!==void 0&&(o.readme=t.readme),(t==null?void 0:t.tags)!==void 0&&(o.tags=t.tags),(t==null?void 0:t.isPublic)!==void 0&&(o.is_public=t.isPublic),(t==null?void 0:t.isArchived)!==void 0&&(o.is_archived=t.isArchived),Object.keys(o).length===0)throw new Error("No valid update options provided");let l=await this.caller.call($e(this.debug),`${this.apiUrl}/repos/${n}/${i}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Pt(l,"update prompt"),l.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[t,n,i]=Ls(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);return await(await this.caller.call($e(this.debug),`${this.apiUrl}/repos/${t}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,t){let[n,i,o]=Ls(e),l=await this.caller.call($e(this.debug),`${this.apiUrl}/commits/${n}/${i}/${o}${t!=null&&t.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Pt(l,"pull prompt commit");let a=await l.json();return{owner:n,repo:i,commit_hash:a.commit_hash,manifest:a.manifest,examples:a.examples}}async _pullPrompt(e,t){let n=await this.pullPromptCommit(e,{includeModel:t==null?void 0:t.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(i=>i!=="object")&&await this.updatePrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}):await this.createPrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}),t!=null&&t.object?await this.createCommit(e,t==null?void 0:t.object,{parentCommitHash:t==null?void 0:t.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){var h,d;let{sourceApiUrl:n=this.apiUrl,datasetName:i}=t,[o,l]=this.parseTokenOrUrl(e,n),a=new r({apiUrl:o,apiKey:"placeholder"}),s=await a.readSharedDataset(l),u=i||s.name;try{if(await this.hasDataset({datasetId:u})){console.log(`Dataset ${u} already exists in your tenant. Skipping.`);return}}catch(p){}let c=await a.listSharedExamples(l),f=await this.createDataset(u,{description:s.description,dataType:s.data_type||"kv",inputsSchema:(h=s.inputs_schema_definition)!=null?h:void 0,outputsSchema:(d=s.outputs_schema_definition)!=null?d:void 0});try{await this.createExamples({inputs:c.map(p=>p.inputs),outputs:c.flatMap(p=>p.outputs?[p.outputs]:[]),datasetId:f.id})}catch(p){throw console.error(`An error occurred while creating dataset ${u}. You should delete it manually.`),p}}parseTokenOrUrl(e,t,n=2,i="dataset"){try{return Lt(e),[t,e]}catch(o){}try{let l=new URL(e).pathname.split("/").filter(a=>a!=="");if(l.length>=n){let a=l[l.length-n];return[t,a]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch(o){throw new Error(`Invalid public ${i} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}});var K8,J8=ce(()=>{Zv();Q8();R8();K8="0.3.29"});function X8(){if(Fv===void 0){let r=Eee(),e=Mee();Fv={library:"langsmith",runtime:r,sdk:"langsmith-js",sdk_version:K8,...e}}return Fv}function wO(){let r=See()||{},e={},t=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(let[n,i]of Object.entries(r))(n.startsWith("LANGCHAIN_")||n.startsWith("LANGSMITH_"))&&typeof i=="string"&&!t.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[n]=i);return e}function See(){try{return typeof process!="undefined"&&process.env?Object.entries(process.env).reduce((r,[e,t])=>(r[e]=String(t),r),{}):void 0}catch(r){return}}function fa(r){var e;try{return typeof process!="undefined"?(e=process.env)==null?void 0:e[r]:void 0}catch(t){return}}function zi(r){return fa(`LANGSMITH_${r}`)||fa(`LANGCHAIN_${r}`)}function Mee(){if(jv!==void 0)return jv;let r=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(let t of r){let n=fa(t);n!==void 0&&(e[t]=n)}return jv=e,e}var Ss,wee,yee,kee,yO,Lee,Eee,Fv,jv,Nh=ce(()=>{J8();wee=()=>typeof window!="undefined"&&typeof window.document!="undefined",yee=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",kee=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),yO=()=>typeof Deno!="undefined",Lee=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!yO(),Eee=()=>Ss||(wee()?Ss="browser":Lee()?Ss="node":yee()?Ss="webworker":kee()?Ss="jsdom":yO()?Ss="deno":Ss="other",Ss)});var kO,LO=ce(()=>{Nh();kO=r=>r!==void 0?r:!!["TRACING_V2","TRACING"].find(t=>zi(t)==="true")});var $8,EO=ce(()=>{$8=Symbol.for("lc:context_variables")});function Aee(r){return r.replace(/[-:.]/g,"")}function Pee(r,e,t=1){let n=t.toFixed(0).slice(0,3).padStart(3,"0");return Aee(`${new Date(r).toISOString().slice(0,-1)}${n}Z`)+e}function tm(r){return r!==void 0&&typeof r.createChild=="function"&&typeof r.postRun=="function"}function MO(r){return typeof r=="object"&&r!=null&&typeof r.name=="string"&&r.name==="langchain_tracer"}function SO(r){return Array.isArray(r)&&r.some(e=>MO(e))}function Tee(r){return typeof r=="object"&&r!=null&&Array.isArray(r.handlers)}function Oee(r){var e;return r!==void 0&&typeof r.callbacks=="object"&&(SO((e=r.callbacks)==null?void 0:e.handlers)||SO(r.callbacks))}var em,Es,Q8=ce(()=>{W1();Nh();Zv();LO();pv();EO();em=class r{constructor(e,t,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=n}static fromHeader(e){let t=e.split(","),n={},i=[],o;for(let l of t){let[a,s]=l.split("="),u=decodeURIComponent(s);a==="langsmith-metadata"?n=JSON.parse(u):a==="langsmith-tags"?i=u.split(","):a==="langsmith-project"&&(o=u)}return new r(n,i,o)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}},Es=class r{constructor(e){var a,s,u,c,f;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),tm(e)){Object.assign(this,{...e});return}let t=r.getDefaultConfig(),{metadata:n,...i}=e,o=(a=i.client)!=null?a:r.getSharedClient(),l={...n,...(s=i==null?void 0:i.extra)==null?void 0:s.metadata};if(i.extra={...i.extra,metadata:l},Object.assign(this,{...t,...i,client:o}),this.trace_id||(this.parent_run?this.trace_id=(u=this.parent_run.trace_id)!=null?u:this.id:this.trace_id=this.id),(c=this.execution_order)!=null||(this.execution_order=1),(f=this.child_execution_order)!=null||(this.child_execution_order=1),!this.dotted_order){let h=Pee(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+h:this.dotted_order=h}}static getDefaultConfig(){var e,t,n;return{id:Yr(),run_type:"chain",project_name:(t=(e=zi("PROJECT"))!=null?e:fa("LANGCHAIN_SESSION"))!=null?t:"default",child_runs:[],api_url:(n=fa("LANGCHAIN_ENDPOINT"))!=null?n:"http://localhost:1984",api_key:fa("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return r.sharedClient||(r.sharedClient=new N0),r.sharedClient}createChild(e){var s,u,c,f,h,d,p;let t=this.child_execution_order+1,n=new r({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});$8 in this&&(n[$8]=this[$8]);let i=Symbol.for("lc:child_config"),o=(u=(s=e.extra)==null?void 0:s[i])!=null?u:this.extra[i];if(Oee(o)){let v={...o},b=Tee(v.callbacks)?(f=(c=v.callbacks).copy)==null?void 0:f.call(c):void 0;b&&(Object.assign(b,{_parentRunId:n.id}),(p=(d=(h=b.handlers)==null?void 0:h.find(MO))==null?void 0:d.updateFromRunTree)==null||p.call(d,n),v.callbacks=b),n.extra[i]=v}let l=new Set,a=this;for(;a!=null&&!l.has(a.id);)l.add(a.id),a.child_execution_order=Math.max(a.child_execution_order,t),a=a.parent_run;return this.child_runs.push(n),n}async end(e,t,n=Date.now(),i){var o,l,a;this.outputs=(o=this.outputs)!=null?o:e,this.error=(l=this.error)!=null?l:t,this.end_time=(a=this.end_time)!=null?a:n,i&&Object.keys(i).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...i}}:{metadata:i})}_convertToCreate(e,t,n=!0){var s,u;let i=(s=e.extra)!=null?s:{};if(i.runtime||(i.runtime={}),t)for(let[c,f]of Object.entries(t))i.runtime[c]||(i.runtime[c]=f);let o,l;return n?(l=(u=e.parent_run)==null?void 0:u.id,o=[]):(o=e.child_runs.map(c=>this._convertToCreate(c,t,n)),l=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:l,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{let t=X8(),n=await this._convertToCreate(this,t,!0);if(await this.client.createRun(n),!e){z8("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let i of this.child_runs)await i.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){var e;try{let t={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,t)}catch(t){console.error(`Error in patchRun for run ${this.id}`,t)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){var t;this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:(t=e.time)!=null?t:new Date().toISOString()})}static fromRunnableConfig(e,t){var u,c,f,h,d,p,v;let n=e==null?void 0:e.callbacks,i,o,l,a=kO();if(n){let b=(c=(u=n==null?void 0:n.getParentRunId)==null?void 0:u.call(n))!=null?c:"",C=(f=n==null?void 0:n.handlers)==null?void 0:f.find(L=>(L==null?void 0:L.name)=="langchain_tracer");i=(h=C==null?void 0:C.getRun)==null?void 0:h.call(C,b),o=C==null?void 0:C.projectName,l=C==null?void 0:C.client,a=a||!!C}return i?new r({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:l,tracingEnabled:a,project_name:o,tags:[...new Set(((d=i==null?void 0:i.tags)!=null?d:[]).concat((p=e==null?void 0:e.tags)!=null?p:[]))],extra:{metadata:{...(v=i==null?void 0:i.extra)==null?void 0:v.metadata,...e==null?void 0:e.metadata}}}).createChild(t):new r({...t,client:l,tracingEnabled:a,project_name:o})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){var u,c,f,h;let n="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=n["langsmith-trace"];if(!i||typeof i!="string")return;let o=i.trim(),l=o.split(".").map(d=>{let[p,v]=d.split("Z");return{strTime:p,time:Date.parse(p+"Z"),uuid:v}}),a=l[0].uuid,s={...t,name:(u=t==null?void 0:t.name)!=null?u:"parent",run_type:(c=t==null?void 0:t.run_type)!=null?c:"chain",start_time:(f=t==null?void 0:t.start_time)!=null?f:Date.now(),id:(h=l.at(-1))==null?void 0:h.uuid,trace_id:a,dotted_order:o};if(n.baggage&&typeof n.baggage=="string"){let d=em.fromHeader(n.baggage);s.metadata=d.metadata,s.tags=d.tags,s.project_name=d.project_name}return new r(s)}toHeaders(e){var n;let t={"langsmith-trace":this.dotted_order,baggage:new em((n=this.extra)==null?void 0:n.metadata,this.tags,this.project_name).toHeader()};if(e)for(let[i,o]of Object.entries(t))e.set(i,o);return t}};Object.defineProperty(Es,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null})});function AO(r=!1){let e=Iee.getInstance().getStore();if(!r&&!tm(e))throw new Error(`Could not get the current run tree.

Please make sure you are calling this method within a traceable function and that tracing is enabled.`);return e}function rm(r){return typeof r=="function"&&"langsmith:traceable"in r}var qv,xv,Ree,Uv,Iee,mge,PO=ce(()=>{Q8();qv=class{getStore(){}run(e,t){return t()}},xv=Symbol.for("ls:tracing_async_local_storage"),Ree=new qv,Uv=class{getInstance(){var e;return(e=globalThis[xv])!=null?e:Ree}initializeGlobalInstance(e){globalThis[xv]===void 0&&(globalThis[xv]=e)}},Iee=new Uv;mge=Symbol.for("langsmith:traceable:root")});var Wv=ce(()=>{PO()});function im(r,e){return zee.call(r,e)}function om(r){if(Array.isArray(r)){let t=new Array(r.length);for(let n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(r);let e=[];for(let t in r)im(r,t)&&e.push(t);return e}function Xn(r){switch(typeof r){case"object":return JSON.parse(JSON.stringify(r));case"undefined":return null;default:return r}}function lm(r){let e=0,t=r.length,n;for(;e<t;){if(n=r.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function ha(r){return r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}function Uh(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}function nm(r){if(r===void 0)return!0;if(r){if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(nm(r[t]))return!0}else if(typeof r=="object"){let t=om(r),n=t.length;for(var e=0;e<n;e++)if(nm(r[t[e]]))return!0}}return!1}function TO(r,e){let t=[r];for(let n in e){let i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i!="undefined"&&t.push(`${n}: ${i}`)}return t.join(`
`)}var zee,V0,Wh=ce(()=>{zee=Object.prototype.hasOwnProperty;V0=class extends Error{constructor(e,t,n,i,o){super(TO(e,{name:t,index:n,operation:i,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=TO(e,{name:t,index:n,operation:i,tree:o})}}});var Gv={};r9(Gv,{JsonPatchError:()=>Ur,_areEquals:()=>Gh,applyOperation:()=>B0,applyPatch:()=>G1,applyReducer:()=>Vee,deepClone:()=>Hee,getValueByPointer:()=>am,validate:()=>OO,validator:()=>sm});function am(r,e){if(e=="")return r;var t={op:"_get",path:e};return B0(r,t),t.value}function B0(r,e,t=!1,n=!0,i=!0,o=0){if(t&&(typeof t=="function"?t(e,0,r,e.path):sm(e,0)),e.path===""){let l={newDocument:r};if(e.op==="add")return l.newDocument=e.value,l;if(e.op==="replace")return l.newDocument=e.value,l.removed=r,l;if(e.op==="move"||e.op==="copy")return l.newDocument=am(r,e.from),e.op==="move"&&(l.removed=r),l;if(e.op==="test"){if(l.test=Gh(r,e.value),l.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",o,e,r);return l.newDocument=r,l}else{if(e.op==="remove")return l.removed=r,l.newDocument=null,l;if(e.op==="_get")return e.value=r,l;if(t)throw new Ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,e,r);return l}}else{n||(r=Xn(r));let a=(e.path||"").split("/"),s=r,u=1,c=a.length,f,h,d;for(typeof t=="function"?d=t:d=sm;;){if(h=a[u],h&&h.indexOf("~")!=-1&&(h=Uh(h)),i&&(h=="__proto__"||h=="prototype"&&u>0&&a[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&f===void 0&&(s[h]===void 0?f=a.slice(0,u).join("/"):u==c-1&&(f=e.path),f!==void 0&&d(e,0,r,f)),u++,Array.isArray(s)){if(h==="-")h=s.length;else{if(t&&!lm(h))throw new Ur("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,e,r);lm(h)&&(h=~~h)}if(u>=c){if(t&&e.op==="add"&&h>s.length)throw new Ur("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,e,r);let p=Nee[e.op].call(e,s,h,r);if(p.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",o,e,r);return p}}else if(u>=c){let p=g9[e.op].call(e,s,h,r);if(p.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",o,e,r);return p}if(s=s[h],t&&u<c&&(!s||typeof s!="object"))throw new Ur("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,e,r)}}}function G1(r,e,t,n=!0,i=!0){if(t&&!Array.isArray(e))throw new Ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(r=Xn(r));let o=new Array(e.length);for(let l=0,a=e.length;l<a;l++)o[l]=B0(r,e[l],t,!0,i,l),r=o[l].newDocument;return o.newDocument=r,o}function Vee(r,e,t){let n=B0(r,e);if(n.test===!1)throw new Ur("Test operation failed","TEST_OPERATION_FAILED",t,e,r);return n.newDocument}function sm(r,e,t,n){if(typeof r!="object"||r===null||Array.isArray(r))throw new Ur("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,r,t);if(g9[r.op]){if(typeof r.path!="string")throw new Ur("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,r,t);if(r.path.indexOf("/")!==0&&r.path.length>0)throw new Ur('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,r,t);if((r.op==="move"||r.op==="copy")&&typeof r.from!="string")throw new Ur("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&r.value===void 0)throw new Ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&nm(r.value))throw new Ur("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,r,t);if(t){if(r.op=="add"){var i=r.path.split("/").length,o=n.split("/").length;if(i!==o+1&&i!==o)throw new Ur("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,r,t)}else if(r.op==="replace"||r.op==="remove"||r.op==="_get"){if(r.path!==n)throw new Ur("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,r,t)}else if(r.op==="move"||r.op==="copy"){var l={op:"_get",path:r.from,value:void 0},a=OO([l],t);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ur("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,r,t)}}}else throw new Ur("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,r,t)}function OO(r,e,t){try{if(!Array.isArray(r))throw new Ur("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)G1(Xn(e),Xn(r),t||!0);else{t=t||sm;for(var n=0;n<r.length;n++)t(r[n],n,e,void 0)}}catch(i){if(i instanceof Ur)return i;throw i}}function Gh(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){var t=Array.isArray(r),n=Array.isArray(e),i,o,l;if(t&&n){if(o=r.length,o!=e.length)return!1;for(i=o;i--!==0;)if(!Gh(r[i],e[i]))return!1;return!0}if(t!=n)return!1;var a=Object.keys(r);if(o=a.length,o!==Object.keys(e).length)return!1;for(i=o;i--!==0;)if(!e.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(l=a[i],!Gh(r[l],e[l]))return!1;return!0}return r!==r&&e!==e}var Ur,Hee,g9,Nee,um=ce(()=>{Wh();Ur=V0,Hee=Xn,g9={add:function(r,e,t){return r[e]=this.value,{newDocument:t}},remove:function(r,e,t){var n=r[e];return delete r[e],{newDocument:t,removed:n}},replace:function(r,e,t){var n=r[e];return r[e]=this.value,{newDocument:t,removed:n}},move:function(r,e,t){let n=am(t,this.path);n&&(n=Xn(n));let i=B0(t,{op:"remove",path:this.from}).removed;return B0(t,{op:"add",path:this.path,value:i}),{newDocument:t,removed:n}},copy:function(r,e,t){let n=am(t,this.from);return B0(t,{op:"add",path:this.path,value:Xn(n)}),{newDocument:t}},test:function(r,e,t){return{newDocument:t,test:Gh(r[e],this.value)}},_get:function(r,e,t){return this.value=r[e],{newDocument:t}}},Nee={add:function(r,e,t){return lm(e)?r.splice(e,0,this.value):r[e]=this.value,{newDocument:t,index:e}},remove:function(r,e,t){var n=r.splice(e,1);return{newDocument:t,removed:n[0]}},replace:function(r,e,t){var n=r[e];return r[e]=this.value,{newDocument:t,removed:n}},move:g9.move,copy:g9.copy,test:g9.test,_get:g9._get}});function RO(r,e,t,n,i){if(e!==r){typeof e.toJSON=="function"&&(e=e.toJSON());for(var o=om(e),l=om(r),a=!1,s=!1,u=l.length-1;u>=0;u--){var c=l[u],f=r[c];if(im(e,c)&&!(e[c]===void 0&&f!==void 0&&Array.isArray(e)===!1)){var h=e[c];typeof f=="object"&&f!=null&&typeof h=="object"&&h!=null&&Array.isArray(f)===Array.isArray(h)?RO(f,h,t,n+"/"+ha(c),i):f!==h&&(a=!0,i&&t.push({op:"test",path:n+"/"+ha(c),value:Xn(f)}),t.push({op:"replace",path:n+"/"+ha(c),value:Xn(h)}))}else Array.isArray(r)===Array.isArray(e)?(i&&t.push({op:"test",path:n+"/"+ha(c),value:Xn(f)}),t.push({op:"remove",path:n+"/"+ha(c)}),s=!0):(i&&t.push({op:"test",path:n,value:r}),t.push({op:"replace",path:n,value:e}),a=!0)}if(!(!s&&o.length==l.length))for(var u=0;u<o.length;u++){var c=o[u];!im(r,c)&&e[c]!==void 0&&t.push({op:"add",path:n+"/"+ha(c),value:Xn(e[c])})}}}function cm(r,e,t=!1){var n=[];return RO(r,e,n,"",t),n}var IO=ce(()=>{Wh();um();});var Lge,Yv=ce(()=>{um();IO();Wh();um();Wh();Lge={...Gv,JsonPatchError:V0,deepClone:Xn,escapePathComponent:ha,unescapePathComponent:Uh}});var HO=ae((Pge,zO)=>{"use strict";zO.exports=function(r,e){if(typeof r!="string")throw new TypeError("Expected a string");return e=typeof e=="undefined"?"_":e,r.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var jO=ae((Tge,Kv)=>{"use strict";var Bee=/[\p{Lu}]/u,Dee=/[\p{Ll}]/u,NO=/^[\p{Lu}](?![\p{Lu}])/gu,DO=/([\p{Alpha}\p{N}_]|$)/u,ZO=/[_.\- ]+/,Zee=new RegExp("^"+ZO.source),VO=new RegExp(ZO.source+DO.source,"gu"),BO=new RegExp("\\d+"+DO.source,"gu"),Fee=(r,e,t)=>{let n=!1,i=!1,o=!1;for(let l=0;l<r.length;l++){let a=r[l];n&&Bee.test(a)?(r=r.slice(0,l)+"-"+r.slice(l),n=!1,o=i,i=!0,l++):i&&o&&Dee.test(a)?(r=r.slice(0,l-1)+"-"+r.slice(l-1),o=i,i=!1,n=!0):(n=e(a)===a&&t(a)!==a,o=i,i=t(a)===a&&e(a)!==a)}return r},jee=(r,e)=>(NO.lastIndex=0,r.replace(NO,t=>e(t))),xee=(r,e)=>(VO.lastIndex=0,BO.lastIndex=0,r.replace(VO,(t,n)=>e(n)).replace(BO,t=>e(t))),FO=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(r)?r=r.map(o=>o.trim()).filter(o=>o.length).join("-"):r=r.trim(),r.length===0)return"";let t=e.locale===!1?o=>o.toLowerCase():o=>o.toLocaleLowerCase(e.locale),n=e.locale===!1?o=>o.toUpperCase():o=>o.toLocaleUpperCase(e.locale);return r.length===1?e.pascalCase?n(r):t(r):(r!==t(r)&&(r=Fee(r,t,n)),r=r.replace(Zee,""),e.preserveConsecutiveUppercase?r=jee(r,t):r=t(r),e.pascalCase&&(r=n(r.charAt(0))+r.slice(1)),xee(r,n))};Kv.exports=FO;Kv.exports.default=FO});function qO(r,e){return(e==null?void 0:e[r])||(0,xO.default)(r)}function UO(r,e,t){let n={};for(let i in r)Object.hasOwn(r,i)&&(n[e(i,t)]=r[i]);return n}var xO,qee,WO=ce(()=>{xO=wr(HO(),1),qee=wr(jO(),1)});function GO(r){return Array.isArray(r)?[...r]:{...r}}function Uee(r,e){let t=GO(r);for(let[n,i]of Object.entries(e)){let[o,...l]=n.split(".").reverse(),a=t;for(let s of l.reverse()){if(a[s]===void 0)break;a[s]=GO(a[s]),a=a[s]}a[o]!==void 0&&(a[o]={lc:1,type:"secret",id:[i]})}return t}function Jv(r){let e=Object.getPrototypeOf(r);return typeof r.lc_name=="function"&&(typeof e.lc_name!="function"||r.lc_name()!==e.lc_name())?r.lc_name():r.name}var lo,p9=ce(()=>{WO();lo=class r{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Jv(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([n])=>{var i;return(i=this.lc_serializable_keys)==null?void 0:i.includes(n)})):this.lc_kwargs=e!=null?e:{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof r||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},t={},n=Object.keys(this.lc_kwargs).reduce((i,o)=>(i[o]=o in this?this[o]:this.lc_kwargs[o],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(t,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));return Object.keys(t).forEach(i=>{let o=this,l=n,[a,...s]=i.split(".").reverse();for(let u of s.reverse()){if(!(u in o)||o[u]===void 0)return;(!(u in l)||l[u]===void 0)&&(typeof o[u]=="object"&&o[u]!=null?l[u]={}:Array.isArray(o[u])&&(l[u]=[])),o=o[u],l=l[u]}a in o&&o[a]!==void 0&&(l[a]=l[a]||o[a])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:UO(Object.keys(t).length?Uee(n,t):n,qO,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}});async function KO(){return Xv===void 0&&(Xv={library:"langchain-js",runtime:YO()}),Xv}function pr(r){var e;try{return typeof process!="undefined"?(e=process.env)==null?void 0:e[r]:Qv()?Deno==null?void 0:Deno.env.get(r):void 0}catch(t){return}}var Wee,Gee,Yee,Qv,Kee,YO,Xv,D0=ce(()=>{Wee=()=>typeof window!="undefined"&&typeof window.document!="undefined",Gee=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",Yee=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Qv=()=>typeof Deno!="undefined",Kee=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!Qv(),YO=()=>{let r;return Wee()?r="browser":Kee()?r="node":Gee()?r="webworker":Yee()?r="jsdom":Qv()?r="deno":r="other",r}});function eC(r){return"lc_prefer_streaming"in r&&r.lc_prefer_streaming}var $v,Z0,JO,Yh=ce(()=>{W1();p9();D0();$v=class{};Z0=class r extends $v{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Jv(this.constructor)]}constructor(e){var t,n,i,o,l,a,s;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:pr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=(t=e.ignoreLLM)!=null?t:this.ignoreLLM,this.ignoreChain=(n=e.ignoreChain)!=null?n:this.ignoreChain,this.ignoreAgent=(i=e.ignoreAgent)!=null?i:this.ignoreAgent,this.ignoreRetriever=(o=e.ignoreRetriever)!=null?o:this.ignoreRetriever,this.ignoreCustomEvent=(l=e.ignoreCustomEvent)!=null?l:this.ignoreCustomEvent,this.raiseError=(a=e.raiseError)!=null?a:this.raiseError,this.awaitHandlers=this.raiseError||((s=e._awaitHandler)!=null?s:this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return lo.prototype.toJSON.call(this)}toJSONNotImplemented(){return lo.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends r{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Yr()}),Object.assign(this,e)}}return new t}},JO=r=>{let e=r;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"}});function tC(r,e){return r&&!Array.isArray(r)&&typeof r=="object"?r:{[e]:r}}function Jee(r){return r.replace(/[-:.]/g,"")}function Xee(r,e,t){let n=t.toFixed(0).slice(0,3).padStart(3,"0");return Jee(`${new Date(r).toISOString().slice(0,-1)}${n}Z`)+e}function _9(r){return typeof r._addRunToRunMap=="function"}var Zo,F0=ce(()=>{Yh();Zo=class extends Z0{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){let t=Xee(e.start_time,e.id,e.execution_order),n={...e};if(n.parent_run_id!==void 0){let i=this.runMap.get(n.parent_run_id);i&&(this._addChildRun(i,n),i.child_execution_order=Math.max(i.child_execution_order,n.child_execution_order),n.trace_id=i.trace_id,i.dotted_order!==void 0&&(n.dotted_order=[i.dotted_order,t].join(".")))}else n.trace_id=n.id,n.dotted_order=t;return this.runMap.set(n.id,n),n}async _endTrace(e){var n;let t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((n=this.onRunUpdate)==null?void 0:n.call(this,e))}_getExecutionOrder(e){let t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,n,i,o,l,a,s){let u=this._getExecutionOrder(i),c=Date.now(),f=a?{...o,metadata:a}:o,h={id:n,name:s!=null?s:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:f!=null?f:{},tags:l||[]};return this._addRunToRunMap(h)}async handleLLMStart(e,t,n,i,o,l,a,s){var c,f,h;let u=(c=this.runMap.get(n))!=null?c:this._createRunForLLMStart(e,t,n,i,o,l,a,s);return await((f=this.onRunCreate)==null?void 0:f.call(this,u)),await((h=this.onLLMStart)==null?void 0:h.call(this,u)),u}_createRunForChatModelStart(e,t,n,i,o,l,a,s){let u=this._getExecutionOrder(i),c=Date.now(),f=a?{...o,metadata:a}:o,h={id:n,name:s!=null?s:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:f!=null?f:{},tags:l||[]};return this._addRunToRunMap(h)}async handleChatModelStart(e,t,n,i,o,l,a,s){var c,f,h;let u=(c=this.runMap.get(n))!=null?c:this._createRunForChatModelStart(e,t,n,i,o,l,a,s);return await((f=this.onRunCreate)==null?void 0:f.call(this,u)),await((h=this.onLLMStart)==null?void 0:h.call(this,u)),u}async handleLLMEnd(e,t,n,i,o){var a;let l=this.runMap.get(t);if(!l||(l==null?void 0:l.run_type)!=="llm")throw new Error("No LLM run to end.");return l.end_time=Date.now(),l.outputs=e,l.events.push({name:"end",time:new Date(l.end_time).toISOString()}),l.extra={...l.extra,...o},await((a=this.onLLMEnd)==null?void 0:a.call(this,l)),await this._endTrace(l),l}async handleLLMError(e,t,n,i,o){var a;let l=this.runMap.get(t);if(!l||(l==null?void 0:l.run_type)!=="llm")throw new Error("No LLM run to end.");return l.end_time=Date.now(),l.error=this.stringifyError(e),l.events.push({name:"error",time:new Date(l.end_time).toISOString()}),l.extra={...l.extra,...o},await((a=this.onLLMError)==null?void 0:a.call(this,l)),await this._endTrace(l),l}_createRunForChainStart(e,t,n,i,o,l,a,s){let u=this._getExecutionOrder(i),c=Date.now(),f={id:n,name:s!=null?s:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:u,child_execution_order:u,run_type:a!=null?a:"chain",child_runs:[],extra:l?{metadata:l}:{},tags:o||[]};return this._addRunToRunMap(f)}async handleChainStart(e,t,n,i,o,l,a,s){var c,f,h;let u=(c=this.runMap.get(n))!=null?c:this._createRunForChainStart(e,t,n,i,o,l,a,s);return await((f=this.onRunCreate)==null?void 0:f.call(this,u)),await((h=this.onChainStart)==null?void 0:h.call(this,u)),u}async handleChainEnd(e,t,n,i,o){var a;let l=this.runMap.get(t);if(!l)throw new Error("No chain run to end.");return l.end_time=Date.now(),l.outputs=tC(e,"output"),l.events.push({name:"end",time:new Date(l.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(l.inputs=tC(o.inputs,"input")),await((a=this.onChainEnd)==null?void 0:a.call(this,l)),await this._endTrace(l),l}async handleChainError(e,t,n,i,o){var a;let l=this.runMap.get(t);if(!l)throw new Error("No chain run to end.");return l.end_time=Date.now(),l.error=this.stringifyError(e),l.events.push({name:"error",time:new Date(l.end_time).toISOString()}),(o==null?void 0:o.inputs)!==void 0&&(l.inputs=tC(o.inputs,"input")),await((a=this.onChainError)==null?void 0:a.call(this,l)),await this._endTrace(l),l}_createRunForToolStart(e,t,n,i,o,l,a){let s=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:a!=null?a:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:t},execution_order:s,child_execution_order:s,run_type:"tool",child_runs:[],extra:l?{metadata:l}:{},tags:o||[]};return this._addRunToRunMap(c)}async handleToolStart(e,t,n,i,o,l,a){var u,c,f;let s=(u=this.runMap.get(n))!=null?u:this._createRunForToolStart(e,t,n,i,o,l,a);return await((c=this.onRunCreate)==null?void 0:c.call(this,s)),await((f=this.onToolStart)==null?void 0:f.call(this,s)),s}async handleToolEnd(e,t){var i;let n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(e,t){var i;let n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,t){var o;let n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="chain")return;let i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((o=this.onAgentAction)==null?void 0:o.call(this,n))}async handleAgentEnd(e,t){var i;let n=this.runMap.get(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}_createRunForRetrieverStart(e,t,n,i,o,l,a){let s=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:a!=null?a:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:t},execution_order:s,child_execution_order:s,run_type:"retriever",child_runs:[],extra:l?{metadata:l}:{},tags:o||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,t,n,i,o,l,a){var u,c,f;let s=(u=this.runMap.get(n))!=null?u:this._createRunForRetrieverStart(e,t,n,i,o,l,a);return await((c=this.onRunCreate)==null?void 0:c.call(this,s)),await((f=this.onRetrieverStart)==null?void 0:f.call(this,s)),s}async handleRetrieverEnd(e,t){var i;let n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,t){var i;let n=this.runMap.get(t);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(e,t){var i;let n=this.runMap.get(t);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(e,t,n,i,o,l){var s;let a=this.runMap.get(n);if(!a||(a==null?void 0:a.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return a.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:l==null?void 0:l.chunk}}),await((s=this.onLLMNewToken)==null?void 0:s.call(this,a,e,{chunk:l==null?void 0:l.chunk})),a}}});var eR=ae((Zge,$O)=>{"use strict";var XO=(r=0)=>e=>`\x1B[${38+r};5;${e}m`,QO=(r=0)=>(e,t,n)=>`\x1B[${38+r};2;${e};${t};${n}m`;function Qee(){let r=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[t,n]of Object.entries(e)){for(let[i,o]of Object.entries(n))e[i]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},n[i]=e[i],r.set(o[0],o[1]);Object.defineProperty(e,t,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:r,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=XO(),e.color.ansi16m=QO(),e.bgColor.ansi256=XO(10),e.bgColor.ansi16m=QO(10),Object.defineProperties(e,{rgbToAnsi256:{value:(t,n,i)=>t===n&&n===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:t=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(t.toString(16));if(!n)return[0,0,0];let{colorString:i}=n.groups;i.length===3&&(i=i.split("").map(l=>l+l).join(""));let o=Number.parseInt(i,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:t=>e.rgbToAnsi256(...e.hexToRgb(t)),enumerable:!1}}),e}Object.defineProperty($O,"exports",{enumerable:!0,get:Qee})});function gi(r,e){return`${r.open}${e}${r.close}`}function Fo(r,e){try{return JSON.stringify(r,null,2)}catch(t){return e}}function tR(r){return typeof r=="string"?r.trim():r==null?r:Fo(r,r.toString())}function Y1(r){if(!r.end_time)return"";let e=r.end_time-r.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}var rC,Vi,Kh,rR=ce(()=>{rC=wr(eR(),1);F0();({color:Vi}=rC.default),Kh=class extends Zo{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let t=[],n=e;for(;n.parent_run_id;){let i=this.runMap.get(n.parent_run_id);if(i)t.push(i),n=i;else break}return t}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((i,o,l)=>{let a=`${i.execution_order}:${i.run_type}:${i.name}`;return o===l.length-1?gi(rC.default.bold,a):a}).join(" > ");return gi(Vi.grey,n)}onChainStart(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Fo(e.inputs,"[inputs]")}`)}onChainEnd(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.cyan,"[chain/end]")} [${t}] [${Y1(e)}] Exiting Chain run with output: ${Fo(e.outputs,"[outputs]")}`)}onChainError(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.red,"[chain/error]")} [${t}] [${Y1(e)}] Chain run errored with error: ${Fo(e.error,"[error]")}`)}onLLMStart(e){let t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${gi(Vi.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Fo(n,"[inputs]")}`)}onLLMEnd(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.cyan,"[llm/end]")} [${t}] [${Y1(e)}] Exiting LLM run with output: ${Fo(e.outputs,"[response]")}`)}onLLMError(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.red,"[llm/error]")} [${t}] [${Y1(e)}] LLM run errored with error: ${Fo(e.error,"[error]")}`)}onToolStart(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.green,"[tool/start]")} [${t}] Entering Tool run with input: "${tR(e.inputs.input)}"`)}onToolEnd(e){var n;let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.cyan,"[tool/end]")} [${t}] [${Y1(e)}] Exiting Tool run with output: "${tR((n=e.outputs)==null?void 0:n.output)}"`)}onToolError(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.red,"[tool/error]")} [${t}] [${Y1(e)}] Tool run errored with error: ${Fo(e.error,"[error]")}`)}onRetrieverStart(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${Fo(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.cyan,"[retriever/end]")} [${t}] [${Y1(e)}] Exiting Retriever run with output: ${Fo(e.outputs,"[outputs]")}`)}onRetrieverError(e){let t=this.getBreadcrumbs(e);console.log(`${gi(Vi.red,"[retriever/error]")} [${t}] [${Y1(e)}] Retriever run errored with error: ${Fo(e.error,"[error]")}`)}onAgentAction(e){let t=e,n=this.getBreadcrumbs(e);console.log(`${gi(Vi.blue,"[agent/action]")} [${n}] Agent selected action: ${Fo(t.actions[t.actions.length-1],"[action]")}`)}}});function K1(r,e){return r.lc_error_code=e,r.message=`${r.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,r}var Jh=ce(()=>{});function J1(r){return!!(r&&typeof r=="object"&&"type"in r&&r.type==="tool_call")}function nR(r){return!!(r&&typeof r=="object"&&"toolCall"in r&&r.toolCall!=null&&typeof r.toolCall=="object"&&"id"in r.toolCall&&typeof r.toolCall.id=="string")}var j0,fm=ce(()=>{j0=class extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}});function nC(r,e=b9){r=r.trim();let t=r.indexOf("```");if(t===-1)return e(r);let n=r.substring(t+3);n.startsWith(`json
`)?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith(`
`)&&(n=n.substring(1));let i=n.indexOf("```"),o=n;return i!==-1&&(o=n.substring(0,i)),e(o.trim())}function b9(r){if(typeof r=="undefined")return null;try{return JSON.parse(r)}catch(o){}let e="",t=[],n=!1,i=!1;for(let o of r){if(n)o==='"'&&!i?n=!1:o===`
`&&!i?o="\\n":o==="\\"?i=!i:i=!1;else if(o==='"')n=!0,i=!1;else if(o==="{")t.push("}");else if(o==="[")t.push("]");else if(o==="}"||o==="]")if(t&&t[t.length-1]===o)t.pop();else return null;e+=o}n&&(e+='"');for(let o=t.length-1;o>=0;o-=1)e+=t[o];try{return JSON.parse(e)}catch(o){return null}}var iC=ce(()=>{});function Ms(r){return typeof r=="object"&&r!==null&&"type"in r&&typeof r.type=="string"&&"source_type"in r&&(r.source_type==="url"||r.source_type==="base64"||r.source_type==="text"||r.source_type==="id")}function iR(r){return Ms(r)&&r.source_type==="url"&&"url"in r&&typeof r.url=="string"}function oR(r){return Ms(r)&&r.source_type==="base64"&&"data"in r&&typeof r.data=="string"}function lR(r){if(Ms(r)){if(r.source_type==="url")return{type:"image_url",image_url:{url:r.url}};if(r.source_type==="base64"){if(!r.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${r.mime_type};base64,${r.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function oC(r){let e=r.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${r}" - does not match type/subtype format.`);let t=e[0].trim(),n=e[1].trim();if(t===""||n==="")throw new Error(`Invalid mime type: "${r}" - type or subtype is empty.`);let i={};for(let o of r.split(";").slice(1)){let l=o.split("=");if(l.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${r}".`);let a=l[0].trim(),s=l[1].trim();if(a==="")throw new Error(`Invalid parameter syntax in mime type: "${r}".`);i[a]=s}return{type:t,subtype:n,parameters:i}}function lC({dataUrl:r,asTypedArray:e=!1}){let t=r.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/),n;if(t){n=t[1].toLowerCase();let i=e?Uint8Array.from(atob(t[2]),o=>o.charCodeAt(0)):t[2];return{mime_type:n,data:i}}}function aC(r,e){if(r.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(r)}if(r.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(r)}if(r.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(r)}if(r.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(r)}throw new Error(`Unable to convert content block type '${r.type}' to provider-specific format: not recognized.`)}var sC=ce(()=>{});function jo(r,e){var t;return typeof r=="string"?r===""?e:typeof e=="string"?r+e:Array.isArray(e)&&e.some(n=>Ms(n))?[{type:"text",source_type:"text",text:r},...e]:[{type:"text",text:r},...e]:Array.isArray(e)?(t=Xh(r,e))!=null?t:[...r,...e]:e===""?r:Array.isArray(r)&&r.some(n=>Ms(n))?[...r,{type:"file",source_type:"text",text:e}]:[...r,{type:"text",text:e}]}function aR(r,e){return r==="error"||e==="error"?"error":"success"}function $ee(r,e){function t(n,i){if(typeof n!="object"||n===null||n===void 0)return n;if(i>=e)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(l=>t(l,i+1));let o={};for(let l of Object.keys(n))o[l]=t(n[l],i+1);return o}return JSON.stringify(t(r,0),null,2)}function Kr(r,e){let t={...r};for(let[n,i]of Object.entries(e))if(t[n]==null)t[n]=i;else{if(i==null)continue;if(typeof t[n]!=typeof i||Array.isArray(t[n])!==Array.isArray(i))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if(typeof t[n]=="string"){if(n==="type")continue;t[n]+=i}else if(typeof t[n]=="object"&&!Array.isArray(t[n]))t[n]=Kr(t[n],i);else if(Array.isArray(t[n]))t[n]=Xh(t[n],i);else{if(t[n]===i)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}}return t}function Xh(r,e){if(!(r===void 0&&e===void 0)){if(r===void 0||e===void 0)return r||e;{let t=[...r];for(let n of e)if(typeof n=="object"&&"index"in n&&typeof n.index=="number"){let i=t.findIndex(o=>o.index===n.index);i!==-1?t[i]=Kr(t[i],n):t.push(n)}else{if(typeof n=="object"&&"text"in n&&n.text==="")continue;t.push(n)}return t}}}function sR(r,e){if(!r&&!e)throw new Error("Cannot merge two undefined objects.");if(!r||!e)return r||e;if(typeof r!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof r}
Right ${typeof e}`);if(typeof r=="string"&&typeof e=="string")return r+e;if(Array.isArray(r)&&Array.isArray(e))return Xh(r,e);if(typeof r=="object"&&typeof e=="object")return Kr(r,e);if(r===e)return r;throw new Error(`Can not merge objects of different types.
Left ${r}
Right ${e}`)}function uR(r){return typeof r.role=="string"}function da(r){return typeof(r==null?void 0:r._getType)=="function"}function uC(r){return da(r)&&typeof r.concat=="function"}var un,Bi,xo=ce(()=>{p9();sC();un=class extends lo{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;let t=$ee(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}};Bi=class extends un{}});function cR(r){return r!=null&&typeof r=="object"&&"lc_direct_tool_output"in r&&r.lc_direct_tool_output===!0}function fR(r){let e=[],t=[];for(let n of r)if(n.function){let i=n.function.name;try{let o=JSON.parse(n.function.arguments),l={name:i||"",args:o||{},id:n.id};e.push(l)}catch(o){t.push({name:i,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[e,t]}var As,v9,C9=ce(()=>{xo();As=class extends un{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,n){typeof e=="string"&&(e={content:e,name:n,tool_call_id:t}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}},v9=class r extends Bi{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){var t;return new r({content:jo(this.content,e.content),additional_kwargs:Kr(this.additional_kwargs,e.additional_kwargs),response_metadata:Kr(this.response_metadata,e.response_metadata),artifact:sR(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:(t=this.id)!=null?t:e.id,status:aR(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}});function kl(r){return r._getType()==="ai"}function cC(r){return r._getType()==="ai"}var Hn,pi,x0=ce(()=>{iC();xo();C9();Hn=class extends un{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){var i,o,l,a,s;let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t!=null?t:{}};else{n=e;let u=(i=n.additional_kwargs)==null?void 0:i.tool_calls,c=n.tool_calls;u!=null&&u.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(u!=null&&c===void 0){let[f,h]=fR(u);n.tool_calls=f!=null?f:[],n.invalid_tool_calls=h!=null?h:[]}else n.tool_calls=(o=n.tool_calls)!=null?o:[],n.invalid_tool_calls=(l=n.invalid_tool_calls)!=null?l:[]}catch(f){n.tool_calls=[],n.invalid_tool_calls=[]}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n!="string"&&(this.tool_calls=(a=n.tool_calls)!=null?a:this.tool_calls,this.invalid_tool_calls=(s=n.invalid_tool_calls)!=null?s:this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}};pi=class r extends Bi{constructor(e){var n,i,o,l,a;let t;if(typeof e=="string")t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)t={...e,tool_calls:(n=e.tool_calls)!=null?n:[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{let s=[],u=[];for(let c of e.tool_call_chunks){let f={};try{if(f=b9(c.args||"{}"),f===null||typeof f!="object"||Array.isArray(f))throw new Error("Malformed tool call chunk args.");s.push({name:(i=c.name)!=null?i:"",args:f,id:c.id,type:"tool_call"})}catch(h){u.push({name:c.name,args:c.args,id:c.id,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:s,invalid_tool_calls:u,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=(o=t.tool_call_chunks)!=null?o:this.tool_call_chunks,this.tool_calls=(l=t.tool_calls)!=null?l:this.tool_calls,this.invalid_tool_calls=(a=t.invalid_tool_calls)!=null?a:this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var n,i,o,l,a,s,u,c,f,h,d,p,v,b,C,L,S,P,y,z,G,J,te,ne,Q,ee,se,Pe,Te,be,rt,Ee,Re,nr,Xt,Oe,fe,hr,qt,Mr,sn,$r,Ao,vn,Tn,Mi,jn,ai,ke,Po,sl,Cn,Ir;let t={content:jo(this.content,e.content),additional_kwargs:Kr(this.additional_kwargs,e.additional_kwargs),response_metadata:Kr(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:(n=this.id)!=null?n:e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){let we=Xh(this.tool_call_chunks,e.tool_call_chunks);we!==void 0&&we.length>0&&(t.tool_call_chunks=we)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){let we={...(((o=(i=this.usage_metadata)==null?void 0:i.input_token_details)==null?void 0:o.audio)!==void 0||((a=(l=e.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:a.audio)!==void 0)&&{audio:((c=(u=(s=this.usage_metadata)==null?void 0:s.input_token_details)==null?void 0:u.audio)!=null?c:0)+((d=(h=(f=e.usage_metadata)==null?void 0:f.input_token_details)==null?void 0:h.audio)!=null?d:0)},...(((v=(p=this.usage_metadata)==null?void 0:p.input_token_details)==null?void 0:v.cache_read)!==void 0||((C=(b=e.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:C.cache_read)!==void 0)&&{cache_read:((P=(S=(L=this.usage_metadata)==null?void 0:L.input_token_details)==null?void 0:S.cache_read)!=null?P:0)+((G=(z=(y=e.usage_metadata)==null?void 0:y.input_token_details)==null?void 0:z.cache_read)!=null?G:0)},...(((te=(J=this.usage_metadata)==null?void 0:J.input_token_details)==null?void 0:te.cache_creation)!==void 0||((Q=(ne=e.usage_metadata)==null?void 0:ne.input_token_details)==null?void 0:Q.cache_creation)!==void 0)&&{cache_creation:((Pe=(se=(ee=this.usage_metadata)==null?void 0:ee.input_token_details)==null?void 0:se.cache_creation)!=null?Pe:0)+((rt=(be=(Te=e.usage_metadata)==null?void 0:Te.input_token_details)==null?void 0:be.cache_creation)!=null?rt:0)}},en={...(((Re=(Ee=this.usage_metadata)==null?void 0:Ee.output_token_details)==null?void 0:Re.audio)!==void 0||((Xt=(nr=e.usage_metadata)==null?void 0:nr.output_token_details)==null?void 0:Xt.audio)!==void 0)&&{audio:((hr=(fe=(Oe=this.usage_metadata)==null?void 0:Oe.output_token_details)==null?void 0:fe.audio)!=null?hr:0)+((sn=(Mr=(qt=e.usage_metadata)==null?void 0:qt.output_token_details)==null?void 0:Mr.audio)!=null?sn:0)},...(((Ao=($r=this.usage_metadata)==null?void 0:$r.output_token_details)==null?void 0:Ao.reasoning)!==void 0||((Tn=(vn=e.usage_metadata)==null?void 0:vn.output_token_details)==null?void 0:Tn.reasoning)!==void 0)&&{reasoning:((ai=(jn=(Mi=this.usage_metadata)==null?void 0:Mi.output_token_details)==null?void 0:jn.reasoning)!=null?ai:0)+((sl=(Po=(ke=e.usage_metadata)==null?void 0:ke.output_token_details)==null?void 0:Po.reasoning)!=null?sl:0)}},Qe=(Cn=this.usage_metadata)!=null?Cn:{input_tokens:0,output_tokens:0,total_tokens:0},Ie=(Ir=e.usage_metadata)!=null?Ir:{input_tokens:0,output_tokens:0,total_tokens:0},st={input_tokens:Qe.input_tokens+Ie.input_tokens,output_tokens:Qe.output_tokens+Ie.output_tokens,total_tokens:Qe.total_tokens+Ie.total_tokens,...Object.keys(we).length>0&&{input_token_details:we},...Object.keys(en).length>0&&{output_token_details:en}};t.usage_metadata=st}return new r(t)}}});var ao,q0,hm=ce(()=>{xo();ao=class r extends un{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return r}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}},q0=class r extends Bi{static lc_name(){return"ChatMessageChunk"}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){var t;return new r({content:jo(this.content,e.content),additional_kwargs:Kr(this.additional_kwargs,e.additional_kwargs),response_metadata:Kr(this.response_metadata,e.response_metadata),role:this.role,id:(t=this.id)!=null?t:e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}});var U0,dm=ce(()=>{xo();U0=class r extends Bi{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){var t,n;return new r({content:jo(this.content,e.content),additional_kwargs:Kr(this.additional_kwargs,e.additional_kwargs),response_metadata:Kr(this.response_metadata,e.response_metadata),name:(t=this.name)!=null?t:"",id:(n=this.id)!=null?n:e.id})}}});var Qn,W0,Qh=ce(()=>{xo();Qn=class extends un{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,t){super(e,t)}},W0=class r extends Bi{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,t){super(e,t)}concat(e){var t;return new r({content:jo(this.content,e.content),additional_kwargs:Kr(this.additional_kwargs,e.additional_kwargs),response_metadata:Kr(this.response_metadata,e.response_metadata),id:(t=this.id)!=null?t:e.id})}}});var ma,X1,mm=ce(()=>{xo();ma=class extends un{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,t){super(e,t)}},X1=class r extends Bi{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,t){super(e,t)}concat(e){var t;return new r({content:jo(this.content,e.content),additional_kwargs:Kr(this.additional_kwargs,e.additional_kwargs),response_metadata:Kr(this.response_metadata,e.response_metadata),id:(t=this.id)!=null?t:e.id})}}});function tte(r){return J1(r)?r:typeof r.id=="string"&&r.type==="function"&&typeof r.function=="object"&&r.function!==null&&"arguments"in r.function&&typeof r.function.arguments=="string"&&"name"in r.function&&typeof r.function.name=="string"?{id:r.id,args:JSON.parse(r.function.arguments),name:r.function.name,type:"tool_call"}:r}function rte(r){return typeof r=="object"&&r!=null&&r.lc===1&&Array.isArray(r.id)&&r.kwargs!=null&&typeof r.kwargs=="object"}function fC(r){let e,t;if(rte(r)){let n=r.id.at(-1);n==="HumanMessage"||n==="HumanMessageChunk"?e="user":n==="AIMessage"||n==="AIMessageChunk"?e="assistant":n==="SystemMessage"||n==="SystemMessageChunk"?e="system":n==="FunctionMessage"||n==="FunctionMessageChunk"?e="function":n==="ToolMessage"||n==="ToolMessageChunk"?e="tool":e="unknown",t=r.kwargs}else{let{type:n,...i}=r;e=n,t=i}if(e==="human"||e==="user")return new Qn(t);if(e==="ai"||e==="assistant"){let{tool_calls:n,...i}=t;if(!Array.isArray(n))return new Hn(t);let o=n.map(tte);return new Hn({...i,tool_calls:o})}else{if(e==="system")return new ma(t);if(e==="developer")return new ma({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in t)return new As({...t,content:t.content,tool_call_id:t.tool_call_id,name:t.name});throw K1(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(r,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Ll(r){if(typeof r=="string")return new Qn(r);if(da(r))return r;if(Array.isArray(r)){let[e,t]=r;return fC({type:e,content:t})}else if(uR(r)){let{role:e,...t}=r;return fC({...t,type:e})}else return fC(r)}function $h(r,e="Human",t="AI"){let n=[];for(let i of r){let o;if(i._getType()==="human")o=e;else if(i._getType()==="ai")o=t;else if(i._getType()==="system")o="System";else if(i._getType()==="function")o="Function";else if(i._getType()==="tool")o="Tool";else if(i._getType()==="generic")o=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);let l=i.name?`${i.name}, `:"",a=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);n.push(`${o}: ${l}${a}`)}return n.join(`
`)}function hC(r){var t;let e=r._getType();if(e==="human")return new W0({...r});if(e==="ai"){let n={...r};return"tool_calls"in n&&(n={...n,tool_call_chunks:(t=n.tool_calls)==null?void 0:t.map(i=>({...i,type:"tool_call_chunk",index:void 0,args:JSON.stringify(i.args)}))}),new pi({...n})}else{if(e==="system")return new X1({...r});if(e==="function")return new U0({...r});if(ao.isInstance(r))return new q0({...r});throw new Error("Unknown message type.")}}var Q1=ce(()=>{Jh();fm();x0();xo();hm();dm();Qh();mm();C9()});var dC=ce(()=>{Q8()});var mC=ce(()=>{J8()});var gC,hR,dR=ce(()=>{mC();D0();hR=()=>{if(gC===void 0){let r=pr("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};gC=new N0(r)}return gC}});var w9,mR=ce(()=>{dC();Wv();D0();F0();dR();w9=class r extends Zo{constructor(e={}){var l;super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:t,projectName:n,client:i}=e;this.projectName=(l=n!=null?n:pr("LANGCHAIN_PROJECT"))!=null?l:pr("LANGCHAIN_SESSION"),this.exampleId=t,this.client=i!=null?i:hR();let o=r.getTraceableRunTree();o&&this.updateFromRunTree(o)}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await KO()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){let t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){let t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){var o,l,a;let t=e,n=new Set;for(;t.parent_run&&!(n.has(t.id)||(n.add(t.id),!t.parent_run));)t=t.parent_run;n.clear();let i=[t];for(;i.length>0;){let s=i.shift();!s||n.has(s.id)||(n.add(s.id),this.runMap.set(s.id,s),s.child_runs&&i.push(...s.child_runs))}this.client=(o=e.client)!=null?o:this.client,this.projectName=(l=e.project_name)!=null?l:this.projectName,this.exampleId=(a=e.reference_example_id)!=null?a:this.exampleId}convertToRunTree(e){let t={},n=[];for(let[i,o]of this.runMap){let l=new Es({...o,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});t[i]=l,n.push([i,o.dotted_order])}n.sort((i,o)=>!i[1]||!o[1]?0:i[1].localeCompare(o[1]));for(let[i]of n){let o=this.runMap.get(i),l=t[i];if(!(!o||!l)&&o.parent_run_id){let a=t[o.parent_run_id];a&&(a.child_runs.push(l),l.parent_run=a)}}return t[e]}static getTraceableRunTree(){try{return AO(!0)}catch(e){return}}}});var gR,G0,pR,$1,e3=ce(()=>{gR=Symbol.for("ls:tracing_async_local_storage"),G0=Symbol.for("lc:context_variables"),pR=r=>{globalThis[gR]=r},$1=()=>globalThis[gR]});function nte(){let r="default"in gm.default?gm.default.default:gm.default;return new r({autoStart:!0,concurrency:1})}function ite(){return typeof t3=="undefined"&&(t3=nte()),t3}async function Jr(r,e){if(e===!0){let t=$1();t!==void 0?await t.run(void 0,async()=>r()):await r()}else t3=ite(),t3.add(async()=>{let t=$1();t!==void 0?await t.run(void 0,async()=>r()):await r()})}var gm,t3,_R=ce(()=>{gm=wr(O8(),1);e3()});var bR=ce(()=>{_R()});var vR,CR=ce(()=>{D0();vR=r=>r!==void 0?r:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(t=>pr(t)==="true")});function pC(r){var n;let e=$1();if(e===void 0)return;let t=e.getStore();return(n=t==null?void 0:t[G0])==null?void 0:n[r]}var ote,wR,yR=ce(()=>{dC();e3();ote=Symbol("lc:configure_hooks"),wR=()=>pC(ote)||[]});function _m(r){return r?Array.isArray(r)||"name"in r?{callbacks:r}:r:{}}function r3(r){return"name"in r?r:Z0.fromMethods(r)}var _C,y9,bC,pm,vC,CC,cn,Y0=ce(()=>{W1();Yh();rR();Q1();D0();mR();bR();CR();F0();yR();_C=class{setHandler(e){return this.setHandlers([e])}},y9=class{constructor(e,t,n,i,o,l,a,s){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:s})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>Jr(async()=>{var n;try{await((n=t.handleText)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleCustomEvent(e,t,n,i,o){await Promise.all(this.handlers.map(l=>Jr(async()=>{var a;try{await((a=l.handleCustomEvent)==null?void 0:a.call(l,e,t,this.runId,this.tags,this.metadata))}catch(s){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleCustomEvent: ${s}`),l.raiseError)throw s}},l.awaitHandlers)))}},bC=class extends y9{getChild(e){let t=new cn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>Jr(async()=>{var n;if(!t.ignoreRetriever)try{await((n=t.handleRetrieverEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw i}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>Jr(async()=>{var n;if(!t.ignoreRetriever)try{await((n=t.handleRetrieverError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${i}`),t.raiseError)throw e}},t.awaitHandlers)))}},pm=class extends y9{async handleLLMNewToken(e,t,n,i,o,l){await Promise.all(this.handlers.map(a=>Jr(async()=>{var s;if(!a.ignoreLLM)try{await((s=a.handleLLMNewToken)==null?void 0:s.call(a,e,t!=null?t:{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,l))}catch(u){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleLLMNewToken: ${u}`),a.raiseError)throw u}},a.awaitHandlers)))}async handleLLMError(e,t,n,i,o){await Promise.all(this.handlers.map(l=>Jr(async()=>{var a;if(!l.ignoreLLM)try{await((a=l.handleLLMError)==null?void 0:a.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(s){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMError: ${s}`),l.raiseError)throw s}},l.awaitHandlers)))}async handleLLMEnd(e,t,n,i,o){await Promise.all(this.handlers.map(l=>Jr(async()=>{var a;if(!l.ignoreLLM)try{await((a=l.handleLLMEnd)==null?void 0:a.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(s){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMEnd: ${s}`),l.raiseError)throw s}},l.awaitHandlers)))}},vC=class extends y9{getChild(e){let t=new cn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,n,i,o){await Promise.all(this.handlers.map(l=>Jr(async()=>{var a;if(!l.ignoreChain)try{await((a=l.handleChainError)==null?void 0:a.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(s){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainError: ${s}`),l.raiseError)throw s}},l.awaitHandlers)))}async handleChainEnd(e,t,n,i,o){await Promise.all(this.handlers.map(l=>Jr(async()=>{var a;if(!l.ignoreChain)try{await((a=l.handleChainEnd)==null?void 0:a.call(l,e,this.runId,this._parentRunId,this.tags,o))}catch(s){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainEnd: ${s}`),l.raiseError)throw s}},l.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>Jr(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentAction)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>Jr(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleAgentEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}},CC=class extends y9{getChild(e){let t=new cn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>Jr(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolError)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>Jr(async()=>{var n;if(!t.ignoreAgent)try{await((n=t.handleToolEnd)==null?void 0:n.call(t,e,this.runId,this._parentRunId,this.tags))}catch(i){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${i}`),t.raiseError)throw i}},t.awaitHandlers)))}},cn=class r extends _C{constructor(e,t){var n,i,o,l,a,s;super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n=t==null?void 0:t.handlers)!=null?n:this.handlers,this.inheritableHandlers=(i=t==null?void 0:t.inheritableHandlers)!=null?i:this.inheritableHandlers,this.tags=(o=t==null?void 0:t.tags)!=null?o:this.tags,this.inheritableTags=(l=t==null?void 0:t.inheritableTags)!=null?l:this.inheritableTags,this.metadata=(a=t==null?void 0:t.metadata)!=null?a:this.metadata,this.inheritableMetadata=(s=t==null?void 0:t.inheritableMetadata)!=null?s:this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,n=void 0,i=void 0,o=void 0,l=void 0,a=void 0,s=void 0){return Promise.all(t.map(async(u,c)=>{let f=c===0&&n?n:Yr();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return _9(h)&&h._createRunForLLMStart(e,[u],f,this._parentRunId,o,this.tags,this.metadata,s),Jr(async()=>{var d;try{await((d=h.handleLLMStart)==null?void 0:d.call(h,e,[u],f,this._parentRunId,o,this.tags,this.metadata,s))}catch(p){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${p}`),h.raiseError)throw p}},h.awaitHandlers)})),new pm(f,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,n=void 0,i=void 0,o=void 0,l=void 0,a=void 0,s=void 0){return Promise.all(t.map(async(u,c)=>{let f=c===0&&n?n:Yr();return await Promise.all(this.handlers.map(h=>{if(!h.ignoreLLM)return _9(h)&&h._createRunForChatModelStart(e,[u],f,this._parentRunId,o,this.tags,this.metadata,s),Jr(async()=>{var d,p;try{if(h.handleChatModelStart)await((d=h.handleChatModelStart)==null?void 0:d.call(h,e,[u],f,this._parentRunId,o,this.tags,this.metadata,s));else if(h.handleLLMStart){let v=$h(u);await((p=h.handleLLMStart)==null?void 0:p.call(h,e,[v],f,this._parentRunId,o,this.tags,this.metadata,s))}}catch(v){if((h.raiseError?console.error:console.warn)(`Error in handler ${h.constructor.name}, handleLLMStart: ${v}`),h.raiseError)throw v}},h.awaitHandlers)})),new pm(f,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,n=Yr(),i=void 0,o=void 0,l=void 0,a=void 0){return await Promise.all(this.handlers.map(s=>{if(!s.ignoreChain)return _9(s)&&s._createRunForChainStart(e,t,n,this._parentRunId,this.tags,this.metadata,i,a),Jr(async()=>{var u;try{await((u=s.handleChainStart)==null?void 0:u.call(s,e,t,n,this._parentRunId,this.tags,this.metadata,i,a))}catch(c){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleChainStart: ${c}`),s.raiseError)throw c}},s.awaitHandlers)})),new vC(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,n=Yr(),i=void 0,o=void 0,l=void 0,a=void 0){return await Promise.all(this.handlers.map(s=>{if(!s.ignoreAgent)return _9(s)&&s._createRunForToolStart(e,t,n,this._parentRunId,this.tags,this.metadata,a),Jr(async()=>{var u;try{await((u=s.handleToolStart)==null?void 0:u.call(s,e,t,n,this._parentRunId,this.tags,this.metadata,a))}catch(c){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleToolStart: ${c}`),s.raiseError)throw c}},s.awaitHandlers)})),new CC(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,n=Yr(),i=void 0,o=void 0,l=void 0,a=void 0){return await Promise.all(this.handlers.map(s=>{if(!s.ignoreRetriever)return _9(s)&&s._createRunForRetrieverStart(e,t,n,this._parentRunId,this.tags,this.metadata,a),Jr(async()=>{var u;try{await((u=s.handleRetrieverStart)==null?void 0:u.call(s,e,t,n,this._parentRunId,this.tags,this.metadata,a))}catch(c){if((s.raiseError?console.error:console.warn)(`Error in handler ${s.constructor.name}, handleRetrieverStart: ${c}`),s.raiseError)throw c}},s.awaitHandlers)})),new bC(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,n,i,o){await Promise.all(this.handlers.map(l=>Jr(async()=>{var a;if(!l.ignoreCustomEvent)try{await((a=l.handleCustomEvent)==null?void 0:a.call(l,e,t,n,this.tags,this.metadata))}catch(s){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleCustomEvent: ${s}`),l.raiseError)throw s}},l.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(let n of e)this.addHandler(n,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){let n=new r(this._parentRunId);for(let i of this.handlers){let o=this.inheritableHandlers.includes(i);n.addHandler(i,o)}for(let i of this.tags){let o=this.inheritableTags.includes(i);n.addTags([i],o)}for(let i of Object.keys(this.metadata)){let o=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},o)}for(let i of e)n.handlers.filter(o=>o.name==="console_callback_handler").some(o=>o.name===i.name)||n.addHandler(i,t);return n}static fromHandlers(e){class t extends Z0{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Yr()}),Object.assign(this,e)}}let n=new this;return n.addHandler(new t),n}static configure(e,t,n,i,o,l,a){return this._configureSync(e,t,n,i,o,l,a)}static _configureSync(e,t,n,i,o,l,a){var h,d,p,v,b;let s;(e||t)&&(Array.isArray(e)||!e?(s=new r,s.setHandlers((h=e==null?void 0:e.map(r3))!=null?h:[],!0)):s=e,s=s.copy(Array.isArray(t)?t.map(r3):t==null?void 0:t.handlers,!1));let u=pr("LANGCHAIN_VERBOSE")==="true"||(a==null?void 0:a.verbose),c=((d=w9.getTraceableRunTree())==null?void 0:d.tracingEnabled)||vR(),f=c||((p=pr("LANGCHAIN_TRACING"))!=null?p:!1);if(u||f){if(s||(s=new r),u&&!s.handlers.some(C=>C.name===Kh.prototype.name)){let C=new Kh;s.addHandler(C,!0)}if(f&&!s.handlers.some(C=>C.name==="langchain_tracer")&&c){let C=new w9;s.addHandler(C,!0),s._parentRunId=(b=(v=w9.getTraceableRunTree())==null?void 0:v.id)!=null?b:s._parentRunId}}for(let{contextVar:C,inheritable:L=!0,handlerClass:S,envVar:P}of wR()){let y=P&&pr(P)==="true"&&S,z,G=C!==void 0?pC(C):void 0;G&&JO(G)?z=G:y&&(z=new S({})),z!==void 0&&(s||(s=new r),s.handlers.some(J=>J.name===z.name)||s.addHandler(z,L))}return(n||i)&&s&&(s.addTags(n!=null?n:[]),s.addTags(i!=null?i:[],!1)),(o||l)&&s&&(s.addMetadata(o!=null?o:{}),s.addMetadata(l!=null?l:{},!1)),s}}});var bm,lte,kR,wC,Di,LR=ce(()=>{mC();e3();Y0();bm=class{getStore(){}run(e,t){return t()}enterWith(e){}},lte=new bm,kR=Symbol.for("lc:child_config"),wC=class{getInstance(){var e;return(e=$1())!=null?e:lte}getRunnableConfig(){var t,n;return(n=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:n[kR]}runWithConfig(e,t,n){var c;let i=cn._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),o=this.getInstance(),l=o.getStore(),a=i==null?void 0:i.getParentRunId(),s=(c=i==null?void 0:i.handlers)==null?void 0:c.find(f=>(f==null?void 0:f.name)==="langchain_tracer"),u;return s&&a?u=s.convertToRunTree(a):n||(u=new Es({name:"<runnable_lambda>",tracingEnabled:!1})),u&&(u.extra={...u.extra,[kR]:e}),l!==void 0&&l[G0]!==void 0&&(u===void 0&&(u={}),u[G0]=l[G0]),o.run(u,t)}initializeGlobalInstance(e){$1()===void 0&&pR(e)}},Di=new wC});var k9=ce(()=>{LR();e3()});async function Zi(r){return cn._configureSync(r==null?void 0:r.callbacks,void 0,r==null?void 0:r.tags,void 0,r==null?void 0:r.metadata)}function Cm(...r){var t,n,i;let e={};for(let o of r.filter(l=>!!l))for(let l of Object.keys(o))if(l==="metadata")e[l]={...e[l],...o[l]};else if(l==="tags"){let a=(t=e[l])!=null?t:[];e[l]=[...new Set(a.concat((n=o[l])!=null?n:[]))]}else if(l==="configurable")e[l]={...e[l],...o[l]};else if(l==="timeout")e.timeout===void 0?e.timeout=o.timeout:o.timeout!==void 0&&(e.timeout=Math.min(e.timeout,o.timeout));else if(l==="signal")e.signal===void 0?e.signal=o.signal:o.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,o.signal]):e.signal=o.signal);else if(l==="callbacks"){let a=e.callbacks,s=o.callbacks;if(Array.isArray(s))if(!a)e.callbacks=s;else if(Array.isArray(a))e.callbacks=a.concat(s);else{let u=a.copy();for(let c of s)u.addHandler(r3(c),!0);e.callbacks=u}else if(s)if(!a)e.callbacks=s;else if(Array.isArray(a)){let u=s.copy();for(let c of a)u.addHandler(r3(c),!0);e.callbacks=u}else e.callbacks=new cn(s._parentRunId,{handlers:a.handlers.concat(s.handlers),inheritableHandlers:a.inheritableHandlers.concat(s.inheritableHandlers),tags:Array.from(new Set(a.tags.concat(s.tags))),inheritableTags:Array.from(new Set(a.inheritableTags.concat(s.inheritableTags))),metadata:{...a.metadata,...s.metadata}})}else{let a=l;e[a]=(i=o[a])!=null?i:e[a]}return e}function Vt(r){var n;let e=Di.getRunnableConfig(),t={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){let{runId:i,runName:o,...l}=e;t=Object.entries(l).reduce((a,[s,u])=>(u!==void 0&&(a[s]=u),a),t)}if(r&&(t=Object.entries(r).reduce((i,[o,l])=>(l!==void 0&&(i[o]=l),i),t)),t!=null&&t.configurable)for(let i of Object.keys(t.configurable))ate.has(typeof t.configurable[i])&&!((n=t.metadata)!=null&&n[i])&&(t.metadata||(t.metadata={}),t.metadata[i]=t.configurable[i]);if(t.timeout!==void 0){if(t.timeout<=0)throw new Error("Timeout must be a positive number");let i=AbortSignal.timeout(t.timeout);t.signal!==void 0?"any"in AbortSignal&&(t.signal=AbortSignal.any([t.signal,i])):t.signal=i,delete t.timeout}return t}function tn(r={},{callbacks:e,maxConcurrency:t,recursionLimit:n,runName:i,configurable:o,runId:l}={}){let a=Vt(r);return e!==void 0&&(delete a.runName,a.callbacks=e),n!==void 0&&(a.recursionLimit=n),t!==void 0&&(a.maxConcurrency=t),i!==void 0&&(a.runName=i),o!==void 0&&(a.configurable={...a.configurable,...o}),l!==void 0&&delete a.runId,a}function El(r){return r?{configurable:r.configurable,recursionLimit:r.recursionLimit,callbacks:r.callbacks,tags:r.tags,metadata:r.metadata,maxConcurrency:r.maxConcurrency,timeout:r.timeout,signal:r.signal}:void 0}var vm,ate,ga=ce(()=>{Y0();k9();vm=25;ate=new Set(["string","number","boolean"])});async function pa(r,e){if(e===void 0)return r;let t;return Promise.race([r.catch(n=>{if(!(e!=null&&e.aborted))throw n}),new Promise((n,i)=>{t=()=>{i(new Error("Aborted"))},e.addEventListener("abort",t),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",t))}var yC=ce(()=>{});function kC(r,e=2){let t=Array.from({length:e},()=>[]);return t.map(async function*(i){for(;;)if(i.length===0){let o=await r.next();for(let l of t)l.push(o)}else{if(i[0].done)return;yield i.shift().value}})}function $n(r,e){if(Array.isArray(r)&&Array.isArray(e))return r.concat(e);if(typeof r=="string"&&typeof e=="string")return r+e;if(typeof r=="number"&&typeof e=="number")return r+e;if("concat"in r&&typeof r.concat=="function")return r.concat(e);if(typeof r=="object"&&typeof e=="object"){let t={...r};for(let[n,i]of Object.entries(e))n in t&&!Array.isArray(t[n])?t[n]=$n(t[n],i):t[n]=i;return t}else throw new Error(`Cannot concat ${typeof r} and ${typeof e}`)}async function ER(r,e,t,n,...i){let o=new Ps({generator:e,startSetup:t,signal:n}),l=await o.setup;return{output:r(o,l,...i),setup:l}}var kn,Ps,_a=ce(()=>{ga();k9();yC();kn=class r extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){let t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){let t=e.getReader();return new r({start(n){return i();function i(){return t.read().then(({done:o,value:l})=>{if(o){n.close();return}return n.enqueue(l),i()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new r({async pull(t){let{value:n,done:i}=await e.next();i&&t.close(),t.enqueue(n)},async cancel(t){await e.return(t)}})}};Ps=class{constructor(e){var t,n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=(n=e.signal)!=null?n:(t=this.config)==null?void 0:t.signal,this.setup=new Promise((i,o)=>{Di.runWithConfig(El(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(i,o):this.firstResult.then(l=>i(void 0),o)},!0)})}async next(...e){var t;return(t=this.signal)==null||t.throwIfAborted(),this.firstResultUsed?Di.runWithConfig(El(this.config),this.signal?async()=>pa(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}});async function SR(r,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:t}=r;if(["retriever","llm","prompt"].includes(r.run_type))return t;if(!(Object.keys(t).length===1&&(t==null?void 0:t.input)===""))return t.input}async function MR(r,e){let{outputs:t}=r;return e==="original"||["retriever","llm","prompt"].includes(r.run_type)?t:t!==void 0&&Object.keys(t).length===1&&(t==null?void 0:t.output)!==void 0?t.output:t}function ste(r){return r!==void 0&&r.message!==void 0}var Sl,n3,AR,i3,PR=ce(()=>{Yv();F0();_a();x0();Sl=class{constructor(e){var t;Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=(t=e.ops)!=null?t:[]}concat(e){let t=this.ops.concat(e.ops),n=G1({},t);return new n3({ops:t,state:n[n.length-1].newDocument})}},n3=class r extends Sl{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){let t=this.ops.concat(e.ops),n=G1(this.state,e.ops);return new r({ops:t,state:n[n.length-1].newDocument})}static fromRunLogPatch(e){let t=G1({},e.ops);return new r({ops:e.ops,state:t[t.length-1].newDocument})}},AR=r=>r.name==="log_stream_tracer";i3=class extends Zo{constructor(e){var t,n;super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(t=e==null?void 0:e.autoClose)!=null?t:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(n=e==null?void 0:e._schemaFormat)!=null?n:this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=kn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;if(e.id===this.rootId)return!1;let t=(i=e.tags)!=null?i:[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||t.find(o=>{var l;return(l=this.includeTags)==null?void 0:l.includes(o)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&t.every(o=>{var l;return!((l=this.excludeTags)!=null&&l.includes(o))})),n}async*tapOutputIterable(e,t){for await(let n of t){if(e!==this.rootId){let i=this.keyMapByRunId[e];i&&await this.writer.write(new Sl({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){var i,o,l;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new Sl({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;let n={id:e.id,name:e.name,type:e.run_type,tags:(i=e.tags)!=null?i:[],metadata:(l=(o=e.extra)==null?void 0:o.metadata)!=null?l:{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await SR(e,this._schemaFormat)),await this.writer.write(new Sl({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{let t=this.keyMapByRunId[e.id];if(t===void 0)return;let n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${t}/inputs`,value:await SR(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${t}/final_output`,value:await MR(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});let i=new Sl({ops:n});await this.writer.write(i)}finally{if(e.id===this.rootId){let t=new Sl({ops:[{op:"replace",path:"/final_output",value:await MR(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,n){let i=this.keyMapByRunId[e.id];if(i===void 0)return;let o=e.inputs.messages!==void 0,l;o?ste(n==null?void 0:n.chunk)?l=n==null?void 0:n.chunk:l=new pi({id:`run-${e.id}`,content:t}):l=t;let a=new Sl({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${i}/streamed_output/-`,value:l}]});await this.writer.write(a)}}});var wm,ba,Ml,L9=ce(()=>{wm="__run",ba=class r{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new r({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},Ml=class r extends ba{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new r({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}});function ym({name:r,serialized:e}){return r!==void 0?r:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}var TR,km,OR=ce(()=>{F0();_a();x0();L9();TR=r=>r.name==="event_stream_tracer",km=class extends Zo{constructor(e){var t;super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(t=e==null?void 0:e.autoClose)!=null?t:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=kn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;let t=(i=e.tags)!=null?i:[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||t.find(o=>{var l;return(l=this.includeTags)==null?void 0:l.includes(o)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&t.every(o=>{var l;return!((l=this.excludeTags)!=null&&l.includes(o))})),n}async*tapOutputIterable(e,t){let n=await t.next();if(n.done)return;let i=this.runInfoMap.get(e);if(i===void 0){yield n.value;return}function o(a,s){return a==="llm"&&typeof s=="string"?new ba({text:s}):s}let l=this.tappedPromises.get(e);if(l===void 0){let a;l=new Promise(s=>{a=s}),this.tappedPromises.set(e,l);try{let s={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...s,data:{chunk:o(i.runType,n.value)}},i),yield n.value;for await(let u of t)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...s,data:{chunk:o(i.runType,u)}},i),yield u}finally{a()}}else{yield n.value;for await(let a of t)yield a}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){let n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){var l,a,s,u,c,f;let t=ym(e),n=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:(l=e.tags)!=null?l:[],metadata:(s=(a=e.extra)==null?void 0:a.metadata)!=null?s:{},name:t,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,i);let o=`on_${n}_start`;await this.send({event:o,data:{input:e.inputs},name:t,tags:(u=e.tags)!=null?u:[],run_id:e.id,metadata:(f=(c=e.extra)==null?void 0:c.metadata)!=null?f:{}},i)}async onLLMNewToken(e,t,n){let i=this.runInfoMap.get(e.id),o,l;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(i.runType==="chat_model")l="on_chat_model_stream",(n==null?void 0:n.chunk)===void 0?o=new pi({content:t,id:`run-${e.id}`}):o=n.chunk.message;else if(i.runType==="llm")l="on_llm_stream",(n==null?void 0:n.chunk)===void 0?o=new ba({text:t}):o=n.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:l,data:{chunk:o},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var l,a,s,u;let t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let i=(l=e.outputs)==null?void 0:l.generations,o;if(t.runType==="chat_model"){for(let c of i!=null?i:[]){if(o!==void 0)break;o=(a=c[0])==null?void 0:a.message}n="on_chat_model_end"}else if(t.runType==="llm")o={generations:i==null?void 0:i.map(c=>c.map(f=>({text:f.text,generationInfo:f.generationInfo}))),llmOutput:(u=(s=e.outputs)==null?void 0:s.llmOutput)!=null?u:{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);await this.sendEndEvent({event:n,data:{output:o,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){var l,a,s,u,c,f,h;let t=ym(e),n=(l=e.run_type)!=null?l:"chain",i={tags:(a=e.tags)!=null?a:[],metadata:(u=(s=e.extra)==null?void 0:s.metadata)!=null?u:{},name:t,runType:e.run_type},o={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(o={},i.inputs={}):e.inputs.input!==void 0?(o.input=e.inputs.input,i.inputs=e.inputs.input):(o.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${n}_start`,data:o,name:t,tags:(c=e.tags)!=null?c:[],run_id:e.id,metadata:(h=(f=e.extra)==null?void 0:f.metadata)!=null?h:{}},i)}async onChainEnd(e){var a,s,u,c,f;let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let n=`on_${e.run_type}_end`,i=(s=(a=e.inputs)!=null?a:t.inputs)!=null?s:{},l={output:(c=(u=e.outputs)==null?void 0:u.output)!=null?c:e.outputs,input:i};i.input&&Object.keys(i).length===1&&(l.input=i.input,t.inputs=i.input),await this.sendEndEvent({event:n,data:l,run_id:e.id,name:t.name,tags:t.tags,metadata:(f=t.metadata)!=null?f:{}},t)}async onToolStart(e){var i,o,l,a,s,u,c,f;let t=ym(e),n={tags:(i=e.tags)!=null?i:[],metadata:(l=(o=e.extra)==null?void 0:o.metadata)!=null?l:{},name:t,runType:"tool",inputs:(a=e.inputs)!=null?a:{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:(s=e.inputs)!=null?s:{}},name:t,run_id:e.id,tags:(u=e.tags)!=null?u:[],metadata:(f=(c=e.extra)==null?void 0:c.metadata)!=null?f:{}},n)}async onToolEnd(e){var i;let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let n=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){var o,l,a,s,u,c;let t=ym(e),i={tags:(o=e.tags)!=null?o:[],metadata:(a=(l=e.extra)==null?void 0:l.metadata)!=null?a:{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:(s=e.tags)!=null?s:[],run_id:e.id,metadata:(c=(u=e.extra)==null?void 0:u.metadata)!=null?c:{}},i)}async onRetrieverEnd(e){var n,i;let t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:(i=(n=e.outputs)==null?void 0:n.documents)!=null?i:e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,n){let i=this.runInfoMap.get(n);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:i.tags,metadata:i.metadata,data:t},i)}async finish(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}});var RR,Lm,ute,cte,va,o3=ce(()=>{RR=wr(a8(),1),Lm=wr(O8(),1),ute=[400,401,402,403,404,405,406,407,409],cte=r=>{var t,n,i;if(r.message.startsWith("Cancel")||r.message.startsWith("AbortError")||r.name==="AbortError"||(r==null?void 0:r.code)==="ECONNABORTED")throw r;let e=(n=(t=r==null?void 0:r.response)==null?void 0:t.status)!=null?n:r==null?void 0:r.status;if(e&&ute.includes(+e))throw r;if(((i=r==null?void 0:r.error)==null?void 0:i.code)==="insufficient_quota"){let o=new Error(r==null?void 0:r.message);throw o.name="InsufficientQuotaError",o}},va=class{constructor(e){var n,i,o;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(n=e.maxConcurrency)!=null?n:1/0,this.maxRetries=(i=e.maxRetries)!=null?i:6,this.onFailedAttempt=(o=e.onFailedAttempt)!=null?o:cte;let t="default"in Lm.default?Lm.default.default:Lm.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>(0,RR.default)(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((i,o)=>{var l;(l=e.signal)==null||l.addEventListener("abort",()=>{o(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}});var l3,IR=ce(()=>{F0();l3=class extends Zo{constructor({config:e,onStart:t,onEnd:n,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=n,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}});function a3(r){return r?r.lc_runnable:!1}var Em,LC=ce(()=>{Em=class{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){var o;let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,i=(o=e.tags)!=null?o:[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(t)),this.includeTags!==void 0&&(n=n||i.some(l=>{var a;return(a=this.includeTags)==null?void 0:a.includes(l)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(n=n&&i.every(l=>{var a;return!((a=this.excludeTags)!=null&&a.includes(l))})),n}}});var HR,zR,NR,Sm=ce(()=>{HR=Symbol("Let zodToJsonSchema decide on which parser to use"),zR={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},NR=r=>typeof r=="string"?{...zR,name:r}:{...zR,...r}});var VR,EC=ce(()=>{Sm();VR=r=>{let e=NR(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}}});function SC(r,e,t,n){n!=null&&n.errorMessages&&t&&(r.errorMessage={...r.errorMessage,[e]:t})}function Gt(r,e,t,n,i){r[e]=t,SC(r,e,n,i)}var eu=ce(()=>{});var Ut,BR,Fe,Ts,s3=ce(()=>{(function(r){r.assertEqual=i=>{};function e(i){}r.assertIs=e;function t(i){throw new Error}r.assertNever=t,r.arrayToEnum=i=>{let o={};for(let l of i)o[l]=l;return o},r.getValidEnumValues=i=>{let o=r.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),l={};for(let a of o)l[a]=i[a];return r.objectValues(l)},r.objectValues=i=>r.objectKeys(i).map(function(o){return i[o]}),r.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let l in i)Object.prototype.hasOwnProperty.call(i,l)&&o.push(l);return o},r.find=(i,o)=>{for(let l of i)if(o(l))return l},r.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(o)}r.joinValues=n,r.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ut||(Ut={}));(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(BR||(BR={}));Fe=Ut.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ts=r=>{switch(typeof r){case"undefined":return Fe.undefined;case"string":return Fe.string;case"number":return Number.isNaN(r)?Fe.nan:Fe.number;case"boolean":return Fe.boolean;case"function":return Fe.function;case"bigint":return Fe.bigint;case"symbol":return Fe.symbol;case"object":return Array.isArray(r)?Fe.array:r===null?Fe.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?Fe.promise:typeof Map!="undefined"&&r instanceof Map?Fe.map:typeof Set!="undefined"&&r instanceof Set?Fe.set:typeof Date!="undefined"&&r instanceof Date?Fe.date:Fe.object;default:return Fe.unknown}}});var ye,so,Mm=ce(()=>{s3();ye=Ut.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),so=class r extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let l of o.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)n._errors.push(t(l));else{let a=n,s=0;for(;s<l.path.length;){let u=l.path[s];s===l.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(t(l))):a[u]=a[u]||{_errors:[]},a=a[u],s++}}};return i(this),n}static assert(e){if(!(e instanceof r))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ut.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},n=[];for(let i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};so.create=r=>new so(r)});var fte,tu,MC=ce(()=>{Mm();s3();fte=(r,e)=>{let t;switch(r.code){case ye.invalid_type:r.received===Fe.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case ye.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Ut.jsonStringifyReplacer)}`;break;case ye.unrecognized_keys:t=`Unrecognized key(s) in object: ${Ut.joinValues(r.keys,", ")}`;break;case ye.invalid_union:t="Invalid input";break;case ye.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Ut.joinValues(r.options)}`;break;case ye.invalid_enum_value:t=`Invalid enum value. Expected ${Ut.joinValues(r.options)}, received '${r.received}'`;break;case ye.invalid_arguments:t="Invalid function arguments";break;case ye.invalid_return_type:t="Invalid function return type";break;case ye.invalid_date:t="Invalid date";break;case ye.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Ut.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case ye.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case ye.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case ye.custom:t="Invalid input";break;case ye.invalid_intersection_types:t="Intersection results could not be merged";break;case ye.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case ye.not_finite:t="Number must be finite";break;default:t=e.defaultError,Ut.assertNever(r)}return{message:t}},tu=fte});function u3(){return hte}var hte,Am=ce(()=>{MC();hte=tu});function Ne(r,e){let t=u3(),n=Pm({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===tu?void 0:tu].filter(i=>!!i)});r.common.issues.push(n)}var Pm,ei,mt,E9,_i,AC,PC,K0,c3,TC=ce(()=>{Am();MC();Pm=r=>{let{data:e,path:t,errorMaps:n,issueData:i}=r,o=[...t,...i.path||[]],l={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let a="",s=n.filter(u=>!!u).slice().reverse();for(let u of s)a=u(l,{data:e,defaultError:a}).message;return{...i,path:o,message:a}};ei=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let i of t){if(i.status==="aborted")return mt;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){let n=[];for(let i of t){let o=await i.key,l=await i.value;n.push({key:o,value:l})}return r.mergeObjectSync(e,n)}static mergeObjectSync(e,t){let n={};for(let i of t){let{key:o,value:l}=i;if(o.status==="aborted"||l.status==="aborted")return mt;o.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof l.value!="undefined"||i.alwaysSet)&&(n[o.value]=l.value)}return{status:e.value,value:n}}},mt=Object.freeze({status:"aborted"}),E9=r=>({status:"dirty",value:r}),_i=r=>({status:"valid",value:r}),AC=r=>r.status==="aborted",PC=r=>r.status==="dirty",K0=r=>r.status==="valid",c3=r=>typeof Promise!="undefined"&&r instanceof Promise});var DR=ce(()=>{});var Xe,ZR=ce(()=>{(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Xe||(Xe={}))});function Tt(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:n,description:i}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,a)=>{var u,c;let{message:s}=r;return l.code==="invalid_enum_value"?{message:s!=null?s:a.defaultError}:typeof a.data=="undefined"?{message:(u=s!=null?s:n)!=null?u:a.defaultError}:l.code!=="invalid_type"?{message:a.defaultError}:{message:(c=s!=null?s:t)!=null?c:a.defaultError}},description:i}}function qR(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);let t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Pte(r){return new RegExp(`^${qR(r)}$`)}function Tte(r){let e=`${xR}T${qR(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Ote(r,e){return!!((e==="v4"||!e)&&yte.test(r)||(e==="v6"||!e)&&Lte.test(r))}function Rte(r,e){if(!bte.test(r))return!1;try{let[t]=r.split("."),n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch(t){return!1}}function Ite(r,e){return!!((e==="v4"||!e)&&kte.test(r)||(e==="v6"||!e)&&Ete.test(r))}function zte(r,e){let t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=t>n?t:n,o=Number.parseInt(r.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return o%l/10**i}function S9(r){if(r instanceof co){let e={};for(let t in r.shape){let n=r.shape[t];e[t]=uo.create(S9(n))}return new co({...r._def,shape:()=>e})}else return r instanceof nu?new nu({...r._def,type:S9(r.element)}):r instanceof uo?uo.create(S9(r.unwrap())):r instanceof Is?Is.create(S9(r.unwrap())):r instanceof Rs?Rs.create(r.items.map(e=>S9(e))):r}function IC(r,e){let t=Ts(r),n=Ts(e);if(r===e)return{valid:!0,data:r};if(t===Fe.object&&n===Fe.object){let i=Ut.objectKeys(e),o=Ut.objectKeys(r).filter(a=>i.indexOf(a)!==-1),l={...r,...e};for(let a of o){let s=IC(r[a],e[a]);if(!s.valid)return{valid:!1};l[a]=s.data}return{valid:!0,data:l}}else if(t===Fe.array&&n===Fe.array){if(r.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<r.length;o++){let l=r[o],a=e[o],s=IC(l,a);if(!s.valid)return{valid:!1};i.push(s.data)}return{valid:!0,data:i}}else return t===Fe.date&&n===Fe.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}function UR(r,e){return new z9({values:r,typeName:Le.ZodEnum,...Tt(e)})}var Tm,jR,f3,h3,qo,FR,Bt,dte,mte,gte,pte,_te,bte,vte,Cte,wte,OC,yte,kte,Lte,Ete,Ste,Mte,xR,Ate,M9,d3,m3,g3,p3,_3,A9,P9,b3,ru,Ca,v3,nu,co,T9,Os,RC,O9,Rs,zC,C3,w3,HC,R9,I9,z9,H9,J0,Al,uo,Is,N9,V9,y3,Q_e,Om,Rm,B9,$_e,Le,ebe,tbe,rbe,nbe,ibe,obe,lbe,abe,sbe,ube,cbe,fbe,hbe,dbe,mbe,gbe,pbe,_be,bbe,vbe,Cbe,wbe,ybe,kbe,Lbe,Ebe,Sbe,Mbe,Abe,Pbe,Tbe,Obe,Rbe,Ibe,WR=ce(()=>{Mm();Am();ZR();TC();s3();Tm=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},jR=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},qo=class{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},FR=(r,e)=>{if(K0(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new so(r.common.issues);return this._error=t,this._error}}};Bt=class{get description(){return this._def.description}_getType(e){return Ts(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ts(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ei,ctx:{common:e.parent.common,data:e.data,parsedType:Ts(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(c3(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var o;let n={common:{issues:[],async:(o=t==null?void 0:t.async)!=null?o:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ts(e)},i=this._parseSync({data:e,path:n.path,parent:n});return FR(n,i)}"~validate"(e){var n,i;let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ts(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:t});return K0(o)?{value:o.value}:{issues:t.common.issues}}catch(o){(i=(n=o==null?void 0:o.message)==null?void 0:n.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(o=>K0(o)?{value:o.value}:{issues:t.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ts(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(c3(i)?i:Promise.resolve(i));return FR(n,o)}refine(e,t){let n=i=>typeof t=="string"||typeof t=="undefined"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,o)=>{let l=e(i),a=()=>o.addIssue({code:ye.custom,...n(i)});return typeof Promise!="undefined"&&l instanceof Promise?l.then(s=>s?!0:(a(),!1)):l?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof t=="function"?t(n,i):t),!1))}_refinement(e){return new Al({schema:this,typeName:Le.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return uo.create(this,this._def)}nullable(){return Is.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return nu.create(this)}promise(){return J0.create(this,this._def)}or(e){return T9.create([this,e],this._def)}and(e){return O9.create(this,e,this._def)}transform(e){return new Al({...Tt(this._def),schema:this,typeName:Le.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new N9({...Tt(this._def),innerType:this,defaultValue:t,typeName:Le.ZodDefault})}brand(){return new Om({typeName:Le.ZodBranded,type:this,...Tt(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new V9({...Tt(this._def),innerType:this,catchValue:t,typeName:Le.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Rm.create(this,e)}readonly(){return B9.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},dte=/^c[^\s-]{8,}$/i,mte=/^[0-9a-z]+$/,gte=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pte=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_te=/^[a-z0-9_-]{21}$/i,bte=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,vte=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Cte=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wte="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",yte=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kte=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Lte=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ete=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ste=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Mte=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ate=new RegExp(`^${xR}$`);M9=class r extends Bt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Fe.string){let o=this._getOrReturnCtx(e);return Ne(o,{code:ye.invalid_type,expected:Fe.string,received:o.parsedType}),mt}let n=new ei,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let l=e.data.length>o.value,a=e.data.length<o.value;(l||a)&&(i=this._getOrReturnCtx(e,i),l?Ne(i,{code:ye.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):a&&Ne(i,{code:ye.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")Cte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"email",code:ye.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")OC||(OC=new RegExp(wte,"u")),OC.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"emoji",code:ye.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")pte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"uuid",code:ye.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")_te.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"nanoid",code:ye.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")dte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"cuid",code:ye.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")mte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"cuid2",code:ye.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")gte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"ulid",code:ye.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch(l){i=this._getOrReturnCtx(e,i),Ne(i,{validation:"url",code:ye.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"regex",code:ye.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?Tte(o).test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Ate.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Pte(o).test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?vte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"duration",code:ye.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Ote(e.data,o.version)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"ip",code:ye.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?Rte(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"jwt",code:ye.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?Ite(e.data,o.version)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"cidr",code:ye.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Ste.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"base64",code:ye.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?Mte.test(e.data)||(i=this._getOrReturnCtx(e,i),Ne(i,{validation:"base64url",code:ye.invalid_string,message:o.message}),n.dirty()):Ut.assertNever(o);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(i=>e.test(i),{validation:t,code:ye.invalid_string,...Xe.errToObj(n)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Xe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Xe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Xe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Xe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Xe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Xe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Xe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Xe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Xe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Xe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Xe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Xe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Xe.errToObj(e)})}datetime(e){var t,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!=null?t:!1,local:(n=e==null?void 0:e.local)!=null?n:!1,...Xe.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...Xe.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Xe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Xe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Xe.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Xe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Xe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Xe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Xe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Xe.errToObj(t)})}nonempty(e){return this.min(1,Xe.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};M9.create=r=>{var e;return new M9({checks:[],typeName:Le.ZodString,coerce:(e=r==null?void 0:r.coerce)!=null?e:!1,...Tt(r)})};d3=class r extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Fe.number){let o=this._getOrReturnCtx(e);return Ne(o,{code:ye.invalid_type,expected:Fe.number,received:o.parsedType}),mt}let n,i=new ei;for(let o of this._def.checks)o.kind==="int"?Ut.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?zte(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.not_finite,message:o.message}),i.dirty()):Ut.assertNever(o);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Xe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Xe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Xe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Xe.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Xe.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Xe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Xe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Xe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Xe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Xe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Xe.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ut.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};d3.create=r=>new d3({checks:[],typeName:Le.ZodNumber,coerce:(r==null?void 0:r.coerce)||!1,...Tt(r)});m3=class r extends Bt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(o){return this._getInvalidInput(e)}if(this._getType(e)!==Fe.bigint)return this._getInvalidInput(e);let n,i=new ei;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ne(n,{code:ye.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ut.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return Ne(t,{code:ye.invalid_type,expected:Fe.bigint,received:t.parsedType}),mt}gte(e,t){return this.setLimit("min",e,!0,Xe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Xe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Xe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Xe.toString(t))}setLimit(e,t,n,i){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:Xe.toString(i)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Xe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Xe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Xe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Xe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Xe.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};m3.create=r=>{var e;return new m3({checks:[],typeName:Le.ZodBigInt,coerce:(e=r==null?void 0:r.coerce)!=null?e:!1,...Tt(r)})};g3=class extends Bt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Fe.boolean){let n=this._getOrReturnCtx(e);return Ne(n,{code:ye.invalid_type,expected:Fe.boolean,received:n.parsedType}),mt}return _i(e.data)}};g3.create=r=>new g3({typeName:Le.ZodBoolean,coerce:(r==null?void 0:r.coerce)||!1,...Tt(r)});p3=class r extends Bt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Fe.date){let o=this._getOrReturnCtx(e);return Ne(o,{code:ye.invalid_type,expected:Fe.date,received:o.parsedType}),mt}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return Ne(o,{code:ye.invalid_date}),mt}let n=new ei,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),Ne(i,{code:ye.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ut.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Xe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Xe.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};p3.create=r=>new p3({checks:[],coerce:(r==null?void 0:r.coerce)||!1,typeName:Le.ZodDate,...Tt(r)});_3=class extends Bt{_parse(e){if(this._getType(e)!==Fe.symbol){let n=this._getOrReturnCtx(e);return Ne(n,{code:ye.invalid_type,expected:Fe.symbol,received:n.parsedType}),mt}return _i(e.data)}};_3.create=r=>new _3({typeName:Le.ZodSymbol,...Tt(r)});A9=class extends Bt{_parse(e){if(this._getType(e)!==Fe.undefined){let n=this._getOrReturnCtx(e);return Ne(n,{code:ye.invalid_type,expected:Fe.undefined,received:n.parsedType}),mt}return _i(e.data)}};A9.create=r=>new A9({typeName:Le.ZodUndefined,...Tt(r)});P9=class extends Bt{_parse(e){if(this._getType(e)!==Fe.null){let n=this._getOrReturnCtx(e);return Ne(n,{code:ye.invalid_type,expected:Fe.null,received:n.parsedType}),mt}return _i(e.data)}};P9.create=r=>new P9({typeName:Le.ZodNull,...Tt(r)});b3=class extends Bt{constructor(){super(...arguments),this._any=!0}_parse(e){return _i(e.data)}};b3.create=r=>new b3({typeName:Le.ZodAny,...Tt(r)});ru=class extends Bt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _i(e.data)}};ru.create=r=>new ru({typeName:Le.ZodUnknown,...Tt(r)});Ca=class extends Bt{_parse(e){let t=this._getOrReturnCtx(e);return Ne(t,{code:ye.invalid_type,expected:Fe.never,received:t.parsedType}),mt}};Ca.create=r=>new Ca({typeName:Le.ZodNever,...Tt(r)});v3=class extends Bt{_parse(e){if(this._getType(e)!==Fe.undefined){let n=this._getOrReturnCtx(e);return Ne(n,{code:ye.invalid_type,expected:Fe.void,received:n.parsedType}),mt}return _i(e.data)}};v3.create=r=>new v3({typeName:Le.ZodVoid,...Tt(r)});nu=class r extends Bt{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==Fe.array)return Ne(t,{code:ye.invalid_type,expected:Fe.array,received:t.parsedType}),mt;if(i.exactLength!==null){let l=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(l||a)&&(Ne(t,{code:l?ye.too_big:ye.too_small,minimum:a?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Ne(t,{code:ye.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Ne(t,{code:ye.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((l,a)=>i.type._parseAsync(new qo(t,l,t.path,a)))).then(l=>ei.mergeArray(n,l));let o=[...t.data].map((l,a)=>i.type._parseSync(new qo(t,l,t.path,a)));return ei.mergeArray(n,o)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:Xe.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:Xe.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:Xe.toString(t)}})}nonempty(e){return this.min(1,e)}};nu.create=(r,e)=>new nu({type:r,minLength:null,maxLength:null,exactLength:null,typeName:Le.ZodArray,...Tt(e)});co=class r extends Bt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=Ut.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Fe.object){let u=this._getOrReturnCtx(e);return Ne(u,{code:ye.invalid_type,expected:Fe.object,received:u.parsedType}),mt}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:l}=this._getCached(),a=[];if(!(this._def.catchall instanceof Ca&&this._def.unknownKeys==="strip"))for(let u in i.data)l.includes(u)||a.push(u);let s=[];for(let u of l){let c=o[u],f=i.data[u];s.push({key:{status:"valid",value:u},value:c._parse(new qo(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ca){let u=this._def.unknownKeys;if(u==="passthrough")for(let c of a)s.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")a.length>0&&(Ne(i,{code:ye.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let c of a){let f=i.data[c];s.push({key:{status:"valid",value:c},value:u._parse(new qo(i,f,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let c of s){let f=await c.key,h=await c.value;u.push({key:f,value:h,alwaysSet:c.alwaysSet})}return u}).then(u=>ei.mergeObjectSync(n,u)):ei.mergeObjectSync(n,s)}get shape(){return this._def.shape()}strict(e){return Xe.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{var o,l,a,s;let i=(a=(l=(o=this._def).errorMap)==null?void 0:l.call(o,t,n).message)!=null?a:n.defaultError;return t.code==="unrecognized_keys"?{message:(s=Xe.errToObj(e).message)!=null?s:i}:{message:i}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Le.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};for(let n of Ut.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new r({...this._def,shape:()=>t})}omit(e){let t={};for(let n of Ut.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new r({...this._def,shape:()=>t})}deepPartial(){return S9(this)}partial(e){let t={};for(let n of Ut.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()}return new r({...this._def,shape:()=>t})}required(e){let t={};for(let n of Ut.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof uo;)o=o._def.innerType;t[n]=o}return new r({...this._def,shape:()=>t})}keyof(){return UR(Ut.objectKeys(this.shape))}};co.create=(r,e)=>new co({shape:()=>r,unknownKeys:"strip",catchall:Ca.create(),typeName:Le.ZodObject,...Tt(e)});co.strictCreate=(r,e)=>new co({shape:()=>r,unknownKeys:"strict",catchall:Ca.create(),typeName:Le.ZodObject,...Tt(e)});co.lazycreate=(r,e)=>new co({shape:r,unknownKeys:"strip",catchall:Ca.create(),typeName:Le.ZodObject,...Tt(e)});T9=class extends Bt{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;function i(o){for(let a of o)if(a.result.status==="valid")return a.result;for(let a of o)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;let l=o.map(a=>new so(a.ctx.common.issues));return Ne(t,{code:ye.invalid_union,unionErrors:l}),mt}if(t.common.async)return Promise.all(n.map(async o=>{let l={...t,common:{...t.common,issues:[]},parent:null};return{result:await o._parseAsync({data:t.data,path:t.path,parent:l}),ctx:l}})).then(i);{let o,l=[];for(let s of n){let u={...t,common:{...t.common,issues:[]},parent:null},c=s._parseSync({data:t.data,path:t.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!o&&(o={result:c,ctx:u}),u.common.issues.length&&l.push(u.common.issues)}if(o)return t.common.issues.push(...o.ctx.common.issues),o.result;let a=l.map(s=>new so(s));return Ne(t,{code:ye.invalid_union,unionErrors:a}),mt}}get options(){return this._def.options}};T9.create=(r,e)=>new T9({options:r,typeName:Le.ZodUnion,...Tt(e)});Os=r=>r instanceof R9?Os(r.schema):r instanceof Al?Os(r.innerType()):r instanceof I9?[r.value]:r instanceof z9?r.options:r instanceof H9?Ut.objectValues(r.enum):r instanceof N9?Os(r._def.innerType):r instanceof A9?[void 0]:r instanceof P9?[null]:r instanceof uo?[void 0,...Os(r.unwrap())]:r instanceof Is?[null,...Os(r.unwrap())]:r instanceof Om||r instanceof B9?Os(r.unwrap()):r instanceof V9?Os(r._def.innerType):[],RC=class r extends Bt{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Fe.object)return Ne(t,{code:ye.invalid_type,expected:Fe.object,received:t.parsedType}),mt;let n=this.discriminator,i=t.data[n],o=this.optionsMap.get(i);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(Ne(t,{code:ye.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),mt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let i=new Map;for(let o of t){let l=Os(o.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of l){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,o)}}return new r({typeName:Le.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...Tt(n)})}};O9=class extends Bt{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=(o,l)=>{if(AC(o)||AC(l))return mt;let a=IC(o.value,l.value);return a.valid?((PC(o)||PC(l))&&t.dirty(),{status:t.value,value:a.data}):(Ne(n,{code:ye.invalid_intersection_types}),mt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,l])=>i(o,l)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};O9.create=(r,e,t)=>new O9({left:r,right:e,typeName:Le.ZodIntersection,...Tt(t)});Rs=class r extends Bt{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Fe.array)return Ne(n,{code:ye.invalid_type,expected:Fe.array,received:n.parsedType}),mt;if(n.data.length<this._def.items.length)return Ne(n,{code:ye.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mt;!this._def.rest&&n.data.length>this._def.items.length&&(Ne(n,{code:ye.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let o=[...n.data].map((l,a)=>{let s=this._def.items[a]||this._def.rest;return s?s._parse(new qo(n,l,n.path,a)):null}).filter(l=>!!l);return n.common.async?Promise.all(o).then(l=>ei.mergeArray(t,l)):ei.mergeArray(t,o)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};Rs.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Rs({items:r,typeName:Le.ZodTuple,rest:null,...Tt(e)})};zC=class r extends Bt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Fe.object)return Ne(n,{code:ye.invalid_type,expected:Fe.object,received:n.parsedType}),mt;let i=[],o=this._def.keyType,l=this._def.valueType;for(let a in n.data)i.push({key:o._parse(new qo(n,a,n.path,a)),value:l._parse(new qo(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?ei.mergeObjectAsync(t,i):ei.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return t instanceof Bt?new r({keyType:e,valueType:t,typeName:Le.ZodRecord,...Tt(n)}):new r({keyType:M9.create(),valueType:e,typeName:Le.ZodRecord,...Tt(t)})}},C3=class extends Bt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Fe.map)return Ne(n,{code:ye.invalid_type,expected:Fe.map,received:n.parsedType}),mt;let i=this._def.keyType,o=this._def.valueType,l=[...n.data.entries()].map(([a,s],u)=>({key:i._parse(new qo(n,a,n.path,[u,"key"])),value:o._parse(new qo(n,s,n.path,[u,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let s of l){let u=await s.key,c=await s.value;if(u.status==="aborted"||c.status==="aborted")return mt;(u.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(u.value,c.value)}return{status:t.value,value:a}})}else{let a=new Map;for(let s of l){let u=s.key,c=s.value;if(u.status==="aborted"||c.status==="aborted")return mt;(u.status==="dirty"||c.status==="dirty")&&t.dirty(),a.set(u.value,c.value)}return{status:t.value,value:a}}}};C3.create=(r,e,t)=>new C3({valueType:e,keyType:r,typeName:Le.ZodMap,...Tt(t)});w3=class r extends Bt{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Fe.set)return Ne(n,{code:ye.invalid_type,expected:Fe.set,received:n.parsedType}),mt;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ne(n,{code:ye.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ne(n,{code:ye.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());let o=this._def.valueType;function l(s){let u=new Set;for(let c of s){if(c.status==="aborted")return mt;c.status==="dirty"&&t.dirty(),u.add(c.value)}return{status:t.value,value:u}}let a=[...n.data.values()].map((s,u)=>o._parse(new qo(n,s,n.path,u)));return n.common.async?Promise.all(a).then(s=>l(s)):l(a)}min(e,t){return new r({...this._def,minSize:{value:e,message:Xe.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:Xe.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};w3.create=(r,e)=>new w3({valueType:r,minSize:null,maxSize:null,typeName:Le.ZodSet,...Tt(e)});HC=class r extends Bt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Fe.function)return Ne(t,{code:ye.invalid_type,expected:Fe.function,received:t.parsedType}),mt;function n(a,s){return Pm({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,u3(),tu].filter(u=>!!u),issueData:{code:ye.invalid_arguments,argumentsError:s}})}function i(a,s){return Pm({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,u3(),tu].filter(u=>!!u),issueData:{code:ye.invalid_return_type,returnTypeError:s}})}let o={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof J0){let a=this;return _i(async function(...s){let u=new so([]),c=await a._def.args.parseAsync(s,o).catch(d=>{throw u.addIssue(n(s,d)),u}),f=await Reflect.apply(l,this,c);return await a._def.returns._def.type.parseAsync(f,o).catch(d=>{throw u.addIssue(i(f,d)),u})})}else{let a=this;return _i(function(...s){let u=a._def.args.safeParse(s,o);if(!u.success)throw new so([n(s,u.error)]);let c=Reflect.apply(l,this,u.data),f=a._def.returns.safeParse(c,o);if(!f.success)throw new so([i(c,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:Rs.create(e).rest(ru.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new r({args:e||Rs.create([]).rest(ru.create()),returns:t||ru.create(),typeName:Le.ZodFunction,...Tt(n)})}},R9=class extends Bt{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};R9.create=(r,e)=>new R9({getter:r,typeName:Le.ZodLazy,...Tt(e)});I9=class extends Bt{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return Ne(t,{received:t.data,code:ye.invalid_literal,expected:this._def.value}),mt}return{status:"valid",value:e.data}}get value(){return this._def.value}};I9.create=(r,e)=>new I9({value:r,typeName:Le.ZodLiteral,...Tt(e)});z9=class r extends Bt{constructor(){super(...arguments),f3.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),n=this._def.values;return Ne(t,{expected:Ut.joinValues(n),received:t.parsedType,code:ye.invalid_type}),mt}if(Tm(this,f3,"f")||jR(this,f3,new Set(this._def.values),"f"),!Tm(this,f3,"f").has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return Ne(t,{received:t.data,code:ye.invalid_enum_value,options:n}),mt}return _i(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return r.create(e,{...this._def,...t})}exclude(e,t=this._def){return r.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}};f3=new WeakMap;z9.create=UR;H9=class extends Bt{constructor(){super(...arguments),h3.set(this,void 0)}_parse(e){let t=Ut.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Fe.string&&n.parsedType!==Fe.number){let i=Ut.objectValues(t);return Ne(n,{expected:Ut.joinValues(i),received:n.parsedType,code:ye.invalid_type}),mt}if(Tm(this,h3,"f")||jR(this,h3,new Set(Ut.getValidEnumValues(this._def.values)),"f"),!Tm(this,h3,"f").has(e.data)){let i=Ut.objectValues(t);return Ne(n,{received:n.data,code:ye.invalid_enum_value,options:i}),mt}return _i(e.data)}get enum(){return this._def.values}};h3=new WeakMap;H9.create=(r,e)=>new H9({values:r,typeName:Le.ZodNativeEnum,...Tt(e)});J0=class extends Bt{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==Fe.promise&&t.common.async===!1)return Ne(t,{code:ye.invalid_type,expected:Fe.promise,received:t.parsedType}),mt;let n=t.parsedType===Fe.promise?t.data:Promise.resolve(t.data);return _i(n.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}};J0.create=(r,e)=>new J0({type:r,typeName:Le.ZodPromise,...Tt(e)});Al=class extends Bt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Le.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:l=>{Ne(n,l),l.fatal?t.abort():t.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let l=i.transform(n.data,o);if(n.common.async)return Promise.resolve(l).then(async a=>{if(t.value==="aborted")return mt;let s=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return s.status==="aborted"?mt:s.status==="dirty"?E9(s.value):t.value==="dirty"?E9(s.value):s});{if(t.value==="aborted")return mt;let a=this._def.schema._parseSync({data:l,path:n.path,parent:n});return a.status==="aborted"?mt:a.status==="dirty"?E9(a.value):t.value==="dirty"?E9(a.value):a}}if(i.type==="refinement"){let l=a=>{let s=i.refinement(a,o);if(n.common.async)return Promise.resolve(s);if(s instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?mt:(a.status==="dirty"&&t.dirty(),l(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?mt:(a.status==="dirty"&&t.dirty(),l(a.value).then(()=>({status:t.value,value:a.value}))))}if(i.type==="transform")if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!K0(l))return l;let a=i.transform(l.value,o);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>K0(l)?Promise.resolve(i.transform(l.value,o)).then(a=>({status:t.value,value:a})):l);Ut.assertNever(i)}};Al.create=(r,e,t)=>new Al({schema:r,typeName:Le.ZodEffects,effect:e,...Tt(t)});Al.createWithPreprocess=(r,e,t)=>new Al({schema:e,effect:{type:"preprocess",transform:r},typeName:Le.ZodEffects,...Tt(t)});uo=class extends Bt{_parse(e){return this._getType(e)===Fe.undefined?_i(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};uo.create=(r,e)=>new uo({innerType:r,typeName:Le.ZodOptional,...Tt(e)});Is=class extends Bt{_parse(e){return this._getType(e)===Fe.null?_i(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Is.create=(r,e)=>new Is({innerType:r,typeName:Le.ZodNullable,...Tt(e)});N9=class extends Bt{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===Fe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};N9.create=(r,e)=>new N9({innerType:r,typeName:Le.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Tt(e)});V9=class extends Bt{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return c3(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new so(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new so(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};V9.create=(r,e)=>new V9({innerType:r,typeName:Le.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Tt(e)});y3=class extends Bt{_parse(e){if(this._getType(e)!==Fe.nan){let n=this._getOrReturnCtx(e);return Ne(n,{code:ye.invalid_type,expected:Fe.nan,received:n.parsedType}),mt}return{status:"valid",value:e.data}}};y3.create=r=>new y3({typeName:Le.ZodNaN,...Tt(r)});Q_e=Symbol("zod_brand"),Om=class extends Bt{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},Rm=class r extends Bt{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?mt:o.status==="dirty"?(t.dirty(),E9(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?mt:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,t){return new r({in:e,out:t,typeName:Le.ZodPipeline})}},B9=class extends Bt{_parse(e){let t=this._def.innerType._parse(e),n=i=>(K0(i)&&(i.value=Object.freeze(i.value)),i);return c3(t)?t.then(i=>n(i)):n(t)}unwrap(){return this._def.innerType}};B9.create=(r,e)=>new B9({innerType:r,typeName:Le.ZodReadonly,...Tt(e)});$_e={object:co.lazycreate};(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(Le||(Le={}));ebe=M9.create,tbe=d3.create,rbe=y3.create,nbe=m3.create,ibe=g3.create,obe=p3.create,lbe=_3.create,abe=A9.create,sbe=P9.create,ube=b3.create,cbe=ru.create,fbe=Ca.create,hbe=v3.create,dbe=nu.create,mbe=co.create,gbe=co.strictCreate,pbe=T9.create,_be=RC.create,bbe=O9.create,vbe=Rs.create,Cbe=zC.create,wbe=C3.create,ybe=w3.create,kbe=HC.create,Lbe=R9.create,Ebe=I9.create,Sbe=z9.create,Mbe=H9.create,Abe=J0.create,Pbe=Al.create,Tbe=uo.create,Obe=Is.create,Rbe=Al.createWithPreprocess,Ibe=Rm.create});var NC=ce(()=>{Am();TC();DR();s3();WR();Mm()});var VC=ce(()=>{NC();NC()});var k3=ce(()=>{VC();VC()});function GR(){return{}}var BC=ce(()=>{});function YR(r,e){var n,i,o;let t={type:"array"};return(n=r.type)!=null&&n._def&&((o=(i=r.type)==null?void 0:i._def)==null?void 0:o.typeName)!==Le.ZodAny&&(t.items=dt(r.type._def,{...e,currentPath:[...e.currentPath,"items"]})),r.minLength&&Gt(t,"minItems",r.minLength.value,r.minLength.message,e),r.maxLength&&Gt(t,"maxItems",r.maxLength.value,r.maxLength.message,e),r.exactLength&&(Gt(t,"minItems",r.exactLength.value,r.exactLength.message,e),Gt(t,"maxItems",r.exactLength.value,r.exactLength.message,e)),t}var DC=ce(()=>{k3();eu();rn()});function KR(r,e){let t={type:"integer",format:"int64"};if(!r.checks)return t;for(let n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?Gt(t,"minimum",n.value,n.message,e):Gt(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),Gt(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Gt(t,"maximum",n.value,n.message,e):Gt(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),Gt(t,"maximum",n.value,n.message,e));break;case"multipleOf":Gt(t,"multipleOf",n.value,n.message,e);break}return t}var ZC=ce(()=>{eu()});function JR(){return{type:"boolean"}}var FC=ce(()=>{});function Im(r,e){return dt(r.type._def,e)}var zm=ce(()=>{rn()});var XR,jC=ce(()=>{rn();XR=(r,e)=>dt(r.innerType._def,e)});function xC(r,e,t){let n=t!=null?t:e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,o)=>xC(r,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Nte(r,e)}}var Nte,qC=ce(()=>{eu();Nte=(r,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let n of r.checks)switch(n.kind){case"min":Gt(t,"minimum",n.value,n.message,e);break;case"max":Gt(t,"maximum",n.value,n.message,e);break}return t}});function QR(r,e){return{...dt(r.innerType._def,e),default:r.defaultValue()}}var UC=ce(()=>{rn()});function $R(r,e){return e.effectStrategy==="input"?dt(r.schema._def,e):{}}var WC=ce(()=>{rn()});function eI(r){return{type:"string",enum:Array.from(r.values)}}var GC=ce(()=>{});function tI(r,e){let t=[dt(r.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),dt(r.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return t.forEach(o=>{if(Vte(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(n=void 0);else{let l=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...s}=o;l=s}else n=void 0;i.push(l)}}),i.length?{allOf:i,...n}:void 0}var Vte,YC=ce(()=>{rn();Vte=r=>"type"in r&&r.type==="string"?!1:"allOf"in r});function rI(r,e){let t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}var KC=ce(()=>{});function Hm(r,e){let t={type:"string"};if(r.checks)for(let n of r.checks)switch(n.kind){case"min":Gt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e);break;case"max":Gt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Tl(t,"email",n.message,e);break;case"format:idn-email":Tl(t,"idn-email",n.message,e);break;case"pattern:zod":bi(t,Pl.email,n.message,e);break}break;case"url":Tl(t,"uri",n.message,e);break;case"uuid":Tl(t,"uuid",n.message,e);break;case"regex":bi(t,n.regex,n.message,e);break;case"cuid":bi(t,Pl.cuid,n.message,e);break;case"cuid2":bi(t,Pl.cuid2,n.message,e);break;case"startsWith":bi(t,RegExp(`^${XC(n.value,e)}`),n.message,e);break;case"endsWith":bi(t,RegExp(`${XC(n.value,e)}$`),n.message,e);break;case"datetime":Tl(t,"date-time",n.message,e);break;case"date":Tl(t,"date",n.message,e);break;case"time":Tl(t,"time",n.message,e);break;case"duration":Tl(t,"duration",n.message,e);break;case"length":Gt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e),Gt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"includes":{bi(t,RegExp(XC(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&Tl(t,"ipv4",n.message,e),n.version!=="v4"&&Tl(t,"ipv6",n.message,e);break}case"base64url":bi(t,Pl.base64url,n.message,e);break;case"jwt":bi(t,Pl.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&bi(t,Pl.ipv4Cidr,n.message,e),n.version!=="v4"&&bi(t,Pl.ipv6Cidr,n.message,e);break}case"emoji":bi(t,Pl.emoji(),n.message,e);break;case"ulid":{bi(t,Pl.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Tl(t,"binary",n.message,e);break}case"contentEncoding:base64":{Gt(t,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{bi(t,Pl.base64,n.message,e);break}}break}case"nanoid":bi(t,Pl.nanoid,n.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}function XC(r,e){return e.patternStrategy==="escape"?Dte(r):r}function Dte(r){let e="";for(let t=0;t<r.length;t++)Bte.has(r[t])||(e+="\\"),e+=r[t];return e}function Tl(r,e,t,n){var i;r.format||(i=r.anyOf)!=null&&i.some(o=>o.format)?(r.anyOf||(r.anyOf=[]),r.format&&(r.anyOf.push({format:r.format,...r.errorMessage&&n.errorMessages&&{errorMessage:{format:r.errorMessage.format}}}),delete r.format,r.errorMessage&&(delete r.errorMessage.format,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.anyOf.push({format:e,...t&&n.errorMessages&&{errorMessage:{format:t}}})):Gt(r,"format",e,t,n)}function bi(r,e,t,n){var i;r.pattern||(i=r.allOf)!=null&&i.some(o=>o.pattern)?(r.allOf||(r.allOf=[]),r.pattern&&(r.allOf.push({pattern:r.pattern,...r.errorMessage&&n.errorMessages&&{errorMessage:{pattern:r.errorMessage.pattern}}}),delete r.pattern,r.errorMessage&&(delete r.errorMessage.pattern,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.allOf.push({pattern:nI(e,n),...t&&n.errorMessages&&{errorMessage:{pattern:t}}})):Gt(r,"pattern",nI(e,n),t,n)}function nI(r,e){var s;if(!e.applyRegexFlags||!r.flags)return r.source;let t={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},n=t.i?r.source.toLowerCase():r.source,i="",o=!1,l=!1,a=!1;for(let u=0;u<n.length;u++){if(o){i+=n[u],o=!1;continue}if(t.i){if(l){if(n[u].match(/[a-z]/)){a?(i+=n[u],i+=`${n[u-2]}-${n[u]}`.toUpperCase(),a=!1):n[u+1]==="-"&&((s=n[u+2])!=null&&s.match(/[a-z]/))?(i+=n[u],a=!0):i+=`${n[u]}${n[u].toUpperCase()}`;continue}}else if(n[u].match(/[a-z]/)){i+=`[${n[u]}${n[u].toUpperCase()}]`;continue}}if(t.m){if(n[u]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[u]==="$"){i+=`($|(?=[\r
]))`;continue}}if(t.s&&n[u]==="."){i+=l?`${n[u]}\r
`:`[${n[u]}\r
]`;continue}i+=n[u],n[u]==="\\"?o=!0:l&&n[u]==="]"?l=!1:!l&&n[u]==="["&&(l=!0)}try{new RegExp(i)}catch(u){return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return i}var JC,Pl,Bte,Nm=ce(()=>{eu();Pl={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(JC===void 0&&(JC=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),JC),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};Bte=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789")});function Vm(r,e){var n,i,o,l,a,s,u;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=r.keyType)==null?void 0:n._def.typeName)===Le.ZodEnum)return{type:"object",required:r.keyType._def.values,properties:r.keyType._def.values.reduce((c,f)=>{var h;return{...c,[f]:(h=dt(r.valueType._def,{...e,currentPath:[...e.currentPath,"properties",f]}))!=null?h:{}}},{}),additionalProperties:e.rejectedAdditionalProperties};let t={type:"object",additionalProperties:(i=dt(r.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?i:e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(((o=r.keyType)==null?void 0:o._def.typeName)===Le.ZodString&&((l=r.keyType._def.checks)!=null&&l.length)){let{type:c,...f}=Hm(r.keyType._def,e);return{...t,propertyNames:f}}else{if(((a=r.keyType)==null?void 0:a._def.typeName)===Le.ZodEnum)return{...t,propertyNames:{enum:r.keyType._def.values}};if(((s=r.keyType)==null?void 0:s._def.typeName)===Le.ZodBranded&&r.keyType._def.type._def.typeName===Le.ZodString&&((u=r.keyType._def.type._def.checks)!=null&&u.length)){let{type:c,...f}=Im(r.keyType._def,e);return{...t,propertyNames:f}}}return t}var Bm=ce(()=>{k3();rn();Nm();zm()});function iI(r,e){if(e.mapStrategy==="record")return Vm(r,e);let t=dt(r.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=dt(r.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}var QC=ce(()=>{rn();Bm()});function oI(r){let e=r.values,n=Object.keys(r.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(n.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}var $C=ce(()=>{});function lI(){return{not:{}}}var ew=ce(()=>{});function aI(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var tw=ce(()=>{});function uI(r,e){if(e.target==="openApi3")return sI(r,e);let t=r.options instanceof Map?Array.from(r.options.values()):r.options;if(t.every(n=>n._def.typeName in L3&&(!n._def.checks||!n._def.checks.length))){let n=t.reduce((i,o)=>{let l=L3[o._def.typeName];return l&&!i.includes(l)?[...i,l]:i},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=t.reduce((i,o)=>{let l=typeof o._def.value;switch(l){case"string":case"number":case"boolean":return[...i,l];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===t.length){let i=n.filter((o,l,a)=>a.indexOf(o)===l);return{type:i.length>1?i:i[0],enum:t.reduce((o,l)=>o.includes(l._def.value)?o:[...o,l._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,i)=>[...n,...i._def.values.filter(o=>!n.includes(o))],[])};return sI(r,e)}var L3,sI,Dm=ce(()=>{rn();L3={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};sI=(r,e)=>{let t=(r.options instanceof Map?Array.from(r.options.values()):r.options).map((n,i)=>dt(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0}});function cI(r,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return e.target==="openApi3"?{type:L3[r.innerType._def.typeName],nullable:!0}:{type:[L3[r.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=dt(r.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let t=dt(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}var rw=ce(()=>{rn();Dm()});function fI(r,e){let t={type:"number"};if(!r.checks)return t;for(let n of r.checks)switch(n.kind){case"int":t.type="integer",SC(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?Gt(t,"minimum",n.value,n.message,e):Gt(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),Gt(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Gt(t,"maximum",n.value,n.message,e):Gt(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),Gt(t,"maximum",n.value,n.message,e));break;case"multipleOf":Gt(t,"multipleOf",n.value,n.message,e);break}return t}var nw=ce(()=>{eu()});function hI(r,e){let t=e.target==="openAi",n={type:"object",properties:{}},i=[],o=r.shape();for(let a in o){let s=o[a];if(s===void 0||s._def===void 0)continue;let u=Fte(s);u&&t&&(s instanceof uo&&(s=s._def.innerType),s.isNullable()||(s=s.nullable()),u=!1);let c=dt(s._def,{...e,currentPath:[...e.currentPath,"properties",a],propertyPath:[...e.currentPath,"properties",a]});c!==void 0&&(n.properties[a]=c,u||i.push(a))}i.length&&(n.required=i);let l=Zte(r,e);return l!==void 0&&(n.additionalProperties=l),n}function Zte(r,e){if(r.catchall._def.typeName!=="ZodNever")return dt(r.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(r.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function Fte(r){try{return r.isOptional()}catch(e){return!0}}var iw=ce(()=>{k3();rn()});var dI,ow=ce(()=>{rn();dI=(r,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return dt(r.innerType._def,e);let t=dt(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}}});var mI,lw=ce(()=>{rn();mI=(r,e)=>{if(e.pipeStrategy==="input")return dt(r.in._def,e);if(e.pipeStrategy==="output")return dt(r.out._def,e);let t=dt(r.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=dt(r.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,n].filter(i=>i!==void 0)}}});function gI(r,e){return dt(r.type._def,e)}var aw=ce(()=>{rn()});function pI(r,e){let n={type:"array",uniqueItems:!0,items:dt(r.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return r.minSize&&Gt(n,"minItems",r.minSize.value,r.minSize.message,e),r.maxSize&&Gt(n,"maxItems",r.maxSize.value,r.maxSize.message,e),n}var sw=ce(()=>{eu();rn()});function _I(r,e){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((t,n)=>dt(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:dt(r.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((t,n)=>dt(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[])}}var uw=ce(()=>{rn()});function bI(){return{not:{}}}var cw=ce(()=>{});function vI(){return{}}var fw=ce(()=>{});var CI,hw=ce(()=>{rn();CI=(r,e)=>dt(r.innerType._def,e)});var wI,dw=ce(()=>{k3();BC();DC();ZC();FC();zm();jC();qC();UC();WC();GC();YC();KC();QC();$C();ew();tw();rw();nw();iw();ow();lw();aw();Bm();sw();Nm();uw();cw();Dm();fw();hw();wI=(r,e,t)=>{switch(e){case Le.ZodString:return Hm(r,t);case Le.ZodNumber:return fI(r,t);case Le.ZodObject:return hI(r,t);case Le.ZodBigInt:return KR(r,t);case Le.ZodBoolean:return JR();case Le.ZodDate:return xC(r,t);case Le.ZodUndefined:return bI();case Le.ZodNull:return aI(t);case Le.ZodArray:return YR(r,t);case Le.ZodUnion:case Le.ZodDiscriminatedUnion:return uI(r,t);case Le.ZodIntersection:return tI(r,t);case Le.ZodTuple:return _I(r,t);case Le.ZodRecord:return Vm(r,t);case Le.ZodLiteral:return rI(r,t);case Le.ZodEnum:return eI(r);case Le.ZodNativeEnum:return oI(r);case Le.ZodNullable:return cI(r,t);case Le.ZodOptional:return dI(r,t);case Le.ZodMap:return iI(r,t);case Le.ZodSet:return pI(r,t);case Le.ZodLazy:return()=>r.getter()._def;case Le.ZodPromise:return gI(r,t);case Le.ZodNaN:case Le.ZodNever:return lI();case Le.ZodEffects:return $R(r,t);case Le.ZodAny:return GR();case Le.ZodUnknown:return vI();case Le.ZodDefault:return QR(r,t);case Le.ZodBranded:return Im(r,t);case Le.ZodReadonly:return CI(r,t);case Le.ZodCatch:return XR(r,t);case Le.ZodPipeline:return mI(r,t);case Le.ZodFunction:case Le.ZodVoid:case Le.ZodSymbol:return;default:return(n=>{})(e)}}});function dt(r,e,t=!1){var a;let n=e.seen.get(r);if(e.override){let s=(a=e.override)==null?void 0:a.call(e,r,e,n,t);if(s!==HR)return s}if(n&&!t){let s=jte(n,e);if(s!==void 0)return s}let i={def:r,path:e.currentPath,jsonSchema:void 0};e.seen.set(r,i);let o=wI(r,r.typeName,e),l=typeof o=="function"?dt(o(),e):o;if(l&&qte(r,e,l),e.postProcess){let s=e.postProcess(l,r,e);return i.jsonSchema=l,s}return i.jsonSchema=l,l}var jte,xte,qte,rn=ce(()=>{Sm();dw();jte=(r,e)=>{switch(e.$refStrategy){case"root":return{$ref:r.path.join("/")};case"relative":return{$ref:xte(e.currentPath,r.path)};case"none":case"seen":return r.path.length<e.currentPath.length&&r.path.every((t,n)=>e.currentPath[n]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},xte=(r,e)=>{let t=0;for(;t<r.length&&t<e.length&&r[t]===e[t];t++);return[(r.length-t).toString(),...e.slice(t)].join("/")},qte=(r,e,t)=>(r.description&&(t.description=r.description,e.markdownDescription&&(t.markdownDescription=r.description)),t)});var yI=ce(()=>{});var Uo,mw=ce(()=>{rn();EC();Uo=(r,e)=>{var s;let t=VR(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[c,f])=>{var h;return{...u,[c]:(h=dt(f._def,{...t,currentPath:[...t.basePath,t.definitionPath,c]},!0))!=null?h:{}}},{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,o=(s=dt(r._def,i===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,i]},!1))!=null?s:{},l=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;l!==void 0&&(o.title=l);let a=i===void 0?n?{...o,[t.definitionPath]:n}:o:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,i].join("/"),[t.definitionPath]:{...n,[i]:o}};return t.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in a||"oneOf"in a||"allOf"in a||"type"in a&&Array.isArray(a.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),a}});var X0=ce(()=>{Sm();EC();eu();rn();yI();BC();DC();ZC();FC();zm();jC();qC();UC();WC();GC();YC();KC();QC();$C();ew();tw();rw();nw();iw();ow();lw();aw();hw();Bm();sw();Nm();uw();cw();Dm();fw();dw();mw();mw()});function gw(r){return r.replace(/[^a-zA-Z-_0-9]/g,"_")}function Wte(r){let e="";for(let[t,n]of Object.entries(r))e+=`	classDef ${t} ${n};
`;return e}function kI(r,e,t){var d,p,v,b,C;let{firstNode:n,lastNode:i,nodeColors:o,withStyles:l=!0,curveStyle:a="linear",wrapLabelNWords:s=9}=t!=null?t:{},u=l?`%%{init: {'flowchart': {'curve': '${a}'}}}%%
graph TD;
`:`graph TD;
`;if(l){let L="default",S={[L]:"{0}({1})"};n!==void 0&&(S[n]="{0}([{1}]):::first"),i!==void 0&&(S[i]="{0}([{1}]):::last");for(let[P,y]of Object.entries(r)){let z=(d=y.name.split(":").pop())!=null?d:"",J=Ute.some(ne=>z.startsWith(ne)&&z.endsWith(ne))?`<p>${z}</p>`:z;Object.keys((p=y.metadata)!=null?p:{}).length&&(J+=`<hr/><small><em>${Object.entries((v=y.metadata)!=null?v:{}).map(([ne,Q])=>`${ne} = ${Q}`).join(`
`)}</em></small>`);let te=((b=S[P])!=null?b:S[L]).replace("{0}",gw(P)).replace("{1}",J);u+=`	${te}
`}}let c={};for(let L of e){let S=L.source.split(":"),P=L.target.split(":"),y=S.filter((z,G)=>z===P[G]).join(":");c[y]||(c[y]=[]),c[y].push(L)}let f=new Set;function h(L,S){let P=L.length===1&&L[0].source===L[0].target;if(S&&!P){let y=S.split(":").pop();if(f.has(y))throw new Error(`Found duplicate subgraph '${y}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);f.add(y),u+=`	subgraph ${y}
`}for(let y of L){let{source:z,target:G,data:J,conditional:te}=y,ne="";if(J!==void 0){let Q=J,ee=Q.split(" ");ee.length>s&&(Q=Array.from({length:Math.ceil(ee.length/s)},(se,Pe)=>ee.slice(Pe*s,(Pe+1)*s).join(" ")).join("&nbsp;<br>&nbsp;")),ne=te?` -. &nbsp;${Q}&nbsp; .-> `:` -- &nbsp;${Q}&nbsp; --> `}else ne=te?" -.-> ":" --> ";u+=`	${gw(z)}${ne}${gw(G)};
`}for(let y in c)y.startsWith(`${S}:`)&&y!==S&&h(c[y],y);S&&!P&&(u+=`	end
`)}h((C=c[""])!=null?C:[],"");for(let L in c)!L.includes(":")&&L!==""&&h(c[L],L);return l&&(u+=Wte(o!=null?o:{})),u}async function LI(r,e){let{backgroundColor:t="white"}=e!=null?e:{},n=btoa(r);t!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(t)||(t=`!${t}`));let i=`https://mermaid.ink/img/${n}?bgColor=${t}`,o=await fetch(i);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join(`
`));return await o.blob()}var Ute,EI=ce(()=>{Ute=["*","_","`"]});function Gte(r,e){var t;if(r!==void 0&&!z0(r))return r;if(a3(e))try{let n=e.getName();return n=n.startsWith("Runnable")?n.slice(8):n,n}catch(n){return e.getName()}else return(t=e.name)!=null?t:"UnknownSchema"}function Yte(r){return a3(r.data)?{type:"runnable",data:{id:r.data.lc_id,name:r.data.getName()}}:{type:"schema",data:{...Uo(r.data.schema),title:r.data.name}}}function SI(r,e=[]){let t=new Set(r.edges.filter(i=>!e.includes(i.source)).map(i=>i.target)),n=[];for(let i of Object.values(r.nodes))!e.includes(i.id)&&!t.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}function MI(r,e=[]){let t=new Set(r.edges.filter(i=>!e.includes(i.target)).map(i=>i.source)),n=[];for(let i of Object.values(r.nodes))!e.includes(i.id)&&!t.has(i.id)&&n.push(i);return n.length===1?n[0]:void 0}var E3,AI=ce(()=>{X0();W1();LC();EI();E3=class r{constructor(e){var t,n;Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(t=e==null?void 0:e.nodes)!=null?t:this.nodes,this.edges=(n=e==null?void 0:e.edges)!=null?n:this.edges}toJSON(){let e={};return Object.values(this.nodes).forEach((t,n)=>{e[t.id]=z0(t.id)?n:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...Yte(t)})),edges:this.edges.map(t=>{let n={source:e[t.source],target:e[t.target]};return typeof t.data!="undefined"&&(n.data=t.data),typeof t.conditional!="undefined"&&(n.conditional=t.conditional),n})}}addNode(e,t,n){if(t!==void 0&&this.nodes[t]!==void 0)throw new Error(`Node with id ${t} already exists`);let i=t!=null?t:Yr(),o={id:i,data:e,name:Gte(t,e),metadata:n};return this.nodes[i]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,n,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[t.id]===void 0)throw new Error(`Target node ${t.id} not in graph`);let o={source:e.id,target:t.id,data:n,conditional:i};return this.edges.push(o),o}firstNode(){return SI(this)}lastNode(){return MI(this)}extend(e,t=""){let n=t;Object.values(e.nodes).map(u=>u.id).every(z0)&&(n="");let o=u=>n?`${n}:${u}`:u;Object.entries(e.nodes).forEach(([u,c])=>{this.nodes[o(u)]={...c,id:o(u)}});let l=e.edges.map(u=>({...u,source:o(u.source),target:o(u.target)}));this.edges=[...this.edges,...l];let a=e.firstNode(),s=e.lastNode();return[a?{id:o(a.id),data:a.data}:void 0,s?{id:o(s.id),data:s.data}:void 0]}trimFirstNode(){let e=this.firstNode();e&&SI(this,[e.id])&&this.removeNode(e)}trimLastNode(){let e=this.lastNode();e&&MI(this,[e.id])&&this.removeNode(e)}reid(){let e=Object.fromEntries(Object.values(this.nodes).map(i=>[i.id,i.name])),t=new Map;Object.values(e).forEach(i=>{t.set(i,(t.get(i)||0)+1)});let n=i=>{let o=e[i];return z0(i)&&t.get(o)===1?o:i};return new r({nodes:Object.fromEntries(Object.entries(this.nodes).map(([i,o])=>[n(i),{...o,id:n(i)}])),edges:this.edges.map(i=>({...i,source:n(i.source),target:n(i.target)}))})}drawMermaid(e){let{withStyles:t,curveStyle:n,nodeColors:i={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e!=null?e:{},l=this.reid(),a=l.firstNode(),s=l.lastNode();return kI(l.nodes,l.edges,{firstNode:a==null?void 0:a.id,lastNode:s==null?void 0:s.id,withStyles:t,curveStyle:n,nodeColors:i,wrapLabelNWords:o})}async drawMermaidPng(e){let t=this.drawMermaid(e);return LI(t,{backgroundColor:e==null?void 0:e.backgroundColor})}}});function PI(r){let e=new TextEncoder,t=new ReadableStream({async start(n){for await(let i of r)n.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));n.enqueue(e.encode(`event: end

`)),n.close()}});return kn.fromReadableStream(t)}var TI=ce(()=>{_a()});function pw(r){return typeof r=="object"&&r!==null&&typeof r[Symbol.iterator]=="function"&&typeof r.next=="function"}function Zm(r){return typeof r=="object"&&r!==null&&typeof r[Symbol.asyncIterator]=="function"}function*_w(r,e){for(;;){let{value:t,done:n}=Di.runWithConfig(El(r),e.next.bind(e),!0);if(n)break;yield t}}async function*Fm(r,e){let t=e[Symbol.asyncIterator]();for(;;){let{value:n,done:i}=await Di.runWithConfig(El(r),t.next.bind(e),!0);if(i)break;yield n}}var OI,RI=ce(()=>{k9();ga();OI=r=>r!=null&&typeof r=="object"&&"next"in r&&typeof r.next=="function"});function fn(r,e){return r&&!Array.isArray(r)&&!(r instanceof Date)&&typeof r=="object"?r:{[e]:r}}function Kte(r){if(rm(r))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}function zs(r){if(typeof r=="function")return new Ol({func:r});if(jt.isRunnable(r))return r;if(!Array.isArray(r)&&typeof r=="object"){let e={};for(let[t,n]of Object.entries(r))e[t]=zs(n);return new iu({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}function Jte(r,e){var i,o,l;let t=(i=e.name)!=null?i:r.getName(),n=(l=e.description)!=null?l:(o=e.schema)==null?void 0:o.description;return e.schema.constructor===Gn.ZodString?new M3({name:t,description:n,schema:Gn.object({input:Gn.string()}).transform(a=>a.input),bound:r}):new M3({name:t,description:n,schema:e.schema,bound:r})}var bw,jt,wa,jm,S3,Hs,iu,vw,Ol,xm,D9,qm,M3,ti=ce(()=>{U1();bw=wr(a8(),1);W1();Wv();PR();OR();p9();_a();yC();ga();o3();IR();LC();k9();AI();TI();RI();fm();jt=class extends lo{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){var n,i;let t=(i=(n=this.name)!=null?n:this.constructor.lc_name())!=null?i:this.constructor.name;return e?`${t}${e}`:t}bind(e){return new wa({bound:this,kwargs:e,config:{}})}map(){return new jm({bound:this})}withRetry(e){return new S3({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new wa({bound:this,config:e,kwargs:{}})}withFallbacks(e){let t=Array.isArray(e)?e:e.fallbacks;return new xm({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(Vt);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let n=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:t},(i,o)=>Vt(o===0?e:n))}return Array.from({length:t},()=>Vt(e))}async batch(e,t,n){var s,u;let i=this._getOptionsList(t!=null?t:{},e.length),o=(u=(s=i[0])==null?void 0:s.maxConcurrency)!=null?u:n==null?void 0:n.maxConcurrency,l=new va({maxConcurrency:o,onFailedAttempt:c=>{throw c}}),a=e.map((c,f)=>l.call(async()=>{try{return await this.invoke(c,i[f])}catch(h){if(n!=null&&n.returnExceptions)return h;throw h}}));return Promise.all(a)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){let n=Vt(t),i=new Ps({generator:this._streamIterator(e,n),config:n});return await i.setup,kn.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=Vt(e):t=Vt({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[t,n]}async _callWithConfig(e,t,n){var s;let i=Vt(n),o=await Zi(i),l=await(o==null?void 0:o.handleChainStart(this.toJSON(),fn(t,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(s=i==null?void 0:i.runName)!=null?s:this.getName()));delete i.runId;let a;try{let u=e.call(this,t,i,l);a=await pa(u,n==null?void 0:n.signal)}catch(u){throw await(l==null?void 0:l.handleChainError(u)),u}return await(l==null?void 0:l.handleChainEnd(fn(a,"output"))),a}async _batchWithConfig(e,t,n,i){var u;let o=this._getOptionsList(n!=null?n:{},t.length),l=await Promise.all(o.map(Zi)),a=await Promise.all(l.map(async(c,f)=>{var d;let h=await(c==null?void 0:c.handleChainStart(this.toJSON(),fn(t[f],"input"),o[f].runId,o[f].runType,void 0,void 0,(d=o[f].runName)!=null?d:this.getName()));return delete o[f].runId,h})),s;try{let c=e.call(this,t,o,a,i);s=await pa(c,(u=o==null?void 0:o[0])==null?void 0:u.signal)}catch(c){throw await Promise.all(a.map(f=>f==null?void 0:f.handleChainError(c))),c}return await Promise.all(a.map(c=>c==null?void 0:c.handleChainEnd(fn(s,"output")))),s}async*_transformStreamWithConfig(e,t,n){let i,o=!0,l,a=!0,s=Vt(n),u=await Zi(s);async function*c(){for await(let h of e){if(o)if(i===void 0)i=h;else try{i=$n(i,h)}catch(d){i=void 0,o=!1}yield h}}let f;try{let h=await ER(t.bind(this),c(),async()=>{var b;return u==null?void 0:u.handleChainStart(this.toJSON(),{input:""},s.runId,s.runType,void 0,void 0,(b=s.runName)!=null?b:this.getName())},n==null?void 0:n.signal,s);delete s.runId,f=h.setup;let d=f==null?void 0:f.handlers.find(TR),p=h.output;d!==void 0&&f!==void 0&&(p=d.tapOutputIterable(f.runId,p));let v=f==null?void 0:f.handlers.find(AR);v!==void 0&&f!==void 0&&(p=v.tapOutputIterable(f.runId,p));for await(let b of p)if(yield b,a)if(l===void 0)l=b;else try{l=$n(l,b)}catch(C){l=void 0,a=!1}}catch(h){throw await(f==null?void 0:f.handleChainError(h,void 0,void 0,void 0,{inputs:fn(i,"input")})),h}await(f==null?void 0:f.handleChainEnd(l!=null?l:{},void 0,void 0,void 0,{inputs:fn(i,"input")}))}getGraph(e){let t=new E3,n=t.addNode({name:`${this.getName()}Input`,schema:Gn.any()}),i=t.addNode(this),o=t.addNode({name:`${this.getName()}Output`,schema:Gn.any()});return t.addEdge(n,i),t.addEdge(i,o),t}pipe(e){return new Hs({first:this,last:zs(e)})}pick(e){return this.pipe(new qm(e))}assign(e){return this.pipe(new D9(new iu({steps:e})))}async*transform(e,t){let n;for await(let i of e)n===void 0?n=i:n=$n(n,i);yield*this._streamIterator(n,Vt(t))}async*streamLog(e,t,n){let i=new i3({...n,autoClose:!1,_schemaFormat:"original"}),o=Vt(t);yield*this._streamLog(e,i,o)}async*_streamLog(e,t,n){let{callbacks:i}=n;if(i===void 0)n.callbacks=[t];else if(Array.isArray(i))n.callbacks=i.concat([t]);else{let s=i.copy();s.addHandler(t,!0),n.callbacks=s}let o=this.stream(e,n);async function l(){try{let s=await o;for await(let u of s){let c=new Sl({ops:[{op:"add",path:"/streamed_output/-",value:u}]});await t.writer.write(c)}}finally{await t.writer.close()}}let a=l();try{for await(let s of t)yield s}finally{await a}}streamEvents(e,t,n){let i;if(t.version==="v1")i=this._streamEventsV1(e,t,n);else if(t.version==="v2")i=this._streamEventsV2(e,t,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?PI(i):kn.fromAsyncGenerator(i)}async*_streamEventsV2(e,t,n){var p,v;let i=new km({...n,autoClose:!1}),o=Vt(t),l=(p=o.runId)!=null?p:Yr();o.runId=l;let a=o.callbacks;if(a===void 0)o.callbacks=[i];else if(Array.isArray(a))o.callbacks=a.concat(i);else{let b=a.copy();b.addHandler(i,!0),o.callbacks=b}let s=new AbortController,u=this;async function c(){try{let b;t!=null&&t.signal?"any"in AbortSignal?b=AbortSignal.any([s.signal,t.signal]):(b=t.signal,t.signal.addEventListener("abort",()=>{s.abort()},{once:!0})):b=s.signal;let C=await u.stream(e,{...o,signal:b}),L=i.tapOutputIterable(l,C);for await(let S of L)if(s.signal.aborted)break}finally{await i.finish()}}let f=c(),h=!1,d;try{for await(let b of i){if(!h){b.data.input=e,h=!0,d=b.run_id,yield b;continue}b.run_id===d&&b.event.endsWith("_end")&&(v=b.data)!=null&&v.input&&delete b.data.input,yield b}}finally{s.abort(),await f}}async*_streamEventsV1(e,t,n){var p,v,b;let i,o=!1,l=Vt(t),a=(p=l.tags)!=null?p:[],s=(v=l.metadata)!=null?v:{},u=(b=l.runName)!=null?b:this.getName(),c=new i3({...n,autoClose:!1,_schemaFormat:"streaming_events"}),f=new Em({...n}),h=this._streamLog(e,c,l);for await(let C of h){if(i?i=i.concat(C):i=n3.fromRunLogPatch(C),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;let y={...i.state},z={run_id:y.id,event:`on_${y.type}_start`,name:u,tags:a,metadata:s,data:{input:e}};f.includeEvent(z,y.type)&&(yield z)}let L=C.ops.filter(y=>y.path.startsWith("/logs/")).map(y=>y.path.split("/")[2]),S=[...new Set(L)];for(let y of S){let z,G={},J=i.state.logs[y];if(J.end_time===void 0?J.streamed_output.length>0?z="stream":z="start":z="end",z==="start")J.inputs!==void 0&&(G.input=J.inputs);else if(z==="end")J.inputs!==void 0&&(G.input=J.inputs),G.output=J.final_output;else if(z==="stream"){let te=J.streamed_output.length;if(te!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${te} instead. Encountered in: "${J.name}"`);G={chunk:J.streamed_output[0]},J.streamed_output=[]}yield{event:`on_${J.type}_${z}`,name:J.name,run_id:J.id,tags:J.tags,metadata:J.metadata,data:G}}let{state:P}=i;if(P.streamed_output.length>0){let y=P.streamed_output.length;if(y!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${y} instead. Encountered in: "${P.name}"`);let z={chunk:P.streamed_output[0]};P.streamed_output=[];let G={event:`on_${P.type}_stream`,run_id:P.id,tags:a,metadata:s,name:u,data:z};f.includeEvent(G,P.type)&&(yield G)}}let d=i==null?void 0:i.state;if(d!==void 0){let C={event:`on_${d.type}_end`,name:u,run_id:d.id,tags:a,metadata:s,data:{output:d.final_output}};f.includeEvent(C,d.type)&&(yield C)}}static isRunnable(e){return a3(e)}withListeners({onStart:e,onEnd:t,onError:n}){return new wa({bound:this,config:{},configFactories:[i=>({callbacks:[new l3({config:i,onStart:e,onEnd:t,onError:n})]})]})}asTool(e){return Jte(this,e)}},wa=class r extends jt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){let t=Cm(this.config,...e);return Cm(t,...this.configFactories?await Promise.all(this.configFactories.map(async n=>await n(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new S3({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(Vt(t),this.kwargs))}async batch(e,t,n){let i=Array.isArray(t)?await Promise.all(t.map(async o=>this._mergeConfig(Vt(o),this.kwargs))):await this._mergeConfig(Vt(t),this.kwargs);return this.bound.batch(e,i,n)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(Vt(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(Vt(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(Vt(t),this.kwargs))}streamEvents(e,t,n){let i=this,o=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(Vt(t),i.kwargs),version:t.version},n)};return kn.fromAsyncGenerator(o())}static isRunnableBinding(e){return e.bound&&jt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:n}){return new r({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new l3({config:i,onStart:e,onEnd:t,onError:n})]})]})}},jm=class r extends jt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new r({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,n){return this.bound.batch(e,tn(t,{callbacks:n==null?void 0:n.getChild()}))}withListeners({onStart:e,onEnd:t,onError:n}){return new r({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:n})})}},S3=class extends wa{static lc_name(){return"RunnableRetry"}constructor(e){var t,n;super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=(t=e.maxAttemptNumber)!=null?t:this.maxAttemptNumber,this.onFailedAttempt=(n=e.onFailedAttempt)!=null?n:this.onFailedAttempt}_patchConfigForRetry(e,t,n){let i=e>1?`retry:attempt:${e}`:void 0;return tn(t,{callbacks:n==null?void 0:n.getChild(i)})}async _invoke(e,t,n){return(0,bw.default)(i=>super.invoke(e,this._patchConfigForRetry(i,t,n)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,n,i){let o={};try{await(0,bw.default)(async l=>{let a=e.map((h,d)=>d).filter(h=>o[h.toString()]===void 0||o[h.toString()]instanceof Error),s=a.map(h=>e[h]),u=a.map(h=>this._patchConfigForRetry(l,t==null?void 0:t[h],n==null?void 0:n[h])),c=await super.batch(s,u,{...i,returnExceptions:!0}),f;for(let h=0;h<c.length;h+=1){let d=c[h],p=a[h];d instanceof Error&&f===void 0&&(f=d,f.input=s[h]),o[p.toString()]=d}if(f)throw f;return c},{onFailedAttempt:l=>this.onFailedAttempt(l,l.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(l){if((i==null?void 0:i.returnExceptions)!==!0)throw l}return Object.keys(o).sort((l,a)=>parseInt(l,10)-parseInt(a,10)).map(l=>o[parseInt(l,10)])}async batch(e,t,n){return this._batchWithConfig(this._batch.bind(this),e,t,n)}},Hs=class r extends jt{static lc_name(){return"RunnableSequence"}constructor(e){var t,n;super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=(t=e.middle)!=null?t:this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=(n=e.omitSequenceTags)!=null?n:this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){var s;let n=Vt(t),i=await Zi(n),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),fn(e,"input"),n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;let l=e,a;try{let u=[this.first,...this.middle];for(let c=0;c<u.length;c+=1){let h=u[c].invoke(l,tn(n,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${c+1}`)}));l=await pa(h,t==null?void 0:t.signal)}if((s=t==null?void 0:t.signal)!=null&&s.aborted)throw new Error("Aborted");a=await this.last.invoke(l,tn(n,{callbacks:o==null?void 0:o.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(u){throw await(o==null?void 0:o.handleChainError(u)),u}return await(o==null?void 0:o.handleChainEnd(fn(a,"output"))),a}async batch(e,t,n){var s;let i=this._getOptionsList(t!=null?t:{},e.length),o=await Promise.all(i.map(Zi)),l=await Promise.all(o.map(async(u,c)=>{let f=await(u==null?void 0:u.handleChainStart(this.toJSON(),fn(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,f})),a=e;try{for(let u=0;u<this.steps.length;u+=1){let f=this.steps[u].batch(a,l.map((h,d)=>{let p=h==null?void 0:h.getChild(this.omitSequenceTags?void 0:`seq:step:${u+1}`);return tn(i[d],{callbacks:p})}),n);a=await pa(f,(s=i[0])==null?void 0:s.signal)}}catch(u){throw await Promise.all(l.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(l.map(u=>u==null?void 0:u.handleChainEnd(fn(a,"output")))),a}async*_streamIterator(e,t){var f;let n=await Zi(t),{runId:i,...o}=t!=null?t:{},l=await(n==null?void 0:n.handleChainStart(this.toJSON(),fn(e,"input"),i,void 0,void 0,void 0,o==null?void 0:o.runName)),a=[this.first,...this.middle,this.last],s=!0,u;async function*c(){yield e}try{let h=a[0].transform(c(),tn(o,{callbacks:l==null?void 0:l.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let d=1;d<a.length;d+=1)h=await a[d].transform(h,tn(o,{callbacks:l==null?void 0:l.getChild(this.omitSequenceTags?void 0:`seq:step:${d+1}`)}));for await(let d of h)if((f=t==null?void 0:t.signal)==null||f.throwIfAborted(),yield d,s)if(u===void 0)u=d;else try{u=$n(u,d)}catch(p){u=void 0,s=!1}}catch(h){throw await(l==null?void 0:l.handleChainError(h)),h}await(l==null?void 0:l.handleChainEnd(fn(u,"output")))}getGraph(e){let t=new E3,n=null;return this.steps.forEach((i,o)=>{let l=i.getGraph(e);o!==0&&l.trimFirstNode(),o!==this.steps.length-1&&l.trimLastNode(),t.extend(l);let a=l.firstNode();if(!a)throw new Error(`Runnable ${i} has no first node`);n&&t.addEdge(n,a),n=l.lastNode()}),t}pipe(e){var t;return r.isRunnableSequence(e)?new r({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:(t=this.name)!=null?t:e.name}):new r({first:this.first,middle:[...this.middle,this.last],last:zs(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&jt.isRunnable(e)}static from([e,...t],n){let i={};return typeof n=="string"?i.name=n:n!==void 0&&(i=n),new r({...i,first:zs(e),middle:t.slice(0,-1).map(zs),last:zs(t[t.length-1])})}},iu=class r extends jt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[t,n]of Object.entries(e.steps))this.steps[t]=zs(n)}static from(e){return new r({steps:e})}async invoke(e,t){let n=Vt(t),i=await Zi(n),o=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;let l={};try{let a=Object.entries(this.steps).map(async([s,u])=>{l[s]=await u.invoke(e,tn(n,{callbacks:o==null?void 0:o.getChild(`map:key:${s}`)}))});await pa(Promise.all(a),t==null?void 0:t.signal)}catch(a){throw await(o==null?void 0:o.handleChainError(a)),a}return await(o==null?void 0:o.handleChainEnd(l)),l}async*_transform(e,t,n){let i={...this.steps},o=kC(e,Object.keys(i).length),l=new Map(Object.entries(i).map(([a,s],u)=>{let c=s.transform(o[u],tn(n,{callbacks:t==null?void 0:t.getChild(`map:key:${a}`)}));return[a,c.next().then(f=>({key:a,gen:c,result:f}))]}));for(;l.size;){let a=Promise.race(l.values()),{key:s,result:u,gen:c}=await pa(a,n==null?void 0:n.signal);l.delete(s),u.done||(yield{[s]:u.value},l.set(s,c.next().then(f=>({key:s,gen:c,result:f}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}let i=Vt(t),o=new Ps({generator:this.transform(n(),i),config:i});return await o.setup,kn.fromAsyncGenerator(o)}},vw=class r extends jt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!rm(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){let[n]=this._getOptionsList(t!=null?t:{},1),i=await Zi(n),o=this.func(tn(n,{callbacks:i}),e);return pa(o,n==null?void 0:n.signal)}async*_streamIterator(e,t){var o,l;let[n]=this._getOptionsList(t!=null?t:{},1),i=await this.invoke(e,t);if(Zm(i)){for await(let a of i)(o=n==null?void 0:n.signal)==null||o.throwIfAborted(),yield a;return}if(OI(i)){for(;;){(l=n==null?void 0:n.signal)==null||l.throwIfAborted();let a=i.next();if(a.done)break;yield a.value}return}yield i}static from(e){return new r({func:e})}};Ol=class r extends jt{static lc_name(){return"RunnableLambda"}constructor(e){if(rm(e.func))return vw.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Kte(e.func),this.func=e.func}static from(e){return new r({func:e})}async _invoke(e,t,n){return new Promise((i,o)=>{var a;let l=tn(t,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((a=t==null?void 0:t.recursionLimit)!=null?a:vm)-1});Di.runWithConfig(El(l),async()=>{var s,u,c;try{let f=await this.func(e,{...l});if(f&&jt.isRunnable(f)){if((t==null?void 0:t.recursionLimit)===0)throw new Error("Recursion limit reached.");f=await f.invoke(e,{...l,recursionLimit:((s=l.recursionLimit)!=null?s:vm)-1})}else if(Zm(f)){let h;for await(let d of Fm(l,f))if((u=t==null?void 0:t.signal)==null||u.throwIfAborted(),h===void 0)h=d;else try{h=$n(h,d)}catch(p){h=d}f=h}else if(pw(f)){let h;for(let d of _w(l,f))if((c=t==null?void 0:t.signal)==null||c.throwIfAborted(),h===void 0)h=d;else try{h=$n(h,d)}catch(p){h=d}f=h}i(f)}catch(f){o(f)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,n){var a,s,u;let i;for await(let c of e)if(i===void 0)i=c;else try{i=$n(i,c)}catch(f){i=c}let o=tn(n,{callbacks:t==null?void 0:t.getChild(),recursionLimit:((a=n==null?void 0:n.recursionLimit)!=null?a:vm)-1}),l=await new Promise((c,f)=>{Di.runWithConfig(El(o),async()=>{try{let h=await this.func(i,{...o,config:o});c(h)}catch(h){f(h)}})});if(l&&jt.isRunnable(l)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");let c=await l.stream(i,o);for await(let f of c)yield f}else if(Zm(l))for await(let c of Fm(o,l))(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),yield c;else if(pw(l))for(let c of _w(o,l))(u=n==null?void 0:n.signal)==null||u.throwIfAborted(),yield c;else yield l}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}let i=Vt(t),o=new Ps({generator:this.transform(n(),i),config:i});return await o.setup,kn.fromAsyncGenerator(o)}},xm=class extends jt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}async invoke(e,t){let n=Vt(t),i=await Zi(n),{runId:o,...l}=n,a=await(i==null?void 0:i.handleChainStart(this.toJSON(),fn(e,"input"),o,void 0,void 0,void 0,l==null?void 0:l.runName)),s=tn(l,{callbacks:a==null?void 0:a.getChild()});return await Di.runWithConfig(s,async()=>{var f;let c;for(let h of this.runnables()){(f=n==null?void 0:n.signal)==null||f.throwIfAborted();try{let d=await h.invoke(e,s);return await(a==null?void 0:a.handleChainEnd(fn(d,"output"))),d}catch(d){c===void 0&&(c=d)}}throw c===void 0?new Error("No error stored at end of fallback."):(await(a==null?void 0:a.handleChainError(c)),c)})}async*_streamIterator(e,t){var f;let n=Vt(t),i=await Zi(n),{runId:o,...l}=n,a=await(i==null?void 0:i.handleChainStart(this.toJSON(),fn(e,"input"),o,void 0,void 0,void 0,l==null?void 0:l.runName)),s,u;for(let h of this.runnables()){(f=n==null?void 0:n.signal)==null||f.throwIfAborted();let d=tn(l,{callbacks:a==null?void 0:a.getChild()});try{let p=await h.stream(e,d);u=Fm(d,p);break}catch(p){s===void 0&&(s=p)}}if(u===void 0){let h=s!=null?s:new Error("No error stored at end of fallback.");throw await(a==null?void 0:a.handleChainError(h)),h}let c;try{for await(let h of u){yield h;try{c=c===void 0?c:$n(c,h)}catch(d){c=void 0}}}catch(h){throw await(a==null?void 0:a.handleChainError(h)),h}await(a==null?void 0:a.handleChainEnd(fn(c,"output")))}async batch(e,t,n){var s;if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");let i=this._getOptionsList(t!=null?t:{},e.length),o=await Promise.all(i.map(u=>Zi(u))),l=await Promise.all(o.map(async(u,c)=>{let f=await(u==null?void 0:u.handleChainStart(this.toJSON(),fn(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,f})),a;for(let u of this.runnables()){(s=i[0].signal)==null||s.throwIfAborted();try{let c=await u.batch(e,l.map((f,h)=>tn(i[h],{callbacks:f==null?void 0:f.getChild()})),n);return await Promise.all(l.map((f,h)=>f==null?void 0:f.handleChainEnd(fn(c[h],"output")))),c}catch(c){a===void 0&&(a=c)}}throw a?(await Promise.all(l.map(u=>u==null?void 0:u.handleChainError(a))),a):new Error("No error stored at end of fallbacks.")}};D9=class extends jt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof iu&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){let n=await this.mapper.invoke(e,t);return{...e,...n}}async*_transform(e,t,n){let i=this.mapper.getStepsKeys(),[o,l]=kC(e),a=this.mapper.transform(l,tn(n,{callbacks:t==null?void 0:t.getChild()})),s=a.next();for await(let u of o){if(typeof u!="object"||Array.isArray(u))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof u}`);let c=Object.fromEntries(Object.entries(u).filter(([f])=>!i.includes(f)));Object.keys(c).length>0&&(yield c)}yield(await s).value;for await(let u of a)yield u}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}let i=Vt(t),o=new Ps({generator:this.transform(n(),i),config:i});return await o.setup,kn.fromAsyncGenerator(o)}},qm=class extends jt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{let t=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(let t of e){let n=await this._pick(t);n!==void 0&&(yield n)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*n(){yield e}let i=Vt(t),o=new Ps({generator:this.transform(n(),i),config:i});return await o.setup,kn.fromAsyncGenerator(o)}},M3=class extends wa{constructor(e){var n;let t=Hs.from([Ol.from(async i=>{let o;if(J1(i))try{o=await this.schema.parseAsync(i.args)}catch(l){throw new j0("Received tool input did not match expected schema",JSON.stringify(i.args))}else o=i;return o}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:(n=e.config)!=null?n:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}});var A3,Z9,F9,Um,P3=ce(()=>{p9();Qh();Q1();A3=class extends lo{},Z9=class extends A3{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Qn(this.value)]}},F9=class extends A3{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return $h(this.messages)}toChatMessages(){return this.messages}},Um=class extends A3{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new Qn({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}});var Ns,T3=ce(()=>{P3();j9();Ns=class extends Vs{async formatPromptValue(e){let t=await this.format(e);return new Z9(t)}}});function ww(r){return typeof r=="function"}function Qte(r){return q9(r)?"array":typeof r}function Cw(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function II(r,e){return r!=null&&typeof r=="object"&&e in r}function $te(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}function tre(r,e){return ere.call(r,e)}function nre(r){return!tre(rre,r)}function ore(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return ire[t]})}function cre(r,e){if(!r)return[];var t=!1,n=[],i=[],o=[],l=!1,a=!1,s="",u=0;function c(){if(l&&!a)for(;o.length;)delete i[o.pop()];else o=[];l=!1,a=!1}var f,h,d;function p(J){if(typeof J=="string"&&(J=J.split(are,2)),!q9(J)||J.length!==2)throw new Error("Invalid tags: "+J);f=new RegExp(Cw(J[0])+"\\s*"),h=new RegExp("\\s*"+Cw(J[1])),d=new RegExp("\\s*"+Cw("}"+J[1]))}p(e||Wo.tags);for(var v=new R3(r),b,C,L,S,P,y;!v.eos();){if(b=v.pos,L=v.scanUntil(f),L)for(var z=0,G=L.length;z<G;++z)S=L.charAt(z),nre(S)?(o.push(i.length),s+=S):(a=!0,t=!0,s+=" "),i.push(["text",S,b,b+1]),b+=1,S===`
`&&(c(),s="",u=0,t=!1);if(!v.scan(f))break;if(l=!0,C=v.scan(ure)||"name",v.scan(lre),C==="="?(L=v.scanUntil(zI),v.scan(zI),v.scanUntil(h)):C==="{"?(L=v.scanUntil(d),v.scan(sre),v.scanUntil(h),C="&"):L=v.scanUntil(h),!v.scan(h))throw new Error("Unclosed tag at "+v.pos);if(C==">"?P=[C,L,b,v.pos,s,u,t]:P=[C,L,b,v.pos],u++,i.push(P),C==="#"||C==="^")n.push(P);else if(C==="/"){if(y=n.pop(),!y)throw new Error('Unopened section "'+L+'" at '+b);if(y[1]!==L)throw new Error('Unclosed section "'+y[1]+'" at '+b)}else C==="name"||C==="{"||C==="&"?a=!0:C==="="&&p(L)}if(c(),y=n.pop(),y)throw new Error('Unclosed section "'+y[1]+'" at '+v.pos);return hre(fre(i))}function fre(r){for(var e=[],t,n,i=0,o=r.length;i<o;++i)t=r[i],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function hre(r){for(var e=[],t=e,n=[],i,o,l=0,a=r.length;l<a;++l)switch(i=r[l],i[0]){case"#":case"^":t.push(i),n.push(i),t=i[4]=[];break;case"/":o=n.pop(),o[5]=i[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(i)}return e}function R3(r){this.string=r,this.tail=r,this.pos=0}function x9(r,e){this.view=r,this.cache={".":this.view},this.parent=e}function vi(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}var Xte,q9,ere,rre,ire,lre,are,zI,sre,ure,Wo,O3,Wm,HI=ce(()=>{Xte=Object.prototype.toString,q9=Array.isArray||function(e){return Xte.call(e)==="[object Array]"};ere=RegExp.prototype.test;rre=/\S/;ire={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};lre=/\s*/,are=/\s+/,zI=/\s*=/,sre=/\s*\}/,ure=/#|\^|\/|>|\{|&|=|!/;R3.prototype.eos=function(){return this.tail===""};R3.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};R3.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};x9.prototype.push=function(e){return new x9(e,this)};x9.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var i=this,o,l,a,s=!1;i;){if(e.indexOf(".")>0)for(o=i.view,l=e.split("."),a=0;o!=null&&a<l.length;)a===l.length-1&&(s=II(o,l[a])||$te(o,l[a])),o=o[l[a++]];else o=i.view[e],s=II(i.view,e);if(s){n=o;break}i=i.parent}t[e]=n}return ww(n)&&(n=n.call(this.view)),n};vi.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()};vi.prototype.parse=function(e,t){var n=this.templateCache,i=e+":"+(t||Wo.tags).join(":"),o=typeof n!="undefined",l=o?n.get(i):void 0;return l==null&&(l=cre(e,t),o&&n.set(i,l)),l};vi.prototype.render=function(e,t,n,i){var o=this.getConfigTags(i),l=this.parse(e,o),a=t instanceof x9?t:new x9(t,void 0);return this.renderTokens(l,a,n,e,i)};vi.prototype.renderTokens=function(e,t,n,i,o){for(var l="",a,s,u,c=0,f=e.length;c<f;++c)u=void 0,a=e[c],s=a[0],s==="#"?u=this.renderSection(a,t,n,i,o):s==="^"?u=this.renderInverted(a,t,n,i,o):s===">"?u=this.renderPartial(a,t,n,o):s==="&"?u=this.unescapedValue(a,t):s==="name"?u=this.escapedValue(a,t,o):s==="text"&&(u=this.rawValue(a)),u!==void 0&&(l+=u);return l};vi.prototype.renderSection=function(e,t,n,i,o){var l=this,a="",s=t.lookup(e[1]);function u(h){return l.render(h,t,n,o)}if(s){if(q9(s))for(var c=0,f=s.length;c<f;++c)a+=this.renderTokens(e[4],t.push(s[c]),n,i,o);else if(typeof s=="object"||typeof s=="string"||typeof s=="number")a+=this.renderTokens(e[4],t.push(s),n,i,o);else if(ww(s)){if(typeof i!="string")throw new Error("Cannot use higher-order sections without the original template");s=s.call(t.view,i.slice(e[3],e[5]),u),s!=null&&(a+=s)}else a+=this.renderTokens(e[4],t,n,i,o);return a}};vi.prototype.renderInverted=function(e,t,n,i,o){var l=t.lookup(e[1]);if(!l||q9(l)&&l.length===0)return this.renderTokens(e[4],t,n,i,o)};vi.prototype.indentPartial=function(e,t,n){for(var i=t.replace(/[^ \t]/g,""),o=e.split(`
`),l=0;l<o.length;l++)o[l].length&&(l>0||!n)&&(o[l]=i+o[l]);return o.join(`
`)};vi.prototype.renderPartial=function(e,t,n,i){if(n){var o=this.getConfigTags(i),l=ww(n)?n(e[1]):n[e[1]];if(l!=null){var a=e[6],s=e[5],u=e[4],c=l;s==0&&u&&(c=this.indentPartial(l,u,a));var f=this.parse(c,o);return this.renderTokens(f,t,n,c,i)}}};vi.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};vi.prototype.escapedValue=function(e,t,n){var i=this.getConfigEscape(n)||Wo.escape,o=t.lookup(e[1]);if(o!=null)return typeof o=="number"&&i===Wo.escape?String(o):i(o)};vi.prototype.rawValue=function(e){return e[1]};vi.prototype.getConfigTags=function(e){return q9(e)?e:e&&typeof e=="object"?e.tags:void 0};vi.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!q9(e))return e.escape};Wo={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){O3.templateCache=r},get templateCache(){return O3.templateCache}},O3=new vi;Wo.clearCache=function(){return O3.clearCache()};Wo.parse=function(e,t){return O3.parse(e,t)};Wo.render=function(e,t,n,i){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Qte(e)+'" was given as the first argument for mustache#render(template, view, partials)');return O3.render(e,t,n,i)};Wo.escape=ore;Wo.Scanner=R3;Wo.Context=x9;Wo.Writer=vi;Wm=Wo});function NI(){Wm.escape=r=>r}var I3,dre,Gm,mre,gre,yw,pre,Fi,z3,Q0,$0=ce(()=>{HI();Jh();I3=r=>{let e=r.split(""),t=[],n=(o,l)=>{for(let a=l;a<e.length;a+=1)if(o.includes(e[a]))return a;return-1},i=0;for(;i<e.length;)if(e[i]==="{"&&i+1<e.length&&e[i+1]==="{")t.push({type:"literal",text:"{"}),i+=2;else if(e[i]==="}"&&i+1<e.length&&e[i+1]==="}")t.push({type:"literal",text:"}"}),i+=2;else if(e[i]==="{"){let o=n("}",i);if(o<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(i+1,o).join("")}),i=o+1}else{if(e[i]==="}")throw new Error("Single '}' in template.");{let o=n("{}",i),l=(o<0?e.slice(i):e.slice(i,o)).join("");t.push({type:"literal",text:l}),i=o<0?e.length:o}}return t},dre=r=>r.map(e=>e[0]==="name"?{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}:["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}),Gm=r=>{NI();let e=Wm.parse(r);return dre(e)},mre=(r,e)=>I3(r).reduce((t,n)=>{if(n.type==="variable"){if(n.name in e){let i=typeof e[n.name]=="string"?e[n.name]:JSON.stringify(e[n.name]);return t+i}throw new Error(`(f-string) Missing value for input ${n.name}`)}return t+n.text},""),gre=(r,e)=>(NI(),Wm.render(r,e)),yw={"f-string":mre,mustache:gre},pre={"f-string":I3,mustache:Gm},Fi=(r,e,t)=>{try{return yw[e](r,t)}catch(n){throw K1(n,"INVALID_PROMPT_INPUT")}},z3=(r,e)=>pre[e](r),Q0=(r,e,t)=>{if(!(e in yw)){let n=Object.keys(yw);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${n}`)}try{let n=t.reduce((i,o)=>(i[o]="foo",i),{});Array.isArray(r)?r.forEach(i=>{if(i.type==="text")Fi(i.text,e,n);else if(i.type==="image_url")if(typeof i.image_url=="string")Fi(i.image_url,e,n);else{let o=i.image_url.url;Fi(o,e,n)}else throw new Error(`Invalid message template received. ${JSON.stringify(i,null,2)}`)}):Fi(r,e,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}}});var kw={};r9(kw,{PromptTemplate:()=>Go});var Go,U9=ce(()=>{T3();$0();Go=class r extends Ns{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if(this.templateFormat==="mustache")throw new Error("Mustache templates cannot be validated.");let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),Q0(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){let t=await this.mergePartialAndUserVariables(e);return Fi(this.template,this.templateFormat,t)}static fromExamples(e,t,n,i=`

`,o=""){let l=[o,...e,t].join(i);return new r({inputVariables:n,template:l})}static fromTemplate(e,t){let{templateFormat:n="f-string",...i}=t!=null?t:{},o=new Set;return z3(e,n).forEach(l=>{l.type==="variable"&&o.add(l.name)}),new r({inputVariables:[...o],templateFormat:n,template:e,...i})}async partial(e){var o;let t=this.inputVariables.filter(l=>!(l in e)),n={...(o=this.partialVariables)!=null?o:{},...e},i={...this,inputVariables:t,partialVariables:n};return new r(i)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new r({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}});var Lw=ce(()=>{xo()});var VI=ce(()=>{ti();x0();xo();hm();dm();Qh();Lw();mm();C9();Q1()});var W9=ce(()=>{x0();xo();hm();dm();Qh();mm();Q1();VI();Lw();sC();C9()});var G9,Ew=ce(()=>{P3();j9();$0();G9=class r extends Vs{static lc_name(){return"ImagePromptTemplate"}constructor(e){var t,n;if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=(t=e.templateFormat)!=null?t:this.templateFormat,this.validateTemplate=(n=e.validateTemplate)!=null?n:this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let i=this.inputVariables;this.partialVariables&&(i=i.concat(Object.keys(this.partialVariables))),Q0([{type:"image_url",image_url:this.template}],this.templateFormat,i)}}_getPromptType(){return"prompt"}async partial(e){var o;let t=this.inputVariables.filter(l=>!(l in e)),n={...(o=this.partialVariables)!=null?o:{},...e},i={...this,inputVariables:t,partialVariables:n};return new r(i)}async format(e){let t={};for(let[l,a]of Object.entries(this.template))typeof a=="string"?t[l]=Fi(a,this.templateFormat,e):t[l]=a;let n=e.url||t.url,i=e.detail||t.detail;if(!n)throw new Error("Must provide either an image URL.");if(typeof n!="string")throw new Error("url must be a string.");let o={url:n};return i&&(o.detail=i),o}async formatPromptValue(e){let t=await this.format(e);return new Um(t)}}});function Sw(r,e){let t=[];for(let n of Object.values(r))if(typeof n=="string")z3(n,e).forEach(i=>{i.type==="variable"&&t.push(i.name)});else if(Array.isArray(n))for(let i of n)typeof i=="string"?z3(i,e).forEach(o=>{o.type==="variable"&&t.push(o.name)}):typeof i=="object"&&t.push(...Sw(i,e));else typeof n=="object"&&n!==null&&t.push(...Sw(n,e));return Array.from(new Set(t))}function Mw(r,e,t){let n={};for(let[i,o]of Object.entries(r))if(typeof o=="string")n[i]=Fi(o,t,e);else if(Array.isArray(o)){let l=[];for(let a of o)typeof a=="string"?l.push(Fi(a,t,e)):typeof a=="object"&&l.push(Mw(a,e,t));n[i]=l}else typeof o=="object"&&o!==null?n[i]=Mw(o,e,t):n[i]=o;return n}var H3,Aw=ce(()=>{ti();$0();H3=class extends jt{static lc_name(){return"DictPromptTemplate"}constructor(e){var i;let t=(i=e.templateFormat)!=null?i:"f-string",n=Sw(e.template,t);super({inputVariables:n,...e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","dict"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=t,this.inputVariables=n}async format(e){return Mw(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}}});function _re(r){return r===null||typeof r!="object"||Array.isArray(r)?!1:Object.keys(r).length===1&&"text"in r&&typeof r.text=="string"}function bre(r){return r===null||typeof r!="object"||Array.isArray(r)?!1:"image_url"in r&&(typeof r.image_url=="string"||typeof r.image_url=="object"&&r.image_url!==null&&"url"in r.image_url&&typeof r.image_url.url=="string")}function vre(r){return typeof r.formatMessages=="function"}function Cre(r,e){var i;if(vre(r)||da(r))return r;if(Array.isArray(r)&&r[0]==="placeholder"){let o=r[1];if((e==null?void 0:e.templateFormat)==="mustache"&&typeof o=="string"&&o.slice(0,2)==="{{"&&o.slice(-2)==="}}"){let l=o.slice(2,-2);return new Ym({variableName:l,optional:!0})}else if(typeof o=="string"&&o[0]==="{"&&o[o.length-1]==="}"){let l=o.slice(1,-1);return new Ym({variableName:l,optional:!0})}throw new Error(`Invalid placeholder template for format ${(i=e==null?void 0:e.templateFormat)!=null?i:'"f-string"'}: "${r[1]}". Expected a variable name surrounded by ${(e==null?void 0:e.templateFormat)==="mustache"?"double":"single"} curly braces.`)}let t=Ll(r),n;if(typeof t.content=="string"?n=t.content:n=t.content.map(o=>"text"in o?{...o,text:o.text}:"image_url"in o?{...o,image_url:o.image_url}:o),t._getType()==="human")return Y9.fromTemplate(n,e);if(t._getType()==="ai")return Ow.fromTemplate(n,e);if(t._getType()==="system")return D3.fromTemplate(n,e);if(ao.isInstance(t))return Tw.fromTemplate(t.content,t.role,e);throw new Error(`Could not coerce message prompt template from input. Received message type: "${t._getType()}".`)}function wre(r){return r.constructor.lc_name()==="MessagesPlaceholder"}var N3,Ym,Pw,V3,Tw,B3,Y9,Ow,D3,K9,Z3=ce(()=>{W9();P3();ti();T3();j9();U9();Ew();$0();Jh();Aw();N3=class extends jt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,t){return this._callWithConfig(n=>this.formatMessages(n),e,{...t,runType:"prompt"})}},Ym=class extends N3{static lc_name(){return"MessagesPlaceholder"}constructor(e){var t;typeof e=="string"&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=(t=e.optional)!=null?t:!1}get inputVariables(){return[this.variableName]}async formatMessages(e){let t=e[this.variableName];if(this.optional&&!t)return[];if(!t){let i=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw i.name="InputFormatError",i}let n;try{Array.isArray(t)?n=t.map(Ll):n=[Ll(t)]}catch(i){let o=typeof t=="string"?t:JSON.stringify(t,null,2),l=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${o}`,`Additional message: ${i.message}`].join(`

`));throw l.name="InputFormatError",l.lc_error_code=i.lc_error_code,l}return n}},Pw=class extends N3{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}},V3=class extends Vs{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){let t=await this.formatMessages(e);return new F9(t)}},Tw=class extends Pw{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new ao(await this.prompt.format(e),this.role)}static fromTemplate(e,t,n){return new this(Go.fromTemplate(e,{templateFormat:n==null?void 0:n.templateFormat}),t)}};B3=class extends N3{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,t){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let n=[];this.prompt.forEach(i=>{"inputVariables"in i&&(n=n.concat(i.inputVariables))}),this.inputVariables=n}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=t!=null?t:this.additionalOptions}createMessage(e){let t=this.constructor;if(t._messageClass()){let n=t._messageClass();return new n({content:e})}else if(t.chatMessageClass){let n=t.chatMessageClass();return new n({content:e,role:this.getRoleFromMessageClass(n.lc_name())})}else throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,t){var i,o,l;if(typeof e=="string")return new this(Go.fromTemplate(e,t));let n=[];for(let a of e)if(typeof a=="string")n.push(Go.fromTemplate(a,t));else if(a!==null)if(_re(a)){let s="";typeof a.text=="string"&&(s=(i=a.text)!=null?i:"");let u={...t,additionalContentFields:a};n.push(Go.fromTemplate(s,u))}else if(bre(a)){let s=(o=a.image_url)!=null?o:"",u,c=[];if(typeof s=="string"){let f;(t==null?void 0:t.templateFormat)==="mustache"?f=Gm(s):f=I3(s);let h=f.flatMap(d=>d.type==="variable"?[d.name]:[]);if(((l=h==null?void 0:h.length)!=null?l:0)>0){if(h.length>1)throw new Error(`Only one format variable allowed per image template.
Got: ${h}
From: ${s}`);c=[h[0]]}else c=[];s={url:s},u=new G9({template:s,inputVariables:c,templateFormat:t==null?void 0:t.templateFormat,additionalContentFields:a})}else if(typeof s=="object"){if("url"in s){let f;(t==null?void 0:t.templateFormat)==="mustache"?f=Gm(s.url):f=I3(s.url),c=f.flatMap(h=>h.type==="variable"?[h.name]:[])}else c=[];u=new G9({template:s,inputVariables:c,templateFormat:t==null?void 0:t.templateFormat,additionalContentFields:a})}else throw new Error("Invalid image template");n.push(u)}else typeof a=="object"&&n.push(new H3({template:a,templateFormat:t==null?void 0:t.templateFormat}));return new this({prompt:n,additionalOptions:t})}async format(e){if(this.prompt instanceof Ns){let t=await this.prompt.format(e);return this.createMessage(t)}else{let t=[];for(let n of this.prompt){let i={};if(!("inputVariables"in n))throw new Error(`Prompt ${n} does not have inputVariables defined.`);for(let o of n.inputVariables)i||(i={[o]:e[o]}),i={...i,[o]:e[o]};if(n instanceof Ns){let o=await n.format(i),l;"additionalContentFields"in n&&(l=n.additionalContentFields),t.push({...l,type:"text",text:o})}else if(n instanceof G9){let o=await n.format(i),l;"additionalContentFields"in n&&(l=n.additionalContentFields),t.push({...l,type:"image_url",image_url:o})}else if(n instanceof H3){let o=await n.format(i),l;"additionalContentFields"in n&&(l=n.additionalContentFields),t.push({...l,...o})}}return this.createMessage(t)}}async formatMessages(e){return[await this.format(e)]}},Y9=class extends B3{static _messageClass(){return Qn}static lc_name(){return"HumanMessagePromptTemplate"}},Ow=class extends B3{static _messageClass(){return Hn}static lc_name(){return"AIMessagePromptTemplate"}},D3=class extends B3{static _messageClass(){return ma}static lc_name(){return"SystemMessagePromptTemplate"}};K9=class r extends V3{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),e.templateFormat==="mustache"&&e.validateTemplate===void 0&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){let t=new Set;for(let a of this.promptMessages)if(!(a instanceof un))for(let s of a.inputVariables)t.add(s);let n=this.inputVariables,i=new Set(this.partialVariables?n.concat(Object.keys(this.partialVariables)):n),o=new Set([...i].filter(a=>!t.has(a)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are not used in any of the prompt messages.`);let l=new Set([...t].filter(a=>!i.has(a)));if(l.size>0)throw new Error(`Input variables \`${[...l]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,t){if(typeof e.content=="string")return e;let n=await Promise.all(e.content.map(async i=>{if(i.type!=="image_url")return i;let o="";typeof i.image_url=="string"?o=i.image_url:o=i.image_url.url;let a=await Go.fromTemplate(o,{templateFormat:this.templateFormat}).format(t);return typeof i.image_url!="string"&&"url"in i.image_url?i.image_url.url=a:i.image_url=a,i}));return e.content=n,e}async formatMessages(e){let t=await this.mergePartialAndUserVariables(e),n=[];for(let i of this.promptMessages)if(i instanceof un)n.push(await this._parseImagePrompts(i,t));else{let o=i.inputVariables.reduce((a,s)=>{if(!(s in t)&&!(wre(i)&&i.optional))throw K1(new Error(`Missing value for input variable \`${s.toString()}\``),"INVALID_PROMPT_INPUT");return a[s]=t[s],a},{}),l=await i.formatMessages(o);n=n.concat(l)}return n}async partial(e){var o;let t=this.inputVariables.filter(l=>!(l in e)),n={...(o=this.partialVariables)!=null?o:{},...e},i={...this,inputVariables:t,partialVariables:n};return new r(i)}static fromTemplate(e,t){let n=Go.fromTemplate(e,t),i=new Y9({prompt:n});return this.fromMessages([i])}static fromMessages(e,t){let n=e.reduce((l,a)=>l.concat(a instanceof r?a.promptMessages:[Cre(a,t)]),[]),i=e.reduce((l,a)=>a instanceof r?Object.assign(l,a.partialVariables):l,Object.create(null)),o=new Set;for(let l of n)if(!(l instanceof un))for(let a of l.inputVariables)a in i||o.add(a);return new this({...t,inputVariables:[...o],promptMessages:n,partialVariables:i,templateFormat:t==null?void 0:t.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}});var BI={};r9(BI,{FewShotChatMessagePromptTemplate:()=>Iw,FewShotPromptTemplate:()=>Rw});var Rw,Iw,zw=ce(()=>{T3();$0();U9();Z3();Rw=class r extends Ns{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),Q0(this.prefix+this.suffix,this.templateFormat,t)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){var o;let t=this.inputVariables.filter(l=>!(l in e)),n={...(o=this.partialVariables)!=null?o:{},...e},i={...this,inputVariables:t,partialVariables:n};return new r(i)}async format(e){let t=await this.mergePartialAndUserVariables(e),n=await this.getExamples(t),i=await Promise.all(n.map(l=>this.examplePrompt.format(l))),o=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return Fi(o,this.templateFormat,t)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){let{example_prompt:t}=e;if(!t)throw new Error("Missing example prompt");let n=await Go.deserialize(t),i;if(Array.isArray(e.examples))i=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new r({inputVariables:e.input_variables,examplePrompt:n,examples:i,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}},Iw=class r extends V3{_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(e){var t,n,i,o,l;if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.examples=e.examples,this.examplePrompt=e.examplePrompt,this.exampleSeparator=(t=e.exampleSeparator)!=null?t:`

`,this.exampleSelector=e.exampleSelector,this.prefix=(n=e.prefix)!=null?n:"",this.suffix=(i=e.suffix)!=null?i:"",this.templateFormat=(o=e.templateFormat)!=null?o:"f-string",this.validateTemplate=(l=e.validateTemplate)!=null?l:!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let a=this.inputVariables;this.partialVariables&&(a=a.concat(Object.keys(this.partialVariables))),Q0(this.prefix+this.suffix,this.templateFormat,a)}}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(e){let t=await this.mergePartialAndUserVariables(e),n=await this.getExamples(t);n=n.map(o=>{let l={};return this.examplePrompt.inputVariables.forEach(a=>{l[a]=o[a]}),l});let i=[];for(let o of n){let l=await this.examplePrompt.formatMessages(o);i.push(...l)}return i}async format(e){let t=await this.mergePartialAndUserVariables(e),n=await this.getExamples(t),o=(await Promise.all(n.map(a=>this.examplePrompt.formatMessages(a)))).flat().map(a=>a.content),l=[this.prefix,...o,this.suffix].join(this.exampleSeparator);return Fi(l,this.templateFormat,t)}async partial(e){var o;let t=this.inputVariables.filter(l=>!(l in e)),n={...(o=this.partialVariables)!=null?o:{},...e},i={...this,inputVariables:t,partialVariables:n};return new r(i)}}});var Vs,j9=ce(()=>{ti();Vs=class extends jt{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){var o;let t=(o=this.partialVariables)!=null?o:{},n={};for(let[l,a]of Object.entries(t))typeof a=="string"?n[l]=a:n[l]=await a();return{...n,...e}}async invoke(e,t){var o,l;let n={...this.metadata,...t==null?void 0:t.metadata},i=[...(o=this.tags)!=null?o:[],...(l=t==null?void 0:t.tags)!=null?l:[]];return this._callWithConfig(a=>this.formatPromptValue(a),e,{...t,tags:i,metadata:n,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{let{PromptTemplate:t}=await Promise.resolve().then(()=>(U9(),kw));return t.deserialize(e)}case void 0:{let{PromptTemplate:t}=await Promise.resolve().then(()=>(U9(),kw));return t.deserialize({...e,_type:"prompt"})}case"few_shot":{let{FewShotPromptTemplate:t}=await Promise.resolve().then(()=>(zw(),BI));return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}});var FI=ae((Km,ZI)=>{(function(r,e){typeof Km=="object"&&typeof ZI!="undefined"?e(Km):typeof define=="function"&&define.amd?define(["exports"],e):(r=typeof globalThis!="undefined"?globalThis:r||self,e(r.WebStreamsPolyfill={}))})(Km,function(r){"use strict";function e(){}function t(g){return typeof g=="object"&&g!==null||typeof g=="function"}let n=e;function i(g,w){try{Object.defineProperty(g,"name",{value:w,configurable:!0})}catch(T){}}let o=Promise,l=Promise.prototype.then,a=Promise.reject.bind(o);function s(g){return new o(g)}function u(g){return s(w=>w(g))}function c(g){return a(g)}function f(g,w,T){return l.call(g,w,T)}function h(g,w,T){f(f(g,w,T),void 0,n)}function d(g,w){h(g,w)}function p(g,w){h(g,void 0,w)}function v(g,w,T){return f(g,w,T)}function b(g){f(g,void 0,n)}let C=g=>{if(typeof queueMicrotask=="function")C=queueMicrotask;else{let w=u(void 0);C=T=>f(w,T)}return C(g)};function L(g,w,T){if(typeof g!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(g,w,T)}function S(g,w,T){try{return u(L(g,w,T))}catch($){return c($)}}let P=16384;class y{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(w){let T=this._back,$=T;T._elements.length===P-1&&($={_elements:[],_next:void 0}),T._elements.push(w),$!==T&&(this._back=$,T._next=$),++this._size}shift(){let w=this._front,T=w,$=this._cursor,le=$+1,ue=w._elements,me=ue[$];return le===P&&(T=w._next,le=0),--this._size,this._cursor=le,w!==T&&(this._front=T),ue[$]=void 0,me}forEach(w){let T=this._cursor,$=this._front,le=$._elements;for(;(T!==le.length||$._next!==void 0)&&!(T===le.length&&($=$._next,le=$._elements,T=0,le.length===0));)w(le[T]),++T}peek(){let w=this._front,T=this._cursor;return w._elements[T]}}let z=Symbol("[[AbortSteps]]"),G=Symbol("[[ErrorSteps]]"),J=Symbol("[[CancelSteps]]"),te=Symbol("[[PullSteps]]"),ne=Symbol("[[ReleaseSteps]]");function Q(g,w){g._ownerReadableStream=w,w._reader=g,w._state==="readable"?Te(g):w._state==="closed"?rt(g):be(g,w._storedError)}function ee(g,w){let T=g._ownerReadableStream;return Un(T,w)}function se(g){let w=g._ownerReadableStream;w._state==="readable"?Ee(g,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Re(g,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),w._readableStreamController[ne](),w._reader=void 0,g._ownerReadableStream=void 0}function Pe(g){return new TypeError("Cannot "+g+" a stream using a released reader")}function Te(g){g._closedPromise=s((w,T)=>{g._closedPromise_resolve=w,g._closedPromise_reject=T})}function be(g,w){Te(g),Ee(g,w)}function rt(g){Te(g),nr(g)}function Ee(g,w){g._closedPromise_reject!==void 0&&(b(g._closedPromise),g._closedPromise_reject(w),g._closedPromise_resolve=void 0,g._closedPromise_reject=void 0)}function Re(g,w){be(g,w)}function nr(g){g._closedPromise_resolve!==void 0&&(g._closedPromise_resolve(void 0),g._closedPromise_resolve=void 0,g._closedPromise_reject=void 0)}let Xt=Number.isFinite||function(g){return typeof g=="number"&&isFinite(g)},Oe=Math.trunc||function(g){return g<0?Math.ceil(g):Math.floor(g)};function fe(g){return typeof g=="object"||typeof g=="function"}function hr(g,w){if(g!==void 0&&!fe(g))throw new TypeError(`${w} is not an object.`)}function qt(g,w){if(typeof g!="function")throw new TypeError(`${w} is not a function.`)}function Mr(g){return typeof g=="object"&&g!==null||typeof g=="function"}function sn(g,w){if(!Mr(g))throw new TypeError(`${w} is not an object.`)}function $r(g,w,T){if(g===void 0)throw new TypeError(`Parameter ${w} is required in '${T}'.`)}function Ao(g,w,T){if(g===void 0)throw new TypeError(`${w} is required in '${T}'.`)}function vn(g){return Number(g)}function Tn(g){return g===0?0:g}function Mi(g){return Tn(Oe(g))}function jn(g,w){let $=Number.MAX_SAFE_INTEGER,le=Number(g);if(le=Tn(le),!Xt(le))throw new TypeError(`${w} is not a finite number`);if(le=Mi(le),le<0||le>$)throw new TypeError(`${w} is outside the accepted range of 0 to ${$}, inclusive`);return!Xt(le)||le===0?0:le}function ai(g,w){if(!ra(g))throw new TypeError(`${w} is not a ReadableStream.`)}function ke(g){return new we(g)}function Po(g,w){g._reader._readRequests.push(w)}function sl(g,w,T){let le=g._reader._readRequests.shift();T?le._closeSteps():le._chunkSteps(w)}function Cn(g){return g._reader._readRequests.length}function Ir(g){let w=g._reader;return!(w===void 0||!en(w))}class we{constructor(w){if($r(w,1,"ReadableStreamDefaultReader"),ai(w,"First parameter"),na(w))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Q(this,w),this._readRequests=new y}get closed(){return en(this)?this._closedPromise:c(Ve("closed"))}cancel(w=void 0){return en(this)?this._ownerReadableStream===void 0?c(Pe("cancel")):ee(this,w):c(Ve("cancel"))}read(){if(!en(this))return c(Ve("read"));if(this._ownerReadableStream===void 0)return c(Pe("read from"));let w,T,$=s((ue,me)=>{w=ue,T=me});return Qe(this,{_chunkSteps:ue=>w({value:ue,done:!1}),_closeSteps:()=>w({value:void 0,done:!0}),_errorSteps:ue=>T(ue)}),$}releaseLock(){if(!en(this))throw Ve("releaseLock");this._ownerReadableStream!==void 0&&Ie(this)}}Object.defineProperties(we.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(we.prototype.cancel,"cancel"),i(we.prototype.read,"read"),i(we.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(we.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function en(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_readRequests")?!1:g instanceof we}function Qe(g,w){let T=g._ownerReadableStream;T._disturbed=!0,T._state==="closed"?w._closeSteps():T._state==="errored"?w._errorSteps(T._storedError):T._readableStreamController[te](w)}function Ie(g){se(g);let w=new TypeError("Reader was released");st(g,w)}function st(g,w){let T=g._readRequests;g._readRequests=new y,T.forEach($=>{$._errorSteps(w)})}function Ve(g){return new TypeError(`ReadableStreamDefaultReader.prototype.${g} can only be used on a ReadableStreamDefaultReader`)}let Me=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ae{constructor(w,T){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=w,this._preventCancel=T}next(){let w=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?v(this._ongoingPromise,w,w):w(),this._ongoingPromise}return(w){let T=()=>this._returnSteps(w);return this._ongoingPromise?v(this._ongoingPromise,T,T):T()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let w=this._reader,T,$,le=s((me,Be)=>{T=me,$=Be});return Qe(w,{_chunkSteps:me=>{this._ongoingPromise=void 0,C(()=>T({value:me,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,se(w),T({value:void 0,done:!0})},_errorSteps:me=>{this._ongoingPromise=void 0,this._isFinished=!0,se(w),$(me)}}),le}_returnSteps(w){if(this._isFinished)return Promise.resolve({value:w,done:!0});this._isFinished=!0;let T=this._reader;if(!this._preventCancel){let $=ee(T,w);return se(T),v($,()=>({value:w,done:!0}))}return se(T),u({value:w,done:!0})}}let nt={next(){return L1(this)?this._asyncIteratorImpl.next():c($u("next"))},return(g){return L1(this)?this._asyncIteratorImpl.return(g):c($u("return"))}};Object.setPrototypeOf(nt,Me);function Wr(g,w){let T=ke(g),$=new Ae(T,w),le=Object.create(nt);return le._asyncIteratorImpl=$,le}function L1(g){if(!t(g)||!Object.prototype.hasOwnProperty.call(g,"_asyncIteratorImpl"))return!1;try{return g._asyncIteratorImpl instanceof Ae}catch(w){return!1}}function $u(g){return new TypeError(`ReadableStreamAsyncIterator.${g} can only be used on a ReadableSteamAsyncIterator`)}let n7=Number.isNaN||function(g){return g!==g};var bc,On,vc;function rs(g){return g.slice()}function e0(g,w,T,$,le){new Uint8Array(g).set(new Uint8Array(T,$,le),w)}let Wt=g=>(typeof g.transfer=="function"?Wt=w=>w.transfer():typeof structuredClone=="function"?Wt=w=>structuredClone(w,{transfer:[w]}):Wt=w=>w,Wt(g)),ul=g=>(typeof g.detached=="boolean"?ul=w=>w.detached:ul=w=>w.byteLength===0,ul(g));function ih(g,w,T){if(g.slice)return g.slice(w,T);let $=T-w,le=new ArrayBuffer($);return e0(le,0,g,w,$),le}function ns(g,w){let T=g[w];if(T!=null){if(typeof T!="function")throw new TypeError(`${String(w)} is not a function`);return T}}function oh(g){let w={[Symbol.iterator]:()=>g.iterator},T=async function*(){return yield*w}(),$=T.next;return{iterator:T,nextMethod:$,done:!1}}let E1=(vc=(bc=Symbol.asyncIterator)!==null&&bc!==void 0?bc:(On=Symbol.for)===null||On===void 0?void 0:On.call(Symbol,"Symbol.asyncIterator"))!==null&&vc!==void 0?vc:"@@asyncIterator";function is(g,w="sync",T){if(T===void 0)if(w==="async"){if(T=ns(g,E1),T===void 0){let ue=ns(g,Symbol.iterator),me=is(g,"sync",ue);return oh(me)}}else T=ns(g,Symbol.iterator);if(T===void 0)throw new TypeError("The object is not iterable");let $=L(T,g,[]);if(!t($))throw new TypeError("The iterator method must return an object");let le=$.next;return{iterator:$,nextMethod:le,done:!1}}function Cc(g){let w=L(g.nextMethod,g.iterator,[]);if(!t(w))throw new TypeError("The iterator.next() method must return an object");return w}function B_(g){return!!g.done}function wc(g){return g.value}function D_(g){return!(typeof g!="number"||n7(g)||g<0)}function S1(g){let w=ih(g.buffer,g.byteOffset,g.byteOffset+g.byteLength);return new Uint8Array(w)}function M1(g){let w=g._queue.shift();return g._queueTotalSize-=w.size,g._queueTotalSize<0&&(g._queueTotalSize=0),w.value}function De(g,w,T){if(!D_(T)||T===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");g._queue.push({value:w,size:T}),g._queueTotalSize+=T}function Z_(g){return g._queue.peek().value}function $l(g){g._queue=new y,g._queueTotalSize=0}function xn(g){return g===DataView}function lh(g){return xn(g.constructor)}function or(g){return xn(g)?1:g.BYTES_PER_ELEMENT}class to{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ro(this))throw Mc("view");return this._view}respond(w){if(!ro(this))throw Mc("respond");if($r(w,1,"respond"),w=jn(w,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ul(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");n0(this._associatedReadableByteStreamController,w)}respondWithNewView(w){if(!ro(this))throw Mc("respondWithNewView");if($r(w,1,"respondWithNewView"),!ArrayBuffer.isView(w))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(ul(w.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Ec(this._associatedReadableByteStreamController,w)}}Object.defineProperties(to.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),i(to.prototype.respond,"respond"),i(to.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(to.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class cl{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!zr(this))throw fl("byobRequest");return Lc(this)}get desiredSize(){if(!zr(this))throw fl("desiredSize");return T1(this)}close(){if(!zr(this))throw fl("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let w=this._controlledReadableByteStream._state;if(w!=="readable")throw new TypeError(`The stream (in ${w} state) is not in the readable state and cannot be closed`);P1(this)}enqueue(w){if(!zr(this))throw fl("enqueue");if($r(w,1,"enqueue"),!ArrayBuffer.isView(w))throw new TypeError("chunk must be an array buffer view");if(w.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(w.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let T=this._controlledReadableByteStream._state;if(T!=="readable")throw new TypeError(`The stream (in ${T} state) is not in the readable state and cannot be enqueued to`);kc(this,w)}error(w=void 0){if(!zr(this))throw fl("error");Ai(this,w)}[J](w){qr(this),$l(this);let T=this._cancelAlgorithm(w);return r0(this),T}[te](w){let T=this._controlledReadableByteStream;if(this._queueTotalSize>0){u7(this,w);return}let $=this._autoAllocateChunkSize;if($!==void 0){let le;try{le=new ArrayBuffer($)}catch(me){w._errorSteps(me);return}let ue={buffer:le,bufferByteLength:$,byteOffset:0,byteLength:$,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(ue)}Po(T,w),wn(this)}[ne](){if(this._pendingPullIntos.length>0){let w=this._pendingPullIntos.peek();w.readerType="none",this._pendingPullIntos=new y,this._pendingPullIntos.push(w)}}}Object.defineProperties(cl.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),i(cl.prototype.close,"close"),i(cl.prototype.enqueue,"enqueue"),i(cl.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(cl.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function zr(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_controlledReadableByteStream")?!1:g instanceof cl}function ro(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_associatedReadableByteStreamController")?!1:g instanceof to}function wn(g){if(!q_(g))return;if(g._pulling){g._pullAgain=!0;return}g._pulling=!0;let T=g._pullAlgorithm();h(T,()=>(g._pulling=!1,g._pullAgain&&(g._pullAgain=!1,wn(g)),null),$=>(Ai(g,$),null))}function qr(g){ah(g),g._pendingPullIntos=new y}function si(g,w){let T=!1;g._state==="closed"&&(T=!0);let $=To(w);w.readerType==="default"?sl(g,$,T):G_(g,$,T)}function To(g){let w=g.bytesFilled,T=g.elementSize;return new g.viewConstructor(g.buffer,g.byteOffset,w/T)}function Oo(g,w,T,$){g._queue.push({buffer:w,byteOffset:T,byteLength:$}),g._queueTotalSize+=$}function i7(g,w,T,$){let le;try{le=ih(w,T,T+$)}catch(ue){throw Ai(g,ue),ue}Oo(g,le,0,$)}function o7(g,w){w.bytesFilled>0&&i7(g,w.buffer,w.byteOffset,w.bytesFilled),A1(g)}function l7(g,w){let T=Math.min(g._queueTotalSize,w.byteLength-w.bytesFilled),$=w.bytesFilled+T,le=T,ue=!1,me=$%w.elementSize,Be=$-me;Be>=w.minimumFill&&(le=Be-w.bytesFilled,ue=!0);let ht=g._queue;for(;le>0;){let it=ht.peek(),vt=Math.min(le,it.byteLength),Ot=w.byteOffset+w.bytesFilled;e0(w.buffer,Ot,it.buffer,it.byteOffset,vt),it.byteLength===vt?ht.shift():(it.byteOffset+=vt,it.byteLength-=vt),g._queueTotalSize-=vt,Hr(g,vt,w),le-=vt}return ue}function Hr(g,w,T){T.bytesFilled+=w}function t0(g){g._queueTotalSize===0&&g._closeRequested?(r0(g),c0(g._controlledReadableByteStream)):wn(g)}function ah(g){g._byobRequest!==null&&(g._byobRequest._associatedReadableByteStreamController=void 0,g._byobRequest._view=null,g._byobRequest=null)}function yc(g){for(;g._pendingPullIntos.length>0;){if(g._queueTotalSize===0)return;let w=g._pendingPullIntos.peek();l7(g,w)&&(A1(g),si(g._controlledReadableByteStream,w))}}function a7(g){let w=g._controlledReadableByteStream._reader;for(;w._readRequests.length>0;){if(g._queueTotalSize===0)return;let T=w._readRequests.shift();u7(g,T)}}function F_(g,w,T,$){let le=g._controlledReadableByteStream,ue=w.constructor,me=or(ue),{byteOffset:Be,byteLength:ht}=w,it=T*me,vt;try{vt=Wt(w.buffer)}catch(ur){$._errorSteps(ur);return}let Ot={buffer:vt,bufferByteLength:vt.byteLength,byteOffset:Be,byteLength:ht,bytesFilled:0,minimumFill:it,elementSize:me,viewConstructor:ue,readerType:"byob"};if(g._pendingPullIntos.length>0){g._pendingPullIntos.push(Ot),h7(le,$);return}if(le._state==="closed"){let ur=new ue(Ot.buffer,Ot.byteOffset,0);$._closeSteps(ur);return}if(g._queueTotalSize>0){if(l7(g,Ot)){let ur=To(Ot);t0(g),$._chunkSteps(ur);return}if(g._closeRequested){let ur=new TypeError("Insufficient bytes to fill elements in the given buffer");Ai(g,ur),$._errorSteps(ur);return}}g._pendingPullIntos.push(Ot),h7(le,$),wn(g)}function j_(g,w){w.readerType==="none"&&A1(g);let T=g._controlledReadableByteStream;if(sh(T))for(;d7(T)>0;){let $=A1(g);si(T,$)}}function x_(g,w,T){if(Hr(g,w,T),T.readerType==="none"){o7(g,T),yc(g);return}if(T.bytesFilled<T.minimumFill)return;A1(g);let $=T.bytesFilled%T.elementSize;if($>0){let le=T.byteOffset+T.bytesFilled;i7(g,T.buffer,le-$,$)}T.bytesFilled-=$,si(g._controlledReadableByteStream,T),yc(g)}function s7(g,w){let T=g._pendingPullIntos.peek();ah(g),g._controlledReadableByteStream._state==="closed"?j_(g,T):x_(g,w,T),wn(g)}function A1(g){return g._pendingPullIntos.shift()}function q_(g){let w=g._controlledReadableByteStream;return w._state!=="readable"||g._closeRequested||!g._started?!1:!!(Ir(w)&&Cn(w)>0||sh(w)&&d7(w)>0||T1(g)>0)}function r0(g){g._pullAlgorithm=void 0,g._cancelAlgorithm=void 0}function P1(g){let w=g._controlledReadableByteStream;if(!(g._closeRequested||w._state!=="readable")){if(g._queueTotalSize>0){g._closeRequested=!0;return}if(g._pendingPullIntos.length>0){let T=g._pendingPullIntos.peek();if(T.bytesFilled%T.elementSize!==0){let $=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ai(g,$),$}}r0(g),c0(w)}}function kc(g,w){let T=g._controlledReadableByteStream;if(g._closeRequested||T._state!=="readable")return;let{buffer:$,byteOffset:le,byteLength:ue}=w;if(ul($))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let me=Wt($);if(g._pendingPullIntos.length>0){let Be=g._pendingPullIntos.peek();if(ul(Be.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");ah(g),Be.buffer=Wt(Be.buffer),Be.readerType==="none"&&o7(g,Be)}if(Ir(T))if(a7(g),Cn(T)===0)Oo(g,me,le,ue);else{g._pendingPullIntos.length>0&&A1(g);let Be=new Uint8Array(me,le,ue);sl(T,Be,!1)}else sh(T)?(Oo(g,me,le,ue),yc(g)):Oo(g,me,le,ue);wn(g)}function Ai(g,w){let T=g._controlledReadableByteStream;T._state==="readable"&&(qr(g),$l(g),r0(g),D7(T,w))}function u7(g,w){let T=g._queue.shift();g._queueTotalSize-=T.byteLength,t0(g);let $=new Uint8Array(T.buffer,T.byteOffset,T.byteLength);w._chunkSteps($)}function Lc(g){if(g._byobRequest===null&&g._pendingPullIntos.length>0){let w=g._pendingPullIntos.peek(),T=new Uint8Array(w.buffer,w.byteOffset+w.bytesFilled,w.byteLength-w.bytesFilled),$=Object.create(to.prototype);Sc($,g,T),g._byobRequest=$}return g._byobRequest}function T1(g){let w=g._controlledReadableByteStream._state;return w==="errored"?null:w==="closed"?0:g._strategyHWM-g._queueTotalSize}function n0(g,w){let T=g._pendingPullIntos.peek();if(g._controlledReadableByteStream._state==="closed"){if(w!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(w===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(T.bytesFilled+w>T.byteLength)throw new RangeError("bytesWritten out of range")}T.buffer=Wt(T.buffer),s7(g,w)}function Ec(g,w){let T=g._pendingPullIntos.peek();if(g._controlledReadableByteStream._state==="closed"){if(w.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(w.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(T.byteOffset+T.bytesFilled!==w.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(T.bufferByteLength!==w.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(T.bytesFilled+w.byteLength>T.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let le=w.byteLength;T.buffer=Wt(w.buffer),s7(g,le)}function c7(g,w,T,$,le,ue,me){w._controlledReadableByteStream=g,w._pullAgain=!1,w._pulling=!1,w._byobRequest=null,w._queue=w._queueTotalSize=void 0,$l(w),w._closeRequested=!1,w._started=!1,w._strategyHWM=ue,w._pullAlgorithm=$,w._cancelAlgorithm=le,w._autoAllocateChunkSize=me,w._pendingPullIntos=new y,g._readableStreamController=w;let Be=T();h(u(Be),()=>(w._started=!0,wn(w),null),ht=>(Ai(w,ht),null))}function i0(g,w,T){let $=Object.create(cl.prototype),le,ue,me;w.start!==void 0?le=()=>w.start($):le=()=>{},w.pull!==void 0?ue=()=>w.pull($):ue=()=>u(void 0),w.cancel!==void 0?me=ht=>w.cancel(ht):me=()=>u(void 0);let Be=w.autoAllocateChunkSize;if(Be===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");c7(g,$,le,ue,me,T,Be)}function Sc(g,w,T){g._associatedReadableByteStreamController=w,g._view=T}function Mc(g){return new TypeError(`ReadableStreamBYOBRequest.prototype.${g} can only be used on a ReadableStreamBYOBRequest`)}function fl(g){return new TypeError(`ReadableByteStreamController.prototype.${g} can only be used on a ReadableByteStreamController`)}function hl(g,w){hr(g,w);let T=g==null?void 0:g.mode;return{mode:T===void 0?void 0:U_(T,`${w} has member 'mode' that`)}}function U_(g,w){if(g=`${g}`,g!=="byob")throw new TypeError(`${w} '${g}' is not a valid enumeration value for ReadableStreamReaderMode`);return g}function W_(g,w){var T;hr(g,w);let $=(T=g==null?void 0:g.min)!==null&&T!==void 0?T:1;return{min:jn($,`${w} has member 'min' that`)}}function f7(g){return new ea(g)}function h7(g,w){g._reader._readIntoRequests.push(w)}function G_(g,w,T){let le=g._reader._readIntoRequests.shift();T?le._closeSteps(w):le._chunkSteps(w)}function d7(g){return g._reader._readIntoRequests.length}function sh(g){let w=g._reader;return!(w===void 0||!dl(w))}class ea{constructor(w){if($r(w,1,"ReadableStreamBYOBReader"),ai(w,"First parameter"),na(w))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!zr(w._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Q(this,w),this._readIntoRequests=new y}get closed(){return dl(this)?this._closedPromise:c(Ac("closed"))}cancel(w=void 0){return dl(this)?this._ownerReadableStream===void 0?c(Pe("cancel")):ee(this,w):c(Ac("cancel"))}read(w,T={}){if(!dl(this))return c(Ac("read"));if(!ArrayBuffer.isView(w))return c(new TypeError("view must be an array buffer view"));if(w.byteLength===0)return c(new TypeError("view must have non-zero byteLength"));if(w.buffer.byteLength===0)return c(new TypeError("view's buffer must have non-zero byteLength"));if(ul(w.buffer))return c(new TypeError("view's buffer has been detached"));let $;try{$=W_(T,"options")}catch(it){return c(it)}let le=$.min;if(le===0)return c(new TypeError("options.min must be greater than 0"));if(lh(w)){if(le>w.byteLength)return c(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(le>w.length)return c(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return c(Pe("read from"));let ue,me,Be=s((it,vt)=>{ue=it,me=vt});return m7(this,w,le,{_chunkSteps:it=>ue({value:it,done:!1}),_closeSteps:it=>ue({value:it,done:!0}),_errorSteps:it=>me(it)}),Be}releaseLock(){if(!dl(this))throw Ac("releaseLock");this._ownerReadableStream!==void 0&&g7(this)}}Object.defineProperties(ea.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(ea.prototype.cancel,"cancel"),i(ea.prototype.read,"read"),i(ea.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ea.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function dl(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_readIntoRequests")?!1:g instanceof ea}function m7(g,w,T,$){let le=g._ownerReadableStream;le._disturbed=!0,le._state==="errored"?$._errorSteps(le._storedError):F_(le._readableStreamController,w,T,$)}function g7(g){se(g);let w=new TypeError("Reader was released");p7(g,w)}function p7(g,w){let T=g._readIntoRequests;g._readIntoRequests=new y,T.forEach($=>{$._errorSteps(w)})}function Ac(g){return new TypeError(`ReadableStreamBYOBReader.prototype.${g} can only be used on a ReadableStreamBYOBReader`)}function o0(g,w){let{highWaterMark:T}=g;if(T===void 0)return w;if(n7(T)||T<0)throw new RangeError("Invalid highWaterMark");return T}function Pc(g){let{size:w}=g;return w||(()=>1)}function Tc(g,w){hr(g,w);let T=g==null?void 0:g.highWaterMark,$=g==null?void 0:g.size;return{highWaterMark:T===void 0?void 0:vn(T),size:$===void 0?void 0:Y_($,`${w} has member 'size' that`)}}function Y_(g,w){return qt(g,w),T=>vn(g(T))}function K_(g,w){hr(g,w);let T=g==null?void 0:g.abort,$=g==null?void 0:g.close,le=g==null?void 0:g.start,ue=g==null?void 0:g.type,me=g==null?void 0:g.write;return{abort:T===void 0?void 0:J_(T,g,`${w} has member 'abort' that`),close:$===void 0?void 0:X_($,g,`${w} has member 'close' that`),start:le===void 0?void 0:Q_(le,g,`${w} has member 'start' that`),write:me===void 0?void 0:$_(me,g,`${w} has member 'write' that`),type:ue}}function J_(g,w,T){return qt(g,T),$=>S(g,w,[$])}function X_(g,w,T){return qt(g,T),()=>S(g,w,[])}function Q_(g,w,T){return qt(g,T),$=>L(g,w,[$])}function $_(g,w,T){return qt(g,T),($,le)=>S(g,w,[$,le])}function _7(g,w){if(!os(g))throw new TypeError(`${w} is not a WritableStream.`)}function eb(g){if(typeof g!="object"||g===null)return!1;try{return typeof g.aborted=="boolean"}catch(w){return!1}}let tb=typeof AbortController=="function";function rb(){if(tb)return new AbortController}class Ro{constructor(w={},T={}){w===void 0?w=null:sn(w,"First parameter");let $=Tc(T,"Second parameter"),le=K_(w,"First parameter");if(uh(this),le.type!==void 0)throw new RangeError("Invalid type is specified");let me=Pc($),Be=o0($,1);cb(this,le,Be,me)}get locked(){if(!os(this))throw Dc("locked");return O1(this)}abort(w=void 0){return os(this)?O1(this)?c(new TypeError("Cannot abort a stream that already has a writer")):Rc(this,w):c(Dc("abort"))}close(){return os(this)?O1(this)?c(new TypeError("Cannot close a stream that already has a writer")):Io(this)?c(new TypeError("Cannot close an already-closing stream")):b7(this):c(Dc("close"))}getWriter(){if(!os(this))throw Dc("getWriter");return Oc(this)}}Object.defineProperties(Ro.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),i(Ro.prototype.abort,"abort"),i(Ro.prototype.close,"close"),i(Ro.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ro.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Oc(g){return new ml(g)}function nb(g,w,T,$,le=1,ue=()=>1){let me=Object.create(Ro.prototype);uh(me);let Be=Object.create(R1.prototype);return k7(me,Be,g,w,T,$,le,ue),me}function uh(g){g._state="writable",g._storedError=void 0,g._writer=void 0,g._writableStreamController=void 0,g._writeRequests=new y,g._inFlightWriteRequest=void 0,g._closeRequest=void 0,g._inFlightCloseRequest=void 0,g._pendingAbortRequest=void 0,g._backpressure=!1}function os(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_writableStreamController")?!1:g instanceof Ro}function O1(g){return g._writer!==void 0}function Rc(g,w){var T;if(g._state==="closed"||g._state==="errored")return u(void 0);g._writableStreamController._abortReason=w,(T=g._writableStreamController._abortController)===null||T===void 0||T.abort(w);let $=g._state;if($==="closed"||$==="errored")return u(void 0);if(g._pendingAbortRequest!==void 0)return g._pendingAbortRequest._promise;let le=!1;$==="erroring"&&(le=!0,w=void 0);let ue=s((me,Be)=>{g._pendingAbortRequest={_promise:void 0,_resolve:me,_reject:Be,_reason:w,_wasAlreadyErroring:le}});return g._pendingAbortRequest._promise=ue,le||dr(g,w),ue}function b7(g){let w=g._state;if(w==="closed"||w==="errored")return c(new TypeError(`The stream (in ${w} state) is not in the writable state and cannot be closed`));let T=s((le,ue)=>{let me={_resolve:le,_reject:ue};g._closeRequest=me}),$=g._writer;return $!==void 0&&g._backpressure&&w==="writable"&&H1($),L7(g._writableStreamController),T}function ib(g){return s((T,$)=>{let le={_resolve:T,_reject:$};g._writeRequests.push(le)})}function Ic(g,w){if(g._state==="writable"){dr(g,w);return}ls(g)}function dr(g,w){let T=g._writableStreamController;g._state="erroring",g._storedError=w;let $=g._writer;$!==void 0&&Vc($,w),!zc(g)&&T._started&&ls(g)}function ls(g){g._state="errored",g._writableStreamController[G]();let w=g._storedError;if(g._writeRequests.forEach(le=>{le._reject(w)}),g._writeRequests=new y,g._pendingAbortRequest===void 0){Hc(g);return}let T=g._pendingAbortRequest;if(g._pendingAbortRequest=void 0,T._wasAlreadyErroring){T._reject(w),Hc(g);return}let $=g._writableStreamController[z](T._reason);h($,()=>(T._resolve(),Hc(g),null),le=>(T._reject(le),Hc(g),null))}function l0(g){g._inFlightWriteRequest._resolve(void 0),g._inFlightWriteRequest=void 0}function ob(g,w){g._inFlightWriteRequest._reject(w),g._inFlightWriteRequest=void 0,Ic(g,w)}function v7(g){g._inFlightCloseRequest._resolve(void 0),g._inFlightCloseRequest=void 0,g._state==="erroring"&&(g._storedError=void 0,g._pendingAbortRequest!==void 0&&(g._pendingAbortRequest._resolve(),g._pendingAbortRequest=void 0)),g._state="closed";let T=g._writer;T!==void 0&&M7(T)}function lb(g,w){g._inFlightCloseRequest._reject(w),g._inFlightCloseRequest=void 0,g._pendingAbortRequest!==void 0&&(g._pendingAbortRequest._reject(w),g._pendingAbortRequest=void 0),Ic(g,w)}function Io(g){return!(g._closeRequest===void 0&&g._inFlightCloseRequest===void 0)}function zc(g){return!(g._inFlightWriteRequest===void 0&&g._inFlightCloseRequest===void 0)}function ta(g){g._inFlightCloseRequest=g._closeRequest,g._closeRequest=void 0}function ch(g){g._inFlightWriteRequest=g._writeRequests.shift()}function Hc(g){g._closeRequest!==void 0&&(g._closeRequest._reject(g._storedError),g._closeRequest=void 0);let w=g._writer;w!==void 0&&Fc(w,g._storedError)}function no(g,w){let T=g._writer;T!==void 0&&w!==g._backpressure&&(w?pb(T):H1(T)),g._backpressure=w}class ml{constructor(w){if($r(w,1,"WritableStreamDefaultWriter"),_7(w,"First parameter"),O1(w))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=w,w._writer=this;let T=w._state;if(T==="writable")!Io(w)&&w._backpressure?jc(this):A7(this),lr(this);else if(T==="erroring")us(this,w._storedError),lr(this);else if(T==="closed")A7(this),mb(this);else{let $=w._storedError;us(this,$),S7(this,$)}}get closed(){return gl(this)?this._closedPromise:c(ss("closed"))}get desiredSize(){if(!gl(this))throw ss("desiredSize");if(this._ownerWritableStream===void 0)throw z1("desiredSize");return ub(this)}get ready(){return gl(this)?this._readyPromise:c(ss("ready"))}abort(w=void 0){return gl(this)?this._ownerWritableStream===void 0?c(z1("abort")):ab(this,w):c(ss("abort"))}close(){if(!gl(this))return c(ss("close"));let w=this._ownerWritableStream;return w===void 0?c(z1("close")):Io(w)?c(new TypeError("Cannot close an already-closing stream")):C7(this)}releaseLock(){if(!gl(this))throw ss("releaseLock");this._ownerWritableStream!==void 0&&w7(this)}write(w=void 0){return gl(this)?this._ownerWritableStream===void 0?c(z1("write to")):y7(this,w):c(ss("write"))}}Object.defineProperties(ml.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),i(ml.prototype.abort,"abort"),i(ml.prototype.close,"close"),i(ml.prototype.releaseLock,"releaseLock"),i(ml.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ml.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function gl(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_ownerWritableStream")?!1:g instanceof ml}function ab(g,w){let T=g._ownerWritableStream;return Rc(T,w)}function C7(g){let w=g._ownerWritableStream;return b7(w)}function sb(g){let w=g._ownerWritableStream,T=w._state;return Io(w)||T==="closed"?u(void 0):T==="errored"?c(w._storedError):C7(g)}function Nc(g,w){g._closedPromiseState==="pending"?Fc(g,w):gb(g,w)}function Vc(g,w){g._readyPromiseState==="pending"?P7(g,w):xc(g,w)}function ub(g){let w=g._ownerWritableStream,T=w._state;return T==="errored"||T==="erroring"?null:T==="closed"?0:as(w._writableStreamController)}function w7(g){let w=g._ownerWritableStream,T=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Vc(g,T),Nc(g,T),w._writer=void 0,g._ownerWritableStream=void 0}function y7(g,w){let T=g._ownerWritableStream,$=T._writableStreamController,le=fb($,w);if(T!==g._ownerWritableStream)return c(z1("write to"));let ue=T._state;if(ue==="errored")return c(T._storedError);if(Io(T)||ue==="closed")return c(new TypeError("The stream is closing or closed and cannot be written to"));if(ue==="erroring")return c(T._storedError);let me=ib(T);return hb($,w,le),me}let fh={};class R1{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!hh(this))throw Zc("abortReason");return this._abortReason}get signal(){if(!hh(this))throw Zc("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(w=void 0){if(!hh(this))throw Zc("error");this._controlledWritableStream._state==="writable"&&E7(this,w)}[z](w){let T=this._abortAlgorithm(w);return Bc(this),T}[G](){$l(this)}}Object.defineProperties(R1.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(R1.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function hh(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_controlledWritableStream")?!1:g instanceof R1}function k7(g,w,T,$,le,ue,me,Be){w._controlledWritableStream=g,g._writableStreamController=w,w._queue=void 0,w._queueTotalSize=void 0,$l(w),w._abortReason=void 0,w._abortController=rb(),w._started=!1,w._strategySizeAlgorithm=Be,w._strategyHWM=me,w._writeAlgorithm=$,w._closeAlgorithm=le,w._abortAlgorithm=ue;let ht=mh(w);no(g,ht);let it=T(),vt=u(it);h(vt,()=>(w._started=!0,I1(w),null),Ot=>(w._started=!0,Ic(g,Ot),null))}function cb(g,w,T,$){let le=Object.create(R1.prototype),ue,me,Be,ht;w.start!==void 0?ue=()=>w.start(le):ue=()=>{},w.write!==void 0?me=it=>w.write(it,le):me=()=>u(void 0),w.close!==void 0?Be=()=>w.close():Be=()=>u(void 0),w.abort!==void 0?ht=it=>w.abort(it):ht=()=>u(void 0),k7(g,le,ue,me,Be,ht,T,$)}function Bc(g){g._writeAlgorithm=void 0,g._closeAlgorithm=void 0,g._abortAlgorithm=void 0,g._strategySizeAlgorithm=void 0}function L7(g){De(g,fh,0),I1(g)}function fb(g,w){try{return g._strategySizeAlgorithm(w)}catch(T){return a0(g,T),1}}function as(g){return g._strategyHWM-g._queueTotalSize}function hb(g,w,T){try{De(g,w,T)}catch(le){a0(g,le);return}let $=g._controlledWritableStream;if(!Io($)&&$._state==="writable"){let le=mh(g);no($,le)}I1(g)}function I1(g){let w=g._controlledWritableStream;if(!g._started||w._inFlightWriteRequest!==void 0)return;if(w._state==="erroring"){ls(w);return}if(g._queue.length===0)return;let $=Z_(g);$===fh?dh(g):db(g,$)}function a0(g,w){g._controlledWritableStream._state==="writable"&&E7(g,w)}function dh(g){let w=g._controlledWritableStream;ta(w),M1(g);let T=g._closeAlgorithm();Bc(g),h(T,()=>(v7(w),null),$=>(lb(w,$),null))}function db(g,w){let T=g._controlledWritableStream;ch(T);let $=g._writeAlgorithm(w);h($,()=>{l0(T);let le=T._state;if(M1(g),!Io(T)&&le==="writable"){let ue=mh(g);no(T,ue)}return I1(g),null},le=>(T._state==="writable"&&Bc(g),ob(T,le),null))}function mh(g){return as(g)<=0}function E7(g,w){let T=g._controlledWritableStream;Bc(g),dr(T,w)}function Dc(g){return new TypeError(`WritableStream.prototype.${g} can only be used on a WritableStream`)}function Zc(g){return new TypeError(`WritableStreamDefaultController.prototype.${g} can only be used on a WritableStreamDefaultController`)}function ss(g){return new TypeError(`WritableStreamDefaultWriter.prototype.${g} can only be used on a WritableStreamDefaultWriter`)}function z1(g){return new TypeError("Cannot "+g+" a stream using a released writer")}function lr(g){g._closedPromise=s((w,T)=>{g._closedPromise_resolve=w,g._closedPromise_reject=T,g._closedPromiseState="pending"})}function S7(g,w){lr(g),Fc(g,w)}function mb(g){lr(g),M7(g)}function Fc(g,w){g._closedPromise_reject!==void 0&&(b(g._closedPromise),g._closedPromise_reject(w),g._closedPromise_resolve=void 0,g._closedPromise_reject=void 0,g._closedPromiseState="rejected")}function gb(g,w){S7(g,w)}function M7(g){g._closedPromise_resolve!==void 0&&(g._closedPromise_resolve(void 0),g._closedPromise_resolve=void 0,g._closedPromise_reject=void 0,g._closedPromiseState="resolved")}function jc(g){g._readyPromise=s((w,T)=>{g._readyPromise_resolve=w,g._readyPromise_reject=T}),g._readyPromiseState="pending"}function us(g,w){jc(g),P7(g,w)}function A7(g){jc(g),H1(g)}function P7(g,w){g._readyPromise_reject!==void 0&&(b(g._readyPromise),g._readyPromise_reject(w),g._readyPromise_resolve=void 0,g._readyPromise_reject=void 0,g._readyPromiseState="rejected")}function pb(g){jc(g)}function xc(g,w){us(g,w)}function H1(g){g._readyPromise_resolve!==void 0&&(g._readyPromise_resolve(void 0),g._readyPromise_resolve=void 0,g._readyPromise_reject=void 0,g._readyPromiseState="fulfilled")}function gh(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof global!="undefined")return global}let ph=gh();function T7(g){if(!(typeof g=="function"||typeof g=="object")||g.name!=="DOMException")return!1;try{return new g,!0}catch(w){return!1}}function _b(){let g=ph==null?void 0:ph.DOMException;return T7(g)?g:void 0}function _h(){let g=function(T,$){this.message=T||"",this.name=$||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return i(g,"DOMException"),g.prototype=Object.create(Error.prototype),Object.defineProperty(g.prototype,"constructor",{value:g,writable:!0,configurable:!0}),g}let bh=_b()||_h();function qc(g,w,T,$,le,ue){let me=ke(g),Be=Oc(w);g._disturbed=!0;let ht=!1,it=u(void 0);return s((vt,Ot)=>{let ur;if(ue!==void 0){if(ur=()=>{let at=ue.reason!==void 0?ue.reason:new bh("Aborted","AbortError"),de=[];$||de.push(()=>w._state==="writable"?Rc(w,at):u(void 0)),le||de.push(()=>g._state==="readable"?Un(g,at):u(void 0)),Rn(()=>Promise.all(de.map(mr=>mr())),!0,at)},ue.aborted){ur();return}ue.addEventListener("abort",ur)}function Pi(){return s((at,de)=>{function mr(ui){ui?at():f(D1(),mr,de)}mr(!1)})}function D1(){return ht?u(!0):f(Be._readyPromise,()=>s((at,de)=>{Qe(me,{_chunkSteps:mr=>{it=f(y7(Be,mr),void 0,e),at(!1)},_closeSteps:()=>at(!0),_errorSteps:de})}))}if(_l(g,me._closedPromise,at=>($?Ti(!0,at):Rn(()=>Rc(w,at),!0,at),null)),_l(w,Be._closedPromise,at=>(le?Ti(!0,at):Rn(()=>Un(g,at),!0,at),null)),Nr(g,me._closedPromise,()=>(T?Ti():Rn(()=>sb(Be)),null)),Io(w)||w._state==="closed"){let at=new TypeError("the destination writable stream closed before all data could be piped to it");le?Ti(!0,at):Rn(()=>Un(g,at),!0,at)}b(Pi());function la(){let at=it;return f(it,()=>at!==it?la():void 0)}function _l(at,de,mr){at._state==="errored"?mr(at._storedError):p(de,mr)}function Nr(at,de,mr){at._state==="closed"?mr():d(de,mr)}function Rn(at,de,mr){if(ht)return;ht=!0,w._state==="writable"&&!Io(w)?d(la(),ui):ui();function ui(){return h(at(),()=>bl(de,mr),ms=>bl(!0,ms)),null}}function Ti(at,de){ht||(ht=!0,w._state==="writable"&&!Io(w)?d(la(),()=>bl(at,de)):bl(at,de))}function bl(at,de){return w7(Be),se(me),ue!==void 0&&ue.removeEventListener("abort",ur),at?Ot(de):vt(void 0),null}})}class pl{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Uc(this))throw qn("desiredSize");return vh(this)}close(){if(!Uc(this))throw qn("close");if(!fs(this))throw new TypeError("The stream is not in a state that permits close");cs(this)}enqueue(w=void 0){if(!Uc(this))throw qn("enqueue");if(!fs(this))throw new TypeError("The stream is not in a state that permits enqueue");return N1(this,w)}error(w=void 0){if(!Uc(this))throw qn("error");io(this,w)}[J](w){$l(this);let T=this._cancelAlgorithm(w);return Wc(this),T}[te](w){let T=this._controlledReadableStream;if(this._queue.length>0){let $=M1(this);this._closeRequested&&this._queue.length===0?(Wc(this),c0(T)):s0(this),w._chunkSteps($)}else Po(T,w),s0(this)}[ne](){}}Object.defineProperties(pl.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),i(pl.prototype.close,"close"),i(pl.prototype.enqueue,"enqueue"),i(pl.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(pl.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Uc(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_controlledReadableStream")?!1:g instanceof pl}function s0(g){if(!O7(g))return;if(g._pulling){g._pullAgain=!0;return}g._pulling=!0;let T=g._pullAlgorithm();h(T,()=>(g._pulling=!1,g._pullAgain&&(g._pullAgain=!1,s0(g)),null),$=>(io(g,$),null))}function O7(g){let w=g._controlledReadableStream;return!fs(g)||!g._started?!1:!!(na(w)&&Cn(w)>0||vh(g)>0)}function Wc(g){g._pullAlgorithm=void 0,g._cancelAlgorithm=void 0,g._strategySizeAlgorithm=void 0}function cs(g){if(!fs(g))return;let w=g._controlledReadableStream;g._closeRequested=!0,g._queue.length===0&&(Wc(g),c0(w))}function N1(g,w){if(!fs(g))return;let T=g._controlledReadableStream;if(na(T)&&Cn(T)>0)sl(T,w,!1);else{let $;try{$=g._strategySizeAlgorithm(w)}catch(le){throw io(g,le),le}try{De(g,w,$)}catch(le){throw io(g,le),le}}s0(g)}function io(g,w){let T=g._controlledReadableStream;T._state==="readable"&&($l(g),Wc(g),D7(T,w))}function vh(g){let w=g._controlledReadableStream._state;return w==="errored"?null:w==="closed"?0:g._strategyHWM-g._queueTotalSize}function bb(g){return!O7(g)}function fs(g){let w=g._controlledReadableStream._state;return!g._closeRequested&&w==="readable"}function R7(g,w,T,$,le,ue,me){w._controlledReadableStream=g,w._queue=void 0,w._queueTotalSize=void 0,$l(w),w._started=!1,w._closeRequested=!1,w._pullAgain=!1,w._pulling=!1,w._strategySizeAlgorithm=me,w._strategyHWM=ue,w._pullAlgorithm=$,w._cancelAlgorithm=le,g._readableStreamController=w;let Be=T();h(u(Be),()=>(w._started=!0,s0(w),null),ht=>(io(w,ht),null))}function vb(g,w,T,$){let le=Object.create(pl.prototype),ue,me,Be;w.start!==void 0?ue=()=>w.start(le):ue=()=>{},w.pull!==void 0?me=()=>w.pull(le):me=()=>u(void 0),w.cancel!==void 0?Be=ht=>w.cancel(ht):Be=()=>u(void 0),R7(g,le,ue,me,Be,T,$)}function qn(g){return new TypeError(`ReadableStreamDefaultController.prototype.${g} can only be used on a ReadableStreamDefaultController`)}function hs(g,w){return zr(g._readableStreamController)?Cb(g):I7(g)}function I7(g,w){let T=ke(g),$=!1,le=!1,ue=!1,me=!1,Be,ht,it,vt,Ot,ur=s(Nr=>{Ot=Nr});function Pi(){return $?(le=!0,u(void 0)):($=!0,Qe(T,{_chunkSteps:Rn=>{C(()=>{le=!1;let Ti=Rn,bl=Rn;ue||N1(it._readableStreamController,Ti),me||N1(vt._readableStreamController,bl),$=!1,le&&Pi()})},_closeSteps:()=>{$=!1,ue||cs(it._readableStreamController),me||cs(vt._readableStreamController),(!ue||!me)&&Ot(void 0)},_errorSteps:()=>{$=!1}}),u(void 0))}function D1(Nr){if(ue=!0,Be=Nr,me){let Rn=rs([Be,ht]),Ti=Un(g,Rn);Ot(Ti)}return ur}function la(Nr){if(me=!0,ht=Nr,ue){let Rn=rs([Be,ht]),Ti=Un(g,Rn);Ot(Ti)}return ur}function _l(){}return it=u0(_l,Pi,D1),vt=u0(_l,Pi,la),p(T._closedPromise,Nr=>(io(it._readableStreamController,Nr),io(vt._readableStreamController,Nr),(!ue||!me)&&Ot(void 0),null)),[it,vt]}function Cb(g){let w=ke(g),T=!1,$=!1,le=!1,ue=!1,me=!1,Be,ht,it,vt,Ot,ur=s(at=>{Ot=at});function Pi(at){p(at._closedPromise,de=>(at!==w||(Ai(it._readableStreamController,de),Ai(vt._readableStreamController,de),(!ue||!me)&&Ot(void 0)),null))}function D1(){dl(w)&&(se(w),w=ke(g),Pi(w)),Qe(w,{_chunkSteps:de=>{C(()=>{$=!1,le=!1;let mr=de,ui=de;if(!ue&&!me)try{ui=S1(de)}catch(ms){Ai(it._readableStreamController,ms),Ai(vt._readableStreamController,ms),Ot(Un(g,ms));return}ue||kc(it._readableStreamController,mr),me||kc(vt._readableStreamController,ui),T=!1,$?_l():le&&Nr()})},_closeSteps:()=>{T=!1,ue||P1(it._readableStreamController),me||P1(vt._readableStreamController),it._readableStreamController._pendingPullIntos.length>0&&n0(it._readableStreamController,0),vt._readableStreamController._pendingPullIntos.length>0&&n0(vt._readableStreamController,0),(!ue||!me)&&Ot(void 0)},_errorSteps:()=>{T=!1}})}function la(at,de){en(w)&&(se(w),w=f7(g),Pi(w));let mr=de?vt:it,ui=de?it:vt;m7(w,at,1,{_chunkSteps:Nt=>{C(()=>{$=!1,le=!1;let vl=de?me:ue;if(de?ue:me)vl||Ec(mr._readableStreamController,Nt);else{let $c;try{$c=S1(Nt)}catch(Sh){Ai(mr._readableStreamController,Sh),Ai(ui._readableStreamController,Sh),Ot(Un(g,Sh));return}vl||Ec(mr._readableStreamController,Nt),kc(ui._readableStreamController,$c)}T=!1,$?_l():le&&Nr()})},_closeSteps:Nt=>{T=!1;let vl=de?me:ue,m0=de?ue:me;vl||P1(mr._readableStreamController),m0||P1(ui._readableStreamController),Nt!==void 0&&(vl||Ec(mr._readableStreamController,Nt),!m0&&ui._readableStreamController._pendingPullIntos.length>0&&n0(ui._readableStreamController,0)),(!vl||!m0)&&Ot(void 0)},_errorSteps:()=>{T=!1}})}function _l(){if(T)return $=!0,u(void 0);T=!0;let at=Lc(it._readableStreamController);return at===null?D1():la(at._view,!1),u(void 0)}function Nr(){if(T)return le=!0,u(void 0);T=!0;let at=Lc(vt._readableStreamController);return at===null?D1():la(at._view,!0),u(void 0)}function Rn(at){if(ue=!0,Be=at,me){let de=rs([Be,ht]),mr=Un(g,de);Ot(mr)}return ur}function Ti(at){if(me=!0,ht=at,ue){let de=rs([Be,ht]),mr=Un(g,de);Ot(mr)}return ur}function bl(){}return it=B7(bl,_l,Rn),vt=B7(bl,Nr,Ti),Pi(w),[it,vt]}function z7(g){return t(g)&&typeof g.getReader!="undefined"}function H7(g){return z7(g)?yb(g.getReader()):wb(g)}function wb(g){let w,T=is(g,"async"),$=e;function le(){let me;try{me=Cc(T)}catch(ht){return c(ht)}let Be=u(me);return v(Be,ht=>{if(!t(ht))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(B_(ht))cs(w._readableStreamController);else{let vt=wc(ht);N1(w._readableStreamController,vt)}})}function ue(me){let Be=T.iterator,ht;try{ht=ns(Be,"return")}catch(Ot){return c(Ot)}if(ht===void 0)return u(void 0);let it;try{it=L(ht,Be,[me])}catch(Ot){return c(Ot)}let vt=u(it);return v(vt,Ot=>{if(!t(Ot))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return w=u0($,le,ue,0),w}function yb(g){let w,T=e;function $(){let ue;try{ue=g.read()}catch(me){return c(me)}return v(ue,me=>{if(!t(me))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(me.done)cs(w._readableStreamController);else{let Be=me.value;N1(w._readableStreamController,Be)}})}function le(ue){try{return u(g.cancel(ue))}catch(me){return c(me)}}return w=u0(T,$,le,0),w}function N7(g,w){hr(g,w);let T=g,$=T==null?void 0:T.autoAllocateChunkSize,le=T==null?void 0:T.cancel,ue=T==null?void 0:T.pull,me=T==null?void 0:T.start,Be=T==null?void 0:T.type;return{autoAllocateChunkSize:$===void 0?void 0:jn($,`${w} has member 'autoAllocateChunkSize' that`),cancel:le===void 0?void 0:kb(le,T,`${w} has member 'cancel' that`),pull:ue===void 0?void 0:Lb(ue,T,`${w} has member 'pull' that`),start:me===void 0?void 0:Eb(me,T,`${w} has member 'start' that`),type:Be===void 0?void 0:Sb(Be,`${w} has member 'type' that`)}}function kb(g,w,T){return qt(g,T),$=>S(g,w,[$])}function Lb(g,w,T){return qt(g,T),$=>S(g,w,[$])}function Eb(g,w,T){return qt(g,T),$=>L(g,w,[$])}function Sb(g,w){if(g=`${g}`,g!=="bytes")throw new TypeError(`${w} '${g}' is not a valid enumeration value for ReadableStreamType`);return g}function Mb(g,w){return hr(g,w),{preventCancel:!!(g==null?void 0:g.preventCancel)}}function V7(g,w){hr(g,w);let T=g==null?void 0:g.preventAbort,$=g==null?void 0:g.preventCancel,le=g==null?void 0:g.preventClose,ue=g==null?void 0:g.signal;return ue!==void 0&&Ab(ue,`${w} has member 'signal' that`),{preventAbort:!!T,preventCancel:!!$,preventClose:!!le,signal:ue}}function Ab(g,w){if(!eb(g))throw new TypeError(`${w} is not an AbortSignal.`)}function Pb(g,w){hr(g,w);let T=g==null?void 0:g.readable;Ao(T,"readable","ReadableWritablePair"),ai(T,`${w} has member 'readable' that`);let $=g==null?void 0:g.writable;return Ao($,"writable","ReadableWritablePair"),_7($,`${w} has member 'writable' that`),{readable:T,writable:$}}class yn{constructor(w={},T={}){w===void 0?w=null:sn(w,"First parameter");let $=Tc(T,"Second parameter"),le=N7(w,"First parameter");if(Ch(this),le.type==="bytes"){if($.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let ue=o0($,0);i0(this,le,ue)}else{let ue=Pc($),me=o0($,1);vb(this,le,me,ue)}}get locked(){if(!ra(this))throw ds("locked");return na(this)}cancel(w=void 0){return ra(this)?na(this)?c(new TypeError("Cannot cancel a stream that already has a reader")):Un(this,w):c(ds("cancel"))}getReader(w=void 0){if(!ra(this))throw ds("getReader");return hl(w,"First parameter").mode===void 0?ke(this):f7(this)}pipeThrough(w,T={}){if(!ra(this))throw ds("pipeThrough");$r(w,1,"pipeThrough");let $=Pb(w,"First parameter"),le=V7(T,"Second parameter");if(na(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(O1($.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let ue=qc(this,$.writable,le.preventClose,le.preventAbort,le.preventCancel,le.signal);return b(ue),$.readable}pipeTo(w,T={}){if(!ra(this))return c(ds("pipeTo"));if(w===void 0)return c("Parameter 1 is required in 'pipeTo'.");if(!os(w))return c(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let $;try{$=V7(T,"Second parameter")}catch(le){return c(le)}return na(this)?c(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):O1(w)?c(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):qc(this,w,$.preventClose,$.preventAbort,$.preventCancel,$.signal)}tee(){if(!ra(this))throw ds("tee");let w=hs(this);return rs(w)}values(w=void 0){if(!ra(this))throw ds("values");let T=Mb(w,"First parameter");return Wr(this,T.preventCancel)}[E1](w){return this.values(w)}static from(w){return H7(w)}}Object.defineProperties(yn,{from:{enumerable:!0}}),Object.defineProperties(yn.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),i(yn.from,"from"),i(yn.prototype.cancel,"cancel"),i(yn.prototype.getReader,"getReader"),i(yn.prototype.pipeThrough,"pipeThrough"),i(yn.prototype.pipeTo,"pipeTo"),i(yn.prototype.tee,"tee"),i(yn.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(yn.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(yn.prototype,E1,{value:yn.prototype.values,writable:!0,configurable:!0});function u0(g,w,T,$=1,le=()=>1){let ue=Object.create(yn.prototype);Ch(ue);let me=Object.create(pl.prototype);return R7(ue,me,g,w,T,$,le),ue}function B7(g,w,T){let $=Object.create(yn.prototype);Ch($);let le=Object.create(cl.prototype);return c7($,le,g,w,T,0,void 0),$}function Ch(g){g._state="readable",g._reader=void 0,g._storedError=void 0,g._disturbed=!1}function ra(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_readableStreamController")?!1:g instanceof yn}function na(g){return g._reader!==void 0}function Un(g,w){if(g._disturbed=!0,g._state==="closed")return u(void 0);if(g._state==="errored")return c(g._storedError);c0(g);let T=g._reader;if(T!==void 0&&dl(T)){let le=T._readIntoRequests;T._readIntoRequests=new y,le.forEach(ue=>{ue._closeSteps(void 0)})}let $=g._readableStreamController[J](w);return v($,e)}function c0(g){g._state="closed";let w=g._reader;if(w!==void 0&&(nr(w),en(w))){let T=w._readRequests;w._readRequests=new y,T.forEach($=>{$._closeSteps()})}}function D7(g,w){g._state="errored",g._storedError=w;let T=g._reader;T!==void 0&&(Ee(T,w),en(T)?st(T,w):p7(T,w))}function ds(g){return new TypeError(`ReadableStream.prototype.${g} can only be used on a ReadableStream`)}function Z7(g,w){hr(g,w);let T=g==null?void 0:g.highWaterMark;return Ao(T,"highWaterMark","QueuingStrategyInit"),{highWaterMark:vn(T)}}let F7=g=>g.byteLength;i(F7,"size");class Gc{constructor(w){$r(w,1,"ByteLengthQueuingStrategy"),w=Z7(w,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=w.highWaterMark}get highWaterMark(){if(!x7(this))throw j7("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!x7(this))throw j7("size");return F7}}Object.defineProperties(Gc.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Gc.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function j7(g){return new TypeError(`ByteLengthQueuingStrategy.prototype.${g} can only be used on a ByteLengthQueuingStrategy`)}function x7(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_byteLengthQueuingStrategyHighWaterMark")?!1:g instanceof Gc}let wh=()=>1;i(wh,"size");class f0{constructor(w){$r(w,1,"CountQueuingStrategy"),w=Z7(w,"First parameter"),this._countQueuingStrategyHighWaterMark=w.highWaterMark}get highWaterMark(){if(!h0(this))throw yh("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!h0(this))throw yh("size");return wh}}Object.defineProperties(f0.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(f0.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function yh(g){return new TypeError(`CountQueuingStrategy.prototype.${g} can only be used on a CountQueuingStrategy`)}function h0(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_countQueuingStrategyHighWaterMark")?!1:g instanceof f0}function V1(g,w){hr(g,w);let T=g==null?void 0:g.cancel,$=g==null?void 0:g.flush,le=g==null?void 0:g.readableType,ue=g==null?void 0:g.start,me=g==null?void 0:g.transform,Be=g==null?void 0:g.writableType;return{cancel:T===void 0?void 0:U7(T,g,`${w} has member 'cancel' that`),flush:$===void 0?void 0:Yc($,g,`${w} has member 'flush' that`),readableType:le,start:ue===void 0?void 0:q7(ue,g,`${w} has member 'start' that`),transform:me===void 0?void 0:B1(me,g,`${w} has member 'transform' that`),writableType:Be}}function Yc(g,w,T){return qt(g,T),$=>S(g,w,[$])}function q7(g,w,T){return qt(g,T),$=>L(g,w,[$])}function B1(g,w,T){return qt(g,T),($,le)=>S(g,w,[$,le])}function U7(g,w,T){return qt(g,T),$=>S(g,w,[$])}class d0{constructor(w={},T={},$={}){w===void 0&&(w=null);let le=Tc(T,"Second parameter"),ue=Tc($,"Third parameter"),me=V1(w,"First parameter");if(me.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(me.writableType!==void 0)throw new RangeError("Invalid writableType specified");let Be=o0(ue,0),ht=Pc(ue),it=o0(le,1),vt=Pc(le),Ot,ur=s(Pi=>{Ot=Pi});Tb(this,ur,it,vt,Be,ht),Rb(this,me),me.start!==void 0?Ot(me.start(this._transformStreamController)):Ot(void 0)}get readable(){if(!W7(this))throw J7("readable");return this._readable}get writable(){if(!W7(this))throw J7("writable");return this._writable}}Object.defineProperties(d0.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(d0.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function Tb(g,w,T,$,le,ue){function me(){return w}function Be(ur){return Hb(g,ur)}function ht(ur){return Nb(g,ur)}function it(){return Vb(g)}g._writable=nb(me,Be,it,ht,T,$);function vt(){return Bb(g)}function Ot(ur){return Db(g,ur)}g._readable=u0(me,vt,Ot,le,ue),g._backpressure=void 0,g._backpressureChangePromise=void 0,g._backpressureChangePromise_resolve=void 0,Kc(g,!0),g._transformStreamController=void 0}function W7(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_transformStreamController")?!1:g instanceof d0}function G7(g,w){io(g._readable._readableStreamController,w),kh(g,w)}function kh(g,w){Xc(g._transformStreamController),a0(g._writable._writableStreamController,w),Lh(g)}function Lh(g){g._backpressure&&Kc(g,!1)}function Kc(g,w){g._backpressureChangePromise!==void 0&&g._backpressureChangePromise_resolve(),g._backpressureChangePromise=s(T=>{g._backpressureChangePromise_resolve=T}),g._backpressure=w}class ia{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Jc(this))throw Qc("desiredSize");let w=this._controlledTransformStream._readable._readableStreamController;return vh(w)}enqueue(w=void 0){if(!Jc(this))throw Qc("enqueue");Y7(this,w)}error(w=void 0){if(!Jc(this))throw Qc("error");Ib(this,w)}terminate(){if(!Jc(this))throw Qc("terminate");zb(this)}}Object.defineProperties(ia.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),i(ia.prototype.enqueue,"enqueue"),i(ia.prototype.error,"error"),i(ia.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ia.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Jc(g){return!t(g)||!Object.prototype.hasOwnProperty.call(g,"_controlledTransformStream")?!1:g instanceof ia}function Ob(g,w,T,$,le){w._controlledTransformStream=g,g._transformStreamController=w,w._transformAlgorithm=T,w._flushAlgorithm=$,w._cancelAlgorithm=le,w._finishPromise=void 0,w._finishPromise_resolve=void 0,w._finishPromise_reject=void 0}function Rb(g,w){let T=Object.create(ia.prototype),$,le,ue;w.transform!==void 0?$=me=>w.transform(me,T):$=me=>{try{return Y7(T,me),u(void 0)}catch(Be){return c(Be)}},w.flush!==void 0?le=()=>w.flush(T):le=()=>u(void 0),w.cancel!==void 0?ue=me=>w.cancel(me):ue=()=>u(void 0),Ob(g,T,$,le,ue)}function Xc(g){g._transformAlgorithm=void 0,g._flushAlgorithm=void 0,g._cancelAlgorithm=void 0}function Y7(g,w){let T=g._controlledTransformStream,$=T._readable._readableStreamController;if(!fs($))throw new TypeError("Readable side is not in a state that permits enqueue");try{N1($,w)}catch(ue){throw kh(T,ue),T._readable._storedError}bb($)!==T._backpressure&&Kc(T,!0)}function Ib(g,w){G7(g._controlledTransformStream,w)}function K7(g,w){let T=g._transformAlgorithm(w);return v(T,void 0,$=>{throw G7(g._controlledTransformStream,$),$})}function zb(g){let w=g._controlledTransformStream,T=w._readable._readableStreamController;cs(T);let $=new TypeError("TransformStream terminated");kh(w,$)}function Hb(g,w){let T=g._transformStreamController;if(g._backpressure){let $=g._backpressureChangePromise;return v($,()=>{let le=g._writable;if(le._state==="erroring")throw le._storedError;return K7(T,w)})}return K7(T,w)}function Nb(g,w){let T=g._transformStreamController;if(T._finishPromise!==void 0)return T._finishPromise;let $=g._readable;T._finishPromise=s((ue,me)=>{T._finishPromise_resolve=ue,T._finishPromise_reject=me});let le=T._cancelAlgorithm(w);return Xc(T),h(le,()=>($._state==="errored"?oa(T,$._storedError):(io($._readableStreamController,w),Eh(T)),null),ue=>(io($._readableStreamController,ue),oa(T,ue),null)),T._finishPromise}function Vb(g){let w=g._transformStreamController;if(w._finishPromise!==void 0)return w._finishPromise;let T=g._readable;w._finishPromise=s((le,ue)=>{w._finishPromise_resolve=le,w._finishPromise_reject=ue});let $=w._flushAlgorithm();return Xc(w),h($,()=>(T._state==="errored"?oa(w,T._storedError):(cs(T._readableStreamController),Eh(w)),null),le=>(io(T._readableStreamController,le),oa(w,le),null)),w._finishPromise}function Bb(g){return Kc(g,!1),g._backpressureChangePromise}function Db(g,w){let T=g._transformStreamController;if(T._finishPromise!==void 0)return T._finishPromise;let $=g._writable;T._finishPromise=s((ue,me)=>{T._finishPromise_resolve=ue,T._finishPromise_reject=me});let le=T._cancelAlgorithm(w);return Xc(T),h(le,()=>($._state==="errored"?oa(T,$._storedError):(a0($._writableStreamController,w),Lh(g),Eh(T)),null),ue=>(a0($._writableStreamController,ue),Lh(g),oa(T,ue),null)),T._finishPromise}function Qc(g){return new TypeError(`TransformStreamDefaultController.prototype.${g} can only be used on a TransformStreamDefaultController`)}function Eh(g){g._finishPromise_resolve!==void 0&&(g._finishPromise_resolve(),g._finishPromise_resolve=void 0,g._finishPromise_reject=void 0)}function oa(g,w){g._finishPromise_reject!==void 0&&(b(g._finishPromise),g._finishPromise_reject(w),g._finishPromise_resolve=void 0,g._finishPromise_reject=void 0)}function J7(g){return new TypeError(`TransformStream.prototype.${g} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Gc,r.CountQueuingStrategy=f0,r.ReadableByteStreamController=cl,r.ReadableStream=yn,r.ReadableStreamBYOBReader=ea,r.ReadableStreamBYOBRequest=to,r.ReadableStreamDefaultController=pl,r.ReadableStreamDefaultReader=we,r.TransformStream=d0,r.TransformStreamDefaultController=ia,r.WritableStream=Ro,r.WritableStreamDefaultController=R1,r.WritableStreamDefaultWriter=ml})});var jI=ae(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:e}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=e}catch(t){throw r.emitWarning=e,t}}catch(r){Object.assign(globalThis,FI())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(t){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(o){let a=await i.slice(n,Math.min(i.size,n+65536)).arrayBuffer();n+=a.byteLength,o.enqueue(new Uint8Array(a)),n===i.size&&o.close()}})})}catch(r){}});async function*Hw(r,e=!0){for(let t of r)if("stream"in t)yield*t.stream();else if(ArrayBuffer.isView(t))if(e){let n=t.byteOffset,i=t.byteOffset+t.byteLength;for(;n!==i;){let o=Math.min(i-n,xI),l=t.buffer.slice(n,n+o);n+=l.byteLength,yield new Uint8Array(l)}}else yield t;else{let n=0,i=t;for(;n!==i.size;){let l=await i.slice(n,Math.min(i.size,n+xI)).arrayBuffer();n+=l.byteLength,yield new Uint8Array(l)}}}var Oke,xI,Bs,F3,J9,Jm,e2,qI,kre,Ds,j3=ce(()=>{Oke=wr(jI(),1);xI=65536;qI=(e2=class{constructor(e=[],t={}){Cl(this,Bs,[]);Cl(this,F3,"");Cl(this,J9,0);Cl(this,Jm,"transparent");if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof t!="object"&&typeof t!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");t===null&&(t={});let n=new TextEncoder;for(let o of e){let l;ArrayBuffer.isView(o)?l=new Uint8Array(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)):o instanceof ArrayBuffer?l=new Uint8Array(o.slice(0)):o instanceof e2?l=o:l=n.encode(`${o}`),oo(this,J9,Gr(this,J9)+(ArrayBuffer.isView(l)?l.byteLength:l.size)),Gr(this,Bs).push(l)}oo(this,Jm,`${t.endings===void 0?"transparent":t.endings}`);let i=t.type===void 0?"":String(t.type);oo(this,F3,/^[\x20-\x7E]*$/.test(i)?i:"")}get size(){return Gr(this,J9)}get type(){return Gr(this,F3)}async text(){let e=new TextDecoder,t="";for await(let n of Hw(Gr(this,Bs),!1))t+=e.decode(n,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let n of Hw(Gr(this,Bs),!1))e.set(n,t),t+=n.length;return e.buffer}stream(){let e=Hw(Gr(this,Bs),!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){let n=await e.next();n.done?t.close():t.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,t=this.size,n=""){let{size:i}=this,o=e<0?Math.max(i+e,0):Math.min(e,i),l=t<0?Math.max(i+t,0):Math.min(t,i),a=Math.max(l-o,0),s=Gr(this,Bs),u=[],c=0;for(let h of s){if(c>=a)break;let d=ArrayBuffer.isView(h)?h.byteLength:h.size;if(o&&d<=o)o-=d,l-=d;else{let p;ArrayBuffer.isView(h)?(p=h.subarray(o,Math.min(d,l)),c+=p.byteLength):(p=h.slice(o,Math.min(d,l)),c+=p.size),l-=d,u.push(p),o=0}}let f=new e2([],{type:String(n).toLowerCase()});return oo(f,J9,a),oo(f,Bs,u),f}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}},Bs=new WeakMap,F3=new WeakMap,J9=new WeakMap,Jm=new WeakMap,e2);Object.defineProperties(qI.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});kre=qI,Ds=kre});var x3,q3,UI,Lre,Ere,X9,Nw=ce(()=>{j3();Lre=(UI=class extends Ds{constructor(t,n,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i);Cl(this,x3,0);Cl(this,q3,"");i===null&&(i={});let o=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(o)||oo(this,x3,o),oo(this,q3,String(n))}get name(){return Gr(this,q3)}get lastModified(){return Gr(this,x3)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Ds&&/^(File)$/.test(t[Symbol.toStringTag])}},x3=new WeakMap,q3=new WeakMap,UI),Ere=Lre,X9=Ere});function KI(r,e=Ds){var t=`${WI()}${WI()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${t}\r
Content-Disposition: form-data; name="`;return r.forEach((o,l)=>typeof o=="string"?n.push(i+Vw(l)+`"\r
\r
${o.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+Vw(l)+`"; filename="${Vw(o.name,1)}"\r
Content-Type: ${o.type||"application/octet-stream"}\r
\r
`,o,`\r
`)),n.push(`--${t}--`),new e(n,{type:"multipart/form-data; boundary="+t})}var U3,Sre,Mre,WI,Are,GI,Vw,t2,Yo,YI,r2,Xm=ce(()=>{j3();Nw();({toStringTag:U3,iterator:Sre,hasInstance:Mre}=Symbol),WI=Math.random,Are="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),GI=(r,e,t)=>(r+="",/^(Blob|File)$/.test(e&&e[U3])?[(t=t!==void 0?t+"":e[U3]=="File"?e.name:"blob",r),e.name!==t||e[U3]=="blob"?new X9([e],t,e):e]:[r,e+""]),Vw=(r,e)=>(e?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),t2=(r,e,t)=>{if(e.length<t)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${t} arguments required, but only ${e.length} present.`)},r2=(YI=class{constructor(...e){Cl(this,Yo,[]);if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[U3](){return"FormData"}[Sre](){return this.entries()}static[Mre](e){return e&&typeof e=="object"&&e[U3]==="FormData"&&!Are.some(t=>typeof e[t]!="function")}append(...e){t2("append",arguments,2),Gr(this,Yo).push(GI(...e))}delete(e){t2("delete",arguments,1),e+="",oo(this,Yo,Gr(this,Yo).filter(([t])=>t!==e))}get(e){t2("get",arguments,1),e+="";for(var t=Gr(this,Yo),n=t.length,i=0;i<n;i++)if(t[i][0]===e)return t[i][1];return null}getAll(e,t){return t2("getAll",arguments,1),t=[],e+="",Gr(this,Yo).forEach(n=>n[0]===e&&t.push(n[1])),t}has(e){return t2("has",arguments,1),e+="",Gr(this,Yo).some(t=>t[0]===e)}forEach(e,t){t2("forEach",arguments,1);for(var[n,i]of this)e.call(t,i,n,this)}set(...e){t2("set",arguments,2);var t=[],n=!0;e=GI(...e),Gr(this,Yo).forEach(i=>{i[0]===e[0]?n&&(n=!t.push(e)):t.push(i)}),n&&t.push(e),oo(this,Yo,t)}*entries(){yield*Gr(this,Yo)}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}},Yo=new WeakMap,YI)});var ez=ae((Gke,$I)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),e=new r().port1,t=new ArrayBuffer;e.postMessage(t,[t,t])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}$I.exports=globalThis.DOMException});var $m,Pre,Tre,Jke,Dw=ce(()=>{$m=require("node:fs"),Pre=require("node:path"),Tre=wr(ez(),1);Nw();j3();({stat:Jke}=$m.promises)});var rz={};r9(rz,{toFormData:()=>Vre});function Nre(r){let e=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let t=e[2]||e[3]||"",n=t.slice(t.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,o)=>String.fromCharCode(o)),n}async function Vre(r,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let t=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!t)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new Zw(t[1]||t[2]),i,o,l,a,s,u,c=[],f=new r2,h=C=>{l+=b.decode(C,{stream:!0})},d=C=>{c.push(C)},p=()=>{let C=new X9(c,u,{type:s});f.append(a,C)},v=()=>{f.append(a,l)},b=new TextDecoder("utf-8");b.decode(),n.onPartBegin=function(){n.onPartData=h,n.onPartEnd=v,i="",o="",l="",a="",s="",u=null,c.length=0},n.onHeaderField=function(C){i+=b.decode(C,{stream:!0})},n.onHeaderValue=function(C){o+=b.decode(C,{stream:!0})},n.onHeaderEnd=function(){if(o+=b.decode(),i=i.toLowerCase(),i==="content-disposition"){let C=o.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);C&&(a=C[2]||C[3]||""),u=Nre(o),u&&(n.onPartData=d,n.onPartEnd=p)}else i==="content-type"&&(s=o);o="",i=""};for await(let C of r)n.write(C);return n.end(),f}var ya,yr,tz,ou,e6,t6,Ore,G3,Rre,Ire,zre,Hre,n2,Zw,nz=ce(()=>{Dw();Xm();ya=0,yr={START_BOUNDARY:ya++,HEADER_FIELD_START:ya++,HEADER_FIELD:ya++,HEADER_VALUE_START:ya++,HEADER_VALUE:ya++,HEADER_VALUE_ALMOST_DONE:ya++,HEADERS_ALMOST_DONE:ya++,PART_DATA_START:ya++,PART_DATA:ya++,END:ya++},tz=1,ou={PART_BOUNDARY:tz,LAST_BOUNDARY:tz*=2},e6=10,t6=13,Ore=32,G3=45,Rre=58,Ire=97,zre=122,Hre=r=>r|32,n2=()=>{},Zw=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=n2,this.onHeaderField=n2,this.onHeadersEnd=n2,this.onHeaderValue=n2,this.onPartBegin=n2,this.onPartData=n2,this.onPartEnd=n2,this.boundaryChars={},e=`\r
--`+e;let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n),this.boundaryChars[t[n]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=yr.START_BOUNDARY}write(e){let t=0,n=e.length,i=this.index,{lookbehind:o,boundary:l,boundaryChars:a,index:s,state:u,flags:c}=this,f=this.boundary.length,h=f-1,d=e.length,p,v,b=P=>{this[P+"Mark"]=t},C=P=>{delete this[P+"Mark"]},L=(P,y,z,G)=>{(y===void 0||y!==z)&&this[P](G&&G.subarray(y,z))},S=(P,y)=>{let z=P+"Mark";z in this&&(y?(L(P,this[z],t,e),delete this[z]):(L(P,this[z],e.length,e),this[z]=0))};for(t=0;t<n;t++)switch(p=e[t],u){case yr.START_BOUNDARY:if(s===l.length-2){if(p===G3)c|=ou.LAST_BOUNDARY;else if(p!==t6)return;s++;break}else if(s-1===l.length-2){if(c&ou.LAST_BOUNDARY&&p===G3)u=yr.END,c=0;else if(!(c&ou.LAST_BOUNDARY)&&p===e6)s=0,L("onPartBegin"),u=yr.HEADER_FIELD_START;else return;break}p!==l[s+2]&&(s=-2),p===l[s+2]&&s++;break;case yr.HEADER_FIELD_START:u=yr.HEADER_FIELD,b("onHeaderField"),s=0;case yr.HEADER_FIELD:if(p===t6){C("onHeaderField"),u=yr.HEADERS_ALMOST_DONE;break}if(s++,p===G3)break;if(p===Rre){if(s===1)return;S("onHeaderField",!0),u=yr.HEADER_VALUE_START;break}if(v=Hre(p),v<Ire||v>zre)return;break;case yr.HEADER_VALUE_START:if(p===Ore)break;b("onHeaderValue"),u=yr.HEADER_VALUE;case yr.HEADER_VALUE:p===t6&&(S("onHeaderValue",!0),L("onHeaderEnd"),u=yr.HEADER_VALUE_ALMOST_DONE);break;case yr.HEADER_VALUE_ALMOST_DONE:if(p!==e6)return;u=yr.HEADER_FIELD_START;break;case yr.HEADERS_ALMOST_DONE:if(p!==e6)return;L("onHeadersEnd"),u=yr.PART_DATA_START;break;case yr.PART_DATA_START:u=yr.PART_DATA,b("onPartData");case yr.PART_DATA:if(i=s,s===0){for(t+=h;t<d&&!(e[t]in a);)t+=f;t-=h,p=e[t]}if(s<l.length)l[s]===p?(s===0&&S("onPartData",!0),s++):s=0;else if(s===l.length)s++,p===t6?c|=ou.PART_BOUNDARY:p===G3?c|=ou.LAST_BOUNDARY:s=0;else if(s-1===l.length)if(c&ou.PART_BOUNDARY){if(s=0,p===e6){c&=~ou.PART_BOUNDARY,L("onPartEnd"),L("onPartBegin"),u=yr.HEADER_FIELD_START;break}}else c&ou.LAST_BOUNDARY&&p===G3?(L("onPartEnd"),u=yr.END,c=0):s=0;if(s>0)o[s-1]=p;else if(i>0){let P=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);L("onPartData",0,i,P),i=0,b("onPartData"),t--}break;case yr.END:break;default:throw new Error(`Unexpected state entered: ${u}`)}S("onHeaderField"),S("onHeaderValue"),S("onPartData"),this.index=s,this.state=u,this.flags=c}end(){if(this.state===yr.HEADER_FIELD_START&&this.index===0||this.state===yr.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==yr.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var kz=ae(a6=>{"use strict";a6.byteLength=Kre;a6.toByteArray=Xre;a6.fromByteArray=ene;var La=[],Xo=[],Yre=typeof Uint8Array!="undefined"?Uint8Array:Array,Ww="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o2=0,wz=Ww.length;o2<wz;++o2)La[o2]=Ww[o2],Xo[Ww.charCodeAt(o2)]=o2;var o2,wz;Xo[45]=62;Xo[95]=63;function yz(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Kre(r){var e=yz(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Jre(r,e,t){return(e+t)*3/4-t}function Xre(r){var e,t=yz(r),n=t[0],i=t[1],o=new Yre(Jre(r,n,i)),l=0,a=i>0?n-4:n,s;for(s=0;s<a;s+=4)e=Xo[r.charCodeAt(s)]<<18|Xo[r.charCodeAt(s+1)]<<12|Xo[r.charCodeAt(s+2)]<<6|Xo[r.charCodeAt(s+3)],o[l++]=e>>16&255,o[l++]=e>>8&255,o[l++]=e&255;return i===2&&(e=Xo[r.charCodeAt(s)]<<2|Xo[r.charCodeAt(s+1)]>>4,o[l++]=e&255),i===1&&(e=Xo[r.charCodeAt(s)]<<10|Xo[r.charCodeAt(s+1)]<<4|Xo[r.charCodeAt(s+2)]>>2,o[l++]=e>>8&255,o[l++]=e&255),o}function Qre(r){return La[r>>18&63]+La[r>>12&63]+La[r>>6&63]+La[r&63]}function $re(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Qre(n));return i.join("")}function ene(r){for(var e,t=r.length,n=t%3,i=[],o=16383,l=0,a=t-n;l<a;l+=o)i.push($re(r,l,l+o>a?a:l+o));return n===1?(e=r[t-1],i.push(La[e>>2]+La[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(La[e>>10]+La[e>>4&63]+La[e<<2&63]+"=")),i.join("")}});var jd=ae((_We,bL)=>{"use strict";typeof process=="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?bL.exports={nextTick:n1e}:bL.exports=process;function n1e(r,e,t,n){if(typeof r!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,l;switch(i){case 0:case 1:return process.nextTick(r);case 2:return process.nextTick(function(){r.call(null,e)});case 3:return process.nextTick(function(){r.call(null,e,t)});case 4:return process.nextTick(function(){r.call(null,e,t,n)});default:for(o=new Array(i-1),l=0;l<o.length;)o[l++]=arguments[l];return process.nextTick(function(){r.apply(null,o)})}}});var wB=ae((bWe,CB)=>{var i1e={}.toString;CB.exports=Array.isArray||function(r){return i1e.call(r)=="[object Array]"}});var vL=ae((vWe,yB)=>{yB.exports=require("stream")});var kg=ae((CL,LB)=>{var yg=require("buffer"),i1=yg.Buffer;function kB(r,e){for(var t in r)e[t]=r[t]}i1.from&&i1.alloc&&i1.allocUnsafe&&i1.allocUnsafeSlow?LB.exports=yg:(kB(yg,CL),CL.Buffer=cf);function cf(r,e,t){return i1(r,e,t)}kB(i1,cf);cf.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return i1(r,e,t)};cf.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=i1(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};cf.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i1(r)};cf.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return yg.SlowBuffer(r)}});var ff=ae(ni=>{function o1e(r){return Array.isArray?Array.isArray(r):Lg(r)==="[object Array]"}ni.isArray=o1e;function l1e(r){return typeof r=="boolean"}ni.isBoolean=l1e;function a1e(r){return r===null}ni.isNull=a1e;function s1e(r){return r==null}ni.isNullOrUndefined=s1e;function u1e(r){return typeof r=="number"}ni.isNumber=u1e;function c1e(r){return typeof r=="string"}ni.isString=c1e;function f1e(r){return typeof r=="symbol"}ni.isSymbol=f1e;function h1e(r){return r===void 0}ni.isUndefined=h1e;function d1e(r){return Lg(r)==="[object RegExp]"}ni.isRegExp=d1e;function m1e(r){return typeof r=="object"&&r!==null}ni.isObject=m1e;function g1e(r){return Lg(r)==="[object Date]"}ni.isDate=g1e;function p1e(r){return Lg(r)==="[object Error]"||r instanceof Error}ni.isError=p1e;function _1e(r){return typeof r=="function"}ni.isFunction=_1e;function b1e(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||typeof r=="undefined"}ni.isPrimitive=b1e;ni.isBuffer=require("buffer").Buffer.isBuffer;function Lg(r){return Object.prototype.toString.call(r)}});var hf=ae((wWe,wL)=>{typeof Object.create=="function"?wL.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:wL.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var SB=ae((yWe,yL)=>{"use strict";function v1e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var EB=kg().Buffer,xd=require("util");function C1e(r,e,t){r.copy(e,t)}yL.exports=function(){function r(){v1e(this,r),this.head=null,this.tail=null,this.length=0}return r.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},r.prototype.unshift=function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},r.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i},r.prototype.concat=function(t){if(this.length===0)return EB.alloc(0);for(var n=EB.allocUnsafe(t>>>0),i=this.head,o=0;i;)C1e(i.data,n,o),o+=i.data.length,i=i.next;return n},r}();xd&&xd.inspect&&xd.inspect.custom&&(yL.exports.prototype[xd.inspect.custom]=function(){var r=xd.inspect({length:this.length});return this.constructor.name+" "+r})});var kL=ae((kWe,MB)=>{"use strict";var Eg=jd();function w1e(r,e){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Eg.nextTick(Sg,this,r)):Eg.nextTick(Sg,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?t._writableState?t._writableState.errorEmitted||(t._writableState.errorEmitted=!0,Eg.nextTick(Sg,t,o)):Eg.nextTick(Sg,t,o):e&&e(o)}),this)}function y1e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Sg(r,e){r.emit("error",e)}MB.exports={destroy:w1e,undestroy:y1e}});var PB=ae((LWe,AB)=>{AB.exports=k1e;function k1e(r,e){if(LL("noDeprecation"))return r;var t=!1;function n(){if(!t){if(LL("throwDeprecation"))throw new Error(e);LL("traceDeprecation")?console.trace(e):console.warn(e),t=!0}return r.apply(this,arguments)}return n}function LL(r){try{if(!global.localStorage)return!1}catch(t){return!1}var e=global.localStorage[r];return e==null?!1:String(e).toLowerCase()==="true"}});var SL=ae((EWe,VB)=>{"use strict";var F2=jd();VB.exports=on;function OB(r){var e=this;this.next=null,this.entry=null,this.finish=function(){F1e(e,r)}}var L1e=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:F2.nextTick,df;on.WritableState=Ud;var RB=Object.create(ff());RB.inherits=hf();var E1e={deprecate:PB()},IB=vL(),Ag=kg().Buffer,S1e=(typeof global!="undefined"?global:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function M1e(r){return Ag.from(r)}function A1e(r){return Ag.isBuffer(r)||r instanceof S1e}var zB=kL();RB.inherits(on,IB);function P1e(){}function Ud(r,e){df=df||j2(),r=r||{};var t=e instanceof df;this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.writableObjectMode);var n=r.highWaterMark,i=r.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:t&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=r.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){N1e(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new OB(this)}Ud.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};(function(){try{Object.defineProperty(Ud.prototype,"buffer",{get:E1e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(r){}})();var Mg;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Mg=Function.prototype[Symbol.hasInstance],Object.defineProperty(on,Symbol.hasInstance,{value:function(r){return Mg.call(this,r)?!0:this!==on?!1:r&&r._writableState instanceof Ud}})):Mg=function(r){return r instanceof this};function on(r){if(df=df||j2(),!Mg.call(on,this)&&!(this instanceof df))return new on(r);this._writableState=new Ud(r,this),this.writable=!0,r&&(typeof r.write=="function"&&(this._write=r.write),typeof r.writev=="function"&&(this._writev=r.writev),typeof r.destroy=="function"&&(this._destroy=r.destroy),typeof r.final=="function"&&(this._final=r.final)),IB.call(this)}on.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function T1e(r,e){var t=new Error("write after end");r.emit("error",t),F2.nextTick(e,t)}function O1e(r,e,t,n){var i=!0,o=!1;return t===null?o=new TypeError("May not write null values to stream"):typeof t!="string"&&t!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(r.emit("error",o),F2.nextTick(n,o),i=!1),i}on.prototype.write=function(r,e,t){var n=this._writableState,i=!1,o=!n.objectMode&&A1e(r);return o&&!Ag.isBuffer(r)&&(r=M1e(r)),typeof e=="function"&&(t=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof t!="function"&&(t=P1e),n.ended?T1e(this,t):(o||O1e(this,n,r,t))&&(n.pendingcb++,i=I1e(this,n,o,r,e,t)),i};on.prototype.cork=function(){var r=this._writableState;r.corked++};on.prototype.uncork=function(){var r=this._writableState;r.corked&&(r.corked--,!r.writing&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&HB(this,r))};on.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function R1e(r,e,t){return!r.objectMode&&r.decodeStrings!==!1&&typeof e=="string"&&(e=Ag.from(e,t)),e}Object.defineProperty(on.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I1e(r,e,t,n,i,o){if(!t){var l=R1e(e,n,i);n!==l&&(t=!0,i="buffer",n=l)}var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else EL(r,e,!1,a,n,i,o);return s}function EL(r,e,t,n,i,o,l){e.writelen=n,e.writecb=l,e.writing=!0,e.sync=!0,t?r._writev(i,e.onwrite):r._write(i,o,e.onwrite),e.sync=!1}function z1e(r,e,t,n,i){--e.pendingcb,t?(F2.nextTick(i,n),F2.nextTick(qd,r,e),r._writableState.errorEmitted=!0,r.emit("error",n)):(i(n),r._writableState.errorEmitted=!0,r.emit("error",n),qd(r,e))}function H1e(r){r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0}function N1e(r,e){var t=r._writableState,n=t.sync,i=t.writecb;if(H1e(t),e)z1e(r,t,n,e,i);else{var o=NB(t);!o&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&HB(r,t),n?L1e(TB,r,t,o,i):TB(r,t,o,i)}}function TB(r,e,t,n){t||V1e(r,e),e.pendingcb--,n(),qd(r,e)}function V1e(r,e){e.length===0&&e.needDrain&&(e.needDrain=!1,r.emit("drain"))}function HB(r,e){e.bufferProcessing=!0;var t=e.bufferedRequest;if(r._writev&&t&&t.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=t;for(var l=0,a=!0;t;)i[l]=t,t.isBuf||(a=!1),t=t.next,l+=1;i.allBuffers=a,EL(r,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new OB(e),e.bufferedRequestCount=0}else{for(;t;){var s=t.chunk,u=t.encoding,c=t.callback,f=e.objectMode?1:s.length;if(EL(r,e,!1,f,s,u,c),t=t.next,e.bufferedRequestCount--,e.writing)break}t===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=t,e.bufferProcessing=!1}on.prototype._write=function(r,e,t){t(new Error("_write() is not implemented"))};on.prototype._writev=null;on.prototype.end=function(r,e,t){var n=this._writableState;typeof r=="function"?(t=r,r=null,e=null):typeof e=="function"&&(t=e,e=null),r!=null&&this.write(r,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Z1e(this,n,t)};function NB(r){return r.ending&&r.length===0&&r.bufferedRequest===null&&!r.finished&&!r.writing}function B1e(r,e){r._final(function(t){e.pendingcb--,t&&r.emit("error",t),e.prefinished=!0,r.emit("prefinish"),qd(r,e)})}function D1e(r,e){!e.prefinished&&!e.finalCalled&&(typeof r._final=="function"?(e.pendingcb++,e.finalCalled=!0,F2.nextTick(B1e,r,e)):(e.prefinished=!0,r.emit("prefinish")))}function qd(r,e){var t=NB(e);return t&&(D1e(r,e),e.pendingcb===0&&(e.finished=!0,r.emit("finish"))),t}function Z1e(r,e,t){e.ending=!0,qd(r,e),t&&(e.finished?F2.nextTick(t):r.once("finish",t)),e.ended=!0,r.writable=!1}function F1e(r,e,t){var n=r.entry;for(r.entry=null;n;){var i=n.callback;e.pendingcb--,i(t),n=n.next}e.corkedRequestsFree.next=r}Object.defineProperty(on.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(r){this._writableState&&(this._writableState.destroyed=r)}});on.prototype.destroy=zB.destroy;on.prototype._undestroy=zB.undestroy;on.prototype._destroy=function(r,e){this.end(),e(r)}});var j2=ae((SWe,FB)=>{"use strict";var BB=jd(),j1e=Object.keys||function(r){var e=[];for(var t in r)e.push(t);return e};FB.exports=o1;var DB=Object.create(ff());DB.inherits=hf();var ZB=PL(),AL=SL();DB.inherits(o1,ZB);for(ML=j1e(AL.prototype),Pg=0;Pg<ML.length;Pg++)Tg=ML[Pg],o1.prototype[Tg]||(o1.prototype[Tg]=AL.prototype[Tg]);var ML,Tg,Pg;function o1(r){if(!(this instanceof o1))return new o1(r);ZB.call(this,r),AL.call(this,r),r&&r.readable===!1&&(this.readable=!1),r&&r.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,r&&r.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",x1e)}Object.defineProperty(o1.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function x1e(){this.allowHalfOpen||this._writableState.ended||BB.nextTick(q1e,this)}function q1e(r){r.end()}Object.defineProperty(o1.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(r){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=r,this._writableState.destroyed=r)}});o1.prototype._destroy=function(r,e){this.push(null),this.end(),BB.nextTick(e,r)}});var PL=ae((AWe,$B)=>{"use strict";var gf=jd();$B.exports=Tr;var U1e=wB(),Wd;Tr.ReadableState=YB;var MWe=require("events").EventEmitter,UB=function(r,e){return r.listeners(e).length},zL=vL(),Gd=kg().Buffer,W1e=(typeof global!="undefined"?global:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function G1e(r){return Gd.from(r)}function Y1e(r){return Gd.isBuffer(r)||r instanceof W1e}var WB=Object.create(ff());WB.inherits=hf();var TL=require("util"),ir=void 0;TL&&TL.debuglog?ir=TL.debuglog("stream"):ir=function(){};var K1e=SB(),GB=kL(),mf;WB.inherits(Tr,zL);var OL=["error","close","destroy","pause","resume"];function J1e(r,e,t){if(typeof r.prependListener=="function")return r.prependListener(e,t);!r._events||!r._events[e]?r.on(e,t):U1e(r._events[e])?r._events[e].unshift(t):r._events[e]=[t,r._events[e]]}function YB(r,e){Wd=Wd||j2(),r=r||{};var t=e instanceof Wd;this.objectMode=!!r.objectMode,t&&(this.objectMode=this.objectMode||!!r.readableObjectMode);var n=r.highWaterMark,i=r.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:t&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new K1e,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(mf||(mf=require("string_decoder/").StringDecoder),this.decoder=new mf(r.encoding),this.encoding=r.encoding)}function Tr(r){if(Wd=Wd||j2(),!(this instanceof Tr))return new Tr(r);this._readableState=new YB(r,this),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),zL.call(this)}Object.defineProperty(Tr.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(r){this._readableState&&(this._readableState.destroyed=r)}});Tr.prototype.destroy=GB.destroy;Tr.prototype._undestroy=GB.undestroy;Tr.prototype._destroy=function(r,e){this.push(null),e(r)};Tr.prototype.push=function(r,e){var t=this._readableState,n;return t.objectMode?n=!0:typeof r=="string"&&(e=e||t.defaultEncoding,e!==t.encoding&&(r=Gd.from(r,e),e=""),n=!0),KB(this,r,e,!1,n)};Tr.prototype.unshift=function(r){return KB(this,r,null,!0,!1)};function KB(r,e,t,n,i){var o=r._readableState;if(e===null)o.reading=!1,eue(r,o);else{var l;i||(l=X1e(o,e)),l?r.emit("error",l):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==Gd.prototype&&(e=G1e(e)),n?o.endEmitted?r.emit("error",new Error("stream.unshift() after end event")):RL(r,o,e,!0):o.ended?r.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!t?(e=o.decoder.write(e),o.objectMode||e.length!==0?RL(r,o,e,!1):JB(r,o)):RL(r,o,e,!1))):n||(o.reading=!1)}return Q1e(o)}function RL(r,e,t,n){e.flowing&&e.length===0&&!e.sync?(r.emit("data",t),r.read(0)):(e.length+=e.objectMode?1:t.length,n?e.buffer.unshift(t):e.buffer.push(t),e.needReadable&&Og(r)),JB(r,e)}function X1e(r,e){var t;return!Y1e(e)&&typeof e!="string"&&e!==void 0&&!r.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function Q1e(r){return!r.ended&&(r.needReadable||r.length<r.highWaterMark||r.length===0)}Tr.prototype.isPaused=function(){return this._readableState.flowing===!1};Tr.prototype.setEncoding=function(r){return mf||(mf=require("string_decoder/").StringDecoder),this._readableState.decoder=new mf(r),this._readableState.encoding=r,this};var jB=8388608;function $1e(r){return r>=jB?r=jB:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r}function xB(r,e){return r<=0||e.length===0&&e.ended?0:e.objectMode?1:r!==r?e.flowing&&e.length?e.buffer.head.data.length:e.length:(r>e.highWaterMark&&(e.highWaterMark=$1e(r)),r<=e.length?r:e.ended?e.length:(e.needReadable=!0,0))}Tr.prototype.read=function(r){ir("read",r),r=parseInt(r,10);var e=this._readableState,t=r;if(r!==0&&(e.emittedReadable=!1),r===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return ir("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?IL(this):Og(this),null;if(r=xB(r,e),r===0&&e.ended)return e.length===0&&IL(this),null;var n=e.needReadable;ir("need readable",n),(e.length===0||e.length-r<e.highWaterMark)&&(n=!0,ir("length less than watermark",n)),e.ended||e.reading?(n=!1,ir("reading or ended",n)):n&&(ir("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(r=xB(t,e)));var i;return r>0?i=XB(r,e):i=null,i===null?(e.needReadable=!0,r=0):e.length-=r,e.length===0&&(e.ended||(e.needReadable=!0),t!==r&&e.ended&&IL(this)),i!==null&&this.emit("data",i),i};function eue(r,e){if(!e.ended){if(e.decoder){var t=e.decoder.end();t&&t.length&&(e.buffer.push(t),e.length+=e.objectMode?1:t.length)}e.ended=!0,Og(r)}}function Og(r){var e=r._readableState;e.needReadable=!1,e.emittedReadable||(ir("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?gf.nextTick(qB,r):qB(r))}function qB(r){ir("emit readable"),r.emit("readable"),HL(r)}function JB(r,e){e.readingMore||(e.readingMore=!0,gf.nextTick(tue,r,e))}function tue(r,e){for(var t=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(ir("maybeReadMore read 0"),r.read(0),t!==e.length);)t=e.length;e.readingMore=!1}Tr.prototype._read=function(r){this.emit("error",new Error("_read() is not implemented"))};Tr.prototype.pipe=function(r,e){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=r;break;case 1:n.pipes=[n.pipes,r];break;default:n.pipes.push(r);break}n.pipesCount+=1,ir("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&r!==process.stdout&&r!==process.stderr,o=i?a:b;n.endEmitted?gf.nextTick(o):t.once("end",o),r.on("unpipe",l);function l(C,L){ir("onunpipe"),C===t&&L&&L.hasUnpiped===!1&&(L.hasUnpiped=!0,c())}function a(){ir("onend"),r.end()}var s=rue(t);r.on("drain",s);var u=!1;function c(){ir("cleanup"),r.removeListener("close",p),r.removeListener("finish",v),r.removeListener("drain",s),r.removeListener("error",d),r.removeListener("unpipe",l),t.removeListener("end",a),t.removeListener("end",b),t.removeListener("data",h),u=!0,n.awaitDrain&&(!r._writableState||r._writableState.needDrain)&&s()}var f=!1;t.on("data",h);function h(C){ir("ondata"),f=!1;var L=r.write(C);L===!1&&!f&&((n.pipesCount===1&&n.pipes===r||n.pipesCount>1&&QB(n.pipes,r)!==-1)&&!u&&(ir("false write response, pause",n.awaitDrain),n.awaitDrain++,f=!0),t.pause())}function d(C){ir("onerror",C),b(),r.removeListener("error",d),UB(r,"error")===0&&r.emit("error",C)}J1e(r,"error",d);function p(){r.removeListener("finish",v),b()}r.once("close",p);function v(){ir("onfinish"),r.removeListener("close",p),b()}r.once("finish",v);function b(){ir("unpipe"),t.unpipe(r)}return r.emit("pipe",t),n.flowing||(ir("pipe resume"),t.resume()),r};function rue(r){return function(){var e=r._readableState;ir("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&UB(r,"data")&&(e.flowing=!0,HL(r))}}Tr.prototype.unpipe=function(r){var e=this._readableState,t={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return r&&r!==e.pipes?this:(r||(r=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,r&&r.emit("unpipe",this,t),this);if(!r){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var l=QB(e.pipes,r);return l===-1?this:(e.pipes.splice(l,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),r.emit("unpipe",this,t),this)};Tr.prototype.on=function(r,e){var t=zL.prototype.on.call(this,r,e);if(r==="data")this._readableState.flowing!==!1&&this.resume();else if(r==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Og(this):gf.nextTick(nue,this))}return t};Tr.prototype.addListener=Tr.prototype.on;function nue(r){ir("readable nexttick read 0"),r.read(0)}Tr.prototype.resume=function(){var r=this._readableState;return r.flowing||(ir("resume"),r.flowing=!0,iue(this,r)),this};function iue(r,e){e.resumeScheduled||(e.resumeScheduled=!0,gf.nextTick(oue,r,e))}function oue(r,e){e.reading||(ir("resume read 0"),r.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,r.emit("resume"),HL(r),e.flowing&&!e.reading&&r.read(0)}Tr.prototype.pause=function(){return ir("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ir("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function HL(r){var e=r._readableState;for(ir("flow",e.flowing);e.flowing&&r.read()!==null;);}Tr.prototype.wrap=function(r){var e=this,t=this._readableState,n=!1;r.on("end",function(){if(ir("wrapped end"),t.decoder&&!t.ended){var l=t.decoder.end();l&&l.length&&e.push(l)}e.push(null)}),r.on("data",function(l){if(ir("wrapped data"),t.decoder&&(l=t.decoder.write(l)),!(t.objectMode&&l==null)&&!(!t.objectMode&&(!l||!l.length))){var a=e.push(l);a||(n=!0,r.pause())}});for(var i in r)this[i]===void 0&&typeof r[i]=="function"&&(this[i]=function(l){return function(){return r[l].apply(r,arguments)}}(i));for(var o=0;o<OL.length;o++)r.on(OL[o],this.emit.bind(this,OL[o]));return this._read=function(l){ir("wrapped _read",l),n&&(n=!1,r.resume())},this};Object.defineProperty(Tr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Tr._fromList=XB;function XB(r,e){if(e.length===0)return null;var t;return e.objectMode?t=e.buffer.shift():!r||r>=e.length?(e.decoder?t=e.buffer.join(""):e.buffer.length===1?t=e.buffer.head.data:t=e.buffer.concat(e.length),e.buffer.clear()):t=lue(r,e.buffer,e.decoder),t}function lue(r,e,t){var n;return r<e.head.data.length?(n=e.head.data.slice(0,r),e.head.data=e.head.data.slice(r)):r===e.head.data.length?n=e.shift():n=t?aue(r,e):sue(r,e),n}function aue(r,e){var t=e.head,n=1,i=t.data;for(r-=i.length;t=t.next;){var o=t.data,l=r>o.length?o.length:r;if(l===o.length?i+=o:i+=o.slice(0,r),r-=l,r===0){l===o.length?(++n,t.next?e.head=t.next:e.head=e.tail=null):(e.head=t,t.data=o.slice(l));break}++n}return e.length-=n,i}function sue(r,e){var t=Gd.allocUnsafe(r),n=e.head,i=1;for(n.data.copy(t),r-=n.data.length;n=n.next;){var o=n.data,l=r>o.length?o.length:r;if(o.copy(t,t.length-r,0,l),r-=l,r===0){l===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(l));break}++i}return e.length-=i,t}function IL(r){var e=r._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,gf.nextTick(uue,e,r))}function uue(r,e){!r.endEmitted&&r.length===0&&(r.endEmitted=!0,e.readable=!1,e.emit("end"))}function QB(r,e){for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}});var NL=ae((PWe,rD)=>{"use strict";rD.exports=l1;var Rg=j2(),tD=Object.create(ff());tD.inherits=hf();tD.inherits(l1,Rg);function cue(r,e){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,e!=null&&this.push(e),n(r);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l1(r){if(!(this instanceof l1))return new l1(r);Rg.call(this,r),this._transformState={afterTransform:cue.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,r&&(typeof r.transform=="function"&&(this._transform=r.transform),typeof r.flush=="function"&&(this._flush=r.flush)),this.on("prefinish",fue)}function fue(){var r=this;typeof this._flush=="function"?this._flush(function(e,t){eD(r,e,t)}):eD(this,null,null)}l1.prototype.push=function(r,e){return this._transformState.needTransform=!1,Rg.prototype.push.call(this,r,e)};l1.prototype._transform=function(r,e,t){throw new Error("_transform() is not implemented")};l1.prototype._write=function(r,e,t){var n=this._transformState;if(n.writecb=t,n.writechunk=r,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};l1.prototype._read=function(r){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};l1.prototype._destroy=function(r,e){var t=this;Rg.prototype._destroy.call(this,r,function(n){e(n),t.emit("close")})};function eD(r,e,t){if(e)return r.emit("error",e);if(t!=null&&r.push(t),r._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(r._transformState.transforming)throw new Error("Calling transform done when still transforming");return r.push(null)}});var lD=ae((TWe,oD)=>{"use strict";oD.exports=Yd;var nD=NL(),iD=Object.create(ff());iD.inherits=hf();iD.inherits(Yd,nD);function Yd(r){if(!(this instanceof Yd))return new Yd(r);nD.call(this,r)}Yd.prototype._transform=function(r,e,t){t(null,r)}});var VL=ae((Bn,Ig)=>{var Za=require("stream");process.env.READABLE_STREAM==="disable"&&Za?(Ig.exports=Za,Bn=Ig.exports=Za.Readable,Bn.Readable=Za.Readable,Bn.Writable=Za.Writable,Bn.Duplex=Za.Duplex,Bn.Transform=Za.Transform,Bn.PassThrough=Za.PassThrough,Bn.Stream=Za):(Bn=Ig.exports=PL(),Bn.Stream=Za||Bn,Bn.Readable=Bn,Bn.Writable=SL(),Bn.Duplex=j2(),Bn.Transform=NL(),Bn.PassThrough=lD())});var a1=ae(ko=>{"use strict";ko.base64=!0;ko.array=!0;ko.string=!0;ko.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined";ko.nodebuffer=typeof Buffer!="undefined";ko.uint8array=typeof Uint8Array!="undefined";if(typeof ArrayBuffer=="undefined")ko.blob=!1;else{BL=new ArrayBuffer(0);try{ko.blob=new Blob([BL],{type:"application/zip"}).size===0}catch(r){try{aD=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,DL=new aD,DL.append(BL),ko.blob=DL.getBlob("application/zip").size===0}catch(e){ko.blob=!1}}}var BL,aD,DL;try{ko.nodestream=!!VL().Readable}catch(r){ko.nodestream=!1}});var FL=ae(ZL=>{"use strict";var hue=Fr(),due=a1(),Fa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";ZL.encode=function(r){for(var e=[],t,n,i,o,l,a,s,u=0,c=r.length,f=c,h=hue.getTypeOf(r)!=="string";u<r.length;)f=c-u,h?(t=r[u++],n=u<c?r[u++]:0,i=u<c?r[u++]:0):(t=r.charCodeAt(u++),n=u<c?r.charCodeAt(u++):0,i=u<c?r.charCodeAt(u++):0),o=t>>2,l=(t&3)<<4|n>>4,a=f>1?(n&15)<<2|i>>6:64,s=f>2?i&63:64,e.push(Fa.charAt(o)+Fa.charAt(l)+Fa.charAt(a)+Fa.charAt(s));return e.join("")};ZL.decode=function(r){var e,t,n,i,o,l,a,s=0,u=0,c="data:";if(r.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");r=r.replace(/[^A-Za-z0-9+/=]/g,"");var f=r.length*3/4;if(r.charAt(r.length-1)===Fa.charAt(64)&&f--,r.charAt(r.length-2)===Fa.charAt(64)&&f--,f%1!==0)throw new Error("Invalid base64 input, bad content length.");var h;for(due.uint8array?h=new Uint8Array(f|0):h=new Array(f|0);s<r.length;)i=Fa.indexOf(r.charAt(s++)),o=Fa.indexOf(r.charAt(s++)),l=Fa.indexOf(r.charAt(s++)),a=Fa.indexOf(r.charAt(s++)),e=i<<2|o>>4,t=(o&15)<<4|l>>2,n=(l&3)<<6|a,h[u++]=e,l!==64&&(h[u++]=t),a!==64&&(h[u++]=n);return h}});var Kd=ae((IWe,sD)=>{"use strict";sD.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(r,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,e);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,e)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var e=new Buffer(r);return e.fill(0),e},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}});var hD=ae((zWe,fD)=>{"use strict";var uD=global.MutationObserver||global.WebKitMutationObserver,pf;process.browser?uD?(jL=0,cD=new uD(Jd),xL=global.document.createTextNode(""),cD.observe(xL,{characterData:!0}),pf=function(){xL.data=jL=++jL%2}):!global.setImmediate&&typeof global.MessageChannel!="undefined"?(qL=new global.MessageChannel,qL.port1.onmessage=Jd,pf=function(){qL.port2.postMessage(0)}):"document"in global&&"onreadystatechange"in global.document.createElement("script")?pf=function(){var r=global.document.createElement("script");r.onreadystatechange=function(){Jd(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},global.document.documentElement.appendChild(r)}:pf=function(){setTimeout(Jd,0)}:pf=function(){process.nextTick(Jd)};var jL,cD,xL,qL,UL,Xd=[];function Jd(){UL=!0;for(var r,e,t=Xd.length;t;){for(e=Xd,Xd=[],r=-1;++r<t;)e[r]();t=Xd.length}UL=!1}fD.exports=mue;function mue(r){Xd.push(r)===1&&!UL&&pf()}});var vD=ae((HWe,bD)=>{"use strict";var dD=hD();function _f(){}var ii={},mD=["REJECTED"],WL=["FULFILLED"],gD=["PENDING"];process.browser||(Qd=["UNHANDLED"]);var Qd;bD.exports=Tu;function Tu(r){if(typeof r!="function")throw new TypeError("resolver must be a function");this.state=gD,this.queue=[],this.outcome=void 0,process.browser||(this.handled=Qd),r!==_f&&pD(this,r)}Tu.prototype.finally=function(r){if(typeof r!="function")return this;var e=this.constructor;return this.then(t,n);function t(i){function o(){return i}return e.resolve(r()).then(o)}function n(i){function o(){throw i}return e.resolve(r()).then(o)}};Tu.prototype.catch=function(r){return this.then(null,r)};Tu.prototype.then=function(r,e){if(typeof r!="function"&&this.state===WL||typeof e!="function"&&this.state===mD)return this;var t=new this.constructor(_f);if(process.browser||this.handled===Qd&&(this.handled=null),this.state!==gD){var n=this.state===WL?r:e;GL(t,n,this.outcome)}else this.queue.push(new $d(t,r,e));return t};function $d(r,e,t){this.promise=r,typeof e=="function"&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),typeof t=="function"&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}$d.prototype.callFulfilled=function(r){ii.resolve(this.promise,r)};$d.prototype.otherCallFulfilled=function(r){GL(this.promise,this.onFulfilled,r)};$d.prototype.callRejected=function(r){ii.reject(this.promise,r)};$d.prototype.otherCallRejected=function(r){GL(this.promise,this.onRejected,r)};function GL(r,e,t){dD(function(){var n;try{n=e(t)}catch(i){return ii.reject(r,i)}n===r?ii.reject(r,new TypeError("Cannot resolve promise with itself")):ii.resolve(r,n)})}ii.resolve=function(r,e){var t=_D(gue,e);if(t.status==="error")return ii.reject(r,t.value);var n=t.value;if(n)pD(r,n);else{r.state=WL,r.outcome=e;for(var i=-1,o=r.queue.length;++i<o;)r.queue[i].callFulfilled(e)}return r};ii.reject=function(r,e){r.state=mD,r.outcome=e,process.browser||r.handled===Qd&&dD(function(){r.handled===Qd&&process.emit("unhandledRejection",e,r)});for(var t=-1,n=r.queue.length;++t<n;)r.queue[t].callRejected(e);return r};function gue(r){var e=r&&r.then;if(r&&(typeof r=="object"||typeof r=="function")&&typeof e=="function")return function(){e.apply(r,arguments)}}function pD(r,e){var t=!1;function n(a){t||(t=!0,ii.reject(r,a))}function i(a){t||(t=!0,ii.resolve(r,a))}function o(){e(i,n)}var l=_D(o);l.status==="error"&&n(l.value)}function _D(r,e){var t={};try{t.value=r(e),t.status="success"}catch(n){t.status="error",t.value=n}return t}Tu.resolve=pue;function pue(r){return r instanceof this?r:ii.resolve(new this(_f),r)}Tu.reject=_ue;function _ue(r){var e=new this(_f);return ii.reject(e,r)}Tu.all=bue;function bue(r){var e=this;if(Object.prototype.toString.call(r)!=="[object Array]")return this.reject(new TypeError("must be an array"));var t=r.length,n=!1;if(!t)return this.resolve([]);for(var i=new Array(t),o=0,l=-1,a=new this(_f);++l<t;)s(r[l],l);return a;function s(u,c){e.resolve(u).then(f,function(h){n||(n=!0,ii.reject(a,h))});function f(h){i[c]=h,++o===t&&!n&&(n=!0,ii.resolve(a,i))}}}Tu.race=vue;function vue(r){var e=this;if(Object.prototype.toString.call(r)!=="[object Array]")return this.reject(new TypeError("must be an array"));var t=r.length,n=!1;if(!t)return this.resolve([]);for(var i=-1,o=new this(_f);++i<t;)l(r[i]);return o;function l(a){e.resolve(a).then(function(s){n||(n=!0,ii.resolve(o,s))},function(s){n||(n=!0,ii.reject(o,s))})}}});var bf=ae((NWe,CD)=>{"use strict";var YL=null;typeof Promise!="undefined"?YL=Promise:YL=vD();CD.exports={Promise:YL}});var yD=ae(wD=>{(function(r,e){"use strict";if(r.setImmediate)return;var t=1,n={},i=!1,o=r.document,l;function a(L){typeof L!="function"&&(L=new Function(""+L));for(var S=new Array(arguments.length-1),P=0;P<S.length;P++)S[P]=arguments[P+1];var y={callback:L,args:S};return n[t]=y,l(t),t++}function s(L){delete n[L]}function u(L){var S=L.callback,P=L.args;switch(P.length){case 0:S();break;case 1:S(P[0]);break;case 2:S(P[0],P[1]);break;case 3:S(P[0],P[1],P[2]);break;default:S.apply(e,P);break}}function c(L){if(i)setTimeout(c,0,L);else{var S=n[L];if(S){i=!0;try{u(S)}finally{s(L),i=!1}}}}function f(){l=function(L){process.nextTick(function(){c(L)})}}function h(){if(r.postMessage&&!r.importScripts){var L=!0,S=r.onmessage;return r.onmessage=function(){L=!1},r.postMessage("","*"),r.onmessage=S,L}}function d(){var L="setImmediate$"+Math.random()+"$",S=function(P){P.source===r&&typeof P.data=="string"&&P.data.indexOf(L)===0&&c(+P.data.slice(L.length))};r.addEventListener?r.addEventListener("message",S,!1):r.attachEvent("onmessage",S),l=function(P){r.postMessage(L+P,"*")}}function p(){var L=new MessageChannel;L.port1.onmessage=function(S){var P=S.data;c(P)},l=function(S){L.port2.postMessage(S)}}function v(){var L=o.documentElement;l=function(S){var P=o.createElement("script");P.onreadystatechange=function(){c(S),P.onreadystatechange=null,L.removeChild(P),P=null},L.appendChild(P)}}function b(){l=function(L){setTimeout(c,0,L)}}var C=Object.getPrototypeOf&&Object.getPrototypeOf(r);C=C&&C.setTimeout?C:r,{}.toString.call(r.process)==="[object process]"?f():h()?d():r.MessageChannel?p():o&&"onreadystatechange"in o.createElement("script")?v():b(),C.setImmediate=a,C.clearImmediate=s})(typeof self=="undefined"?typeof global=="undefined"?wD:global:self)});var Fr=ae(ln=>{"use strict";var Ou=a1(),Cue=FL(),vf=Kd(),KL=bf();yD();function wue(r){var e=null;return Ou.uint8array?e=new Uint8Array(r.length):e=new Array(r.length),Hg(r,e)}ln.newBlob=function(r,e){ln.checkSupport("blob");try{return new Blob([r],{type:e})}catch(i){try{var t=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,n=new t;return n.append(r),n.getBlob(e)}catch(o){throw new Error("Bug : can't construct the Blob.")}}};function e4(r){return r}function Hg(r,e){for(var t=0;t<r.length;++t)e[t]=r.charCodeAt(t)&255;return e}var zg={stringifyByChunk:function(r,e,t){var n=[],i=0,o=r.length;if(o<=t)return String.fromCharCode.apply(null,r);for(;i<o;)e==="array"||e==="nodebuffer"?n.push(String.fromCharCode.apply(null,r.slice(i,Math.min(i+t,o)))):n.push(String.fromCharCode.apply(null,r.subarray(i,Math.min(i+t,o)))),i+=t;return n.join("")},stringifyByChar:function(r){for(var e="",t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},applyCanBeUsed:{uint8array:function(){try{return Ou.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(r){return!1}}(),nodebuffer:function(){try{return Ou.nodebuffer&&String.fromCharCode.apply(null,vf.allocBuffer(1)).length===1}catch(r){return!1}}()}};function t4(r){var e=65536,t=ln.getTypeOf(r),n=!0;if(t==="uint8array"?n=zg.applyCanBeUsed.uint8array:t==="nodebuffer"&&(n=zg.applyCanBeUsed.nodebuffer),n)for(;e>1;)try{return zg.stringifyByChunk(r,t,e)}catch(i){e=Math.floor(e/2)}return zg.stringifyByChar(r)}ln.applyFromCharCode=t4;function Ng(r,e){for(var t=0;t<r.length;t++)e[t]=r[t];return e}var Ru={};Ru.string={string:e4,array:function(r){return Hg(r,new Array(r.length))},arraybuffer:function(r){return Ru.string.uint8array(r).buffer},uint8array:function(r){return Hg(r,new Uint8Array(r.length))},nodebuffer:function(r){return Hg(r,vf.allocBuffer(r.length))}};Ru.array={string:t4,array:e4,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return vf.newBufferFrom(r)}};Ru.arraybuffer={string:function(r){return t4(new Uint8Array(r))},array:function(r){return Ng(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:e4,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return vf.newBufferFrom(new Uint8Array(r))}};Ru.uint8array={string:t4,array:function(r){return Ng(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:e4,nodebuffer:function(r){return vf.newBufferFrom(r)}};Ru.nodebuffer={string:t4,array:function(r){return Ng(r,new Array(r.length))},arraybuffer:function(r){return Ru.nodebuffer.uint8array(r).buffer},uint8array:function(r){return Ng(r,new Uint8Array(r.length))},nodebuffer:e4};ln.transformTo=function(r,e){if(e||(e=""),!r)return e;ln.checkSupport(r);var t=ln.getTypeOf(e),n=Ru[t][r](e);return n};ln.resolve=function(r){for(var e=r.split("/"),t=[],n=0;n<e.length;n++){var i=e[n];i==="."||i===""&&n!==0&&n!==e.length-1||(i===".."?t.pop():t.push(i))}return t.join("/")};ln.getTypeOf=function(r){if(typeof r=="string")return"string";if(Object.prototype.toString.call(r)==="[object Array]")return"array";if(Ou.nodebuffer&&vf.isBuffer(r))return"nodebuffer";if(Ou.uint8array&&r instanceof Uint8Array)return"uint8array";if(Ou.arraybuffer&&r instanceof ArrayBuffer)return"arraybuffer"};ln.checkSupport=function(r){var e=Ou[r.toLowerCase()];if(!e)throw new Error(r+" is not supported by this platform")};ln.MAX_VALUE_16BITS=65535;ln.MAX_VALUE_32BITS=-1;ln.pretty=function(r){var e="",t,n;for(n=0;n<(r||"").length;n++)t=r.charCodeAt(n),e+="\\x"+(t<16?"0":"")+t.toString(16).toUpperCase();return e};ln.delay=function(r,e,t){setImmediate(function(){r.apply(t||null,e||[])})};ln.inherits=function(r,e){var t=function(){};t.prototype=e.prototype,r.prototype=new t};ln.extend=function(){var r={},e,t;for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&typeof r[t]=="undefined"&&(r[t]=arguments[e][t]);return r};ln.prepareContent=function(r,e,t,n,i){var o=KL.Promise.resolve(e).then(function(l){var a=Ou.blob&&(l instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(l))!==-1);return a&&typeof FileReader!="undefined"?new KL.Promise(function(s,u){var c=new FileReader;c.onload=function(f){s(f.target.result)},c.onerror=function(f){u(f.target.error)},c.readAsArrayBuffer(l)}):l});return o.then(function(l){var a=ln.getTypeOf(l);return a?(a==="arraybuffer"?l=ln.transformTo("uint8array",l):a==="string"&&(i?l=Cue.decode(l):t&&n!==!0&&(l=wue(l))),l):KL.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}});var Lo=ae((DWe,LD)=>{"use strict";function kD(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}kD.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return this.isFinished?!1:(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,e){return this._listeners[r].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,e){if(this._listeners[r])for(var t=0;t<this._listeners[r].length;t++)this._listeners[r][t].call(this,e)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var e=this;return r.on("data",function(t){e.processChunk(t)}),r.on("end",function(){e.end()}),r.on("error",function(t){e.error(t)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var r=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,e){return this.extraStreamInfo[r]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}};LD.exports=kD});var wf=ae(Iu=>{"use strict";var Cf=Fr(),x2=a1(),yue=Kd(),Vg=Lo(),r4=new Array(256);for(s1=0;s1<256;s1++)r4[s1]=s1>=252?6:s1>=248?5:s1>=240?4:s1>=224?3:s1>=192?2:1;var s1;r4[254]=r4[254]=1;var kue=function(r){var e,t,n,i,o,l=r.length,a=0;for(i=0;i<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(x2.uint8array?e=new Uint8Array(a):e=new Array(a),o=0,i=0;o<a;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e},Lue=function(r,e){var t;for(e=e||r.length,e>r.length&&(e=r.length),t=e-1;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+r4[r[t]]>e?t:e},Eue=function(r){var e,t,n,i,o=r.length,l=new Array(o*2);for(t=0,e=0;e<o;){if(n=r[e++],n<128){l[t++]=n;continue}if(i=r4[n],i>4){l[t++]=65533,e+=i-1;continue}for(n&=i===2?31:i===3?15:7;i>1&&e<o;)n=n<<6|r[e++]&63,i--;if(i>1){l[t++]=65533;continue}n<65536?l[t++]=n:(n-=65536,l[t++]=55296|n>>10&1023,l[t++]=56320|n&1023)}return l.length!==t&&(l.subarray?l=l.subarray(0,t):l.length=t),Cf.applyFromCharCode(l)};Iu.utf8encode=function(e){return x2.nodebuffer?yue.newBufferFrom(e,"utf-8"):kue(e)};Iu.utf8decode=function(e){return x2.nodebuffer?Cf.transformTo("nodebuffer",e).toString("utf-8"):(e=Cf.transformTo(x2.uint8array?"uint8array":"array",e),Eue(e))};function Bg(){Vg.call(this,"utf-8 decode"),this.leftOver=null}Cf.inherits(Bg,Vg);Bg.prototype.processChunk=function(r){var e=Cf.transformTo(x2.uint8array?"uint8array":"array",r.data);if(this.leftOver&&this.leftOver.length){if(x2.uint8array){var t=e;e=new Uint8Array(t.length+this.leftOver.length),e.set(this.leftOver,0),e.set(t,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var n=Lue(e),i=e;n!==e.length&&(x2.uint8array?(i=e.subarray(0,n),this.leftOver=e.subarray(n,e.length)):(i=e.slice(0,n),this.leftOver=e.slice(n,e.length))),this.push({data:Iu.utf8decode(i),meta:r.meta})};Bg.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:Iu.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};Iu.Utf8DecodeWorker=Bg;function JL(){Vg.call(this,"utf-8 encode")}Cf.inherits(JL,Vg);JL.prototype.processChunk=function(r){this.push({data:Iu.utf8encode(r.data),meta:r.meta})};Iu.Utf8EncodeWorker=JL});var AD=ae((FWe,MD)=>{"use strict";var ED=Lo(),SD=Fr();function XL(r){ED.call(this,"ConvertWorker to "+r),this.destType=r}SD.inherits(XL,ED);XL.prototype.processChunk=function(r){this.push({data:SD.transformTo(this.destType,r.data),meta:r.meta})};MD.exports=XL});var OD=ae((jWe,TD)=>{"use strict";var PD=VL().Readable,Sue=Fr();Sue.inherits(QL,PD);function QL(r,e,t){PD.call(this,e),this._helper=r;var n=this;r.on("data",function(i,o){n.push(i)||n._helper.pause(),t&&t(o)}).on("error",function(i){n.emit("error",i)}).on("end",function(){n.push(null)})}QL.prototype._read=function(){this._helper.resume()};TD.exports=QL});var $L=ae((xWe,zD)=>{"use strict";var q2=Fr(),Mue=AD(),Aue=Lo(),Pue=FL(),Tue=a1(),Oue=bf(),RD=null;if(Tue.nodestream)try{RD=OD()}catch(r){}function Rue(r,e,t){switch(r){case"blob":return q2.newBlob(q2.transformTo("arraybuffer",e),t);case"base64":return Pue.encode(e);default:return q2.transformTo(r,e)}}function Iue(r,e){var t,n=0,i=null,o=0;for(t=0;t<e.length;t++)o+=e[t].length;switch(r){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(o),t=0;t<e.length;t++)i.set(e[t],n),n+=e[t].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+r+"'")}}function zue(r,e){return new Oue.Promise(function(t,n){var i=[],o=r._internalType,l=r._outputType,a=r._mimeType;r.on("data",function(s,u){i.push(s),e&&e(u)}).on("error",function(s){i=[],n(s)}).on("end",function(){try{var s=Rue(l,Iue(o,i),a);t(s)}catch(u){n(u)}i=[]}).resume()})}function ID(r,e,t){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string";break}try{this._internalType=n,this._outputType=e,this._mimeType=t,q2.checkSupport(n),this._worker=r.pipe(new Mue(n)),r.lock()}catch(i){this._worker=new Aue("error"),this._worker.error(i)}}ID.prototype={accumulate:function(r){return zue(this,r)},on:function(r,e){var t=this;return r==="data"?this._worker.on(r,function(n){e.call(t,n.data,n.meta)}):this._worker.on(r,function(){q2.delay(e,arguments,t)}),this},resume:function(){return q2.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(r){if(q2.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new RD(this,{objectMode:this._outputType!=="nodebuffer"},r)}};zD.exports=ID});var eE=ae(ql=>{"use strict";ql.base64=!1;ql.binary=!1;ql.dir=!1;ql.createFolders=!0;ql.date=null;ql.compression=null;ql.compressionOptions=null;ql.comment=null;ql.unixPermissions=null;ql.dosPermissions=null});var tE=ae((UWe,HD)=>{"use strict";var Dg=Fr(),Zg=Lo(),Hue=16*1024;function yf(r){Zg.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,r.then(function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=Dg.getTypeOf(t),e.isPaused||e._tickAndRepeat()},function(t){e.error(t)})}Dg.inherits(yf,Zg);yf.prototype.cleanUp=function(){Zg.prototype.cleanUp.call(this),this.data=null};yf.prototype.resume=function(){return Zg.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,Dg.delay(this._tickAndRepeat,[],this)),!0):!1};yf.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(Dg.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};yf.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var r=Hue,e=null,t=Math.min(this.max,this.index+r);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t);break}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})};HD.exports=yf});var Fg=ae((WWe,VD)=>{"use strict";var Nue=Fr();function Vue(){for(var r,e=[],t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e}var ND=Vue();function Bue(r,e,t,n){var i=ND,o=n+t;r=r^-1;for(var l=n;l<o;l++)r=r>>>8^i[(r^e[l])&255];return r^-1}function Due(r,e,t,n){var i=ND,o=n+t;r=r^-1;for(var l=n;l<o;l++)r=r>>>8^i[(r^e.charCodeAt(l))&255];return r^-1}VD.exports=function(e,t){if(typeof e=="undefined"||!e.length)return 0;var n=Nue.getTypeOf(e)!=="string";return n?Bue(t|0,e,e.length,0):Due(t|0,e,e.length,0)}});var nE=ae((GWe,DD)=>{"use strict";var BD=Lo(),Zue=Fg(),Fue=Fr();function rE(){BD.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Fue.inherits(rE,BD);rE.prototype.processChunk=function(r){this.streamInfo.crc32=Zue(r.data,this.streamInfo.crc32||0),this.push(r)};DD.exports=rE});var FD=ae((YWe,ZD)=>{"use strict";var jue=Fr(),iE=Lo();function oE(r){iE.call(this,"DataLengthProbe for "+r),this.propName=r,this.withStreamInfo(r,0)}jue.inherits(oE,iE);oE.prototype.processChunk=function(r){if(r){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+r.data.length}iE.prototype.processChunk.call(this,r)};ZD.exports=oE});var jg=ae((KWe,qD)=>{"use strict";var jD=bf(),xD=tE(),xue=nE(),lE=FD();function aE(r,e,t,n,i){this.compressedSize=r,this.uncompressedSize=e,this.crc32=t,this.compression=n,this.compressedContent=i}aE.prototype={getContentWorker:function(){var r=new xD(jD.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new lE("data_length")),e=this;return r.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),r},getCompressedWorker:function(){return new xD(jD.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};aE.createWorkerFrom=function(r,e,t){return r.pipe(new xue).pipe(new lE("uncompressedSize")).pipe(e.compressWorker(t)).pipe(new lE("compressedSize")).withStreamInfo("compression",e)};qD.exports=aE});var YD=ae((JWe,GD)=>{"use strict";var que=$L(),Uue=tE(),sE=wf(),uE=jg(),UD=Lo(),cE=function(r,e,t){this.name=r,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=e,this._dataBinary=t.binary,this.options={compression:t.compression,compressionOptions:t.compressionOptions}};cE.prototype={internalStream:function(r){var e=null,t="string";try{if(!r)throw new Error("No output type specified.");t=r.toLowerCase();var n=t==="string"||t==="text";(t==="binarystring"||t==="text")&&(t="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(e=e.pipe(new sE.Utf8EncodeWorker)),!i&&n&&(e=e.pipe(new sE.Utf8DecodeWorker))}catch(o){e=new UD("error"),e.error(o)}return new que(e,t,"")},async:function(r,e){return this.internalStream(r).accumulate(e)},nodeStream:function(r,e){return this.internalStream(r||"nodebuffer").toNodejsStream(e)},_compressWorker:function(r,e){if(this._data instanceof uE&&this._data.compression.magic===r.magic)return this._data.getCompressedWorker();var t=this._decompressWorker();return this._dataBinary||(t=t.pipe(new sE.Utf8EncodeWorker)),uE.createWorkerFrom(t,r,e)},_decompressWorker:function(){return this._data instanceof uE?this._data.getContentWorker():this._data instanceof UD?this._data:new Uue(this._data)}};var WD=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Wue=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(xg=0;xg<WD.length;xg++)cE.prototype[WD[xg]]=Wue;var xg;GD.exports=cE});var u1=ae(yi=>{"use strict";var Gue=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function Yue(r,e){return Object.prototype.hasOwnProperty.call(r,e)}yi.assign=function(r){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var n in t)Yue(t,n)&&(r[n]=t[n])}}return r};yi.shrinkBuf=function(r,e){return r.length===e?r:r.subarray?r.subarray(0,e):(r.length=e,r)};var Kue={arraySet:function(r,e,t,n,i){if(e.subarray&&r.subarray){r.set(e.subarray(t,t+n),i);return}for(var o=0;o<n;o++)r[i+o]=e[t+o]},flattenChunks:function(r){var e,t,n,i,o,l;for(n=0,e=0,t=r.length;e<t;e++)n+=r[e].length;for(l=new Uint8Array(n),i=0,e=0,t=r.length;e<t;e++)o=r[e],l.set(o,i),i+=o.length;return l}},Jue={arraySet:function(r,e,t,n,i){for(var o=0;o<n;o++)r[i+o]=e[t+o]},flattenChunks:function(r){return[].concat.apply([],r)}};yi.setTyped=function(r){r?(yi.Buf8=Uint8Array,yi.Buf16=Uint16Array,yi.Buf32=Int32Array,yi.assign(yi,Kue)):(yi.Buf8=Array,yi.Buf16=Array,yi.Buf32=Array,yi.assign(yi,Jue))};yi.setTyped(Gue)});var _Z=ae(Ef=>{"use strict";var Xue=u1(),Que=4,KD=0,JD=1,$ue=2;function Lf(r){for(var e=r.length;--e>=0;)r[e]=0}var e0e=0,rZ=1,t0e=2,r0e=3,n0e=258,_E=29,s4=256,i4=s4+1+_E,kf=30,bE=19,nZ=2*i4+1,U2=15,fE=16,i0e=7,vE=256,iZ=16,oZ=17,lZ=18,gE=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],qg=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o0e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],aZ=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l0e=512,c1=new Array((i4+2)*2);Lf(c1);var n4=new Array(kf*2);Lf(n4);var o4=new Array(l0e);Lf(o4);var l4=new Array(n0e-r0e+1);Lf(l4);var CE=new Array(_E);Lf(CE);var Ug=new Array(kf);Lf(Ug);function hE(r,e,t,n,i){this.static_tree=r,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}var sZ,uZ,cZ;function dE(r,e){this.dyn_tree=r,this.max_code=0,this.stat_desc=e}function fZ(r){return r<256?o4[r]:o4[256+(r>>>7)]}function a4(r,e){r.pending_buf[r.pending++]=e&255,r.pending_buf[r.pending++]=e>>>8&255}function Gi(r,e,t){r.bi_valid>fE-t?(r.bi_buf|=e<<r.bi_valid&65535,a4(r,r.bi_buf),r.bi_buf=e>>fE-r.bi_valid,r.bi_valid+=t-fE):(r.bi_buf|=e<<r.bi_valid&65535,r.bi_valid+=t)}function ja(r,e,t){Gi(r,t[e*2],t[e*2+1])}function hZ(r,e){var t=0;do t|=r&1,r>>>=1,t<<=1;while(--e>0);return t>>>1}function a0e(r){r.bi_valid===16?(a4(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)}function s0e(r,e){var t=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,s=e.stat_desc.max_length,u,c,f,h,d,p,v=0;for(h=0;h<=U2;h++)r.bl_count[h]=0;for(t[r.heap[r.heap_max]*2+1]=0,u=r.heap_max+1;u<nZ;u++)c=r.heap[u],h=t[t[c*2+1]*2+1]+1,h>s&&(h=s,v++),t[c*2+1]=h,!(c>n)&&(r.bl_count[h]++,d=0,c>=a&&(d=l[c-a]),p=t[c*2],r.opt_len+=p*(h+d),o&&(r.static_len+=p*(i[c*2+1]+d)));if(v!==0){do{for(h=s-1;r.bl_count[h]===0;)h--;r.bl_count[h]--,r.bl_count[h+1]+=2,r.bl_count[s]--,v-=2}while(v>0);for(h=s;h!==0;h--)for(c=r.bl_count[h];c!==0;)f=r.heap[--u],!(f>n)&&(t[f*2+1]!==h&&(r.opt_len+=(h-t[f*2+1])*t[f*2],t[f*2+1]=h),c--)}}function dZ(r,e,t){var n=new Array(U2+1),i=0,o,l;for(o=1;o<=U2;o++)n[o]=i=i+t[o-1]<<1;for(l=0;l<=e;l++){var a=r[l*2+1];a!==0&&(r[l*2]=hZ(n[a]++,a))}}function u0e(){var r,e,t,n,i,o=new Array(U2+1);for(t=0,n=0;n<_E-1;n++)for(CE[n]=t,r=0;r<1<<gE[n];r++)l4[t++]=n;for(l4[t-1]=n,i=0,n=0;n<16;n++)for(Ug[n]=i,r=0;r<1<<qg[n];r++)o4[i++]=n;for(i>>=7;n<kf;n++)for(Ug[n]=i<<7,r=0;r<1<<qg[n]-7;r++)o4[256+i++]=n;for(e=0;e<=U2;e++)o[e]=0;for(r=0;r<=143;)c1[r*2+1]=8,r++,o[8]++;for(;r<=255;)c1[r*2+1]=9,r++,o[9]++;for(;r<=279;)c1[r*2+1]=7,r++,o[7]++;for(;r<=287;)c1[r*2+1]=8,r++,o[8]++;for(dZ(c1,i4+1,o),r=0;r<kf;r++)n4[r*2+1]=5,n4[r*2]=hZ(r,5);sZ=new hE(c1,gE,s4+1,i4,U2),uZ=new hE(n4,qg,0,kf,U2),cZ=new hE(new Array(0),o0e,0,bE,i0e)}function mZ(r){var e;for(e=0;e<i4;e++)r.dyn_ltree[e*2]=0;for(e=0;e<kf;e++)r.dyn_dtree[e*2]=0;for(e=0;e<bE;e++)r.bl_tree[e*2]=0;r.dyn_ltree[vE*2]=1,r.opt_len=r.static_len=0,r.last_lit=r.matches=0}function gZ(r){r.bi_valid>8?a4(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0}function c0e(r,e,t,n){gZ(r),n&&(a4(r,t),a4(r,~t)),Xue.arraySet(r.pending_buf,r.window,e,t,r.pending),r.pending+=t}function XD(r,e,t,n){var i=e*2,o=t*2;return r[i]<r[o]||r[i]===r[o]&&n[e]<=n[t]}function mE(r,e,t){for(var n=r.heap[t],i=t<<1;i<=r.heap_len&&(i<r.heap_len&&XD(e,r.heap[i+1],r.heap[i],r.depth)&&i++,!XD(e,n,r.heap[i],r.depth));)r.heap[t]=r.heap[i],t=i,i<<=1;r.heap[t]=n}function QD(r,e,t){var n,i,o=0,l,a;if(r.last_lit!==0)do n=r.pending_buf[r.d_buf+o*2]<<8|r.pending_buf[r.d_buf+o*2+1],i=r.pending_buf[r.l_buf+o],o++,n===0?ja(r,i,e):(l=l4[i],ja(r,l+s4+1,e),a=gE[l],a!==0&&(i-=CE[l],Gi(r,i,a)),n--,l=fZ(n),ja(r,l,t),a=qg[l],a!==0&&(n-=Ug[l],Gi(r,n,a)));while(o<r.last_lit);ja(r,vE,e)}function pE(r,e){var t=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,o=e.stat_desc.elems,l,a,s=-1,u;for(r.heap_len=0,r.heap_max=nZ,l=0;l<o;l++)t[l*2]!==0?(r.heap[++r.heap_len]=s=l,r.depth[l]=0):t[l*2+1]=0;for(;r.heap_len<2;)u=r.heap[++r.heap_len]=s<2?++s:0,t[u*2]=1,r.depth[u]=0,r.opt_len--,i&&(r.static_len-=n[u*2+1]);for(e.max_code=s,l=r.heap_len>>1;l>=1;l--)mE(r,t,l);u=o;do l=r.heap[1],r.heap[1]=r.heap[r.heap_len--],mE(r,t,1),a=r.heap[1],r.heap[--r.heap_max]=l,r.heap[--r.heap_max]=a,t[u*2]=t[l*2]+t[a*2],r.depth[u]=(r.depth[l]>=r.depth[a]?r.depth[l]:r.depth[a])+1,t[l*2+1]=t[a*2+1]=u,r.heap[1]=u++,mE(r,t,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],s0e(r,e),dZ(t,s,r.bl_count)}function $D(r,e,t){var n,i=-1,o,l=e[0*2+1],a=0,s=7,u=4;for(l===0&&(s=138,u=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)o=l,l=e[(n+1)*2+1],!(++a<s&&o===l)&&(a<u?r.bl_tree[o*2]+=a:o!==0?(o!==i&&r.bl_tree[o*2]++,r.bl_tree[iZ*2]++):a<=10?r.bl_tree[oZ*2]++:r.bl_tree[lZ*2]++,a=0,i=o,l===0?(s=138,u=3):o===l?(s=6,u=3):(s=7,u=4))}function eZ(r,e,t){var n,i=-1,o,l=e[0*2+1],a=0,s=7,u=4;for(l===0&&(s=138,u=3),n=0;n<=t;n++)if(o=l,l=e[(n+1)*2+1],!(++a<s&&o===l)){if(a<u)do ja(r,o,r.bl_tree);while(--a!==0);else o!==0?(o!==i&&(ja(r,o,r.bl_tree),a--),ja(r,iZ,r.bl_tree),Gi(r,a-3,2)):a<=10?(ja(r,oZ,r.bl_tree),Gi(r,a-3,3)):(ja(r,lZ,r.bl_tree),Gi(r,a-11,7));a=0,i=o,l===0?(s=138,u=3):o===l?(s=6,u=3):(s=7,u=4)}}function f0e(r){var e;for($D(r,r.dyn_ltree,r.l_desc.max_code),$D(r,r.dyn_dtree,r.d_desc.max_code),pE(r,r.bl_desc),e=bE-1;e>=3&&r.bl_tree[aZ[e]*2+1]===0;e--);return r.opt_len+=3*(e+1)+5+5+4,e}function h0e(r,e,t,n){var i;for(Gi(r,e-257,5),Gi(r,t-1,5),Gi(r,n-4,4),i=0;i<n;i++)Gi(r,r.bl_tree[aZ[i]*2+1],3);eZ(r,r.dyn_ltree,e-1),eZ(r,r.dyn_dtree,t-1)}function d0e(r){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&r.dyn_ltree[t*2]!==0)return KD;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return JD;for(t=32;t<s4;t++)if(r.dyn_ltree[t*2]!==0)return JD;return KD}var tZ=!1;function m0e(r){tZ||(u0e(),tZ=!0),r.l_desc=new dE(r.dyn_ltree,sZ),r.d_desc=new dE(r.dyn_dtree,uZ),r.bl_desc=new dE(r.bl_tree,cZ),r.bi_buf=0,r.bi_valid=0,mZ(r)}function pZ(r,e,t,n){Gi(r,(e0e<<1)+(n?1:0),3),c0e(r,e,t,!0)}function g0e(r){Gi(r,rZ<<1,3),ja(r,vE,c1),a0e(r)}function p0e(r,e,t,n){var i,o,l=0;r.level>0?(r.strm.data_type===$ue&&(r.strm.data_type=d0e(r)),pE(r,r.l_desc),pE(r,r.d_desc),l=f0e(r),i=r.opt_len+3+7>>>3,o=r.static_len+3+7>>>3,o<=i&&(i=o)):i=o=t+5,t+4<=i&&e!==-1?pZ(r,e,t,n):r.strategy===Que||o===i?(Gi(r,(rZ<<1)+(n?1:0),3),QD(r,c1,n4)):(Gi(r,(t0e<<1)+(n?1:0),3),h0e(r,r.l_desc.max_code+1,r.d_desc.max_code+1,l+1),QD(r,r.dyn_ltree,r.dyn_dtree)),mZ(r),n&&gZ(r)}function _0e(r,e,t){return r.pending_buf[r.d_buf+r.last_lit*2]=e>>>8&255,r.pending_buf[r.d_buf+r.last_lit*2+1]=e&255,r.pending_buf[r.l_buf+r.last_lit]=t&255,r.last_lit++,e===0?r.dyn_ltree[t*2]++:(r.matches++,e--,r.dyn_ltree[(l4[t]+s4+1)*2]++,r.dyn_dtree[fZ(e)*2]++),r.last_lit===r.lit_bufsize-1}Ef._tr_init=m0e;Ef._tr_stored_block=pZ;Ef._tr_flush_block=p0e;Ef._tr_tally=_0e;Ef._tr_align=g0e});var wE=ae(($We,bZ)=>{"use strict";function b0e(r,e,t,n){for(var i=r&65535|0,o=r>>>16&65535|0,l=0;t!==0;){l=t>2e3?2e3:t,t-=l;do i=i+e[n++]|0,o=o+i|0;while(--l);i%=65521,o%=65521}return i|o<<16|0}bZ.exports=b0e});var yE=ae((eGe,vZ)=>{"use strict";function v0e(){for(var r,e=[],t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e}var C0e=v0e();function w0e(r,e,t,n){var i=C0e,o=n+t;r^=-1;for(var l=n;l<o;l++)r=r>>>8^i[(r^e[l])&255];return r^-1}vZ.exports=w0e});var Wg=ae((tGe,CZ)=>{"use strict";CZ.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var PZ=ae(Ua=>{"use strict";var ki=u1(),el=_Z(),LZ=wE(),zu=yE(),y0e=Wg(),K2=0,k0e=1,L0e=3,Du=4,wZ=5,qa=0,yZ=1,tl=-2,E0e=-3,kE=-5,S0e=-1,M0e=1,Gg=2,A0e=3,P0e=4,T0e=0,O0e=2,Xg=8,R0e=9,I0e=15,z0e=8,H0e=29,N0e=256,EE=N0e+1+H0e,V0e=30,B0e=19,D0e=2*EE+1,Z0e=15,Kt=3,Vu=258,Ul=Vu+Kt+1,F0e=32,Qg=42,SE=69,Yg=73,Kg=91,Jg=103,W2=113,c4=666,bn=1,f4=2,G2=3,Af=4,j0e=3;function Bu(r,e){return r.msg=y0e[e],e}function kZ(r){return(r<<1)-(r>4?9:0)}function Nu(r){for(var e=r.length;--e>=0;)r[e]=0}function Hu(r){var e=r.state,t=e.pending;t>r.avail_out&&(t=r.avail_out),t!==0&&(ki.arraySet(r.output,e.pending_buf,e.pending_out,t,r.next_out),r.next_out+=t,e.pending_out+=t,r.total_out+=t,r.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function Dn(r,e){el._tr_flush_block(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,e),r.block_start=r.strstart,Hu(r.strm)}function rr(r,e){r.pending_buf[r.pending++]=e}function u4(r,e){r.pending_buf[r.pending++]=e>>>8&255,r.pending_buf[r.pending++]=e&255}function x0e(r,e,t,n){var i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,ki.arraySet(e,r.input,r.next_in,i,t),r.state.wrap===1?r.adler=LZ(r.adler,e,i,t):r.state.wrap===2&&(r.adler=zu(r.adler,e,i,t)),r.next_in+=i,r.total_in+=i,i)}function EZ(r,e){var t=r.max_chain_length,n=r.strstart,i,o,l=r.prev_length,a=r.nice_match,s=r.strstart>r.w_size-Ul?r.strstart-(r.w_size-Ul):0,u=r.window,c=r.w_mask,f=r.prev,h=r.strstart+Vu,d=u[n+l-1],p=u[n+l];r.prev_length>=r.good_match&&(t>>=2),a>r.lookahead&&(a=r.lookahead);do if(i=e,!(u[i+l]!==p||u[i+l-1]!==d||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<h);if(o=Vu-(h-n),n=h-Vu,o>l){if(r.match_start=e,l=o,o>=a)break;d=u[n+l-1],p=u[n+l]}}while((e=f[e&c])>s&&--t!==0);return l<=r.lookahead?l:r.lookahead}function Y2(r){var e=r.w_size,t,n,i,o,l;do{if(o=r.window_size-r.lookahead-r.strstart,r.strstart>=e+(e-Ul)){ki.arraySet(r.window,r.window,e,e,0),r.match_start-=e,r.strstart-=e,r.block_start-=e,n=r.hash_size,t=n;do i=r.head[--t],r.head[t]=i>=e?i-e:0;while(--n);n=e,t=n;do i=r.prev[--t],r.prev[t]=i>=e?i-e:0;while(--n);o+=e}if(r.strm.avail_in===0)break;if(n=x0e(r.strm,r.window,r.strstart+r.lookahead,o),r.lookahead+=n,r.lookahead+r.insert>=Kt)for(l=r.strstart-r.insert,r.ins_h=r.window[l],r.ins_h=(r.ins_h<<r.hash_shift^r.window[l+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[l+Kt-1])&r.hash_mask,r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++,r.insert--,!(r.lookahead+r.insert<Kt)););}while(r.lookahead<Ul&&r.strm.avail_in!==0)}function q0e(r,e){var t=65535;for(t>r.pending_buf_size-5&&(t=r.pending_buf_size-5);;){if(r.lookahead<=1){if(Y2(r),r.lookahead===0&&e===K2)return bn;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var n=r.block_start+t;if((r.strstart===0||r.strstart>=n)&&(r.lookahead=r.strstart-n,r.strstart=n,Dn(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-Ul&&(Dn(r,!1),r.strm.avail_out===0))return bn}return r.insert=0,e===Du?(Dn(r,!0),r.strm.avail_out===0?G2:Af):(r.strstart>r.block_start&&(Dn(r,!1),r.strm.avail_out===0),bn)}function LE(r,e){for(var t,n;;){if(r.lookahead<Ul){if(Y2(r),r.lookahead<Ul&&e===K2)return bn;if(r.lookahead===0)break}if(t=0,r.lookahead>=Kt&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+Kt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),t!==0&&r.strstart-t<=r.w_size-Ul&&(r.match_length=EZ(r,t)),r.match_length>=Kt)if(n=el._tr_tally(r,r.strstart-r.match_start,r.match_length-Kt),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=Kt){r.match_length--;do r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+Kt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else n=el._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(Dn(r,!1),r.strm.avail_out===0))return bn}return r.insert=r.strstart<Kt-1?r.strstart:Kt-1,e===Du?(Dn(r,!0),r.strm.avail_out===0?G2:Af):r.last_lit&&(Dn(r,!1),r.strm.avail_out===0)?bn:f4}function Sf(r,e){for(var t,n,i;;){if(r.lookahead<Ul){if(Y2(r),r.lookahead<Ul&&e===K2)return bn;if(r.lookahead===0)break}if(t=0,r.lookahead>=Kt&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+Kt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=Kt-1,t!==0&&r.prev_length<r.max_lazy_match&&r.strstart-t<=r.w_size-Ul&&(r.match_length=EZ(r,t),r.match_length<=5&&(r.strategy===M0e||r.match_length===Kt&&r.strstart-r.match_start>4096)&&(r.match_length=Kt-1)),r.prev_length>=Kt&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-Kt,n=el._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-Kt),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+Kt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=Kt-1,r.strstart++,n&&(Dn(r,!1),r.strm.avail_out===0))return bn}else if(r.match_available){if(n=el._tr_tally(r,0,r.window[r.strstart-1]),n&&Dn(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return bn}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=el._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<Kt-1?r.strstart:Kt-1,e===Du?(Dn(r,!0),r.strm.avail_out===0?G2:Af):r.last_lit&&(Dn(r,!1),r.strm.avail_out===0)?bn:f4}function U0e(r,e){for(var t,n,i,o,l=r.window;;){if(r.lookahead<=Vu){if(Y2(r),r.lookahead<=Vu&&e===K2)return bn;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=Kt&&r.strstart>0&&(i=r.strstart-1,n=l[i],n===l[++i]&&n===l[++i]&&n===l[++i])){o=r.strstart+Vu;do;while(n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&n===l[++i]&&i<o);r.match_length=Vu-(o-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=Kt?(t=el._tr_tally(r,1,r.match_length-Kt),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(t=el._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),t&&(Dn(r,!1),r.strm.avail_out===0))return bn}return r.insert=0,e===Du?(Dn(r,!0),r.strm.avail_out===0?G2:Af):r.last_lit&&(Dn(r,!1),r.strm.avail_out===0)?bn:f4}function W0e(r,e){for(var t;;){if(r.lookahead===0&&(Y2(r),r.lookahead===0)){if(e===K2)return bn;break}if(r.match_length=0,t=el._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,t&&(Dn(r,!1),r.strm.avail_out===0))return bn}return r.insert=0,e===Du?(Dn(r,!0),r.strm.avail_out===0?G2:Af):r.last_lit&&(Dn(r,!1),r.strm.avail_out===0)?bn:f4}function xa(r,e,t,n,i){this.good_length=r,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=i}var Mf;Mf=[new xa(0,0,0,0,q0e),new xa(4,4,8,4,LE),new xa(4,5,16,8,LE),new xa(4,6,32,32,LE),new xa(4,4,16,16,Sf),new xa(8,16,32,32,Sf),new xa(8,16,128,128,Sf),new xa(8,32,128,256,Sf),new xa(32,128,258,1024,Sf),new xa(32,258,258,4096,Sf)];function G0e(r){r.window_size=2*r.w_size,Nu(r.head),r.max_lazy_match=Mf[r.level].max_lazy,r.good_match=Mf[r.level].good_length,r.nice_match=Mf[r.level].nice_length,r.max_chain_length=Mf[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=Kt-1,r.match_available=0,r.ins_h=0}function Y0e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Xg,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ki.Buf16(D0e*2),this.dyn_dtree=new ki.Buf16((2*V0e+1)*2),this.bl_tree=new ki.Buf16((2*B0e+1)*2),Nu(this.dyn_ltree),Nu(this.dyn_dtree),Nu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ki.Buf16(Z0e+1),this.heap=new ki.Buf16(2*EE+1),Nu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ki.Buf16(2*EE+1),Nu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function SZ(r){var e;return!r||!r.state?Bu(r,tl):(r.total_in=r.total_out=0,r.data_type=O0e,e=r.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Qg:W2,r.adler=e.wrap===2?0:1,e.last_flush=K2,el._tr_init(e),qa)}function MZ(r){var e=SZ(r);return e===qa&&G0e(r.state),e}function K0e(r,e){return!r||!r.state||r.state.wrap!==2?tl:(r.state.gzhead=e,qa)}function AZ(r,e,t,n,i,o){if(!r)return tl;var l=1;if(e===S0e&&(e=6),n<0?(l=0,n=-n):n>15&&(l=2,n-=16),i<1||i>R0e||t!==Xg||n<8||n>15||e<0||e>9||o<0||o>P0e)return Bu(r,tl);n===8&&(n=9);var a=new Y0e;return r.state=a,a.strm=r,a.wrap=l,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Kt-1)/Kt),a.window=new ki.Buf8(a.w_size*2),a.head=new ki.Buf16(a.hash_size),a.prev=new ki.Buf16(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new ki.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=o,a.method=t,MZ(r)}function J0e(r,e){return AZ(r,e,Xg,I0e,z0e,T0e)}function X0e(r,e){var t,n,i,o;if(!r||!r.state||e>wZ||e<0)return r?Bu(r,tl):tl;if(n=r.state,!r.output||!r.input&&r.avail_in!==0||n.status===c4&&e!==Du)return Bu(r,r.avail_out===0?kE:tl);if(n.strm=r,t=n.last_flush,n.last_flush=e,n.status===Qg)if(n.wrap===2)r.adler=0,rr(n,31),rr(n,139),rr(n,8),n.gzhead?(rr(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),rr(n,n.gzhead.time&255),rr(n,n.gzhead.time>>8&255),rr(n,n.gzhead.time>>16&255),rr(n,n.gzhead.time>>24&255),rr(n,n.level===9?2:n.strategy>=Gg||n.level<2?4:0),rr(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(rr(n,n.gzhead.extra.length&255),rr(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(r.adler=zu(r.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=SE):(rr(n,0),rr(n,0),rr(n,0),rr(n,0),rr(n,0),rr(n,n.level===9?2:n.strategy>=Gg||n.level<2?4:0),rr(n,j0e),n.status=W2);else{var l=Xg+(n.w_bits-8<<4)<<8,a=-1;n.strategy>=Gg||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,l|=a<<6,n.strstart!==0&&(l|=F0e),l+=31-l%31,n.status=W2,u4(n,l),n.strstart!==0&&(u4(n,r.adler>>>16),u4(n,r.adler&65535)),r.adler=1}if(n.status===SE)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(r.adler=zu(r.adler,n.pending_buf,n.pending-i,i)),Hu(r),i=n.pending,n.pending===n.pending_buf_size));)rr(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(r.adler=zu(r.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=Yg)}else n.status=Yg;if(n.status===Yg)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(r.adler=zu(r.adler,n.pending_buf,n.pending-i,i)),Hu(r),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}n.gzindex<n.gzhead.name.length?o=n.gzhead.name.charCodeAt(n.gzindex++)&255:o=0,rr(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(r.adler=zu(r.adler,n.pending_buf,n.pending-i,i)),o===0&&(n.gzindex=0,n.status=Kg)}else n.status=Kg;if(n.status===Kg)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(r.adler=zu(r.adler,n.pending_buf,n.pending-i,i)),Hu(r),i=n.pending,n.pending===n.pending_buf_size)){o=1;break}n.gzindex<n.gzhead.comment.length?o=n.gzhead.comment.charCodeAt(n.gzindex++)&255:o=0,rr(n,o)}while(o!==0);n.gzhead.hcrc&&n.pending>i&&(r.adler=zu(r.adler,n.pending_buf,n.pending-i,i)),o===0&&(n.status=Jg)}else n.status=Jg;if(n.status===Jg&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Hu(r),n.pending+2<=n.pending_buf_size&&(rr(n,r.adler&255),rr(n,r.adler>>8&255),r.adler=0,n.status=W2)):n.status=W2),n.pending!==0){if(Hu(r),r.avail_out===0)return n.last_flush=-1,qa}else if(r.avail_in===0&&kZ(e)<=kZ(t)&&e!==Du)return Bu(r,kE);if(n.status===c4&&r.avail_in!==0)return Bu(r,kE);if(r.avail_in!==0||n.lookahead!==0||e!==K2&&n.status!==c4){var s=n.strategy===Gg?W0e(n,e):n.strategy===A0e?U0e(n,e):Mf[n.level].func(n,e);if((s===G2||s===Af)&&(n.status=c4),s===bn||s===G2)return r.avail_out===0&&(n.last_flush=-1),qa;if(s===f4&&(e===k0e?el._tr_align(n):e!==wZ&&(el._tr_stored_block(n,0,0,!1),e===L0e&&(Nu(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Hu(r),r.avail_out===0))return n.last_flush=-1,qa}return e!==Du?qa:n.wrap<=0?yZ:(n.wrap===2?(rr(n,r.adler&255),rr(n,r.adler>>8&255),rr(n,r.adler>>16&255),rr(n,r.adler>>24&255),rr(n,r.total_in&255),rr(n,r.total_in>>8&255),rr(n,r.total_in>>16&255),rr(n,r.total_in>>24&255)):(u4(n,r.adler>>>16),u4(n,r.adler&65535)),Hu(r),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?qa:yZ)}function Q0e(r){var e;return!r||!r.state?tl:(e=r.state.status,e!==Qg&&e!==SE&&e!==Yg&&e!==Kg&&e!==Jg&&e!==W2&&e!==c4?Bu(r,tl):(r.state=null,e===W2?Bu(r,E0e):qa))}function $0e(r,e){var t=e.length,n,i,o,l,a,s,u,c;if(!r||!r.state||(n=r.state,l=n.wrap,l===2||l===1&&n.status!==Qg||n.lookahead))return tl;for(l===1&&(r.adler=LZ(r.adler,e,t,0)),n.wrap=0,t>=n.w_size&&(l===0&&(Nu(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new ki.Buf8(n.w_size),ki.arraySet(c,e,t-n.w_size,n.w_size,0),e=c,t=n.w_size),a=r.avail_in,s=r.next_in,u=r.input,r.avail_in=t,r.next_in=0,r.input=e,Y2(n);n.lookahead>=Kt;){i=n.strstart,o=n.lookahead-(Kt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+Kt-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--o);n.strstart=i,n.lookahead=Kt-1,Y2(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Kt-1,n.match_available=0,r.next_in=s,r.input=u,r.avail_in=a,n.wrap=l,qa}Ua.deflateInit=J0e;Ua.deflateInit2=AZ;Ua.deflateReset=MZ;Ua.deflateResetKeep=SZ;Ua.deflateSetHeader=K0e;Ua.deflate=X0e;Ua.deflateEnd=Q0e;Ua.deflateSetDictionary=$0e;Ua.deflateInfo="pako deflate (from Nodeca project)"});var ME=ae(Pf=>{"use strict";var $g=u1(),TZ=!0,OZ=!0;try{String.fromCharCode.apply(null,[0])}catch(r){TZ=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){OZ=!1}var h4=new $g.Buf8(256);for(f1=0;f1<256;f1++)h4[f1]=f1>=252?6:f1>=248?5:f1>=240?4:f1>=224?3:f1>=192?2:1;var f1;h4[254]=h4[254]=1;Pf.string2buf=function(r){var e,t,n,i,o,l=r.length,a=0;for(i=0;i<l;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),a+=t<128?1:t<2048?2:t<65536?3:4;for(e=new $g.Buf8(a),o=0,i=0;o<a;i++)t=r.charCodeAt(i),(t&64512)===55296&&i+1<l&&(n=r.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};function RZ(r,e){if(e<65534&&(r.subarray&&OZ||!r.subarray&&TZ))return String.fromCharCode.apply(null,$g.shrinkBuf(r,e));for(var t="",n=0;n<e;n++)t+=String.fromCharCode(r[n]);return t}Pf.buf2binstring=function(r){return RZ(r,r.length)};Pf.binstring2buf=function(r){for(var e=new $g.Buf8(r.length),t=0,n=e.length;t<n;t++)e[t]=r.charCodeAt(t);return e};Pf.buf2string=function(r,e){var t,n,i,o,l=e||r.length,a=new Array(l*2);for(n=0,t=0;t<l;){if(i=r[t++],i<128){a[n++]=i;continue}if(o=h4[i],o>4){a[n++]=65533,t+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&t<l;)i=i<<6|r[t++]&63,o--;if(o>1){a[n++]=65533;continue}i<65536?a[n++]=i:(i-=65536,a[n++]=55296|i>>10&1023,a[n++]=56320|i&1023)}return RZ(a,n)};Pf.utf8border=function(r,e){var t;for(e=e||r.length,e>r.length&&(e=r.length),t=e-1;t>=0&&(r[t]&192)===128;)t--;return t<0||t===0?e:t+h4[r[t]]>e?t:e}});var AE=ae((iGe,IZ)=>{"use strict";function e2e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}IZ.exports=e2e});var VZ=ae(g4=>{"use strict";var d4=PZ(),m4=u1(),TE=ME(),OE=Wg(),t2e=AE(),NZ=Object.prototype.toString,r2e=0,PE=4,Tf=0,zZ=1,HZ=2,n2e=-1,i2e=0,o2e=8;function J2(r){if(!(this instanceof J2))return new J2(r);this.options=m4.assign({level:n2e,method:o2e,chunkSize:16384,windowBits:15,memLevel:8,strategy:i2e,to:""},r||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new t2e,this.strm.avail_out=0;var t=d4.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(t!==Tf)throw new Error(OE[t]);if(e.header&&d4.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=TE.string2buf(e.dictionary):NZ.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,t=d4.deflateSetDictionary(this.strm,n),t!==Tf)throw new Error(OE[t]);this._dict_set=!0}}J2.prototype.push=function(r,e){var t=this.strm,n=this.options.chunkSize,i,o;if(this.ended)return!1;o=e===~~e?e:e===!0?PE:r2e,typeof r=="string"?t.input=TE.string2buf(r):NZ.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new m4.Buf8(n),t.next_out=0,t.avail_out=n),i=d4.deflate(t,o),i!==zZ&&i!==Tf)return this.onEnd(i),this.ended=!0,!1;(t.avail_out===0||t.avail_in===0&&(o===PE||o===HZ))&&(this.options.to==="string"?this.onData(TE.buf2binstring(m4.shrinkBuf(t.output,t.next_out))):this.onData(m4.shrinkBuf(t.output,t.next_out)))}while((t.avail_in>0||t.avail_out===0)&&i!==zZ);return o===PE?(i=d4.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Tf):(o===HZ&&(this.onEnd(Tf),t.avail_out=0),!0)};J2.prototype.onData=function(r){this.chunks.push(r)};J2.prototype.onEnd=function(r){r===Tf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=m4.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function RE(r,e){var t=new J2(e);if(t.push(r,!0),t.err)throw t.msg||OE[t.err];return t.result}function l2e(r,e){return e=e||{},e.raw=!0,RE(r,e)}function a2e(r,e){return e=e||{},e.gzip=!0,RE(r,e)}g4.Deflate=J2;g4.deflate=RE;g4.deflateRaw=l2e;g4.gzip=a2e});var DZ=ae((lGe,BZ)=>{"use strict";var ep=30,s2e=12;BZ.exports=function(e,t){var n,i,o,l,a,s,u,c,f,h,d,p,v,b,C,L,S,P,y,z,G,J,te,ne,Q;n=e.state,i=e.next_in,ne=e.input,o=i+(e.avail_in-5),l=e.next_out,Q=e.output,a=l-(t-e.avail_out),s=l+(e.avail_out-257),u=n.dmax,c=n.wsize,f=n.whave,h=n.wnext,d=n.window,p=n.hold,v=n.bits,b=n.lencode,C=n.distcode,L=(1<<n.lenbits)-1,S=(1<<n.distbits)-1;e:do{v<15&&(p+=ne[i++]<<v,v+=8,p+=ne[i++]<<v,v+=8),P=b[p&L];t:for(;;){if(y=P>>>24,p>>>=y,v-=y,y=P>>>16&255,y===0)Q[l++]=P&65535;else if(y&16){z=P&65535,y&=15,y&&(v<y&&(p+=ne[i++]<<v,v+=8),z+=p&(1<<y)-1,p>>>=y,v-=y),v<15&&(p+=ne[i++]<<v,v+=8,p+=ne[i++]<<v,v+=8),P=C[p&S];r:for(;;){if(y=P>>>24,p>>>=y,v-=y,y=P>>>16&255,y&16){if(G=P&65535,y&=15,v<y&&(p+=ne[i++]<<v,v+=8,v<y&&(p+=ne[i++]<<v,v+=8)),G+=p&(1<<y)-1,G>u){e.msg="invalid distance too far back",n.mode=ep;break e}if(p>>>=y,v-=y,y=l-a,G>y){if(y=G-y,y>f&&n.sane){e.msg="invalid distance too far back",n.mode=ep;break e}if(J=0,te=d,h===0){if(J+=c-y,y<z){z-=y;do Q[l++]=d[J++];while(--y);J=l-G,te=Q}}else if(h<y){if(J+=c+h-y,y-=h,y<z){z-=y;do Q[l++]=d[J++];while(--y);if(J=0,h<z){y=h,z-=y;do Q[l++]=d[J++];while(--y);J=l-G,te=Q}}}else if(J+=h-y,y<z){z-=y;do Q[l++]=d[J++];while(--y);J=l-G,te=Q}for(;z>2;)Q[l++]=te[J++],Q[l++]=te[J++],Q[l++]=te[J++],z-=3;z&&(Q[l++]=te[J++],z>1&&(Q[l++]=te[J++]))}else{J=l-G;do Q[l++]=Q[J++],Q[l++]=Q[J++],Q[l++]=Q[J++],z-=3;while(z>2);z&&(Q[l++]=Q[J++],z>1&&(Q[l++]=Q[J++]))}}else if((y&64)===0){P=C[(P&65535)+(p&(1<<y)-1)];continue r}else{e.msg="invalid distance code",n.mode=ep;break e}break}}else if((y&64)===0){P=b[(P&65535)+(p&(1<<y)-1)];continue t}else if(y&32){n.mode=s2e;break e}else{e.msg="invalid literal/length code",n.mode=ep;break e}break}}while(i<o&&l<s);z=v>>3,i-=z,v-=z<<3,p&=(1<<v)-1,e.next_in=i,e.next_out=l,e.avail_in=i<o?5+(o-i):5-(i-o),e.avail_out=l<s?257+(s-l):257-(l-s),n.hold=p,n.bits=v}});var WZ=ae((aGe,UZ)=>{"use strict";var ZZ=u1(),Of=15,FZ=852,jZ=592,xZ=0,IE=1,qZ=2,u2e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c2e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f2e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h2e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];UZ.exports=function(e,t,n,i,o,l,a,s){var u=s.bits,c=0,f=0,h=0,d=0,p=0,v=0,b=0,C=0,L=0,S=0,P,y,z,G,J,te=null,ne=0,Q,ee=new ZZ.Buf16(Of+1),se=new ZZ.Buf16(Of+1),Pe=null,Te=0,be,rt,Ee;for(c=0;c<=Of;c++)ee[c]=0;for(f=0;f<i;f++)ee[t[n+f]]++;for(p=u,d=Of;d>=1&&ee[d]===0;d--);if(p>d&&(p=d),d===0)return o[l++]=1<<24|64<<16|0,o[l++]=1<<24|64<<16|0,s.bits=1,0;for(h=1;h<d&&ee[h]===0;h++);for(p<h&&(p=h),C=1,c=1;c<=Of;c++)if(C<<=1,C-=ee[c],C<0)return-1;if(C>0&&(e===xZ||d!==1))return-1;for(se[1]=0,c=1;c<Of;c++)se[c+1]=se[c]+ee[c];for(f=0;f<i;f++)t[n+f]!==0&&(a[se[t[n+f]]++]=f);if(e===xZ?(te=Pe=a,Q=19):e===IE?(te=u2e,ne-=257,Pe=c2e,Te-=257,Q=256):(te=f2e,Pe=h2e,Q=-1),S=0,f=0,c=h,J=l,v=p,b=0,z=-1,L=1<<p,G=L-1,e===IE&&L>FZ||e===qZ&&L>jZ)return 1;for(;;){be=c-b,a[f]<Q?(rt=0,Ee=a[f]):a[f]>Q?(rt=Pe[Te+a[f]],Ee=te[ne+a[f]]):(rt=96,Ee=0),P=1<<c-b,y=1<<v,h=y;do y-=P,o[J+(S>>b)+y]=be<<24|rt<<16|Ee|0;while(y!==0);for(P=1<<c-1;S&P;)P>>=1;if(P!==0?(S&=P-1,S+=P):S=0,f++,--ee[c]===0){if(c===d)break;c=t[n+a[f]]}if(c>p&&(S&G)!==z){for(b===0&&(b=p),J+=h,v=c-b,C=1<<v;v+b<d&&(C-=ee[v+b],!(C<=0));)v++,C<<=1;if(L+=1<<v,e===IE&&L>FZ||e===qZ&&L>jZ)return 1;z=S&G,o[z]=p<<24|v<<16|J-l|0}}return S!==0&&(o[J+S]=c-b<<24|64<<16|0),s.bits=p,0}});var MF=ae(Wl=>{"use strict";var Eo=u1(),DE=wE(),Wa=yE(),d2e=DZ(),p4=WZ(),m2e=0,bF=1,vF=2,GZ=4,g2e=5,tp=6,X2=0,p2e=1,_2e=2,rl=-2,CF=-3,ZE=-4,b2e=-5,YZ=8,wF=1,KZ=2,JZ=3,XZ=4,QZ=5,$Z=6,eF=7,tF=8,rF=9,nF=10,ip=11,h1=12,zE=13,iF=14,HE=15,oF=16,lF=17,aF=18,sF=19,rp=20,np=21,uF=22,cF=23,fF=24,hF=25,dF=26,NE=27,mF=28,gF=29,Br=30,FE=31,v2e=32,C2e=852,w2e=592,y2e=15,k2e=y2e;function pF(r){return(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24)}function L2e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Eo.Buf16(320),this.work=new Eo.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function yF(r){var e;return!r||!r.state?rl:(e=r.state,r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=wF,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Eo.Buf32(C2e),e.distcode=e.distdyn=new Eo.Buf32(w2e),e.sane=1,e.back=-1,X2)}function kF(r){var e;return!r||!r.state?rl:(e=r.state,e.wsize=0,e.whave=0,e.wnext=0,yF(r))}function LF(r,e){var t,n;return!r||!r.state||(n=r.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?rl:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,kF(r))}function EF(r,e){var t,n;return r?(n=new L2e,r.state=n,n.window=null,t=LF(r,e),t!==X2&&(r.state=null),t):rl}function E2e(r){return EF(r,k2e)}var _F=!0,VE,BE;function S2e(r){if(_F){var e;for(VE=new Eo.Buf32(512),BE=new Eo.Buf32(32),e=0;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(p4(bF,r.lens,0,288,VE,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;p4(vF,r.lens,0,32,BE,0,r.work,{bits:5}),_F=!1}r.lencode=VE,r.lenbits=9,r.distcode=BE,r.distbits=5}function SF(r,e,t,n){var i,o=r.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Eo.Buf8(o.wsize)),n>=o.wsize?(Eo.arraySet(o.window,e,t-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),Eo.arraySet(o.window,e,t-n,i,o.wnext),n-=i,n?(Eo.arraySet(o.window,e,t-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function M2e(r,e){var t,n,i,o,l,a,s,u,c,f,h,d,p,v,b=0,C,L,S,P,y,z,G,J,te=new Eo.Buf8(4),ne,Q,ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!r||!r.state||!r.output||!r.input&&r.avail_in!==0)return rl;t=r.state,t.mode===h1&&(t.mode=zE),l=r.next_out,i=r.output,s=r.avail_out,o=r.next_in,n=r.input,a=r.avail_in,u=t.hold,c=t.bits,f=a,h=s,J=X2;e:for(;;)switch(t.mode){case wF:if(t.wrap===0){t.mode=zE;break}for(;c<16;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(t.wrap&2&&u===35615){t.check=0,te[0]=u&255,te[1]=u>>>8&255,t.check=Wa(t.check,te,2,0),u=0,c=0,t.mode=KZ;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",t.mode=Br;break}if((u&15)!==YZ){r.msg="unknown compression method",t.mode=Br;break}if(u>>>=4,c-=4,G=(u&15)+8,t.wbits===0)t.wbits=G;else if(G>t.wbits){r.msg="invalid window size",t.mode=Br;break}t.dmax=1<<G,r.adler=t.check=1,t.mode=u&512?nF:h1,u=0,c=0;break;case KZ:for(;c<16;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(t.flags=u,(t.flags&255)!==YZ){r.msg="unknown compression method",t.mode=Br;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Br;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&(te[0]=u&255,te[1]=u>>>8&255,t.check=Wa(t.check,te,2,0)),u=0,c=0,t.mode=JZ;case JZ:for(;c<32;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}t.head&&(t.head.time=u),t.flags&512&&(te[0]=u&255,te[1]=u>>>8&255,te[2]=u>>>16&255,te[3]=u>>>24&255,t.check=Wa(t.check,te,4,0)),u=0,c=0,t.mode=XZ;case XZ:for(;c<16;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&(te[0]=u&255,te[1]=u>>>8&255,t.check=Wa(t.check,te,2,0)),u=0,c=0,t.mode=QZ;case QZ:if(t.flags&1024){for(;c<16;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&(te[0]=u&255,te[1]=u>>>8&255,t.check=Wa(t.check,te,2,0)),u=0,c=0}else t.head&&(t.head.extra=null);t.mode=$Z;case $Z:if(t.flags&1024&&(d=t.length,d>a&&(d=a),d&&(t.head&&(G=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Eo.arraySet(t.head.extra,n,o,d,G)),t.flags&512&&(t.check=Wa(t.check,n,d,o)),a-=d,o+=d,t.length-=d),t.length))break e;t.length=0,t.mode=eF;case eF:if(t.flags&2048){if(a===0)break e;d=0;do G=n[o+d++],t.head&&G&&t.length<65536&&(t.head.name+=String.fromCharCode(G));while(G&&d<a);if(t.flags&512&&(t.check=Wa(t.check,n,d,o)),a-=d,o+=d,G)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=tF;case tF:if(t.flags&4096){if(a===0)break e;d=0;do G=n[o+d++],t.head&&G&&t.length<65536&&(t.head.comment+=String.fromCharCode(G));while(G&&d<a);if(t.flags&512&&(t.check=Wa(t.check,n,d,o)),a-=d,o+=d,G)break e}else t.head&&(t.head.comment=null);t.mode=rF;case rF:if(t.flags&512){for(;c<16;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(u!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Br;break}u=0,c=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=h1;break;case nF:for(;c<32;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}r.adler=t.check=pF(u),u=0,c=0,t.mode=ip;case ip:if(t.havedict===0)return r.next_out=l,r.avail_out=s,r.next_in=o,r.avail_in=a,t.hold=u,t.bits=c,_2e;r.adler=t.check=1,t.mode=h1;case h1:if(e===g2e||e===tp)break e;case zE:if(t.last){u>>>=c&7,c-=c&7,t.mode=NE;break}for(;c<3;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}switch(t.last=u&1,u>>>=1,c-=1,u&3){case 0:t.mode=iF;break;case 1:if(S2e(t),t.mode=rp,e===tp){u>>>=2,c-=2;break e}break;case 2:t.mode=lF;break;case 3:r.msg="invalid block type",t.mode=Br}u>>>=2,c-=2;break;case iF:for(u>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Br;break}if(t.length=u&65535,u=0,c=0,t.mode=HE,e===tp)break e;case HE:t.mode=oF;case oF:if(d=t.length,d){if(d>a&&(d=a),d>s&&(d=s),d===0)break e;Eo.arraySet(i,n,o,d,l),a-=d,o+=d,s-=d,l+=d,t.length-=d;break}t.mode=h1;break;case lF:for(;c<14;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(t.nlen=(u&31)+257,u>>>=5,c-=5,t.ndist=(u&31)+1,u>>>=5,c-=5,t.ncode=(u&15)+4,u>>>=4,c-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Br;break}t.have=0,t.mode=aF;case aF:for(;t.have<t.ncode;){for(;c<3;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}t.lens[ee[t.have++]]=u&7,u>>>=3,c-=3}for(;t.have<19;)t.lens[ee[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,ne={bits:t.lenbits},J=p4(m2e,t.lens,0,19,t.lencode,0,t.work,ne),t.lenbits=ne.bits,J){r.msg="invalid code lengths set",t.mode=Br;break}t.have=0,t.mode=sF;case sF:for(;t.have<t.nlen+t.ndist;){for(;b=t.lencode[u&(1<<t.lenbits)-1],C=b>>>24,L=b>>>16&255,S=b&65535,!(C<=c);){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(S<16)u>>>=C,c-=C,t.lens[t.have++]=S;else{if(S===16){for(Q=C+2;c<Q;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(u>>>=C,c-=C,t.have===0){r.msg="invalid bit length repeat",t.mode=Br;break}G=t.lens[t.have-1],d=3+(u&3),u>>>=2,c-=2}else if(S===17){for(Q=C+3;c<Q;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}u>>>=C,c-=C,G=0,d=3+(u&7),u>>>=3,c-=3}else{for(Q=C+7;c<Q;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}u>>>=C,c-=C,G=0,d=11+(u&127),u>>>=7,c-=7}if(t.have+d>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Br;break}for(;d--;)t.lens[t.have++]=G}}if(t.mode===Br)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Br;break}if(t.lenbits=9,ne={bits:t.lenbits},J=p4(bF,t.lens,0,t.nlen,t.lencode,0,t.work,ne),t.lenbits=ne.bits,J){r.msg="invalid literal/lengths set",t.mode=Br;break}if(t.distbits=6,t.distcode=t.distdyn,ne={bits:t.distbits},J=p4(vF,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,ne),t.distbits=ne.bits,J){r.msg="invalid distances set",t.mode=Br;break}if(t.mode=rp,e===tp)break e;case rp:t.mode=np;case np:if(a>=6&&s>=258){r.next_out=l,r.avail_out=s,r.next_in=o,r.avail_in=a,t.hold=u,t.bits=c,d2e(r,h),l=r.next_out,i=r.output,s=r.avail_out,o=r.next_in,n=r.input,a=r.avail_in,u=t.hold,c=t.bits,t.mode===h1&&(t.back=-1);break}for(t.back=0;b=t.lencode[u&(1<<t.lenbits)-1],C=b>>>24,L=b>>>16&255,S=b&65535,!(C<=c);){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(L&&(L&240)===0){for(P=C,y=L,z=S;b=t.lencode[z+((u&(1<<P+y)-1)>>P)],C=b>>>24,L=b>>>16&255,S=b&65535,!(P+C<=c);){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}u>>>=P,c-=P,t.back+=P}if(u>>>=C,c-=C,t.back+=C,t.length=S,L===0){t.mode=dF;break}if(L&32){t.back=-1,t.mode=h1;break}if(L&64){r.msg="invalid literal/length code",t.mode=Br;break}t.extra=L&15,t.mode=uF;case uF:if(t.extra){for(Q=t.extra;c<Q;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=cF;case cF:for(;b=t.distcode[u&(1<<t.distbits)-1],C=b>>>24,L=b>>>16&255,S=b&65535,!(C<=c);){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if((L&240)===0){for(P=C,y=L,z=S;b=t.distcode[z+((u&(1<<P+y)-1)>>P)],C=b>>>24,L=b>>>16&255,S=b&65535,!(P+C<=c);){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}u>>>=P,c-=P,t.back+=P}if(u>>>=C,c-=C,t.back+=C,L&64){r.msg="invalid distance code",t.mode=Br;break}t.offset=S,t.extra=L&15,t.mode=fF;case fF:if(t.extra){for(Q=t.extra;c<Q;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Br;break}t.mode=hF;case hF:if(s===0)break e;if(d=h-s,t.offset>d){if(d=t.offset-d,d>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Br;break}d>t.wnext?(d-=t.wnext,p=t.wsize-d):p=t.wnext-d,d>t.length&&(d=t.length),v=t.window}else v=i,p=l-t.offset,d=t.length;d>s&&(d=s),s-=d,t.length-=d;do i[l++]=v[p++];while(--d);t.length===0&&(t.mode=np);break;case dF:if(s===0)break e;i[l++]=t.length,s--,t.mode=np;break;case NE:if(t.wrap){for(;c<32;){if(a===0)break e;a--,u|=n[o++]<<c,c+=8}if(h-=s,r.total_out+=h,t.total+=h,h&&(r.adler=t.check=t.flags?Wa(t.check,i,h,l-h):DE(t.check,i,h,l-h)),h=s,(t.flags?u:pF(u))!==t.check){r.msg="incorrect data check",t.mode=Br;break}u=0,c=0}t.mode=mF;case mF:if(t.wrap&&t.flags){for(;c<32;){if(a===0)break e;a--,u+=n[o++]<<c,c+=8}if(u!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Br;break}u=0,c=0}t.mode=gF;case gF:J=p2e;break e;case Br:J=CF;break e;case FE:return ZE;case v2e:default:return rl}return r.next_out=l,r.avail_out=s,r.next_in=o,r.avail_in=a,t.hold=u,t.bits=c,(t.wsize||h!==r.avail_out&&t.mode<Br&&(t.mode<NE||e!==GZ))&&SF(r,r.output,r.next_out,h-r.avail_out)?(t.mode=FE,ZE):(f-=r.avail_in,h-=r.avail_out,r.total_in+=f,r.total_out+=h,t.total+=h,t.wrap&&h&&(r.adler=t.check=t.flags?Wa(t.check,i,h,r.next_out-h):DE(t.check,i,h,r.next_out-h)),r.data_type=t.bits+(t.last?64:0)+(t.mode===h1?128:0)+(t.mode===rp||t.mode===HE?256:0),(f===0&&h===0||e===GZ)&&J===X2&&(J=b2e),J)}function A2e(r){if(!r||!r.state)return rl;var e=r.state;return e.window&&(e.window=null),r.state=null,X2}function P2e(r,e){var t;return!r||!r.state||(t=r.state,(t.wrap&2)===0)?rl:(t.head=e,e.done=!1,X2)}function T2e(r,e){var t=e.length,n,i,o;return!r||!r.state||(n=r.state,n.wrap!==0&&n.mode!==ip)?rl:n.mode===ip&&(i=1,i=DE(i,e,t,0),i!==n.check)?CF:(o=SF(r,e,t,t),o?(n.mode=FE,ZE):(n.havedict=1,X2))}Wl.inflateReset=kF;Wl.inflateReset2=LF;Wl.inflateResetKeep=yF;Wl.inflateInit=E2e;Wl.inflateInit2=EF;Wl.inflate=M2e;Wl.inflateEnd=A2e;Wl.inflateGetHeader=P2e;Wl.inflateSetDictionary=T2e;Wl.inflateInfo="pako inflate (from Nodeca project)"});var jE=ae((uGe,AF)=>{"use strict";AF.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var TF=ae((cGe,PF)=>{"use strict";function O2e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}PF.exports=O2e});var RF=ae(b4=>{"use strict";var Rf=MF(),_4=u1(),op=ME(),Xr=jE(),xE=Wg(),R2e=AE(),I2e=TF(),OF=Object.prototype.toString;function Q2(r){if(!(this instanceof Q2))return new Q2(r);this.options=_4.assign({chunkSize:16384,windowBits:0,to:""},r||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(r&&r.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new R2e,this.strm.avail_out=0;var t=Rf.inflateInit2(this.strm,e.windowBits);if(t!==Xr.Z_OK)throw new Error(xE[t]);if(this.header=new I2e,Rf.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=op.string2buf(e.dictionary):OF.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=Rf.inflateSetDictionary(this.strm,e.dictionary),t!==Xr.Z_OK)))throw new Error(xE[t])}Q2.prototype.push=function(r,e){var t=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,l,a,s,u,c=!1;if(this.ended)return!1;l=e===~~e?e:e===!0?Xr.Z_FINISH:Xr.Z_NO_FLUSH,typeof r=="string"?t.input=op.binstring2buf(r):OF.call(r)==="[object ArrayBuffer]"?t.input=new Uint8Array(r):t.input=r,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new _4.Buf8(n),t.next_out=0,t.avail_out=n),o=Rf.inflate(t,Xr.Z_NO_FLUSH),o===Xr.Z_NEED_DICT&&i&&(o=Rf.inflateSetDictionary(this.strm,i)),o===Xr.Z_BUF_ERROR&&c===!0&&(o=Xr.Z_OK,c=!1),o!==Xr.Z_STREAM_END&&o!==Xr.Z_OK)return this.onEnd(o),this.ended=!0,!1;t.next_out&&(t.avail_out===0||o===Xr.Z_STREAM_END||t.avail_in===0&&(l===Xr.Z_FINISH||l===Xr.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=op.utf8border(t.output,t.next_out),s=t.next_out-a,u=op.buf2string(t.output,a),t.next_out=s,t.avail_out=n-s,s&&_4.arraySet(t.output,t.output,a,s,0),this.onData(u)):this.onData(_4.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(c=!0)}while((t.avail_in>0||t.avail_out===0)&&o!==Xr.Z_STREAM_END);return o===Xr.Z_STREAM_END&&(l=Xr.Z_FINISH),l===Xr.Z_FINISH?(o=Rf.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Xr.Z_OK):(l===Xr.Z_SYNC_FLUSH&&(this.onEnd(Xr.Z_OK),t.avail_out=0),!0)};Q2.prototype.onData=function(r){this.chunks.push(r)};Q2.prototype.onEnd=function(r){r===Xr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_4.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function qE(r,e){var t=new Q2(e);if(t.push(r,!0),t.err)throw t.msg||xE[t.err];return t.result}function z2e(r,e){return e=e||{},e.raw=!0,qE(r,e)}b4.Inflate=Q2;b4.inflate=qE;b4.inflateRaw=z2e;b4.ungzip=qE});var HF=ae((hGe,zF)=>{"use strict";var H2e=u1().assign,N2e=VZ(),V2e=RF(),B2e=jE(),IF={};H2e(IF,N2e,V2e,B2e);zF.exports=IF});var VF=ae(ap=>{"use strict";var D2e=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",Z2e=HF(),NF=Fr(),lp=Lo(),F2e=D2e?"uint8array":"array";ap.magic="\b\0";function $2(r,e){lp.call(this,"FlateWorker/"+r),this._pako=null,this._pakoAction=r,this._pakoOptions=e,this.meta={}}NF.inherits($2,lp);$2.prototype.processChunk=function(r){this.meta=r.meta,this._pako===null&&this._createPako(),this._pako.push(NF.transformTo(F2e,r.data),!1)};$2.prototype.flush=function(){lp.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};$2.prototype.cleanUp=function(){lp.prototype.cleanUp.call(this),this._pako=null};$2.prototype._createPako=function(){this._pako=new Z2e[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var r=this;this._pako.onData=function(e){r.push({data:e,meta:r.meta})}};ap.compressWorker=function(r){return new $2("Deflate",r)};ap.uncompressWorker=function(){return new $2("Inflate",{})}});var WE=ae(UE=>{"use strict";var BF=Lo();UE.STORE={magic:"\0\0",compressWorker:function(){return new BF("STORE compression")},uncompressWorker:function(){return new BF("STORE decompression")}};UE.DEFLATE=VF()});var GE=ae(ec=>{"use strict";ec.LOCAL_FILE_HEADER="PK";ec.CENTRAL_FILE_HEADER="PK";ec.CENTRAL_DIRECTORY_END="PK";ec.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07";ec.ZIP64_CENTRAL_DIRECTORY_END="PK";ec.DATA_DESCRIPTOR="PK\x07\b"});var jF=ae((pGe,FF)=>{"use strict";var If=Fr(),zf=Lo(),YE=wf(),DF=Fg(),sp=GE(),Lr=function(r,e){var t="",n;for(n=0;n<e;n++)t+=String.fromCharCode(r&255),r=r>>>8;return t},j2e=function(r,e){var t=r;return r||(t=e?16893:33204),(t&65535)<<16},x2e=function(r){return(r||0)&63},ZF=function(r,e,t,n,i,o){var l=r.file,a=r.compression,s=o!==YE.utf8encode,u=If.transformTo("string",o(l.name)),c=If.transformTo("string",YE.utf8encode(l.name)),f=l.comment,h=If.transformTo("string",o(f)),d=If.transformTo("string",YE.utf8encode(f)),p=c.length!==l.name.length,v=d.length!==f.length,b,C,L="",S="",P="",y=l.dir,z=l.date,G={crc32:0,compressedSize:0,uncompressedSize:0};(!e||t)&&(G.crc32=r.crc32,G.compressedSize=r.compressedSize,G.uncompressedSize=r.uncompressedSize);var J=0;e&&(J|=8),!s&&(p||v)&&(J|=2048);var te=0,ne=0;y&&(te|=16),i==="UNIX"?(ne=798,te|=j2e(l.unixPermissions,y)):(ne=20,te|=x2e(l.dosPermissions,y)),b=z.getUTCHours(),b=b<<6,b=b|z.getUTCMinutes(),b=b<<5,b=b|z.getUTCSeconds()/2,C=z.getUTCFullYear()-1980,C=C<<4,C=C|z.getUTCMonth()+1,C=C<<5,C=C|z.getUTCDate(),p&&(S=Lr(1,1)+Lr(DF(u),4)+c,L+="up"+Lr(S.length,2)+S),v&&(P=Lr(1,1)+Lr(DF(h),4)+d,L+="uc"+Lr(P.length,2)+P);var Q="";Q+=`
\0`,Q+=Lr(J,2),Q+=a.magic,Q+=Lr(b,2),Q+=Lr(C,2),Q+=Lr(G.crc32,4),Q+=Lr(G.compressedSize,4),Q+=Lr(G.uncompressedSize,4),Q+=Lr(u.length,2),Q+=Lr(L.length,2);var ee=sp.LOCAL_FILE_HEADER+Q+u+L,se=sp.CENTRAL_FILE_HEADER+Lr(ne,2)+Q+Lr(h.length,2)+"\0\0\0\0"+Lr(te,4)+Lr(n,4)+u+L+h;return{fileRecord:ee,dirRecord:se}},q2e=function(r,e,t,n,i){var o="",l=If.transformTo("string",i(n));return o=sp.CENTRAL_DIRECTORY_END+"\0\0\0\0"+Lr(r,2)+Lr(r,2)+Lr(e,4)+Lr(t,4)+Lr(l.length,2)+l,o},U2e=function(r){var e="";return e=sp.DATA_DESCRIPTOR+Lr(r.crc32,4)+Lr(r.compressedSize,4)+Lr(r.uncompressedSize,4),e};function Gl(r,e,t,n){zf.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=t,this.encodeFileName=n,this.streamFiles=r,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}If.inherits(Gl,zf);Gl.prototype.push=function(r){var e=r.meta.percent||0,t=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(r):(this.bytesWritten+=r.data.length,zf.prototype.push.call(this,{data:r.data,meta:{currentFile:this.currentFile,percent:t?(e+100*(t-n-1))/t:100}}))};Gl.prototype.openedSource=function(r){this.currentSourceOffset=this.bytesWritten,this.currentFile=r.file.name;var e=this.streamFiles&&!r.file.dir;if(e){var t=ZF(r,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0};Gl.prototype.closedSource=function(r){this.accumulate=!1;var e=this.streamFiles&&!r.file.dir,t=ZF(r,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),e)this.push({data:U2e(r),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};Gl.prototype.flush=function(){for(var r=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var t=this.bytesWritten-r,n=q2e(this.dirRecords.length,t,r,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})};Gl.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};Gl.prototype.registerPrevious=function(r){this._sources.push(r);var e=this;return r.on("data",function(t){e.processChunk(t)}),r.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),r.on("error",function(t){e.error(t)}),this};Gl.prototype.resume=function(){if(!zf.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};Gl.prototype.error=function(r){var e=this._sources;if(!zf.prototype.error.call(this,r))return!1;for(var t=0;t<e.length;t++)try{e[t].error(r)}catch(n){}return!0};Gl.prototype.lock=function(){zf.prototype.lock.call(this);for(var r=this._sources,e=0;e<r.length;e++)r[e].lock()};FF.exports=Gl});var qF=ae(xF=>{"use strict";var W2e=WE(),G2e=jF(),Y2e=function(r,e){var t=r||e,n=W2e[t];if(!n)throw new Error(t+" is not a valid compression method !");return n};xF.generateWorker=function(r,e,t){var n=new G2e(e.streamFiles,t,e.platform,e.encodeFileName),i=0;try{r.forEach(function(o,l){i++;var a=Y2e(l.options.compression,e.compression),s=l.options.compressionOptions||e.compressionOptions||{},u=l.dir,c=l.date;l._compressWorker(a,s).withStreamInfo("file",{name:o,dir:u,date:c,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(n)}),n.entriesCount=i}catch(o){n.error(o)}return n}});var WF=ae((bGe,UF)=>{"use strict";var K2e=Fr(),up=Lo();function v4(r,e){up.call(this,"Nodejs stream input adapter for "+r),this._upstreamEnded=!1,this._bindStream(e)}K2e.inherits(v4,up);v4.prototype._bindStream=function(r){var e=this;this._stream=r,r.pause(),r.on("data",function(t){e.push({data:t,meta:{percent:0}})}).on("error",function(t){e.isPaused?this.generatedError=t:e.error(t)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})};v4.prototype.pause=function(){return up.prototype.pause.call(this)?(this._stream.pause(),!0):!1};v4.prototype.resume=function(){return up.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1};UF.exports=v4});var rj=ae((vGe,tj)=>{"use strict";var J2e=wf(),C4=Fr(),JF=Lo(),X2e=$L(),XF=eE(),GF=jg(),Q2e=YD(),$2e=qF(),YF=Kd(),ece=WF(),QF=function(r,e,t){var n=C4.getTypeOf(e),i,o=C4.extend(t||{},XF);o.date=o.date||new Date,o.compression!==null&&(o.compression=o.compression.toUpperCase()),typeof o.unixPermissions=="string"&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&o.unixPermissions&16384&&(o.dir=!0),o.dosPermissions&&o.dosPermissions&16&&(o.dir=!0),o.dir&&(r=$F(r)),o.createFolders&&(i=tce(r))&&ej.call(this,i,!0);var l=n==="string"&&o.binary===!1&&o.base64===!1;(!t||typeof t.binary=="undefined")&&(o.binary=!l);var a=e instanceof GF&&e.uncompressedSize===0;(a||o.dir||!e||e.length===0)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",n="string");var s=null;e instanceof GF||e instanceof JF?s=e:YF.isNode&&YF.isStream(e)?s=new ece(r,e):s=C4.prepareContent(r,e,o.binary,o.optimizedBinaryString,o.base64);var u=new Q2e(r,s,o);this.files[r]=u},tce=function(r){r.slice(-1)==="/"&&(r=r.substring(0,r.length-1));var e=r.lastIndexOf("/");return e>0?r.substring(0,e):""},$F=function(r){return r.slice(-1)!=="/"&&(r+="/"),r},ej=function(r,e){return e=typeof e!="undefined"?e:XF.createFolders,r=$F(r),this.files[r]||QF.call(this,r,null,{dir:!0,createFolders:e}),this.files[r]};function KF(r){return Object.prototype.toString.call(r)==="[object RegExp]"}var rce={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(r){var e,t,n;for(e in this.files)n=this.files[e],t=e.slice(this.root.length,e.length),t&&e.slice(0,this.root.length)===this.root&&r(t,n)},filter:function(r){var e=[];return this.forEach(function(t,n){r(t,n)&&e.push(n)}),e},file:function(r,e,t){if(arguments.length===1)if(KF(r)){var n=r;return this.filter(function(o,l){return!l.dir&&n.test(o)})}else{var i=this.files[this.root+r];return i&&!i.dir?i:null}else r=this.root+r,QF.call(this,r,e,t);return this},folder:function(r){if(!r)return this;if(KF(r))return this.filter(function(i,o){return o.dir&&r.test(i)});var e=this.root+r,t=ej.call(this,e),n=this.clone();return n.root=t.name,n},remove:function(r){r=this.root+r;var e=this.files[r];if(e||(r.slice(-1)!=="/"&&(r+="/"),e=this.files[r]),e&&!e.dir)delete this.files[r];else for(var t=this.filter(function(i,o){return o.name.slice(0,r.length)===r}),n=0;n<t.length;n++)delete this.files[t[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(r){var e,t={};try{if(t=C4.extend(r||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:J2e.utf8encode}),t.type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),t.type==="binarystring"&&(t.type="string"),!t.type)throw new Error("No output type specified.");C4.checkSupport(t.type),(t.platform==="darwin"||t.platform==="freebsd"||t.platform==="linux"||t.platform==="sunos")&&(t.platform="UNIX"),t.platform==="win32"&&(t.platform="DOS");var n=t.comment||this.comment||"";e=$2e.generateWorker(this,t,n)}catch(i){e=new JF("error"),e.error(i)}return new X2e(e,t.type||"string",t.mimeType)},generateAsync:function(r,e){return this.generateInternalStream(r).accumulate(e)},generateNodeStream:function(r,e){return r=r||{},r.type||(r.type="nodebuffer"),this.generateInternalStream(r).toNodejsStream(e)}};tj.exports=rce});var KE=ae((CGe,ij)=>{"use strict";var nce=Fr();function nj(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}nj.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var e=0,t;for(this.checkOffset(r),t=this.index+r-1;t>=this.index;t--)e=(e<<8)+this.byteAt(t);return this.index+=r,e},readString:function(r){return nce.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC((r>>25&127)+1980,(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(r&31)<<1))}};ij.exports=nj});var JE=ae((wGe,lj)=>{"use strict";var oj=KE(),ice=Fr();function Hf(r){oj.call(this,r);for(var e=0;e<this.data.length;e++)r[e]=r[e]&255}ice.inherits(Hf,oj);Hf.prototype.byteAt=function(r){return this.data[this.zero+r]};Hf.prototype.lastIndexOfSignature=function(r){for(var e=r.charCodeAt(0),t=r.charCodeAt(1),n=r.charCodeAt(2),i=r.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===t&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1};Hf.prototype.readAndCheckSignature=function(r){var e=r.charCodeAt(0),t=r.charCodeAt(1),n=r.charCodeAt(2),i=r.charCodeAt(3),o=this.readData(4);return e===o[0]&&t===o[1]&&n===o[2]&&i===o[3]};Hf.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e};lj.exports=Hf});var uj=ae((yGe,sj)=>{"use strict";var aj=KE(),oce=Fr();function Nf(r){aj.call(this,r)}oce.inherits(Nf,aj);Nf.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)};Nf.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero};Nf.prototype.readAndCheckSignature=function(r){var e=this.readData(4);return r===e};Nf.prototype.readData=function(r){this.checkOffset(r);var e=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e};sj.exports=Nf});var QE=ae((kGe,fj)=>{"use strict";var cj=JE(),lce=Fr();function XE(r){cj.call(this,r)}lce.inherits(XE,cj);XE.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e};fj.exports=XE});var mj=ae((LGe,dj)=>{"use strict";var hj=QE(),ace=Fr();function $E(r){hj.call(this,r)}ace.inherits($E,hj);$E.prototype.readData=function(r){this.checkOffset(r);var e=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,e};dj.exports=$E});var eS=ae((EGe,pj)=>{"use strict";var cp=Fr(),gj=a1(),sce=JE(),uce=uj(),cce=mj(),fce=QE();pj.exports=function(r){var e=cp.getTypeOf(r);return cp.checkSupport(e),e==="string"&&!gj.uint8array?new uce(r):e==="nodebuffer"?new cce(r):gj.uint8array?new fce(cp.transformTo("uint8array",r)):new sce(cp.transformTo("array",r))}});var Cj=ae((SGe,vj)=>{"use strict";var tS=eS(),Zu=Fr(),hce=jg(),_j=Fg(),fp=wf(),hp=WE(),dce=a1(),mce=0,gce=3,pce=function(r){for(var e in hp)if(Object.prototype.hasOwnProperty.call(hp,e)&&hp[e].magic===r)return hp[e];return null};function bj(r,e){this.options=r,this.loadOptions=e}bj.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(r){var e,t;if(r.skip(22),this.fileNameLength=r.readInt(2),t=r.readInt(2),this.fileName=r.readData(this.fileNameLength),r.skip(t),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(e=pce(this.compressionMethod),e===null)throw new Error("Corrupted zip : compression "+Zu.pretty(this.compressionMethod)+" unknown (inner file : "+Zu.transformTo("string",this.fileName)+")");this.decompressed=new hce(this.compressedSize,this.uncompressedSize,this.crc32,e,r.readData(this.compressedSize))},readCentralPart:function(r){this.versionMadeBy=r.readInt(2),r.skip(2),this.bitFlag=r.readInt(2),this.compressionMethod=r.readString(2),this.date=r.readDate(),this.crc32=r.readInt(4),this.compressedSize=r.readInt(4),this.uncompressedSize=r.readInt(4);var e=r.readInt(2);if(this.extraFieldsLength=r.readInt(2),this.fileCommentLength=r.readInt(2),this.diskNumberStart=r.readInt(2),this.internalFileAttributes=r.readInt(2),this.externalFileAttributes=r.readInt(4),this.localHeaderOffset=r.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");r.skip(e),this.readExtraFields(r),this.parseZIP64ExtraField(r),this.fileComment=r.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var r=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),r===mce&&(this.dosPermissions=this.externalFileAttributes&63),r===gce&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var r=tS(this.extraFields[1].value);this.uncompressedSize===Zu.MAX_VALUE_32BITS&&(this.uncompressedSize=r.readInt(8)),this.compressedSize===Zu.MAX_VALUE_32BITS&&(this.compressedSize=r.readInt(8)),this.localHeaderOffset===Zu.MAX_VALUE_32BITS&&(this.localHeaderOffset=r.readInt(8)),this.diskNumberStart===Zu.MAX_VALUE_32BITS&&(this.diskNumberStart=r.readInt(4))}},readExtraFields:function(r){var e=r.index+this.extraFieldsLength,t,n,i;for(this.extraFields||(this.extraFields={});r.index+4<e;)t=r.readInt(2),n=r.readInt(2),i=r.readData(n),this.extraFields[t]={id:t,length:n,value:i};r.setIndex(e)},handleUTF8:function(){var r=dce.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=fp.utf8decode(this.fileName),this.fileCommentStr=fp.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(e!==null)this.fileNameStr=e;else{var t=Zu.transformTo(r,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var n=this.findExtraFieldUnicodeComment();if(n!==null)this.fileCommentStr=n;else{var i=Zu.transformTo(r,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var r=this.extraFields[28789];if(r){var e=tS(r.value);return e.readInt(1)!==1||_j(this.fileName)!==e.readInt(4)?null:fp.utf8decode(e.readData(r.length-5))}return null},findExtraFieldUnicodeComment:function(){var r=this.extraFields[25461];if(r){var e=tS(r.value);return e.readInt(1)!==1||_j(this.fileComment)!==e.readInt(4)?null:fp.utf8decode(e.readData(r.length-5))}return null}};vj.exports=bj});var kj=ae((MGe,yj)=>{"use strict";var _ce=eS(),d1=Fr(),Yl=GE(),bce=Cj(),vce=a1();function wj(r){this.files=[],this.loadOptions=r}wj.prototype={checkSignature:function(r){if(!this.reader.readAndCheckSignature(r)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+d1.pretty(e)+", expected "+d1.pretty(r)+")")}},isSignature:function(r,e){var t=this.reader.index;this.reader.setIndex(r);var n=this.reader.readString(4),i=n===e;return this.reader.setIndex(t),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var r=this.reader.readData(this.zipCommentLength),e=vce.uint8array?"uint8array":"array",t=d1.transformTo(e,r);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var r=this.zip64EndOfCentralSize-44,e=0,t,n,i;e<r;)t=this.reader.readInt(2),n=this.reader.readInt(4),i=this.reader.readData(n),this.zip64ExtensibleData[t]={id:t,length:n,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var r,e;for(r=0;r<this.files.length;r++)e=this.files[r],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(Yl.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var r;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(Yl.CENTRAL_FILE_HEADER);)r=new bce({zip64:this.zip64},this.loadOptions),r.readCentralPart(this.reader),this.files.push(r);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var r=this.reader.lastIndexOfSignature(Yl.CENTRAL_DIRECTORY_END);if(r<0){var e=!this.isSignature(0,Yl.LOCAL_FILE_HEADER);throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(r);var t=r;if(this.checkSignature(Yl.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===d1.MAX_VALUE_16BITS||this.diskWithCentralDirStart===d1.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===d1.MAX_VALUE_16BITS||this.centralDirRecords===d1.MAX_VALUE_16BITS||this.centralDirSize===d1.MAX_VALUE_32BITS||this.centralDirOffset===d1.MAX_VALUE_32BITS){if(this.zip64=!0,r=this.reader.lastIndexOfSignature(Yl.ZIP64_CENTRAL_DIRECTORY_LOCATOR),r<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(r),this.checkSignature(Yl.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Yl.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Yl.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Yl.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=t-n;if(i>0)this.isSignature(t,Yl.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(r){this.reader=_ce(r)},load:function(r){this.prepareReader(r),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};yj.exports=wj});var Sj=ae((AGe,Ej)=>{"use strict";var rS=Fr(),dp=bf(),Cce=wf(),wce=kj(),yce=nE(),Lj=Kd();function kce(r){return new dp.Promise(function(e,t){var n=r.decompressed.getContentWorker().pipe(new yce);n.on("error",function(i){t(i)}).on("end",function(){n.streamInfo.crc32!==r.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}Ej.exports=function(r,e){var t=this;return e=rS.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:Cce.utf8decode}),Lj.isNode&&Lj.isStream(r)?dp.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):rS.prepareContent("the loaded zip file",r,!0,e.optimizedBinaryString,e.base64).then(function(n){var i=new wce(e);return i.load(n),i}).then(function(i){var o=[dp.Promise.resolve(i)],l=i.files;if(e.checkCRC32)for(var a=0;a<l.length;a++)o.push(kce(l[a]));return dp.Promise.all(o)}).then(function(i){for(var o=i.shift(),l=o.files,a=0;a<l.length;a++){var s=l[a],u=s.fileNameStr,c=rS.resolve(s.fileNameStr);t.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders}),s.dir||(t.file(c).unsafeOriginalName=u)}return o.zipComment.length&&(t.comment=o.zipComment),t})}});var Aj=ae((PGe,Mj)=>{"use strict";function nl(){if(!(this instanceof nl))return new nl;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new nl;for(var e in this)typeof this[e]!="function"&&(r[e]=this[e]);return r}}nl.prototype=rj();nl.prototype.loadAsync=Sj();nl.support=a1();nl.defaults=eE();nl.version="3.10.1";nl.loadAsync=function(r,e){return new nl().loadAsync(r,e)};nl.external=bf();Mj.exports=nl});var Y4=ae((OJe,Jq)=>{var zhe="2.0.0",Hhe=Number.MAX_SAFE_INTEGER||9007199254740991,Nhe=16,Vhe=250,Bhe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Jq.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:Nhe,MAX_SAFE_BUILD_LENGTH:Vhe,MAX_SAFE_INTEGER:Hhe,RELEASE_TYPES:Bhe,SEMVER_SPEC_VERSION:zhe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var K4=ae((RJe,Xq)=>{var Dhe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};Xq.exports=Dhe});var Xf=ae((w1,Qq)=>{var{MAX_SAFE_COMPONENT_LENGTH:_M,MAX_SAFE_BUILD_LENGTH:Zhe,MAX_LENGTH:Fhe}=Y4(),jhe=K4();w1=Qq.exports={};var xhe=w1.re=[],qhe=w1.safeRe=[],Ue=w1.src=[],We=w1.t={},Uhe=0,bM="[a-zA-Z0-9-]",Whe=[["\\s",1],["\\d",Fhe],[bM,Zhe]],Ghe=r=>{for(let[e,t]of Whe)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},Mt=(r,e,t)=>{let n=Ghe(e),i=Uhe++;jhe(r,i,e),We[r]=i,Ue[i]=e,xhe[i]=new RegExp(e,t?"g":void 0),qhe[i]=new RegExp(n,t?"g":void 0)};Mt("NUMERICIDENTIFIER","0|[1-9]\\d*");Mt("NUMERICIDENTIFIERLOOSE","\\d+");Mt("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${bM}*`);Mt("MAINVERSION",`(${Ue[We.NUMERICIDENTIFIER]})\\.(${Ue[We.NUMERICIDENTIFIER]})\\.(${Ue[We.NUMERICIDENTIFIER]})`);Mt("MAINVERSIONLOOSE",`(${Ue[We.NUMERICIDENTIFIERLOOSE]})\\.(${Ue[We.NUMERICIDENTIFIERLOOSE]})\\.(${Ue[We.NUMERICIDENTIFIERLOOSE]})`);Mt("PRERELEASEIDENTIFIER",`(?:${Ue[We.NUMERICIDENTIFIER]}|${Ue[We.NONNUMERICIDENTIFIER]})`);Mt("PRERELEASEIDENTIFIERLOOSE",`(?:${Ue[We.NUMERICIDENTIFIERLOOSE]}|${Ue[We.NONNUMERICIDENTIFIER]})`);Mt("PRERELEASE",`(?:-(${Ue[We.PRERELEASEIDENTIFIER]}(?:\\.${Ue[We.PRERELEASEIDENTIFIER]})*))`);Mt("PRERELEASELOOSE",`(?:-?(${Ue[We.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ue[We.PRERELEASEIDENTIFIERLOOSE]})*))`);Mt("BUILDIDENTIFIER",`${bM}+`);Mt("BUILD",`(?:\\+(${Ue[We.BUILDIDENTIFIER]}(?:\\.${Ue[We.BUILDIDENTIFIER]})*))`);Mt("FULLPLAIN",`v?${Ue[We.MAINVERSION]}${Ue[We.PRERELEASE]}?${Ue[We.BUILD]}?`);Mt("FULL",`^${Ue[We.FULLPLAIN]}$`);Mt("LOOSEPLAIN",`[v=\\s]*${Ue[We.MAINVERSIONLOOSE]}${Ue[We.PRERELEASELOOSE]}?${Ue[We.BUILD]}?`);Mt("LOOSE",`^${Ue[We.LOOSEPLAIN]}$`);Mt("GTLT","((?:<|>)?=?)");Mt("XRANGEIDENTIFIERLOOSE",`${Ue[We.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Mt("XRANGEIDENTIFIER",`${Ue[We.NUMERICIDENTIFIER]}|x|X|\\*`);Mt("XRANGEPLAIN",`[v=\\s]*(${Ue[We.XRANGEIDENTIFIER]})(?:\\.(${Ue[We.XRANGEIDENTIFIER]})(?:\\.(${Ue[We.XRANGEIDENTIFIER]})(?:${Ue[We.PRERELEASE]})?${Ue[We.BUILD]}?)?)?`);Mt("XRANGEPLAINLOOSE",`[v=\\s]*(${Ue[We.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ue[We.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ue[We.XRANGEIDENTIFIERLOOSE]})(?:${Ue[We.PRERELEASELOOSE]})?${Ue[We.BUILD]}?)?)?`);Mt("XRANGE",`^${Ue[We.GTLT]}\\s*${Ue[We.XRANGEPLAIN]}$`);Mt("XRANGELOOSE",`^${Ue[We.GTLT]}\\s*${Ue[We.XRANGEPLAINLOOSE]}$`);Mt("COERCEPLAIN",`(^|[^\\d])(\\d{1,${_M}})(?:\\.(\\d{1,${_M}}))?(?:\\.(\\d{1,${_M}}))?`);Mt("COERCE",`${Ue[We.COERCEPLAIN]}(?:$|[^\\d])`);Mt("COERCEFULL",Ue[We.COERCEPLAIN]+`(?:${Ue[We.PRERELEASE]})?(?:${Ue[We.BUILD]})?(?:$|[^\\d])`);Mt("COERCERTL",Ue[We.COERCE],!0);Mt("COERCERTLFULL",Ue[We.COERCEFULL],!0);Mt("LONETILDE","(?:~>?)");Mt("TILDETRIM",`(\\s*)${Ue[We.LONETILDE]}\\s+`,!0);w1.tildeTrimReplace="$1~";Mt("TILDE",`^${Ue[We.LONETILDE]}${Ue[We.XRANGEPLAIN]}$`);Mt("TILDELOOSE",`^${Ue[We.LONETILDE]}${Ue[We.XRANGEPLAINLOOSE]}$`);Mt("LONECARET","(?:\\^)");Mt("CARETTRIM",`(\\s*)${Ue[We.LONECARET]}\\s+`,!0);w1.caretTrimReplace="$1^";Mt("CARET",`^${Ue[We.LONECARET]}${Ue[We.XRANGEPLAIN]}$`);Mt("CARETLOOSE",`^${Ue[We.LONECARET]}${Ue[We.XRANGEPLAINLOOSE]}$`);Mt("COMPARATORLOOSE",`^${Ue[We.GTLT]}\\s*(${Ue[We.LOOSEPLAIN]})$|^$`);Mt("COMPARATOR",`^${Ue[We.GTLT]}\\s*(${Ue[We.FULLPLAIN]})$|^$`);Mt("COMPARATORTRIM",`(\\s*)${Ue[We.GTLT]}\\s*(${Ue[We.LOOSEPLAIN]}|${Ue[We.XRANGEPLAIN]})`,!0);w1.comparatorTrimReplace="$1$2$3";Mt("HYPHENRANGE",`^\\s*(${Ue[We.XRANGEPLAIN]})\\s+-\\s+(${Ue[We.XRANGEPLAIN]})\\s*$`);Mt("HYPHENRANGELOOSE",`^\\s*(${Ue[We.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ue[We.XRANGEPLAINLOOSE]})\\s*$`);Mt("STAR","(<|>)?=?\\s*\\*");Mt("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Mt("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var __=ae((IJe,$q)=>{var Yhe=Object.freeze({loose:!0}),Khe=Object.freeze({}),Jhe=r=>r?typeof r!="object"?Yhe:r:Khe;$q.exports=Jhe});var vM=ae((zJe,rU)=>{var eU=/^[0-9]+$/,tU=(r,e)=>{let t=eU.test(r),n=eU.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},Xhe=(r,e)=>tU(e,r);rU.exports={compareIdentifiers:tU,rcompareIdentifiers:Xhe}});var li=ae((HJe,lU)=>{var b_=K4(),{MAX_LENGTH:nU,MAX_SAFE_INTEGER:v_}=Y4(),{safeRe:iU,t:oU}=Xf(),Qhe=__(),{compareIdentifiers:Qf}=vM(),CM=class r{constructor(e,t){if(t=Qhe(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>nU)throw new TypeError(`version is longer than ${nU} characters`);b_("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?iU[oU.LOOSE]:iU[oU.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>v_||this.major<0)throw new TypeError("Invalid major version");if(this.minor>v_||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>v_||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<v_)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(b_("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),Qf(this.major,e.major)||Qf(this.minor,e.minor)||Qf(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],i=e.prerelease[t];if(b_("prerelease compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Qf(n,i)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let n=this.build[t],i=e.build[t];if(b_("build compare",t,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Qf(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let o=[t,i];n===!1&&(o=[t]),Qf(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};lU.exports=CM});var gc=ae((NJe,sU)=>{var aU=li(),$he=(r,e,t=!1)=>{if(r instanceof aU)return r;try{return new aU(r,e)}catch(n){if(!t)return null;throw n}};sU.exports=$he});var cU=ae((VJe,uU)=>{var e3e=gc(),t3e=(r,e)=>{let t=e3e(r,e);return t?t.version:null};uU.exports=t3e});var hU=ae((BJe,fU)=>{var r3e=gc(),n3e=(r,e)=>{let t=r3e(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};fU.exports=n3e});var gU=ae((DJe,mU)=>{var dU=li(),i3e=(r,e,t,n,i)=>{typeof t=="string"&&(i=n,n=t,t=void 0);try{return new dU(r instanceof dU?r.version:r,t).inc(e,n,i).version}catch(o){return null}};mU.exports=i3e});var bU=ae((ZJe,_U)=>{var pU=gc(),o3e=(r,e)=>{let t=pU(r,null,!0),n=pU(e,null,!0),i=t.compare(n);if(i===0)return null;let o=i>0,l=o?t:n,a=o?n:t,s=!!l.prerelease.length;if(!!a.prerelease.length&&!s)return!a.patch&&!a.minor?"major":l.patch?"patch":l.minor?"minor":"major";let c=s?"pre":"";return t.major!==n.major?c+"major":t.minor!==n.minor?c+"minor":t.patch!==n.patch?c+"patch":"prerelease"};_U.exports=o3e});var CU=ae((FJe,vU)=>{var l3e=li(),a3e=(r,e)=>new l3e(r,e).major;vU.exports=a3e});var yU=ae((jJe,wU)=>{var s3e=li(),u3e=(r,e)=>new s3e(r,e).minor;wU.exports=u3e});var LU=ae((xJe,kU)=>{var c3e=li(),f3e=(r,e)=>new c3e(r,e).patch;kU.exports=f3e});var SU=ae((qJe,EU)=>{var h3e=gc(),d3e=(r,e)=>{let t=h3e(r,e);return t&&t.prerelease.length?t.prerelease:null};EU.exports=d3e});var ll=ae((UJe,AU)=>{var MU=li(),m3e=(r,e,t)=>new MU(r,t).compare(new MU(e,t));AU.exports=m3e});var TU=ae((WJe,PU)=>{var g3e=ll(),p3e=(r,e,t)=>g3e(e,r,t);PU.exports=p3e});var RU=ae((GJe,OU)=>{var _3e=ll(),b3e=(r,e)=>_3e(r,e,!0);OU.exports=b3e});var C_=ae((YJe,zU)=>{var IU=li(),v3e=(r,e,t)=>{let n=new IU(r,t),i=new IU(e,t);return n.compare(i)||n.compareBuild(i)};zU.exports=v3e});var NU=ae((KJe,HU)=>{var C3e=C_(),w3e=(r,e)=>r.sort((t,n)=>C3e(t,n,e));HU.exports=w3e});var BU=ae((JJe,VU)=>{var y3e=C_(),k3e=(r,e)=>r.sort((t,n)=>y3e(n,t,e));VU.exports=k3e});var J4=ae((XJe,DU)=>{var L3e=ll(),E3e=(r,e,t)=>L3e(r,e,t)>0;DU.exports=E3e});var w_=ae((QJe,ZU)=>{var S3e=ll(),M3e=(r,e,t)=>S3e(r,e,t)<0;ZU.exports=M3e});var wM=ae(($Je,FU)=>{var A3e=ll(),P3e=(r,e,t)=>A3e(r,e,t)===0;FU.exports=P3e});var yM=ae((eXe,jU)=>{var T3e=ll(),O3e=(r,e,t)=>T3e(r,e,t)!==0;jU.exports=O3e});var y_=ae((tXe,xU)=>{var R3e=ll(),I3e=(r,e,t)=>R3e(r,e,t)>=0;xU.exports=I3e});var k_=ae((rXe,qU)=>{var z3e=ll(),H3e=(r,e,t)=>z3e(r,e,t)<=0;qU.exports=H3e});var kM=ae((nXe,UU)=>{var N3e=wM(),V3e=yM(),B3e=J4(),D3e=y_(),Z3e=w_(),F3e=k_(),j3e=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return N3e(r,t,n);case"!=":return V3e(r,t,n);case">":return B3e(r,t,n);case">=":return D3e(r,t,n);case"<":return Z3e(r,t,n);case"<=":return F3e(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};UU.exports=j3e});var GU=ae((iXe,WU)=>{var x3e=li(),q3e=gc(),{safeRe:L_,t:E_}=Xf(),U3e=(r,e)=>{if(r instanceof x3e)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?L_[E_.COERCEFULL]:L_[E_.COERCE]);else{let s=e.includePrerelease?L_[E_.COERCERTLFULL]:L_[E_.COERCERTL],u;for(;(u=s.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),s.lastIndex=u.index+u[1].length+u[2].length;s.lastIndex=-1}if(t===null)return null;let n=t[2],i=t[3]||"0",o=t[4]||"0",l=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return q3e(`${n}.${i}.${o}${l}${a}`,e)};WU.exports=U3e});var KU=ae((oXe,YU)=>{var LM=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};YU.exports=LM});var al=ae((lXe,$U)=>{var W3e=/\s+/g,EM=class r{constructor(e,t){if(t=Y3e(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof SM)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(W3e," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!XU(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&tde(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&$3e)|(this.options.loose&&ede))+":"+e,i=JU.get(n);if(i)return i;let o=this.options.loose,l=o?eo[Ei.HYPHENRANGELOOSE]:eo[Ei.HYPHENRANGE];e=e.replace(l,fde(this.options.includePrerelease)),Rr("hyphen replace",e),e=e.replace(eo[Ei.COMPARATORTRIM],J3e),Rr("comparator trim",e),e=e.replace(eo[Ei.TILDETRIM],X3e),Rr("tilde trim",e),e=e.replace(eo[Ei.CARETTRIM],Q3e),Rr("caret trim",e);let a=e.split(" ").map(f=>rde(f,this.options)).join(" ").split(/\s+/).map(f=>cde(f,this.options));o&&(a=a.filter(f=>(Rr("loose invalid filter",f,this.options),!!f.match(eo[Ei.COMPARATORLOOSE])))),Rr("range list",a);let s=new Map,u=a.map(f=>new SM(f,this.options));for(let f of u){if(XU(f))return[f];s.set(f.value,f)}s.size>1&&s.has("")&&s.delete("");let c=[...s.values()];return JU.set(n,c),c}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>QU(n,t)&&e.set.some(i=>QU(i,t)&&n.every(o=>i.every(l=>o.intersects(l,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new K3e(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(hde(this.set[t],e,this.options))return!0;return!1}};$U.exports=EM;var G3e=KU(),JU=new G3e,Y3e=__(),SM=X4(),Rr=K4(),K3e=li(),{safeRe:eo,t:Ei,comparatorTrimReplace:J3e,tildeTrimReplace:X3e,caretTrimReplace:Q3e}=Xf(),{FLAG_INCLUDE_PRERELEASE:$3e,FLAG_LOOSE:ede}=Y4(),XU=r=>r.value==="<0.0.0-0",tde=r=>r.value==="",QU=(r,e)=>{let t=!0,n=r.slice(),i=n.pop();for(;t&&n.length;)t=n.every(o=>i.intersects(o,e)),i=n.pop();return t},rde=(r,e)=>(Rr("comp",r,e),r=ode(r,e),Rr("caret",r),r=nde(r,e),Rr("tildes",r),r=ade(r,e),Rr("xrange",r),r=ude(r,e),Rr("stars",r),r),Si=r=>!r||r.toLowerCase()==="x"||r==="*",nde=(r,e)=>r.trim().split(/\s+/).map(t=>ide(t,e)).join(" "),ide=(r,e)=>{let t=e.loose?eo[Ei.TILDELOOSE]:eo[Ei.TILDE];return r.replace(t,(n,i,o,l,a)=>{Rr("tilde",r,n,i,o,l,a);let s;return Si(i)?s="":Si(o)?s=`>=${i}.0.0 <${+i+1}.0.0-0`:Si(l)?s=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(Rr("replaceTilde pr",a),s=`>=${i}.${o}.${l}-${a} <${i}.${+o+1}.0-0`):s=`>=${i}.${o}.${l} <${i}.${+o+1}.0-0`,Rr("tilde return",s),s})},ode=(r,e)=>r.trim().split(/\s+/).map(t=>lde(t,e)).join(" "),lde=(r,e)=>{Rr("caret",r,e);let t=e.loose?eo[Ei.CARETLOOSE]:eo[Ei.CARET],n=e.includePrerelease?"-0":"";return r.replace(t,(i,o,l,a,s)=>{Rr("caret",r,i,o,l,a,s);let u;return Si(o)?u="":Si(l)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:Si(a)?o==="0"?u=`>=${o}.${l}.0${n} <${o}.${+l+1}.0-0`:u=`>=${o}.${l}.0${n} <${+o+1}.0.0-0`:s?(Rr("replaceCaret pr",s),o==="0"?l==="0"?u=`>=${o}.${l}.${a}-${s} <${o}.${l}.${+a+1}-0`:u=`>=${o}.${l}.${a}-${s} <${o}.${+l+1}.0-0`:u=`>=${o}.${l}.${a}-${s} <${+o+1}.0.0-0`):(Rr("no pr"),o==="0"?l==="0"?u=`>=${o}.${l}.${a}${n} <${o}.${l}.${+a+1}-0`:u=`>=${o}.${l}.${a}${n} <${o}.${+l+1}.0-0`:u=`>=${o}.${l}.${a} <${+o+1}.0.0-0`),Rr("caret return",u),u})},ade=(r,e)=>(Rr("replaceXRanges",r,e),r.split(/\s+/).map(t=>sde(t,e)).join(" ")),sde=(r,e)=>{r=r.trim();let t=e.loose?eo[Ei.XRANGELOOSE]:eo[Ei.XRANGE];return r.replace(t,(n,i,o,l,a,s)=>{Rr("xRange",r,n,i,o,l,a,s);let u=Si(o),c=u||Si(l),f=c||Si(a),h=f;return i==="="&&h&&(i=""),s=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&h?(c&&(l=0),a=0,i===">"?(i=">=",c?(o=+o+1,l=0,a=0):(l=+l+1,a=0)):i==="<="&&(i="<",c?o=+o+1:l=+l+1),i==="<"&&(s="-0"),n=`${i+o}.${l}.${a}${s}`):c?n=`>=${o}.0.0${s} <${+o+1}.0.0-0`:f&&(n=`>=${o}.${l}.0${s} <${o}.${+l+1}.0-0`),Rr("xRange return",n),n})},ude=(r,e)=>(Rr("replaceStars",r,e),r.trim().replace(eo[Ei.STAR],"")),cde=(r,e)=>(Rr("replaceGTE0",r,e),r.trim().replace(eo[e.includePrerelease?Ei.GTE0PRE:Ei.GTE0],"")),fde=r=>(e,t,n,i,o,l,a,s,u,c,f,h)=>(Si(n)?t="":Si(i)?t=`>=${n}.0.0${r?"-0":""}`:Si(o)?t=`>=${n}.${i}.0${r?"-0":""}`:l?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,Si(u)?s="":Si(c)?s=`<${+u+1}.0.0-0`:Si(f)?s=`<${u}.${+c+1}.0-0`:h?s=`<=${u}.${c}.${f}-${h}`:r?s=`<${u}.${c}.${+f+1}-0`:s=`<=${s}`,`${t} ${s}`.trim()),hde=(r,e,t)=>{for(let n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let n=0;n<r.length;n++)if(Rr(r[n].semver),r[n].semver!==SM.ANY&&r[n].semver.prerelease.length>0){let i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var X4=ae((aXe,oW)=>{var Q4=Symbol("SemVer ANY"),PM=class r{static get ANY(){return Q4}constructor(e,t){if(t=eW(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),AM("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Q4?this.value="":this.value=this.operator+this.semver.version,AM("comp",this)}parse(e){let t=this.options.loose?tW[rW.COMPARATORLOOSE]:tW[rW.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new nW(n[2],this.options.loose):this.semver=Q4}toString(){return this.value}test(e){if(AM("Comparator.test",e,this.options.loose),this.semver===Q4||e===Q4)return!0;if(typeof e=="string")try{e=new nW(e,this.options)}catch(t){return!1}return MM(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new iW(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new iW(this.value,t).test(e.semver):(t=eW(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||MM(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||MM(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};oW.exports=PM;var eW=__(),{safeRe:tW,t:rW}=Xf(),MM=kM(),AM=K4(),nW=li(),iW=al()});var $4=ae((sXe,lW)=>{var dde=al(),mde=(r,e,t)=>{try{e=new dde(e,t)}catch(n){return!1}return e.test(r)};lW.exports=mde});var sW=ae((uXe,aW)=>{var gde=al(),pde=(r,e)=>new gde(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));aW.exports=pde});var cW=ae((cXe,uW)=>{var _de=li(),bde=al(),vde=(r,e,t)=>{let n=null,i=null,o=null;try{o=new bde(e,t)}catch(l){return null}return r.forEach(l=>{o.test(l)&&(!n||i.compare(l)===-1)&&(n=l,i=new _de(n,t))}),n};uW.exports=vde});var hW=ae((fXe,fW)=>{var Cde=li(),wde=al(),yde=(r,e,t)=>{let n=null,i=null,o=null;try{o=new wde(e,t)}catch(l){return null}return r.forEach(l=>{o.test(l)&&(!n||i.compare(l)===1)&&(n=l,i=new Cde(n,t))}),n};fW.exports=yde});var gW=ae((hXe,mW)=>{var TM=li(),kde=al(),dW=J4(),Lde=(r,e)=>{r=new kde(r,e);let t=new TM("0.0.0");if(r.test(t)||(t=new TM("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){let i=r.set[n],o=null;i.forEach(l=>{let a=new TM(l.semver.version);switch(l.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||dW(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),o&&(!t||dW(t,o))&&(t=o)}return t&&r.test(t)?t:null};mW.exports=Lde});var _W=ae((dXe,pW)=>{var Ede=al(),Sde=(r,e)=>{try{return new Ede(r,e).range||"*"}catch(t){return null}};pW.exports=Sde});var S_=ae((mXe,wW)=>{var Mde=li(),CW=X4(),{ANY:Ade}=CW,Pde=al(),Tde=$4(),bW=J4(),vW=w_(),Ode=k_(),Rde=y_(),Ide=(r,e,t,n)=>{r=new Mde(r,n),e=new Pde(e,n);let i,o,l,a,s;switch(t){case">":i=bW,o=Ode,l=vW,a=">",s=">=";break;case"<":i=vW,o=Rde,l=bW,a="<",s="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Tde(r,e,n))return!1;for(let u=0;u<e.set.length;++u){let c=e.set[u],f=null,h=null;if(c.forEach(d=>{d.semver===Ade&&(d=new CW(">=0.0.0")),f=f||d,h=h||d,i(d.semver,f.semver,n)?f=d:l(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===s||(!h.operator||h.operator===a)&&o(r,h.semver))return!1;if(h.operator===s&&l(r,h.semver))return!1}return!0};wW.exports=Ide});var kW=ae((gXe,yW)=>{var zde=S_(),Hde=(r,e,t)=>zde(r,e,">",t);yW.exports=Hde});var EW=ae((pXe,LW)=>{var Nde=S_(),Vde=(r,e,t)=>Nde(r,e,"<",t);LW.exports=Vde});var AW=ae((_Xe,MW)=>{var SW=al(),Bde=(r,e,t)=>(r=new SW(r,t),e=new SW(e,t),r.intersects(e,t));MW.exports=Bde});var TW=ae((bXe,PW)=>{var Dde=$4(),Zde=ll();PW.exports=(r,e,t)=>{let n=[],i=null,o=null,l=r.sort((c,f)=>Zde(c,f,t));for(let c of l)Dde(c,e,t)?(o=c,i||(i=c)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[c,f]of n)c===f?a.push(c):!f&&c===l[0]?a.push("*"):f?c===l[0]?a.push(`<=${f}`):a.push(`${c} - ${f}`):a.push(`>=${c}`);let s=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return s.length<u.length?s:e}});var NW=ae((vXe,HW)=>{var OW=al(),RM=X4(),{ANY:OM}=RM,e7=$4(),IM=ll(),Fde=(r,e,t={})=>{if(r===e)return!0;r=new OW(r,t),e=new OW(e,t);let n=!1;e:for(let i of r.set){for(let o of e.set){let l=xde(i,o,t);if(n=n||l!==null,l)continue e}if(n)return!1}return!0},jde=[new RM(">=0.0.0-0")],RW=[new RM(">=0.0.0")],xde=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===OM){if(e.length===1&&e[0].semver===OM)return!0;t.includePrerelease?r=jde:r=RW}if(e.length===1&&e[0].semver===OM){if(t.includePrerelease)return!0;e=RW}let n=new Set,i,o;for(let d of r)d.operator===">"||d.operator===">="?i=IW(i,d,t):d.operator==="<"||d.operator==="<="?o=zW(o,d,t):n.add(d.semver);if(n.size>1)return null;let l;if(i&&o){if(l=IM(i.semver,o.semver,t),l>0)return null;if(l===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let d of n){if(i&&!e7(d,String(i),t)||o&&!e7(d,String(o),t))return null;for(let p of e)if(!e7(d,String(p),t))return!1;return!0}let a,s,u,c,f=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1,h=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(c=c||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=IW(i,d,t),a===d&&a!==i)return!1}else if(i.operator===">="&&!e7(i.semver,String(d),t))return!1}if(o){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(s=zW(o,d,t),s===d&&s!==o)return!1}else if(o.operator==="<="&&!e7(o.semver,String(d),t))return!1}if(!d.operator&&(o||i)&&l!==0)return!1}return!(i&&u&&!o&&l!==0||o&&c&&!i&&l!==0||h||f)},IW=(r,e,t)=>{if(!r)return e;let n=IM(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},zW=(r,e,t)=>{if(!r)return e;let n=IM(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};HW.exports=Fde});var HM=ae((CXe,DW)=>{var zM=Xf(),VW=Y4(),qde=li(),BW=vM(),Ude=gc(),Wde=cU(),Gde=hU(),Yde=gU(),Kde=bU(),Jde=CU(),Xde=yU(),Qde=LU(),$de=SU(),e4e=ll(),t4e=TU(),r4e=RU(),n4e=C_(),i4e=NU(),o4e=BU(),l4e=J4(),a4e=w_(),s4e=wM(),u4e=yM(),c4e=y_(),f4e=k_(),h4e=kM(),d4e=GU(),m4e=X4(),g4e=al(),p4e=$4(),_4e=sW(),b4e=cW(),v4e=hW(),C4e=gW(),w4e=_W(),y4e=S_(),k4e=kW(),L4e=EW(),E4e=AW(),S4e=TW(),M4e=NW();DW.exports={parse:Ude,valid:Wde,clean:Gde,inc:Yde,diff:Kde,major:Jde,minor:Xde,patch:Qde,prerelease:$de,compare:e4e,rcompare:t4e,compareLoose:r4e,compareBuild:n4e,sort:i4e,rsort:o4e,gt:l4e,lt:a4e,eq:s4e,neq:u4e,gte:c4e,lte:f4e,cmp:h4e,coerce:d4e,Comparator:m4e,Range:g4e,satisfies:p4e,toComparators:_4e,maxSatisfying:b4e,minSatisfying:v4e,minVersion:C4e,validRange:w4e,outside:y4e,gtr:k4e,ltr:L4e,intersects:E4e,simplifyRange:S4e,subset:M4e,SemVer:qde,re:zM.re,src:zM.src,tokens:zM.t,SEMVER_SPEC_VERSION:VW.SEMVER_SPEC_VERSION,RELEASE_TYPES:VW.RELEASE_TYPES,compareIdentifiers:BW.compareIdentifiers,rcompareIdentifiers:BW.rcompareIdentifiers}});var bG=ae((jXe,z_)=>{var qW,UW,WW,GW,YW,KW,JW,XW,QW,$W,eG,tG,rG,R_,VM,nG,iG,oG,th,lG,aG,sG,uG,cG,fG,hG,dG,mG,I_,gG,pG,_G;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof z_=="object"&&typeof z_.exports=="object"?r(t(e,t(z_.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(o,l){return n[o]=i?i(o,l):l}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(o[a]=l[a])};qW=function(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");e(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)},UW=Object.assign||function(o){for(var l,a=1,s=arguments.length;a<s;a++){l=arguments[a];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(o[u]=l[u])}return o},WW=function(o,l){var a={};for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&l.indexOf(s)<0&&(a[s]=o[s]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,s=Object.getOwnPropertySymbols(o);u<s.length;u++)l.indexOf(s[u])<0&&Object.prototype.propertyIsEnumerable.call(o,s[u])&&(a[s[u]]=o[s[u]]);return a},GW=function(o,l,a,s){var u=arguments.length,c=u<3?l:s===null?s=Object.getOwnPropertyDescriptor(l,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(o,l,a,s);else for(var h=o.length-1;h>=0;h--)(f=o[h])&&(c=(u<3?f(c):u>3?f(l,a,c):f(l,a))||c);return u>3&&c&&Object.defineProperty(l,a,c),c},YW=function(o,l){return function(a,s){l(a,s,o)}},KW=function(o,l,a,s,u,c){function f(z){if(z!==void 0&&typeof z!="function")throw new TypeError("Function expected");return z}for(var h=s.kind,d=h==="getter"?"get":h==="setter"?"set":"value",p=!l&&o?s.static?o:o.prototype:null,v=l||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),b,C=!1,L=a.length-1;L>=0;L--){var S={};for(var P in s)S[P]=P==="access"?{}:s[P];for(var P in s.access)S.access[P]=s.access[P];S.addInitializer=function(z){if(C)throw new TypeError("Cannot add initializers after decoration has completed");c.push(f(z||null))};var y=(0,a[L])(h==="accessor"?{get:v.get,set:v.set}:v[d],S);if(h==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(b=f(y.get))&&(v.get=b),(b=f(y.set))&&(v.set=b),(b=f(y.init))&&u.unshift(b)}else(b=f(y))&&(h==="field"?u.unshift(b):v[d]=b)}p&&Object.defineProperty(p,s.name,v),C=!0},JW=function(o,l,a){for(var s=arguments.length>2,u=0;u<l.length;u++)a=s?l[u].call(o,a):l[u].call(o);return s?a:void 0},XW=function(o){return typeof o=="symbol"?o:"".concat(o)},QW=function(o,l,a){return typeof l=="symbol"&&(l=l.description?"[".concat(l.description,"]"):""),Object.defineProperty(o,"name",{configurable:!0,value:a?"".concat(a," ",l):l})},$W=function(o,l){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,l)},eG=function(o,l,a,s){function u(c){return c instanceof a?c:new a(function(f){f(c)})}return new(a||(a=Promise))(function(c,f){function h(v){try{p(s.next(v))}catch(b){f(b)}}function d(v){try{p(s.throw(v))}catch(b){f(b)}}function p(v){v.done?c(v.value):u(v.value).then(h,d)}p((s=s.apply(o,l||[])).next())})},tG=function(o,l){var a={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,u,c,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=h(0),f.throw=h(1),f.return=h(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(v){return d([p,v])}}function d(p){if(s)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(a=0)),a;)try{if(s=1,u&&(c=p[0]&2?u.return:p[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,p[1])).done)return c;switch(u=0,c&&(p=[p[0]&2,c.value]),p[0]){case 0:case 1:c=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,u=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(c=a.trys,!(c=c.length>0&&c[c.length-1])&&(p[0]===6||p[0]===2)){a=0;continue}if(p[0]===3&&(!c||p[1]>c[0]&&p[1]<c[3])){a.label=p[1];break}if(p[0]===6&&a.label<c[1]){a.label=c[1],c=p;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(p);break}c[2]&&a.ops.pop(),a.trys.pop();continue}p=l.call(o,a)}catch(v){p=[6,v],u=0}finally{s=c=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},rG=function(o,l){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(l,a)&&I_(l,o,a)},I_=Object.create?function(o,l,a,s){s===void 0&&(s=a);var u=Object.getOwnPropertyDescriptor(l,a);(!u||("get"in u?!l.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return l[a]}}),Object.defineProperty(o,s,u)}:function(o,l,a,s){s===void 0&&(s=a),o[s]=l[a]},R_=function(o){var l=typeof Symbol=="function"&&Symbol.iterator,a=l&&o[l],s=0;if(a)return a.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},VM=function(o,l){var a=typeof Symbol=="function"&&o[Symbol.iterator];if(!a)return o;var s=a.call(o),u,c=[],f;try{for(;(l===void 0||l-- >0)&&!(u=s.next()).done;)c.push(u.value)}catch(h){f={error:h}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return c},nG=function(){for(var o=[],l=0;l<arguments.length;l++)o=o.concat(VM(arguments[l]));return o},iG=function(){for(var o=0,l=0,a=arguments.length;l<a;l++)o+=arguments[l].length;for(var s=Array(o),u=0,l=0;l<a;l++)for(var c=arguments[l],f=0,h=c.length;f<h;f++,u++)s[u]=c[f];return s},oG=function(o,l,a){if(a||arguments.length===2)for(var s=0,u=l.length,c;s<u;s++)(c||!(s in l))&&(c||(c=Array.prototype.slice.call(l,0,s)),c[s]=l[s]);return o.concat(c||Array.prototype.slice.call(l))},th=function(o){return this instanceof th?(this.v=o,this):new th(o)},lG=function(o,l,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(o,l||[]),u,c=[];return u=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",f),u[Symbol.asyncIterator]=function(){return this},u;function f(L){return function(S){return Promise.resolve(S).then(L,b)}}function h(L,S){s[L]&&(u[L]=function(P){return new Promise(function(y,z){c.push([L,P,y,z])>1||d(L,P)})},S&&(u[L]=S(u[L])))}function d(L,S){try{p(s[L](S))}catch(P){C(c[0][3],P)}}function p(L){L.value instanceof th?Promise.resolve(L.value.v).then(v,b):C(c[0][2],L)}function v(L){d("next",L)}function b(L){d("throw",L)}function C(L,S){L(S),c.shift(),c.length&&d(c[0][0],c[0][1])}},aG=function(o){var l,a;return l={},s("next"),s("throw",function(u){throw u}),s("return"),l[Symbol.iterator]=function(){return this},l;function s(u,c){l[u]=o[u]?function(f){return(a=!a)?{value:th(o[u](f)),done:!1}:c?c(f):f}:c}},sG=function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=o[Symbol.asyncIterator],a;return l?l.call(o):(o=typeof R_=="function"?R_(o):o[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(c){a[c]=o[c]&&function(f){return new Promise(function(h,d){f=o[c](f),u(h,d,f.done,f.value)})}}function u(c,f,h,d){Promise.resolve(d).then(function(p){c({value:p,done:h})},f)}},uG=function(o,l){return Object.defineProperty?Object.defineProperty(o,"raw",{value:l}):o.raw=l,o};var t=Object.create?function(o,l){Object.defineProperty(o,"default",{enumerable:!0,value:l})}:function(o,l){o.default=l},n=function(o){return n=Object.getOwnPropertyNames||function(l){var a=[];for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&(a[a.length]=s);return a},n(o)};cG=function(o){if(o&&o.__esModule)return o;var l={};if(o!=null)for(var a=n(o),s=0;s<a.length;s++)a[s]!=="default"&&I_(l,o,a[s]);return t(l,o),l},fG=function(o){return o&&o.__esModule?o:{default:o}},hG=function(o,l,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof l=="function"?o!==l||!s:!l.has(o))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(o):s?s.value:l.get(o)},dG=function(o,l,a,s,u){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof l=="function"?o!==l||!u:!l.has(o))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?u.call(o,a):u?u.value=a:l.set(o,a),a},mG=function(o,l){if(l===null||typeof l!="object"&&typeof l!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof o=="function"?l===o:o.has(l)},gG=function(o,l,a){if(l!=null){if(typeof l!="object"&&typeof l!="function")throw new TypeError("Object expected.");var s,u;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=l[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=l[Symbol.dispose],a&&(u=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");u&&(s=function(){try{u.call(this)}catch(c){return Promise.reject(c)}}),o.stack.push({value:l,dispose:s,async:a})}else a&&o.stack.push({async:!0});return l};var i=typeof SuppressedError=="function"?SuppressedError:function(o,l,a){var s=new Error(a);return s.name="SuppressedError",s.error=o,s.suppressed=l,s};pG=function(o){function l(c){o.error=o.hasError?new i(c,o.error,"An error was suppressed during disposal."):c,o.hasError=!0}var a,s=0;function u(){for(;a=o.stack.pop();)try{if(!a.async&&s===1)return s=0,o.stack.push(a),Promise.resolve().then(u);if(a.dispose){var c=a.dispose.call(a.value);if(a.async)return s|=2,Promise.resolve(c).then(u,function(f){return l(f),u()})}else s|=1}catch(f){l(f)}if(s===1)return o.hasError?Promise.reject(o.error):Promise.resolve();if(o.hasError)throw o.error}return u()},_G=function(o,l){return typeof o=="string"&&/^\.\.?\//.test(o)?o.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(a,s,u,c,f){return s?l?".jsx":".js":u&&(!c||!f)?a:u+c+"."+f.toLowerCase()+"js"}):o},r("__extends",qW),r("__assign",UW),r("__rest",WW),r("__decorate",GW),r("__param",YW),r("__esDecorate",KW),r("__runInitializers",JW),r("__propKey",XW),r("__setFunctionName",QW),r("__metadata",$W),r("__awaiter",eG),r("__generator",tG),r("__exportStar",rG),r("__createBinding",I_),r("__values",R_),r("__read",VM),r("__spread",nG),r("__spreadArrays",iG),r("__spreadArray",oG),r("__await",th),r("__asyncGenerator",lG),r("__asyncDelegator",aG),r("__asyncValues",sG),r("__makeTemplateObject",uG),r("__importStar",cG),r("__importDefault",fG),r("__classPrivateFieldGet",hG),r("__classPrivateFieldSet",dG),r("__classPrivateFieldIn",mG),r("__addDisposableResource",gG),r("__disposeResources",pG),r("__rewriteRelativeImportExtension",_G)})});var n8e={};r9(n8e,{default:()=>r8e});module.exports=CY(n8e);var Sr=require("obsidian"),hA=wr(xb());function wY(r,e,t,n){function i(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function a(c){try{u(n.next(c))}catch(f){l(f)}}function s(c){try{u(n.throw(c))}catch(f){l(f)}}function u(c){c.done?o(c.value):i(c.value).then(a,s)}u((n=n.apply(r,e||[])).next())})}var qb="callout-manager",vA="v1";function CA(r){var e;return wY(this,void 0,void 0,function*(){let t=(e=r==null?void 0:r.app)!==null&&e!==void 0?e:globalThis.app,{plugins:n}=t;if(!n.enabledPlugins.has(qb))return;let i=yield new Promise((o,l)=>{let a=n.plugins[qb];if(a!==void 0)return o(a);let s=setInterval(()=>{let u=n.plugins[qb];u!==void 0&&(clearInterval(s),o(u))},10)});return i.newApiHandle(vA,r,()=>{i.destroyApiHandle(vA,r)})})}var Er=require("obsidian");j9();Z3();zw();j9();Z3();U9();T3();$0();Ew();ti();Z3();Aw();var Z2=require("obsidian");var bz=wr(require("node:http"),1),vz=wr(require("node:https"),1),i2=wr(require("node:zlib"),1),ho=wr(require("node:stream"),1),J3=require("node:buffer");function yre(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let e=r.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let t=r.substring(5,e).split(";"),n="",i=!1,o=t[0]||"text/plain",l=o;for(let c=1;c<t.length;c++)t[c]==="base64"?i=!0:t[c]&&(l+=`;${t[c]}`,t[c].indexOf("charset=")===0&&(n=t[c].substring(8)));!t[0]&&!n.length&&(l+=";charset=US-ASCII",n="US-ASCII");let a=i?"base64":"ascii",s=unescape(r.substring(e+1)),u=Buffer.from(s,a);return u.type=o,u.typeFull=l,u.charset=n,u}var DI=yre;var Ko=wr(require("node:stream"),1),Fs=require("node:util"),fo=require("node:buffer");j3();Xm();var Zs=class extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ji=class extends Zs{constructor(e,t,n){super(e,t),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var Qm=Symbol.toStringTag,Bw=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Qm]==="URLSearchParams",W3=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Qm]),JI=r=>typeof r=="object"&&(r[Qm]==="AbortSignal"||r[Qm]==="EventTarget"),XI=(r,e)=>{let t=new URL(e).hostname,n=new URL(r).hostname;return t===n||t.endsWith(`.${n}`)},QI=(r,e)=>{let t=new URL(e).protocol,n=new URL(r).protocol;return t===n};var Bre=(0,Fs.promisify)(Ko.default.pipeline),xi=Symbol("Body internals"),ka=class{constructor(e,{size:t=0}={}){let n=null;e===null?e=null:Bw(e)?e=fo.Buffer.from(e.toString()):W3(e)||fo.Buffer.isBuffer(e)||(Fs.types.isAnyArrayBuffer(e)?e=fo.Buffer.from(e):ArrayBuffer.isView(e)?e=fo.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Ko.default||(e instanceof r2?(e=KI(e),n=e.type.split("=")[1]):e=fo.Buffer.from(String(e))));let i=e;fo.Buffer.isBuffer(e)?i=Ko.default.Readable.from(e):W3(e)&&(i=Ko.default.Readable.from(e.stream())),this[xi]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=t,e instanceof Ko.default&&e.on("error",o=>{let l=o instanceof Zs?o:new ji(`Invalid response body while trying to fetch ${this.url}: ${o.message}`,"system",o);this[xi].error=l})}get body(){return this[xi].stream}get bodyUsed(){return this[xi].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:t,byteLength:n}=await Fw(this);return e.slice(t,t+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new r2,i=new URLSearchParams(await this.text());for(let[o,l]of i)n.append(o,l);return n}let{toFormData:t}=await Promise.resolve().then(()=>(nz(),rz));return t(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[xi].body&&this[xi].body.type||"",t=await this.arrayBuffer();return new Ds([t],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Fw(this);return new TextDecoder().decode(e)}buffer(){return Fw(this)}};ka.prototype.buffer=(0,Fs.deprecate)(ka.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ka.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Fs.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Fw(r){if(r[xi].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[xi].disturbed=!0,r[xi].error)throw r[xi].error;let{body:e}=r;if(e===null)return fo.Buffer.alloc(0);if(!(e instanceof Ko.default))return fo.Buffer.alloc(0);let t=[],n=0;try{for await(let i of e){if(r.size>0&&n+i.length>r.size){let o=new ji(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw e.destroy(o),o}n+=i.length,t.push(i)}}catch(i){throw i instanceof Zs?i:new ji(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return t.every(i=>typeof i=="string")?fo.Buffer.from(t.join("")):fo.Buffer.concat(t,n)}catch(i){throw new ji(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new ji(`Premature close of server response while trying to fetch ${r.url}`)}var Q9=(r,e)=>{let t,n,{body:i}=r[xi];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Ko.default&&typeof i.getBoundary!="function"&&(t=new Ko.PassThrough({highWaterMark:e}),n=new Ko.PassThrough({highWaterMark:e}),i.pipe(t),i.pipe(n),r[xi].stream=t,i=n),i},Dre=(0,Fs.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),r6=(r,e)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Bw(r)?"application/x-www-form-urlencoded;charset=UTF-8":W3(r)?r.type||null:fo.Buffer.isBuffer(r)||Fs.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof r2?`multipart/form-data; boundary=${e[xi].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Dre(r)}`:r instanceof Ko.default?null:"text/plain;charset=UTF-8",iz=r=>{let{body:e}=r[xi];return e===null?0:W3(e)?e.size:fo.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},oz=async(r,{body:e})=>{e===null?r.end():await Bre(e,r)};var jw=require("node:util"),Y3=wr(require("node:http"),1),n6=typeof Y3.default.validateHeaderName=="function"?Y3.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let e=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},xw=typeof Y3.default.validateHeaderValue=="function"?Y3.default.validateHeaderValue:(r,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let t=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}},Ln=class r extends URLSearchParams{constructor(e){let t=[];if(e instanceof r){let n=e.raw();for(let[i,o]of Object.entries(n))t.push(...o.map(l=>[i,l]))}else if(e!=null)if(typeof e=="object"&&!jw.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)t.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");t=[...e].map(i=>{if(typeof i!="object"||jw.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return t=t.length>0?t.map(([n,i])=>(n6(n),xw(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(t),new Proxy(this,{get(n,i,o){switch(i){case"append":case"set":return(l,a)=>(n6(l),xw(l,String(a)),URLSearchParams.prototype[i].call(n,String(l).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return l=>(n6(l),URLSearchParams.prototype[i].call(n,String(l).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,o)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let t=this.getAll(e);if(t.length===0)return null;let n=t.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,t=void 0){for(let n of this.keys())Reflect.apply(e,t,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{let n=this.getAll(t);return t==="host"?e[t]=n[0]:e[t]=n.length>1?n:n[0],e},{})}};Object.defineProperties(Ln.prototype,["get","entries","forEach","values"].reduce((r,e)=>(r[e]={enumerable:!0},r),{}));function lz(r=[]){return new Ln(r.reduce((e,t,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,t])=>{try{return n6(e),xw(e,String(t)),!0}catch(n){return!1}}))}var Zre=new Set([301,302,303,307,308]),i6=r=>Zre.has(r);var Rl=Symbol("Response internals"),Nn=class r extends ka{constructor(e=null,t={}){super(e,t);let n=t.status!=null?t.status:200,i=new Ln(t.headers);if(e!==null&&!i.has("Content-Type")){let o=r6(e,this);o&&i.append("Content-Type",o)}this[Rl]={type:"default",url:t.url,status:n,statusText:t.statusText||"",headers:i,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[Rl].type}get url(){return this[Rl].url||""}get status(){return this[Rl].status}get ok(){return this[Rl].status>=200&&this[Rl].status<300}get redirected(){return this[Rl].counter>0}get statusText(){return this[Rl].statusText}get headers(){return this[Rl].headers}get highWaterMark(){return this[Rl].highWaterMark}clone(){return new r(Q9(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!i6(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new r(null,{headers:{location:new URL(e).toString()},status:t})}static error(){let e=new r(null,{status:0,statusText:""});return e[Rl].type="error",e}static json(e=void 0,t={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let i=new Ln(t&&t.headers);return i.has("content-type")||i.set("content-type","application/json"),new r(n,{...t,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Nn.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var gz=require("node:url"),pz=require("node:util");var az=r=>{if(r.search)return r.search;let e=r.href.length-1,t=r.hash||(r.href[e]==="#"?"#":"");return r.href[e-t.length]==="?"?"?":""};var uz=require("node:net");function sz(r,e=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",e&&(r.pathname="",r.search=""),r)}var cz=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),fz="strict-origin-when-cross-origin";function hz(r){if(!cz.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Fre(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let e=r.host.replace(/(^\[)|(]$)/g,""),t=(0,uz.isIP)(e);return t===4&&/^127\./.test(e)||t===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function $9(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Fre(r)}function dz(r,{referrerURLCallback:e,referrerOriginCallback:t}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let n=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,o=sz(i),l=sz(i,!0);o.toString().length>4096&&(o=l),e&&(o=e(o)),t&&(l=t(l));let a=new URL(r.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return l;case"unsafe-url":return o;case"strict-origin":return $9(o)&&!$9(a)?"no-referrer":l.toString();case"strict-origin-when-cross-origin":return o.origin===a.origin?o:$9(o)&&!$9(a)?"no-referrer":l;case"same-origin":return o.origin===a.origin?o:"no-referrer";case"origin-when-cross-origin":return o.origin===a.origin?o:l;case"no-referrer-when-downgrade":return $9(o)&&!$9(a)?"no-referrer":o;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function mz(r){let e=(r.get("referrer-policy")||"").split(/[,\s]+/),t="";for(let n of e)n&&cz.has(n)&&(t=n);return t}var En=Symbol("Request internals"),K3=r=>typeof r=="object"&&typeof r[En]=="object",jre=(0,pz.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Jo=class r extends ka{constructor(e,t={}){let n;if(K3(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!K3(t)&&"data"in t&&jre(),(t.body!=null||K3(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let o=t.body?t.body:K3(e)&&e.body!==null?Q9(e):null;super(o,{size:t.size||e.size||0});let l=new Ln(t.headers||e.headers||{});if(o!==null&&!l.has("Content-Type")){let u=r6(o,this);u&&l.set("Content-Type",u)}let a=K3(e)?e.signal:null;if("signal"in t&&(a=t.signal),a!=null&&!JI(a))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let s=t.referrer==null?e.referrer:t.referrer;if(s==="")s="no-referrer";else if(s){let u=new URL(s);s=/^about:(\/\/)?client$/.test(u)?"client":u}else s=void 0;this[En]={method:i,redirect:t.redirect||e.redirect||"follow",headers:l,parsedURL:n,signal:a,referrer:s},this.follow=t.follow===void 0?e.follow===void 0?20:e.follow:t.follow,this.compress=t.compress===void 0?e.compress===void 0?!0:e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[En].method}get url(){return(0,gz.format)(this[En].parsedURL)}get headers(){return this[En].headers}get redirect(){return this[En].redirect}get signal(){return this[En].signal}get referrer(){if(this[En].referrer==="no-referrer")return"";if(this[En].referrer==="client")return"about:client";if(this[En].referrer)return this[En].referrer.toString()}get referrerPolicy(){return this[En].referrerPolicy}set referrerPolicy(e){this[En].referrerPolicy=hz(e)}clone(){return new r(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Jo.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var _z=r=>{let{parsedURL:e}=r[En],t=new Ln(r[En].headers);t.has("Accept")||t.set("Accept","*/*");let n=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(n="0"),r.body!==null){let a=iz(r);typeof a=="number"&&!Number.isNaN(a)&&(n=String(a))}n&&t.set("Content-Length",n),r.referrerPolicy===""&&(r.referrerPolicy=fz),r.referrer&&r.referrer!=="no-referrer"?r[En].referrer=dz(r):r[En].referrer="no-referrer",r[En].referrer instanceof URL&&t.set("Referer",r.referrer),t.has("User-Agent")||t.set("User-Agent","node-fetch"),r.compress&&!t.has("Accept-Encoding")&&t.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=r;typeof i=="function"&&(i=i(e));let o=az(e),l={path:e.pathname+o,method:r.method,headers:t[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:e,options:l}};var o6=class extends Zs{constructor(e,t="aborted"){super(e,t)}};Xm();Dw();var xre=new Set(["data:","http:","https:"]);async function js(r,e){return new Promise((t,n)=>{let i=new Jo(r,e),{parsedURL:o,options:l}=_z(i);if(!xre.has(o.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${o.protocol.replace(/:$/,"")}" is not supported.`);if(o.protocol==="data:"){let p=DI(i.url),v=new Nn(p,{headers:{"Content-Type":p.typeFull}});t(v);return}let a=(o.protocol==="https:"?vz.default:bz.default).request,{signal:s}=i,u=null,c=()=>{let p=new o6("The operation was aborted.");n(p),i.body&&i.body instanceof ho.default.Readable&&i.body.destroy(p),!(!u||!u.body)&&u.body.emit("error",p)};if(s&&s.aborted){c();return}let f=()=>{c(),d()},h=a(o.toString(),l);s&&s.addEventListener("abort",f);let d=()=>{h.abort(),s&&s.removeEventListener("abort",f)};h.on("error",p=>{n(new ji(`request to ${i.url} failed, reason: ${p.message}`,"system",p)),d()}),qre(h,p=>{u&&u.body&&u.body.destroy(p)}),process.version<"v14"&&h.on("socket",p=>{let v;p.prependListener("end",()=>{v=p._eventsCount}),p.prependListener("close",b=>{if(u&&v<p._eventsCount&&!b){let C=new Error("Premature close");C.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",C)}})}),h.on("response",p=>{h.setTimeout(0);let v=lz(p.rawHeaders);if(i6(p.statusCode)){let P=v.get("Location"),y=null;try{y=P===null?null:new URL(P,i.url)}catch(z){if(i.redirect!=="manual"){n(new ji(`uri requested responds with an invalid redirect URL: ${P}`,"invalid-redirect")),d();return}}switch(i.redirect){case"error":n(new ji(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),d();return;case"manual":break;case"follow":{if(y===null)break;if(i.counter>=i.follow){n(new ji(`maximum redirect reached at: ${i.url}`,"max-redirect")),d();return}let z={headers:new Ln(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:Q9(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!XI(i.url,y)||!QI(i.url,y))for(let J of["authorization","www-authenticate","cookie","cookie2"])z.headers.delete(J);if(p.statusCode!==303&&i.body&&e.body instanceof ho.default.Readable){n(new ji("Cannot follow redirect with body being a readable stream","unsupported-redirect")),d();return}(p.statusCode===303||(p.statusCode===301||p.statusCode===302)&&i.method==="POST")&&(z.method="GET",z.body=void 0,z.headers.delete("content-length"));let G=mz(v);G&&(z.referrerPolicy=G),t(js(new Jo(y,z))),d();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}s&&p.once("end",()=>{s.removeEventListener("abort",f)});let b=(0,ho.pipeline)(p,new ho.PassThrough,P=>{P&&n(P)});process.version<"v12.10"&&p.on("aborted",f);let C={url:i.url,status:p.statusCode,statusText:p.statusMessage,headers:v,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},L=v.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||L===null||p.statusCode===204||p.statusCode===304){u=new Nn(b,C),t(u);return}let S={flush:i2.default.Z_SYNC_FLUSH,finishFlush:i2.default.Z_SYNC_FLUSH};if(L==="gzip"||L==="x-gzip"){b=(0,ho.pipeline)(b,i2.default.createGunzip(S),P=>{P&&n(P)}),u=new Nn(b,C),t(u);return}if(L==="deflate"||L==="x-deflate"){let P=(0,ho.pipeline)(p,new ho.PassThrough,y=>{y&&n(y)});P.once("data",y=>{(y[0]&15)===8?b=(0,ho.pipeline)(b,i2.default.createInflate(),z=>{z&&n(z)}):b=(0,ho.pipeline)(b,i2.default.createInflateRaw(),z=>{z&&n(z)}),u=new Nn(b,C),t(u)}),P.once("end",()=>{u||(u=new Nn(b,C),t(u))});return}if(L==="br"){b=(0,ho.pipeline)(b,i2.default.createBrotliDecompress(),P=>{P&&n(P)}),u=new Nn(b,C),t(u);return}u=new Nn(b,C),t(u)}),oz(h,i).catch(n)})}function qre(r,e){let t=J3.Buffer.from(`0\r
\r
`),n=!1,i=!1,o;r.on("response",l=>{let{headers:a}=l;n=a["transfer-encoding"]==="chunked"&&!a["content-length"]}),r.on("socket",l=>{let a=()=>{if(n&&!i){let u=new Error("Premature close");u.code="ERR_STREAM_PREMATURE_CLOSE",e(u)}},s=u=>{i=J3.Buffer.compare(u.slice(-5),t)===0,!i&&o&&(i=J3.Buffer.compare(o.slice(-3),t.slice(0,3))===0&&J3.Buffer.compare(u.slice(-2),t.slice(3))===0),o=u};l.prependListener("close",a),l.on("data",s),r.on("close",()=>{l.removeListener("close",a),l.removeListener("data",s)})})}X0();W9();L9();var Ure=typeof window=="object"?window:{},zt="0123456789abcdef".split(""),Wre=[-2147483648,8388608,32768,128],Il=[24,16,8,0];var Sn=[];function zl(r){r?(Sn[0]=Sn[16]=Sn[1]=Sn[2]=Sn[3]=Sn[4]=Sn[5]=Sn[6]=Sn[7]=Sn[8]=Sn[9]=Sn[10]=Sn[11]=Sn[12]=Sn[13]=Sn[14]=Sn[15]=0,this.blocks=Sn):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}zl.prototype.update=function(r){if(!this.finalized){var e=typeof r!="string";e&&r.constructor===Ure.ArrayBuffer&&(r=new Uint8Array(r));for(var t,n=0,i,o=r.length||0,l=this.blocks;n<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)for(i=this.start;n<o&&i<64;++n)l[i>>2]|=r[n]<<Il[i++&3];else for(i=this.start;n<o&&i<64;++n)t=r.charCodeAt(n),t<128?l[i>>2]|=t<<Il[i++&3]:t<2048?(l[i>>2]|=(192|t>>6)<<Il[i++&3],l[i>>2]|=(128|t&63)<<Il[i++&3]):t<55296||t>=57344?(l[i>>2]|=(224|t>>12)<<Il[i++&3],l[i>>2]|=(128|t>>6&63)<<Il[i++&3],l[i>>2]|=(128|t&63)<<Il[i++&3]):(t=65536+((t&1023)<<10|r.charCodeAt(++n)&1023),l[i>>2]|=(240|t>>18)<<Il[i++&3],l[i>>2]|=(128|t>>12&63)<<Il[i++&3],l[i>>2]|=(128|t>>6&63)<<Il[i++&3],l[i>>2]|=(128|t&63)<<Il[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=l[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};zl.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=Wre[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}};zl.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4,o,l,a,s=this.blocks;for(l=16;l<80;++l)a=s[l-3]^s[l-8]^s[l-14]^s[l-16],s[l]=a<<1|a>>>31;for(l=0;l<20;l+=5)o=e&t|~e&n,a=r<<5|r>>>27,i=a+o+i+1518500249+s[l]<<0,e=e<<30|e>>>2,o=r&e|~r&t,a=i<<5|i>>>27,n=a+o+n+1518500249+s[l+1]<<0,r=r<<30|r>>>2,o=i&r|~i&e,a=n<<5|n>>>27,t=a+o+t+1518500249+s[l+2]<<0,i=i<<30|i>>>2,o=n&i|~n&r,a=t<<5|t>>>27,e=a+o+e+1518500249+s[l+3]<<0,n=n<<30|n>>>2,o=t&n|~t&i,a=e<<5|e>>>27,r=a+o+r+1518500249+s[l+4]<<0,t=t<<30|t>>>2;for(;l<40;l+=5)o=e^t^n,a=r<<5|r>>>27,i=a+o+i+1859775393+s[l]<<0,e=e<<30|e>>>2,o=r^e^t,a=i<<5|i>>>27,n=a+o+n+1859775393+s[l+1]<<0,r=r<<30|r>>>2,o=i^r^e,a=n<<5|n>>>27,t=a+o+t+1859775393+s[l+2]<<0,i=i<<30|i>>>2,o=n^i^r,a=t<<5|t>>>27,e=a+o+e+1859775393+s[l+3]<<0,n=n<<30|n>>>2,o=t^n^i,a=e<<5|e>>>27,r=a+o+r+1859775393+s[l+4]<<0,t=t<<30|t>>>2;for(;l<60;l+=5)o=e&t|e&n|t&n,a=r<<5|r>>>27,i=a+o+i-1894007588+s[l]<<0,e=e<<30|e>>>2,o=r&e|r&t|e&t,a=i<<5|i>>>27,n=a+o+n-1894007588+s[l+1]<<0,r=r<<30|r>>>2,o=i&r|i&e|r&e,a=n<<5|n>>>27,t=a+o+t-1894007588+s[l+2]<<0,i=i<<30|i>>>2,o=n&i|n&r|i&r,a=t<<5|t>>>27,e=a+o+e-1894007588+s[l+3]<<0,n=n<<30|n>>>2,o=t&n|t&i|n&i,a=e<<5|e>>>27,r=a+o+r-1894007588+s[l+4]<<0,t=t<<30|t>>>2;for(;l<80;l+=5)o=e^t^n,a=r<<5|r>>>27,i=a+o+i-899497514+s[l]<<0,e=e<<30|e>>>2,o=r^e^t,a=i<<5|i>>>27,n=a+o+n-899497514+s[l+1]<<0,r=r<<30|r>>>2,o=i^r^e,a=n<<5|n>>>27,t=a+o+t-899497514+s[l+2]<<0,i=i<<30|i>>>2,o=n^i^r,a=t<<5|t>>>27,e=a+o+e-899497514+s[l+3]<<0,n=n<<30|n>>>2,o=t^n^i,a=e<<5|e>>>27,r=a+o+r-899497514+s[l+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0};zl.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4;return zt[r>>28&15]+zt[r>>24&15]+zt[r>>20&15]+zt[r>>16&15]+zt[r>>12&15]+zt[r>>8&15]+zt[r>>4&15]+zt[r&15]+zt[e>>28&15]+zt[e>>24&15]+zt[e>>20&15]+zt[e>>16&15]+zt[e>>12&15]+zt[e>>8&15]+zt[e>>4&15]+zt[e&15]+zt[t>>28&15]+zt[t>>24&15]+zt[t>>20&15]+zt[t>>16&15]+zt[t>>12&15]+zt[t>>8&15]+zt[t>>4&15]+zt[t&15]+zt[n>>28&15]+zt[n>>24&15]+zt[n>>20&15]+zt[n>>16&15]+zt[n>>12&15]+zt[n>>8&15]+zt[n>>4&15]+zt[n&15]+zt[i>>28&15]+zt[i>>24&15]+zt[i>>20&15]+zt[i>>16&15]+zt[i>>12&15]+zt[i>>8&15]+zt[i>>4&15]+zt[i&15]};zl.prototype.toString=zl.prototype.hex;zl.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,n=this.h3,i=this.h4;return[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255]};zl.prototype.array=zl.prototype.digest;zl.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(20),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),r};var qw=r=>new zl(!0).update(r).hex();Q1();var Cz=(...r)=>qw(r.join("_"));var Uw=class{},Gre=new Map,l6=class r extends Uw{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e!=null?e:new Map}lookup(e,t){var n;return Promise.resolve((n=this.cache.get(Cz(e,t)))!=null?n:null)}async update(e,t,n){this.cache.set(Cz(e,t),n)}static global(){return new r(Gre)}};P3();Q1();o3();var Lz=wr(kz(),1);var tne=Object.defineProperty,rne=(r,e,t)=>e in r?tne(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,nne=(r,e,t)=>(rne(r,typeof e!="symbol"?e+"":e,t),t);function ine(r,e){let t=Array.from({length:r.length},(n,i)=>({start:i,end:i+1}));for(;t.length>1;){let n=null;for(let i=0;i<t.length-1;i++){let o=r.slice(t[i].start,t[i+1].end),l=e.get(o.join(","));l!=null&&(n==null||l<n[0])&&(n=[l,i])}if(n!=null){let i=n[1];t[i]={start:t[i].start,end:t[i+1].end},t.splice(i+1,1)}else break}return t}function one(r,e){return r.length===1?[e.get(r.join(","))]:ine(r,e).map(t=>e.get(r.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function lne(r){return r.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Gw=class{constructor(r,e){ze(this,"specialTokens");ze(this,"inverseSpecialTokens");ze(this,"patStr");ze(this,"textEncoder",new TextEncoder);ze(this,"textDecoder",new TextDecoder("utf-8"));ze(this,"rankMap",new Map);ze(this,"textMap",new Map);this.patStr=r.pat_str;let t=r.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{let[o,l,...a]=i.split(" "),s=Number.parseInt(l,10);return a.forEach((u,c)=>n[u]=s+c),n},{});for(let[n,i]of Object.entries(t)){let o=Lz.default.toByteArray(n);this.rankMap.set(o.join(","),i),this.textMap.set(i,o)}this.specialTokens={...r.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,o])=>(n[o]=this.textEncoder.encode(i),n),{})}encode(r,e=[],t="all"){var u;let n=new RegExp(this.patStr,"ug"),i=Gw.specialTokenRegex(Object.keys(this.specialTokens)),o=[],l=new Set(e==="all"?Object.keys(this.specialTokens):e),a=new Set(t==="all"?Object.keys(this.specialTokens).filter(c=>!l.has(c)):t);if(a.size>0){let c=Gw.specialTokenRegex([...a]),f=r.match(c);if(f!=null)throw new Error(`The text contains a special token that is not allowed: ${f[0]}`)}let s=0;for(;;){let c=null,f=s;for(;i.lastIndex=f,c=i.exec(r),!(c==null||l.has(c[0]));)f=c.index+1;let h=(u=c==null?void 0:c.index)!=null?u:r.length;for(let p of r.substring(s,h).matchAll(n)){let v=this.textEncoder.encode(p[0]),b=this.rankMap.get(v.join(","));if(b!=null){o.push(b);continue}o.push(...one(v,this.rankMap))}if(c==null)break;let d=this.specialTokens[c[0]];o.push(d),s=c.index+c[0].length}return o}decode(r){var o;let e=[],t=0;for(let l=0;l<r.length;++l){let a=r[l],s=(o=this.textMap.get(a))!=null?o:this.inverseSpecialTokens[a];s!=null&&(e.push(s),t+=s.length)}let n=new Uint8Array(t),i=0;for(let l of e)n.set(l,i),i+=l.length;return this.textDecoder.decode(n)}},s6=Gw;nne(s6,"specialTokenRegex",r=>new RegExp(r.map(e=>lne(e)).join("|"),"g"));function Yw(r){switch(r){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}o3();var u6={},ane=new va({});async function Ez(r){return r in u6||(u6[r]=ane.fetch(`https://tiktoken.pages.dev/js/${r}.json`).then(e=>e.json()).then(e=>new s6(e)).catch(e=>{throw delete u6[r],e})),await u6[r]}async function Sz(r){return Ez(Yw(r))}ti();var sne=r=>r.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":r.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":r.startsWith("gpt-4-32k")?"gpt-4-32k":r.startsWith("gpt-4-")?"gpt-4":r.startsWith("gpt-4o")?"gpt-4o":r;function Kw(r){return typeof r!="object"||!r?!1:!!("type"in r&&r.type==="function"&&"function"in r&&typeof r.function=="object"&&r.function&&"name"in r.function&&"parameters"in r.function)}var une=()=>!1,X3=class extends jt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){var t,n,i;super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=(t=e.verbose)!=null?t:une(),this.callbacks=e.callbacks,this.tags=(n=e.tags)!=null?n:[],this.metadata=(i=e.metadata)!=null?i:{}}},Q3=class extends X3{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...n}){let{cache:i,...o}=n;super({callbacks:e!=null?e:t,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof i=="object"?this.cache=i:i?this.cache=l6.global():this.cache=void 0,this.caller=new va(n!=null?n:{})}async getNumTokens(e){if(typeof e!="string")return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Sz("modelName"in this?sne(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return t}static _convertInputToPromptValue(e){return typeof e=="string"?new Z9(e):Array.isArray(e)?new F9(e.map(Ll)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){let n={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([l,a])=>a!==void 0).map(([l,a])=>`${l}:${JSON.stringify(a)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}};Y0();ti();_a();_a();ti();ga();var Ea=class extends jt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){let n=Vt(t);return this.func&&await this.func(e,n),this._callWithConfig(i=>Promise.resolve(i),e,n)}async*transform(e,t){let n=Vt(t),i,o=!0;for await(let l of this._transformStreamWithConfig(e,a=>a,n))if(yield l,o)if(i===void 0)i=l;else try{i=$n(i,l)}catch(a){i=void 0,o=!1}this.func&&i!==void 0&&await this.func(i,n)}static assign(e){return new D9(new iu({steps:e}))}};U1();function xs(r){var n,i;if(!r||typeof r!="object"||Array.isArray(r))return!1;let e=r;return e._def||Object.values(Gn.ZodFirstPartyTypeKind).includes((i=(n=e.constructor)==null?void 0:n.name)!=null?i:"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}Yh();function Jw(r){let e=[];for(let t of r){let n=t;if(Array.isArray(t.content))for(let i=0;i<t.content.length;i++){let o=t.content[i];(iR(o)||oR(o))&&n===t&&(n=new t.constructor({...n,content:[...t.content.slice(0,i),lR(o),...t.content.slice(i+1)]}))}e.push(n)}return e}var e5=class r extends Q3{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){let[t,n]=super._separateRunnableConfigFromCallOptions(e);return n.signal=t.signal,[t,n]}async invoke(e,t){let n=r._convertInputToPromptValue(e);return(await this.generatePrompt([n],t,t==null?void 0:t.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,n){throw new Error("Not implemented.")}async*_streamIterator(e,t){var n;if(this._streamResponseChunks===r.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{let o=r._convertInputToPromptValue(e).toChatMessages(),[l,a]=this._separateRunnableConfigFromCallOptionsCompat(t),s={...l.metadata,...this.getLsParams(a)},u=await cn.configure(l.callbacks,this.callbacks,l.tags,this.tags,s,this.metadata,{verbose:this.verbose}),c={options:a,invocation_params:this==null?void 0:this.invocationParams(a),batch_size:1},f=await(u==null?void 0:u.handleChatModelStart(this.toJSON(),[Jw(o)],l.runId,void 0,c,void 0,void 0,l.runName)),h,d;try{for await(let p of this._streamResponseChunks(o,a,f==null?void 0:f[0])){if(p.message.id==null){let v=(n=f==null?void 0:f.at(0))==null?void 0:n.runId;v!=null&&p.message._updateId(`run-${v}`)}p.message.response_metadata={...p.generationInfo,...p.message.response_metadata},yield p.message,h?h=h.concat(p):h=p,cC(p.message)&&p.message.usage_metadata!==void 0&&(d={tokenUsage:{promptTokens:p.message.usage_metadata.input_tokens,completionTokens:p.message.usage_metadata.output_tokens,totalTokens:p.message.usage_metadata.total_tokens}})}}catch(p){throw await Promise.all((f!=null?f:[]).map(v=>v==null?void 0:v.handleLLMError(p))),p}await Promise.all((f!=null?f:[]).map(p=>p==null?void 0:p.handleLLMEnd({generations:[[h]],llmOutput:d})))}}getLsParams(e){let t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(e,t,n,i){var f,h;let o=e.map(d=>d.map(Ll)),l;if(i!==void 0&&i.length===o.length)l=i;else{let d={...n.metadata,...this.getLsParams(t)},p=await cn.configure(n.callbacks,this.callbacks,n.tags,this.tags,d,this.metadata,{verbose:this.verbose}),v={options:t,invocation_params:this==null?void 0:this.invocationParams(t),batch_size:1};l=await(p==null?void 0:p.handleChatModelStart(this.toJSON(),o.map(Jw),n.runId,void 0,v,void 0,void 0,n.runName))}let a=[],s=[];if(!!(l!=null&&l[0].handlers.find(eC))&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==r.prototype._streamResponseChunks)try{let d=await this._streamResponseChunks(o[0],t,l==null?void 0:l[0]),p,v;for await(let b of d){if(b.message.id==null){let C=(f=l==null?void 0:l.at(0))==null?void 0:f.runId;C!=null&&b.message._updateId(`run-${C}`)}p===void 0?p=b:p=$n(p,b),cC(b.message)&&b.message.usage_metadata!==void 0&&(v={tokenUsage:{promptTokens:b.message.usage_metadata.input_tokens,completionTokens:b.message.usage_metadata.output_tokens,totalTokens:b.message.usage_metadata.total_tokens}})}if(p===void 0)throw new Error("Received empty response from chat model call.");a.push([p]),await(l==null?void 0:l[0].handleLLMEnd({generations:a,llmOutput:v}))}catch(d){throw await(l==null?void 0:l[0].handleLLMError(d)),d}else{let d=await Promise.allSettled(o.map((p,v)=>this._generate(p,{...t,promptIndex:v},l==null?void 0:l[v])));await Promise.all(d.map(async(p,v)=>{var b,C,L;if(p.status==="fulfilled"){let S=p.value;for(let P of S.generations){if(P.message.id==null){let y=(b=l==null?void 0:l.at(0))==null?void 0:b.runId;y!=null&&P.message._updateId(`run-${y}`)}P.message.response_metadata={...P.generationInfo,...P.message.response_metadata}}return S.generations.length===1&&(S.generations[0].message.response_metadata={...S.llmOutput,...S.generations[0].message.response_metadata}),a[v]=S.generations,s[v]=S.llmOutput,(C=l==null?void 0:l[v])==null?void 0:C.handleLLMEnd({generations:[S.generations],llmOutput:S.llmOutput})}else return await((L=l==null?void 0:l[v])==null?void 0:L.handleLLMError(p.reason)),Promise.reject(p.reason)}))}let c={generations:a,llmOutput:s.length?(h=this._combineLLMOutput)==null?void 0:h.call(this,...s):void 0};return Object.defineProperty(c,wm,{value:l?{runIds:l==null?void 0:l.map(d=>d.runId)}:void 0,configurable:!0}),c}async _generateCached({messages:e,cache:t,llmStringKey:n,parsedOptions:i,handledOptions:o}){let l=e.map(b=>b.map(Ll)),a={...o.metadata,...this.getLsParams(i)},s=await cn.configure(o.callbacks,this.callbacks,o.tags,this.tags,a,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1},c=await(s==null?void 0:s.handleChatModelStart(this.toJSON(),l.map(Jw),o.runId,void 0,u,void 0,void 0,o.runName)),f=[],d=(await Promise.allSettled(l.map(async(b,C)=>{let L=r._convertInputToPromptValue(b).toString(),S=await t.lookup(L,n);return S==null&&f.push(C),S}))).map((b,C)=>({result:b,runManager:c==null?void 0:c[C]})).filter(({result:b})=>b.status==="fulfilled"&&b.value!=null||b.status==="rejected"),p=[];await Promise.all(d.map(async({result:b,runManager:C},L)=>{if(b.status==="fulfilled"){let S=b.value;return p[L]=S.map(P=>("message"in P&&da(P.message)&&kl(P.message)&&(P.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),P.generationInfo={...P.generationInfo,tokenUsage:{}},P)),S.length&&await(C==null?void 0:C.handleLLMNewToken(S[0].text)),C==null?void 0:C.handleLLMEnd({generations:[S]},void 0,void 0,void 0,{cached:!0})}else return await(C==null?void 0:C.handleLLMError(b.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(b.reason)}));let v={generations:p,missingPromptIndices:f,startedRunManagers:c};return Object.defineProperty(v,wm,{value:c?{runIds:c==null?void 0:c.map(b=>b.runId)}:void 0,configurable:!0}),v}async generate(e,t,n){var p,v;let i;Array.isArray(t)?i={stop:t}:i=t;let o=e.map(b=>b.map(Ll)),[l,a]=this._separateRunnableConfigFromCallOptionsCompat(i);if(l.callbacks=(p=l.callbacks)!=null?p:n,!this.cache)return this._generateUncached(o,a,l);let{cache:s}=this,u=this._getSerializedCacheKeyParametersForCall(a),{generations:c,missingPromptIndices:f,startedRunManagers:h}=await this._generateCached({messages:o,cache:s,llmStringKey:u,parsedOptions:a,handledOptions:l}),d={};if(f.length>0){let b=await this._generateUncached(f.map(C=>o[C]),a,l,h!==void 0?f.map(C=>h==null?void 0:h[C]):void 0);await Promise.all(b.generations.map(async(C,L)=>{let S=f[L];c[S]=C;let P=r._convertInputToPromptValue(o[S]).toString();return s.update(P,u,C)})),d=(v=b.llmOutput)!=null?v:{}}return{generations:c,llmOutput:d}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,n){let i=e.map(o=>o.toChatMessages());return this.generate(i,t,n)}async call(e,t,n){return(await this.generate([e.map(Ll)],t,n)).generations[0][0].message}async callPrompt(e,t,n){let i=e.toChatMessages();return this.call(i,t,n)}async predictMessages(e,t,n){return this.call(e,t,n)}async predict(e,t,n){let i=new Qn(e),o=await this.call([i],t,n);if(typeof o.content!="string")throw new Error("Cannot use predict when output is not a string.");return o.content}withStructuredOutput(e,t){var v;if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t!=null&&t.strict)throw new Error('"strict" mode is not supported for this model by default.');let n=e,i=t==null?void 0:t.name,o=(v=n.description)!=null?v:"A function available to call.",l=t==null?void 0:t.method,a=t==null?void 0:t.includeRaw;if(l==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let s=i!=null?i:"extract",u;xs(n)?u=[{type:"function",function:{name:s,description:o,parameters:Uo(n)}}]:("name"in n&&(s=n.name),u=[{type:"function",function:{name:s,description:o,parameters:n}}]);let c=this.bindTools(u),f=Ol.from(b=>{if(!b.tool_calls||b.tool_calls.length===0)throw new Error("No tool calls found in the response.");let C=b.tool_calls.find(L=>L.name===s);if(!C)throw new Error(`No tool call found with name ${s}.`);return C.args});if(!a)return c.pipe(f).withConfig({runName:"StructuredOutput"});let h=Ea.assign({parsed:(b,C)=>f.invoke(b.raw,C)}),d=Ea.assign({parsed:()=>null}),p=h.withFallbacks({fallbacks:[d]});return Hs.from([{raw:c},p]).withConfig({runName:"StructuredOutputRunnable"})}};W9();L9();D0();_a();function cne(r){return["system","assistant","user"].includes(r.role)===!1&&console.warn(`Unknown message role: ${r.role}`),r.role}function Mz(r){let e=r._getType();switch(e){case"ai":return"assistant";case"human":return"user";case"system":return"system";case"function":throw new Error("Function messages not supported");case"generic":{if(!ao.isInstance(r))throw new Error("Invalid generic chat message");return cne(r)}default:throw new Error(`Unknown message type: ${e}`)}}var c6=class extends e5{static lc_name(){return"ChatAlibabaTongyi"}get callKeys(){return["stop","signal","options"]}get lc_secrets(){return{alibabaApiKey:"ALIBABA_API_KEY"}}get lc_aliases(){}constructor(e={}){var t,n,i,o,l;if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"alibabaApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repetitionPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enableSearch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.alibabaApiKey=(t=e==null?void 0:e.alibabaApiKey)!=null?t:pr("ALIBABA_API_KEY"),!this.alibabaApiKey)throw new Error("Ali API key not found");this.apiUrl="https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation",this.lc_serializable=!0,this.streaming=(n=e.streaming)!=null?n:!1,this.prefixMessages=(i=e.prefixMessages)!=null?i:[],this.temperature=e.temperature,this.topP=e.topP,this.topK=e.topK,this.seed=e.seed,this.maxTokens=e.maxTokens,this.repetitionPenalty=e.repetitionPenalty,this.enableSearch=e.enableSearch,this.modelName=(l=(o=e==null?void 0:e.model)!=null?o:e.modelName)!=null?l:"qwen-turbo",this.model=this.modelName}invocationParams(){let e={stream:this.streaming,temperature:this.temperature,top_p:this.topP,top_k:this.topK,seed:this.seed,max_tokens:this.maxTokens,result_format:"text",enable_search:this.enableSearch};return this.streaming?e.incremental_output=!0:e.repetition_penalty=this.repetitionPenalty,e}identifyingParams(){return{model:this.model,...this.invocationParams()}}async _generate(e,t,n){let i=this.invocationParams(),o=e.map(f=>({role:Mz(f),content:f.content})),l=i.stream?await new Promise((f,h)=>{let d,p=!1,v=!1;this.completionWithRetry({model:this.model,parameters:i,input:{messages:o}},!0,t==null?void 0:t.signal,b=>{let C=JSON.parse(b.data);if(C!=null&&C.code){if(p)return;p=!0,h(new Error(C==null?void 0:C.message));return}let{text:L,finish_reason:S}=C.output;if(d?(d.output.text+=L,d.output.finish_reason=S,d.usage=C.usage):d=C,n==null||n.handleLLMNewToken(L!=null?L:""),S&&S!=="null"){if(v||p)return;v=!0,f(d)}}).catch(b=>{p||(p=!0,h(b))})}):await this.completionWithRetry({model:this.model,parameters:i,input:{messages:o}},!1,t==null?void 0:t.signal).then(f=>{if(f!=null&&f.code)throw new Error(f==null?void 0:f.message);return f}),{input_tokens:a=0,output_tokens:s=0,total_tokens:u=0}=l.usage,{text:c}=l.output;return{generations:[{text:c,message:new Hn(c)}],llmOutput:{tokenUsage:{promptTokens:a,completionTokens:s,totalTokens:u}}}}async completionWithRetry(e,t,n,i){let o=async()=>{var a;let l=await fetch(this.apiUrl,{method:"POST",headers:{...t?{Accept:"text/event-stream"}:{},Authorization:`Bearer ${this.alibabaApiKey}`,"Content-Type":"application/json"},body:JSON.stringify(e),signal:n});if(!t)return l.json();if(l.body){if(!((a=l.headers.get("content-type"))!=null&&a.startsWith("text/event-stream"))){i==null||i(new MessageEvent("message",{data:await l.text()}));return}let s=l.body.getReader(),u=new TextDecoder("utf-8"),c="",f=!0;for(;f;){let{done:h,value:d}=await s.read();if(h){f=!1;break}c+=u.decode(d);let p=!0;for(;p;){let v=c.indexOf(`
`);if(v===-1){p=!1;break}let b=c.slice(0,v);if(c=c.slice(v+1),b.startsWith("data:")){let C=new MessageEvent("message",{data:b.slice(5).trim()});i==null||i(C)}}}}};return this.caller.call(o)}async*_streamResponseChunks(e,t,n){let i={...this.invocationParams(),stream:!0,incremental_output:!0},o=e.map(a=>({role:Mz(a),content:a.content})),l=await this.caller.call(async()=>this.createTongyiStream({model:this.model,parameters:i,input:{messages:o}},t==null?void 0:t.signal));for await(let a of l){if(!a.output&&a.code)throw new Error(JSON.stringify(a));let{text:s,finish_reason:u}=a.output;yield new Ml({text:s,message:new pi({content:s}),generationInfo:u==="stop"?{finish_reason:u,request_id:a.request_id,usage:a.usage}:void 0}),await(n==null?void 0:n.handleLLMNewToken(s))}}async*createTongyiStream(e,t){let n=await fetch(this.apiUrl,{method:"POST",headers:{Authorization:`Bearer ${this.alibabaApiKey}`,Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify(e),signal:t});if(!n.ok){let a,s=await n.text();try{let u=JSON.parse(s);a=new Error(`Tongyi call failed with status code ${n.status}: ${u.error}`)}catch(u){a=new Error(`Tongyi call failed with status code ${n.status}: ${s}`)}throw a.response=n,a}if(!n.body)throw new Error("Could not begin Tongyi stream. Please check the given URL and try again.");let i=kn.fromReadableStream(n.body),o=new TextDecoder,l="";for await(let a of i){let u=(l+o.decode(a)).split(`
`);l=u.pop()||"";for(let c of u)if(c.startsWith("data:"))try{yield JSON.parse(c.slice(5).trim())}catch(f){console.warn(`Received a non-JSON parseable chunk: ${c}`)}}}_llmType(){return"alibaba_tongyi"}_combineLLMOutput(){return[]}};var f6="RFC3986",h6={RFC1738:r=>String(r).replace(/%20/g,"+"),RFC3986:r=>String(r)},Az="RFC1738";var fne=Array.isArray,Sa=(()=>{let r=[];for(let e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r})();var Xw=1024,Pz=(r,e,t,n,i)=>{if(r.length===0)return r;let o=r;if(typeof r=="symbol"?o=Symbol.prototype.toString.call(r):typeof r!="string"&&(o=String(r)),t==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let l="";for(let a=0;a<o.length;a+=Xw){let s=o.length>=Xw?o.slice(a,a+Xw):o,u=[];for(let c=0;c<s.length;++c){let f=s.charCodeAt(c);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===Az&&(f===40||f===41)){u[u.length]=s.charAt(c);continue}if(f<128){u[u.length]=Sa[f];continue}if(f<2048){u[u.length]=Sa[192|f>>6]+Sa[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=Sa[224|f>>12]+Sa[128|f>>6&63]+Sa[128|f&63];continue}c+=1,f=65536+((f&1023)<<10|s.charCodeAt(c)&1023),u[u.length]=Sa[240|f>>18]+Sa[128|f>>12&63]+Sa[128|f>>6&63]+Sa[128|f&63]}l+=u.join("")}return l};function Tz(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))}function Qw(r,e){if(fne(r)){let t=[];for(let n=0;n<r.length;n+=1)t.push(e(r[n]));return t}return e(r)}var hne=Object.prototype.hasOwnProperty,Oz={brackets(r){return String(r)+"[]"},comma:"comma",indices(r,e){return String(r)+"["+e+"]"},repeat(r){return String(r)}},Ma=Array.isArray,dne=Array.prototype.push,Rz=function(r,e){dne.apply(r,Ma(e)?e:[e])},mne=Date.prototype.toISOString,hn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Pz,encodeValuesOnly:!1,format:f6,formatter:h6[f6],indices:!1,serializeDate(r){return mne.call(r)},skipNulls:!1,strictNullHandling:!1};function gne(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="symbol"||typeof r=="bigint"}var $w={};function Iz(r,e,t,n,i,o,l,a,s,u,c,f,h,d,p,v,b,C){let L=r,S=C,P=0,y=!1;for(;(S=S.get($w))!==void 0&&!y;){let ne=S.get(r);if(P+=1,typeof ne!="undefined"){if(ne===P)throw new RangeError("Cyclic object value");y=!0}typeof S.get($w)=="undefined"&&(P=0)}if(typeof u=="function"?L=u(e,L):L instanceof Date?L=h==null?void 0:h(L):t==="comma"&&Ma(L)&&(L=Qw(L,function(ne){return ne instanceof Date?h==null?void 0:h(ne):ne})),L===null){if(o)return s&&!v?s(e,hn.encoder,b,"key",d):e;L=""}if(gne(L)||Tz(L)){if(s){let ne=v?e:s(e,hn.encoder,b,"key",d);return[(p==null?void 0:p(ne))+"="+(p==null?void 0:p(s(L,hn.encoder,b,"value",d)))]}return[(p==null?void 0:p(e))+"="+(p==null?void 0:p(String(L)))]}let z=[];if(typeof L=="undefined")return z;let G;if(t==="comma"&&Ma(L))v&&s&&(L=Qw(L,s)),G=[{value:L.length>0?L.join(",")||null:void 0}];else if(Ma(u))G=u;else{let ne=Object.keys(L);G=c?ne.sort(c):ne}let J=a?String(e).replace(/\./g,"%2E"):String(e),te=n&&Ma(L)&&L.length===1?J+"[]":J;if(i&&Ma(L)&&L.length===0)return te+"[]";for(let ne=0;ne<G.length;++ne){let Q=G[ne],ee=typeof Q=="object"&&typeof Q.value!="undefined"?Q.value:L[Q];if(l&&ee===null)continue;let se=f&&a?Q.replace(/\./g,"%2E"):Q,Pe=Ma(L)?typeof t=="function"?t(te,se):te:te+(f?"."+se:"["+se+"]");C.set(r,P);let Te=new WeakMap;Te.set($w,C),Rz(z,Iz(ee,Pe,t,n,i,o,l,a,t==="comma"&&v&&Ma(L)?null:s,u,c,f,h,d,p,v,b,Te))}return z}function pne(r=hn){if(typeof r.allowEmptyArrays!="undefined"&&typeof r.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof r.encodeDotInKeys!="undefined"&&typeof r.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(r.encoder!==null&&typeof r.encoder!="undefined"&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=r.charset||hn.charset;if(typeof r.charset!="undefined"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=f6;if(typeof r.format!="undefined"){if(!hne.call(h6,r.format))throw new TypeError("Unknown format option provided.");t=r.format}let n=h6[t],i=hn.filter;(typeof r.filter=="function"||Ma(r.filter))&&(i=r.filter);let o;if(r.arrayFormat&&r.arrayFormat in Oz?o=r.arrayFormat:"indices"in r?o=r.indices?"indices":"repeat":o=hn.arrayFormat,"commaRoundTrip"in r&&typeof r.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let l=typeof r.allowDots=="undefined"?r.encodeDotInKeys?!0:hn.allowDots:!!r.allowDots;return{addQueryPrefix:typeof r.addQueryPrefix=="boolean"?r.addQueryPrefix:hn.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof r.allowEmptyArrays=="boolean"?!!r.allowEmptyArrays:hn.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:hn.charsetSentinel,commaRoundTrip:!!r.commaRoundTrip,delimiter:typeof r.delimiter=="undefined"?hn.delimiter:r.delimiter,encode:typeof r.encode=="boolean"?r.encode:hn.encode,encodeDotInKeys:typeof r.encodeDotInKeys=="boolean"?r.encodeDotInKeys:hn.encodeDotInKeys,encoder:typeof r.encoder=="function"?r.encoder:hn.encoder,encodeValuesOnly:typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:hn.encodeValuesOnly,filter:i,format:t,formatter:n,serializeDate:typeof r.serializeDate=="function"?r.serializeDate:hn.serializeDate,skipNulls:typeof r.skipNulls=="boolean"?r.skipNulls:hn.skipNulls,sort:typeof r.sort=="function"?r.sort:null,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:hn.strictNullHandling}}function ey(r,e={}){let t=r,n=pne(e),i,o;typeof n.filter=="function"?(o=n.filter,t=o("",t)):Ma(n.filter)&&(o=n.filter,i=o);let l=[];if(typeof t!="object"||t===null)return"";let a=Oz[n.arrayFormat],s=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);let u=new WeakMap;for(let h=0;h<i.length;++h){let d=i[h];n.skipNulls&&t[d]===null||Rz(l,Iz(t[d],d,a,s,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}let c=l.join(n.delimiter),f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),c.length>0?f+c:""}var l2="4.103.0";var zz=!1,a2,ty,bne,vne,Cne,ry,wne,d6,ny,iy,oy,m6,ly;function Hz(r,e={auto:!1}){if(zz)throw new Error(`you must \`import 'openai/shims/${r.kind}'\` before importing anything else from openai`);if(a2)throw new Error(`can't \`import 'openai/shims/${r.kind}'\` after \`import 'openai/shims/${a2}'\``);zz=e.auto,a2=r.kind,ty=r.fetch,bne=r.Request,vne=r.Response,Cne=r.Headers,ry=r.FormData,wne=r.Blob,d6=r.File,ny=r.ReadableStream,iy=r.getMultipartRequestOptions,oy=r.getDefaultAgent,m6=r.fileFromPath,ly=r.isFsReadStream}var g6=class{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}};function Nz({manuallyImported:r}={}){let e=r?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n",t,n,i,o;try{t=fetch,n=Request,i=Response,o=Headers}catch(l){throw new Error(`this environment is missing the following Web Fetch API type: ${l.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:i,Headers:o,FormData:typeof FormData!="undefined"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob!="undefined"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File!="undefined"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream!="undefined"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(l,a)=>({...a,body:new g6(l)}),getDefaultAgent:l=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:l=>!1}}var ay=()=>{a2||Hz(Nz(),{auto:!0})};ay();var Ke=class extends Error{},nn=class r extends Ke{constructor(e,t,n,i){super(`${r.makeMessage(e,t,n)}`),this.status=e,this.headers=i,this.request_id=i==null?void 0:i["x-request-id"],this.error=t;let o=t;this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(e,t,n){let i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,n,i){if(!e||!i)return new qs({message:n,cause:p6(t)});let o=t==null?void 0:t.error;return e===400?new t5(e,o,n,i):e===401?new r5(e,o,n,i):e===403?new n5(e,o,n,i):e===404?new i5(e,o,n,i):e===409?new o5(e,o,n,i):e===422?new l5(e,o,n,i):e===429?new a5(e,o,n,i):e>=500?new s5(e,o,n,i):new r(e,o,n,i)}},Dr=class extends nn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},qs=class extends nn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},Hl=class extends qs{constructor({message:e}={}){super({message:e!=null?e:"Request timed out."})}},t5=class extends nn{},r5=class extends nn{},n5=class extends nn{},i5=class extends nn{},o5=class extends nn{},l5=class extends nn{},a5=class extends nn{},s5=class extends nn{},u5=class extends Ke{constructor(){super("Could not parse response content as the length limit was reached")}},c5=class extends Ke{constructor(){super("Could not parse response content as the request was rejected by the content filter")}};var _6=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},s2=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},mo,u2=class{constructor(){mo.set(this,void 0),this.buffer=new Uint8Array,_6(this,mo,null,"f")}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e,n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;let i=[],o;for(;(o=Lne(this.buffer,s2(this,mo,"f")))!=null;){if(o.carriage&&s2(this,mo,"f")==null){_6(this,mo,o.index,"f");continue}if(s2(this,mo,"f")!=null&&(o.index!==s2(this,mo,"f")+1||o.carriage)){i.push(this.decodeText(this.buffer.slice(0,s2(this,mo,"f")-1))),this.buffer=this.buffer.slice(s2(this,mo,"f")),_6(this,mo,null,"f");continue}let l=s2(this,mo,"f")!==null?o.preceding-1:o.preceding,a=this.decodeText(this.buffer.slice(0,l));i.push(a),this.buffer=this.buffer.slice(o.index),_6(this,mo,null,"f")}return i}decodeText(e){var t;if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer!="undefined"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ke(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder!="undefined"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return(t=this.textDecoder)!=null||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ke(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ke("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}};mo=new WeakMap;u2.NEWLINE_CHARS=new Set([`
`,"\r"]);u2.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Lne(r,e){for(let i=e!=null?e:0;i<r.length;i++){if(r[i]===10)return{preceding:i,index:i+1,carriage:!1};if(r[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Vz(r){for(let n=0;n<r.length-1;n++){if(r[n]===10&&r[n+1]===10||r[n]===13&&r[n+1]===13)return n+2;if(r[n]===13&&r[n+1]===10&&n+3<r.length&&r[n+2]===13&&r[n+3]===10)return n+4}return-1}function sy(r){if(r[Symbol.asyncIterator])return r;let e=r.getReader();return{async next(){try{let t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){let t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}var Aa=class r{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*i(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(let l of Ene(e,t))if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null||l.event.startsWith("response.")||l.event.startsWith("transcript.")){let a;try{a=JSON.parse(l.data)}catch(s){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),s}if(a&&a.error)throw new nn(void 0,a.error,void 0,cy(e.headers));yield a}else{let a;try{a=JSON.parse(l.data)}catch(s){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),s}if(l.event=="error")throw new nn(void 0,a.error,a.message,void 0);yield{event:l.event,data:a}}}o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||t.abort()}}return new r(i,t)}static fromReadableStream(e,t){let n=!1;async function*i(){let l=new u2,a=sy(e);for await(let s of a)for(let u of l.decode(s))yield u;for(let s of l.flush())yield s}async function*o(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let l=!1;try{for await(let a of i())l||a&&(yield JSON.parse(a));l=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{l||t.abort()}}return new r(o,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],n=this.iterator(),i=o=>({next:()=>{if(o.length===0){let l=n.next();e.push(l),t.push(l)}return o.shift()}});return[new r(()=>i(e),this.controller),new r(()=>i(t),this.controller)]}toReadableStream(){let e=this,t,n=new TextEncoder;return new ny({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{let{value:o,done:l}=await t.next();if(l)return i.close();let a=n.encode(JSON.stringify(o)+`
`);i.enqueue(a)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)==null?void 0:i.call(t))}})}};async function*Ene(r,e){if(!r.body)throw e.abort(),new Ke("Attempted to iterate over a response with no body");let t=new uy,n=new u2,i=sy(r.body);for await(let o of Sne(i))for(let l of n.decode(o)){let a=t.decode(l);a&&(yield a)}for(let o of n.flush()){let l=t.decode(o);l&&(yield l)}}async function*Sne(r){let e=new Uint8Array;for await(let t of r){if(t==null)continue;let n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t,i=new Uint8Array(e.length+n.length);i.set(e),i.set(n,e.length),e=i;let o;for(;(o=Vz(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}var uy=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,i]=Mne(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}};function Mne(r,e){let t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}var Bz=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function",Dz=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&$3(r),$3=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",Ane=r=>Dz(r)||Bz(r)||ly(r);async function dy(r,e,t){var i,o,l;if(r=await r,Dz(r))return r;if(Bz(r)){let a=await r.blob();e||(e=(i=new URL(r.url).pathname.split(/[\\/]/).pop())!=null?i:"unknown_file");let s=$3(a)?[await a.arrayBuffer()]:[a];return new d6(s,e,t)}let n=await Pne(r);if(e||(e=(o=One(r))!=null?o:"unknown_file"),!(t!=null&&t.type)){let a=(l=n[0])==null?void 0:l.type;typeof a=="string"&&(t={...t,type:a})}return new d6(n,e,t)}async function Pne(r){var t;let e=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)e.push(r);else if($3(r))e.push(await r.arrayBuffer());else if(Rne(r))for await(let n of r)e.push(n);else throw new Error(`Unexpected data type: ${typeof r}; constructor: ${(t=r==null?void 0:r.constructor)==null?void 0:t.name}; props: ${Tne(r)}`);return e}function Tne(r){return`[${Object.getOwnPropertyNames(r).map(t=>`"${t}"`).join(", ")}]`}function One(r){var e;return fy(r.name)||fy(r.filename)||((e=fy(r.path))==null?void 0:e.split(/[\\/]/).pop())}var fy=r=>{if(typeof r=="string")return r;if(typeof Buffer!="undefined"&&r instanceof Buffer)return String(r)},Rne=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",my=r=>r&&typeof r=="object"&&r.body&&r[Symbol.toStringTag]==="MultipartBody";var qi=async r=>{let e=await Zz(r.body);return iy(e,r)},Zz=async r=>{let e=new ry;return await Promise.all(Object.entries(r||{}).map(([t,n])=>hy(e,t,n))),e};var hy=async(r,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")r.append(e,String(t));else if(Ane(t)){let n=await dy(t);r.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>hy(r,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,i])=>hy(r,`${e}[${n}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var zne=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Hne=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},b6;ay();async function Uz(r){var l;let{response:e}=r;if(r.options.stream)return Us("response",e.status,e.url,e.headers,e.body),r.options.__streamClass?r.options.__streamClass.fromSSEResponse(e,r.controller):Aa.fromSSEResponse(e,r.controller);if(e.status===204)return null;if(r.options.__binaryResponse)return e;let t=e.headers.get("content-type"),n=(l=t==null?void 0:t.split(";")[0])==null?void 0:l.trim();if((n==null?void 0:n.includes("application/json"))||(n==null?void 0:n.endsWith("+json"))){let a=await e.json();return Us("response",e.status,e.url,e.headers,a),Wz(a,e)}let o=await e.text();return Us("response",e.status,e.url,e.headers,o),o}function Wz(r,e){return!r||typeof r!="object"||Array.isArray(r)?r:Object.defineProperty(r,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var w6=class r extends Promise{constructor(e,t=Uz){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new r(this.responsePromise,async t=>Wz(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}},y6=class{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:i,fetch:o}){this.baseURL=e,this.maxRetries=gy("maxRetries",t),this.timeout=gy("timeout",n),this.httpAgent=i,this.fetch=o!=null?o:ty}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Dne(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${xne()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async i=>{let o=i&&$3(i==null?void 0:i.body)?new DataView(await i.body.arrayBuffer()):(i==null?void 0:i.body)instanceof DataView?i.body:(i==null?void 0:i.body)instanceof ArrayBuffer?new DataView(i.body):i&&ArrayBuffer.isView(i==null?void 0:i.body)?new DataView(i.body.buffer):i==null?void 0:i.body;return{method:e,path:t,...i,body:o}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder!="undefined")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var v,b,C,L,S,P;let n={...e},{method:i,path:o,query:l,headers:a={}}=n,s=ArrayBuffer.isView(n.body)||n.__binaryRequest&&typeof n.body=="string"?n.body:my(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,u=this.calculateContentLength(s),c=this.buildURL(o,l);"timeout"in n&&gy("timeout",n.timeout),n.timeout=(v=n.timeout)!=null?v:this.timeout;let f=(C=(b=n.httpAgent)!=null?b:this.httpAgent)!=null?C:oy(c),h=n.timeout+1e3;typeof((L=f==null?void 0:f.options)==null?void 0:L.timeout)=="number"&&h>((S=f.options.timeout)!=null?S:0)&&(f.options.timeout=h),this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);let d=this.buildHeaders({options:n,headers:a,contentLength:u,retryCount:t});return{req:{method:i,...s&&{body:s},headers:d,...f&&{agent:f},signal:(P=n.signal)!=null?P:null},url:c,timeout:n.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:i}){let o={};n&&(o["content-length"]=n);let l=this.defaultHeaders(e);return xz(o,l),xz(o,t),my(e.body)&&a2!=="node"&&delete o["content-type"],C6(l,"x-stainless-retry-count")===void 0&&C6(t,"x-stainless-retry-count")===void 0&&(o["x-stainless-retry-count"]=String(i)),C6(l,"x-stainless-timeout")===void 0&&C6(t,"x-stainless-timeout")===void 0&&e.timeout&&(o["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(o,t),o}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,i){return nn.generate(e,t,n,i)}request(e,t=null){return new w6(this.makeRequest(e,t))}async makeRequest(e,t){var f,h,d;let n=await e,i=(f=n.maxRetries)!=null?f:this.maxRetries;t==null&&(t=i),await this.prepareOptions(n);let{req:o,url:l,timeout:a}=this.buildRequest(n,{retryCount:i-t});if(await this.prepareRequest(o,{url:l,options:n}),Us("request",l,n,o.headers),(h=n.signal)!=null&&h.aborted)throw new Dr;let s=new AbortController,u=await this.fetchWithTimeout(l,o,a,s).catch(p6);if(u instanceof Error){if((d=n.signal)!=null&&d.aborted)throw new Dr;if(t)return this.retryRequest(n,t);throw u.name==="AbortError"?new Hl:new qs({cause:u})}let c=cy(u.headers);if(!u.ok){if(t&&this.shouldRetry(u)){let S=`retrying, ${t} attempts remaining`;return Us(`response (error; ${S})`,u.status,l,c),this.retryRequest(n,t,c)}let p=await u.text().catch(S=>p6(S).message),v=Zne(p),b=v?void 0:p;throw Us(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,u.status,l,c,b),this.makeStatusError(u.status,v,b,c)}return{response:u,options:n,controller:s}}requestAPIList(e,t){let n=this.makeRequest(t,null);return new py(this,n,e)}buildURL(e,t){let n=jne(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return Gz(i)||(t={...i,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n!="undefined").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new Ke(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,i){let{signal:o,...l}=t||{};o&&o.addEventListener("abort",()=>i.abort());let a=setTimeout(()=>i.abort(),n),s={signal:i.signal,...l};return s.method&&(s.method=s.method.toUpperCase()),this.fetch.call(void 0,e,s).finally(()=>{clearTimeout(a)})}shouldRetry(e){let t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){var a;let i,o=n==null?void 0:n["retry-after-ms"];if(o){let s=parseFloat(o);Number.isNaN(s)||(i=s)}let l=n==null?void 0:n["retry-after"];if(l&&!i){let s=parseFloat(l);Number.isNaN(s)?i=Date.parse(l)-Date.now():i=s*1e3}if(!(i&&0<=i&&i<60*1e3)){let s=(a=e.maxRetries)!=null?a:this.maxRetries;i=this.calculateDefaultRetryTimeoutMillis(t,s)}return await Ws(i),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){let o=t-e,l=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return l*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${l2}`}},ed=class{constructor(e,t,n,i){b6.set(this,void 0),zne(this,b6,e,"f"),this.options=i,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new Ke("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){let n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(let[i,o]of n)e.url.searchParams.set(i,o);t.query=void 0,t.path=e.url.toString()}return await Hne(this,b6,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(b6=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}},py=class extends w6{constructor(e,t,n){super(t,async i=>new n(e,i.response,await Uz(i),i.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let t of e)yield t}},cy=r=>new Proxy(Object.fromEntries(r.entries()),{get(e,t){let n=t.toString();return e[n.toLowerCase()]||e[n]}}),Nne={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Ct=r=>typeof r=="object"&&r!==null&&!Gz(r)&&Object.keys(r).every(e=>Yz(Nne,e)),Vne=()=>{var e,t;if(typeof Deno!="undefined"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l2,"X-Stainless-OS":jz(Deno.build.os),"X-Stainless-Arch":Fz(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)==null?void 0:e.deno)!=null?t:"unknown"};if(typeof EdgeRuntime!="undefined")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l2,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l2,"X-Stainless-OS":jz(process.platform),"X-Stainless-Arch":Fz(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};let r=Bne();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l2,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":l2,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Bne(){if(typeof navigator=="undefined"||!navigator)return null;let r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of r){let n=t.exec(navigator.userAgent);if(n){let i=n[1]||0,o=n[2]||0,l=n[3]||0;return{browser:e,version:`${i}.${o}.${l}`}}}return null}var Fz=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",jz=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown"),v6,Dne=()=>v6!=null?v6:v6=Vne(),Zne=r=>{try{return JSON.parse(r)}catch(e){return}},Fne=/^[a-z][a-z0-9+.-]*:/i,jne=r=>Fne.test(r),Ws=r=>new Promise(e=>setTimeout(e,r)),gy=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ke(`${r} must be an integer`);if(e<0)throw new Ke(`${r} must be a positive integer`);return e},p6=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null)try{return new Error(JSON.stringify(r))}catch(e){}return new Error(r)};var td=r=>{var e,t,n,i,o,l;if(typeof process!="undefined")return(n=(t=(e=process.env)==null?void 0:e[r])==null?void 0:t.trim())!=null?n:void 0;if(typeof Deno!="undefined")return(l=(o=(i=Deno.env)==null?void 0:i.get)==null?void 0:o.call(i,r))==null?void 0:l.trim()};function Gz(r){if(!r)return!0;for(let e in r)return!1;return!0}function Yz(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function xz(r,e){for(let t in e){if(!Yz(e,t))continue;let n=t.toLowerCase();if(!n)continue;let i=e[t];i===null?delete r[n]:i!==void 0&&(r[n]=i)}}var qz=new Set(["authorization","api-key"]);function Us(r,...e){var t;if(typeof process!="undefined"&&((t=process==null?void 0:process.env)==null?void 0:t.DEBUG)==="true"){let n=e.map(i=>{if(!i)return i;if(i.headers){let l={...i,headers:{...i.headers}};for(let a in i.headers)qz.has(a.toLowerCase())&&(l.headers[a]="REDACTED");return l}let o=null;for(let l in i)qz.has(l.toLowerCase())&&(o!=null||(o={...i}),o[l]="REDACTED");return o!=null?o:i});console.log(`OpenAI:DEBUG:${r}`,...n)}}var xne=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)}),Kz=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof navigator!="undefined",qne=r=>typeof(r==null?void 0:r.get)=="function";var C6=(r,e)=>{var n;let t=e.toLowerCase();if(qne(r)){let i=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(o,l,a)=>l+a.toUpperCase());for(let o of[e,t,e.toUpperCase(),i]){let l=r.get(o);if(l)return l}}for(let[i,o]of Object.entries(r))if(i.toLowerCase()===t)return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${e} header, using the first entry.`),o[0]):o};var Jz=r=>{if(typeof Buffer!="undefined"){let e=Buffer.from(r,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(r),t=e.length,n=new Uint8Array(t);for(let i=0;i<t;i++)n[i]=e.charCodeAt(i);return Array.from(new Float32Array(n.buffer))}};function rd(r){return r!=null&&typeof r=="object"&&!Array.isArray(r)}var Pa=class extends ed{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.object=n.object}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}nextPageParams(){return null}nextPageInfo(){return null}},Dt=class extends ed{constructor(e,t,n,i){super(e,t,n,i),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){var e;return(e=this.data)!=null?e:[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var n;let e=this.getPaginatedItems();if(!e.length)return null;let t=(n=e[e.length-1])==null?void 0:n.id;return t?{params:{after:t}}:null}};var ve=class{constructor(e){this._client=e}};var f5=class extends ve{list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,k6,{query:t,...n})}};var lu=class extends ve{constructor(){super(...arguments),this.messages=new f5(this._client)}create(e,t){var n;return this._client.post("/chat/completions",{body:e,...t,stream:(n=e.stream)!=null?n:!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/chat/completions",au,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}},au=class extends Dt{},k6=class extends Dt{};lu.ChatCompletionsPage=au;lu.Messages=f5;var Ys=class extends ve{constructor(){super(...arguments),this.completions=new lu(this._client)}};Ys.Completions=lu;Ys.ChatCompletionsPage=au;var h5=class extends ve{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}};var d5=class extends ve{create(e,t){var n;return this._client.post("/audio/transcriptions",qi({body:e,...t,stream:(n=e.stream)!=null?n:!1,__metadata:{model:e.model}}))}};var m5=class extends ve{create(e,t){return this._client.post("/audio/translations",qi({body:e,...t,__metadata:{model:e.model}}))}};var Ta=class extends ve{constructor(){super(...arguments),this.transcriptions=new d5(this._client),this.translations=new m5(this._client),this.speech=new h5(this._client)}};Ta.Transcriptions=d5;Ta.Translations=m5;Ta.Speech=h5;var su=class extends ve{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/batches",c2,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}},c2=class extends Dt{};su.BatchesPage=c2;var Nl=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Zr=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_y,L6,E6,nd,id,S6,od,Ks,ld,M6,A6,g5,Xz,uu=class{constructor(){_y.add(this),this.controller=new AbortController,L6.set(this,void 0),E6.set(this,()=>{}),nd.set(this,()=>{}),id.set(this,void 0),S6.set(this,()=>{}),od.set(this,()=>{}),Ks.set(this,{}),ld.set(this,!1),M6.set(this,!1),A6.set(this,!1),g5.set(this,!1),Nl(this,L6,new Promise((e,t)=>{Nl(this,E6,e,"f"),Nl(this,nd,t,"f")}),"f"),Nl(this,id,new Promise((e,t)=>{Nl(this,S6,e,"f"),Nl(this,od,t,"f")}),"f"),Zr(this,L6,"f").catch(()=>{}),Zr(this,id,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Zr(this,_y,"m",Xz).bind(this))},0)}_connected(){this.ended||(Zr(this,E6,"f").call(this),this._emit("connect"))}get ended(){return Zr(this,ld,"f")}get errored(){return Zr(this,M6,"f")}get aborted(){return Zr(this,A6,"f")}abort(){this.controller.abort()}on(e,t){return(Zr(this,Ks,"f")[e]||(Zr(this,Ks,"f")[e]=[])).push({listener:t}),this}off(e,t){let n=Zr(this,Ks,"f")[e];if(!n)return this;let i=n.findIndex(o=>o.listener===t);return i>=0&&n.splice(i,1),this}once(e,t){return(Zr(this,Ks,"f")[e]||(Zr(this,Ks,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{Nl(this,g5,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){Nl(this,g5,!0,"f"),await Zr(this,id,"f")}_emit(e,...t){if(Zr(this,ld,"f"))return;e==="end"&&(Nl(this,ld,!0,"f"),Zr(this,S6,"f").call(this));let n=Zr(this,Ks,"f")[e];if(n&&(Zr(this,Ks,"f")[e]=n.filter(i=>!i.once),n.forEach(({listener:i})=>i(...t))),e==="abort"){let i=t[0];!Zr(this,g5,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Zr(this,nd,"f").call(this,i),Zr(this,od,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=t[0];!Zr(this,g5,"f")&&!(n!=null&&n.length)&&Promise.reject(i),Zr(this,nd,"f").call(this,i),Zr(this,od,"f").call(this,i),this._emit("end")}}_emitFinal(){}};L6=new WeakMap,E6=new WeakMap,nd=new WeakMap,id=new WeakMap,S6=new WeakMap,od=new WeakMap,Ks=new WeakMap,ld=new WeakMap,M6=new WeakMap,A6=new WeakMap,g5=new WeakMap,_y=new WeakSet,Xz=function(e){if(Nl(this,M6,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Dr),e instanceof Dr)return Nl(this,A6,!0,"f"),this._emit("abort",e);if(e instanceof Ke)return this._emit("error",e);if(e instanceof Error){let t=new Ke(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ke(String(e)))};var ot=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},go=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Vn,by,Oa,P6,Vl,h2,p5,f2,R6,po,T6,O6,ud,ad,sd,Qz,$z,eH,tH,rH,nH,iH,Ra=class r extends uu{constructor(){super(...arguments),Vn.add(this),by.set(this,[]),Oa.set(this,{}),P6.set(this,{}),Vl.set(this,void 0),h2.set(this,void 0),p5.set(this,void 0),f2.set(this,void 0),R6.set(this,void 0),po.set(this,void 0),T6.set(this,void 0),O6.set(this,void 0),ud.set(this,void 0)}[(by=new WeakMap,Oa=new WeakMap,P6=new WeakMap,Vl=new WeakMap,h2=new WeakMap,p5=new WeakMap,f2=new WeakMap,R6=new WeakMap,po=new WeakMap,T6=new WeakMap,O6=new WeakMap,ud=new WeakMap,Vn=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("event",i=>{let o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(let o of t)o.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(let o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let t=new r;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var o;let n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();let i=Aa.fromReadableStream(e,this.controller);for await(let l of i)ot(this,Vn,"m",ad).call(this,l);if((o=i.controller.signal)!=null&&o.aborted)throw new Dr;return this._addRun(ot(this,Vn,"m",sd).call(this))}toReadableStream(){return new Aa(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,i,o){let l=new r;return l._run(()=>l._runToolAssistantStream(e,t,n,i,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),l}async _createToolAssistantStream(e,t,n,i,o){var u;let l=o==null?void 0:o.signal;l&&(l.aborted&&this.controller.abort(),l.addEventListener("abort",()=>this.controller.abort()));let a={...i,stream:!0},s=await e.submitToolOutputs(t,n,a,{...o,signal:this.controller.signal});this._connected();for await(let c of s)ot(this,Vn,"m",ad).call(this,c);if((u=s.controller.signal)!=null&&u.aborted)throw new Dr;return this._addRun(ot(this,Vn,"m",sd).call(this))}static createThreadAssistantStream(e,t,n){let i=new r;return i._run(()=>i._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}static createAssistantStream(e,t,n,i){let o=new r;return o._run(()=>o._runAssistantStream(e,t,n,{...i,headers:{...i==null?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return ot(this,T6,"f")}currentRun(){return ot(this,O6,"f")}currentMessageSnapshot(){return ot(this,Vl,"f")}currentRunStepSnapshot(){return ot(this,ud,"f")}async finalRunSteps(){return await this.done(),Object.values(ot(this,Oa,"f"))}async finalMessages(){return await this.done(),Object.values(ot(this,P6,"f"))}async finalRun(){if(await this.done(),!ot(this,h2,"f"))throw Error("Final run was not received.");return ot(this,h2,"f")}async _createThreadAssistantStream(e,t,n){var a;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let o={...t,stream:!0},l=await e.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(let s of l)ot(this,Vn,"m",ad).call(this,s);if((a=l.controller.signal)!=null&&a.aborted)throw new Dr;return this._addRun(ot(this,Vn,"m",sd).call(this))}async _createAssistantStream(e,t,n,i){var s;let o=i==null?void 0:i.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let l={...n,stream:!0},a=await e.create(t,l,{...i,signal:this.controller.signal});this._connected();for await(let u of a)ot(this,Vn,"m",ad).call(this,u);if((s=a.controller.signal)!=null&&s.aborted)throw new Dr;return this._addRun(ot(this,Vn,"m",sd).call(this))}static accumulateDelta(e,t){for(let[n,i]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=i;continue}let o=e[n];if(o==null){e[n]=i;continue}if(n==="index"||n==="type"){e[n]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(rd(o)&&rd(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(l=>typeof l=="string"||typeof l=="number")){o.push(...i);continue}for(let l of i){if(!rd(l))throw new Error(`Expected array delta entry to be an object but got: ${l}`);let a=l.index;if(a==null)throw console.error(l),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);let s=o[a];s==null?o.push(l):o[a]=this.accumulateDelta(s,l)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${i}, accValue: ${o}`);e[n]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,i){return await this._createAssistantStream(t,e,n,i)}async _runToolAssistantStream(e,t,n,i,o){return await this._createToolAssistantStream(n,e,t,i,o)}};ad=function(e){if(!this.ended)switch(go(this,T6,e,"f"),ot(this,Vn,"m",eH).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":ot(this,Vn,"m",iH).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ot(this,Vn,"m",$z).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":ot(this,Vn,"m",Qz).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},sd=function(){if(this.ended)throw new Ke("stream has ended, this shouldn't happen");if(!ot(this,h2,"f"))throw Error("Final run has not been received");return ot(this,h2,"f")},Qz=function(e){let[t,n]=ot(this,Vn,"m",rH).call(this,e,ot(this,Vl,"f"));go(this,Vl,t,"f"),ot(this,P6,"f")[t.id]=t;for(let i of n){let o=t.content[i.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,l=t.content[i.index];if(l&&l.type=="text")this._emit("textDelta",o,l.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=ot(this,p5,"f")){if(ot(this,f2,"f"))switch(ot(this,f2,"f").type){case"text":this._emit("textDone",ot(this,f2,"f").text,ot(this,Vl,"f"));break;case"image_file":this._emit("imageFileDone",ot(this,f2,"f").image_file,ot(this,Vl,"f"));break}go(this,p5,i.index,"f")}go(this,f2,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(ot(this,p5,"f")!==void 0){let i=e.data.content[ot(this,p5,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,ot(this,Vl,"f"));break;case"text":this._emit("textDone",i.text,ot(this,Vl,"f"));break}}ot(this,Vl,"f")&&this._emit("messageDone",e.data),go(this,Vl,void 0,"f")}},$z=function(e){let t=ot(this,Vn,"m",tH).call(this,e);switch(go(this,ud,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(let o of n.step_details.tool_calls)o.index==ot(this,R6,"f")?this._emit("toolCallDelta",o,t.step_details.tool_calls[o.index]):(ot(this,po,"f")&&this._emit("toolCallDone",ot(this,po,"f")),go(this,R6,o.index,"f"),go(this,po,t.step_details.tool_calls[o.index],"f"),ot(this,po,"f")&&this._emit("toolCallCreated",ot(this,po,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":go(this,ud,void 0,"f"),e.data.step_details.type=="tool_calls"&&ot(this,po,"f")&&(this._emit("toolCallDone",ot(this,po,"f")),go(this,po,void 0,"f")),this._emit("runStepDone",e.data,t);break;case"thread.run.step.in_progress":break}},eH=function(e){ot(this,by,"f").push(e),this._emit("event",e)},tH=function(e){switch(e.event){case"thread.run.step.created":return ot(this,Oa,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=ot(this,Oa,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){let i=Ra.accumulateDelta(t,n.delta);ot(this,Oa,"f")[e.data.id]=i}return ot(this,Oa,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":ot(this,Oa,"f")[e.data.id]=e.data;break}if(ot(this,Oa,"f")[e.data.id])return ot(this,Oa,"f")[e.data.id];throw new Error("No snapshot available")},rH=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(let o of i.delta.content)if(o.index in t.content){let l=t.content[o.index];t.content[o.index]=ot(this,Vn,"m",nH).call(this,o,l)}else t.content[o.index]=o,n.push(o);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},nH=function(e,t){return Ra.accumulateDelta(t,e)},iH=function(e){switch(go(this,O6,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":go(this,h2,e.data,"f"),ot(this,po,"f")&&(this._emit("toolCallDone",ot(this,po,"f")),go(this,po,void 0,"f"));break;case"thread.run.cancelling":break}};var d2=class extends ve{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/assistants",_5,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}},_5=class extends Dt{};d2.AssistantsPage=_5;function vy(r){return typeof r.parse=="function"}var cu=r=>(r==null?void 0:r.role)==="assistant",Cy=r=>(r==null?void 0:r.role)==="function",wy=r=>(r==null?void 0:r.role)==="tool";function oH(r,e){let t={...r};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function cd(r){return(r==null?void 0:r.$brand)==="auto-parseable-response-format"}function m2(r){return(r==null?void 0:r.$brand)==="auto-parseable-tool"}function lH(r,e){return!e||!yy(e)?{...r,choices:r.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:fd(r,e)}function fd(r,e){let t=r.choices.map(n=>{var i,o;if(n.finish_reason==="length")throw new u5;if(n.finish_reason==="content_filter")throw new c5;return{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:(o=(i=n.message.tool_calls)==null?void 0:i.map(l=>Qne(e,l)))!=null?o:void 0}:void 0,parsed:n.message.content&&!n.message.refusal?Xne(e,n.message.content):null}}});return{...r,choices:t}}function Xne(r,e){var t,n;return((t=r.response_format)==null?void 0:t.type)!=="json_schema"?null:((n=r.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in r.response_format?r.response_format.$parseRaw(e):JSON.parse(e):null}function Qne(r,e){var n;let t=(n=r.tools)==null?void 0:n.find(i=>{var o;return((o=i.function)==null?void 0:o.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:m2(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function aH(r,e){var n;if(!r)return!1;let t=(n=r.tools)==null?void 0:n.find(i=>{var o;return((o=i.function)==null?void 0:o.name)===e.function.name});return m2(t)||(t==null?void 0:t.function.strict)||!1}function yy(r){var e,t;return cd(r.response_format)?!0:(t=(e=r.tools)==null?void 0:e.some(n=>m2(n)||n.type==="function"&&n.function.strict===!0))!=null?t:!1}function sH(r){for(let e of r!=null?r:[]){if(e.type!=="function")throw new Ke(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new Ke(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Ui=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ri,ky,I6,Ly,Ey,Sy,cH,My,uH=10,b5=class extends uu{constructor(){super(...arguments),ri.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Cy(e)||wy(e))&&e.content)this._emit("functionCallResult",e.content);else if(cu(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(cu(e)&&e.tool_calls)for(let n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ke("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Ui(this,ri,"m",ky).call(this)}async finalMessage(){return await this.done(),Ui(this,ri,"m",I6).call(this)}async finalFunctionCall(){return await this.done(),Ui(this,ri,"m",Ly).call(this)}async finalFunctionCallResult(){return await this.done(),Ui(this,ri,"m",Ey).call(this)}async totalUsage(){return await this.done(),Ui(this,ri,"m",Sy).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=Ui(this,ri,"m",I6).call(this);t&&this._emit("finalMessage",t);let n=Ui(this,ri,"m",ky).call(this);n&&this._emit("finalContent",n);let i=Ui(this,ri,"m",Ly).call(this);i&&this._emit("finalFunctionCall",i);let o=Ui(this,ri,"m",Ey).call(this);o!=null&&this._emit("finalFunctionCallResult",o),this._chatCompletions.some(l=>l.usage)&&this._emit("totalUsage",Ui(this,ri,"m",Sy).call(this))}async _createChatCompletion(e,t,n){let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Ui(this,ri,"m",cH).call(this,t);let o=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(fd(o,t))}async _runChatCompletion(e,t,n){for(let i of t.messages)this._addMessage(i,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var h;let i="function",{function_call:o="auto",stream:l,...a}=t,s=typeof o!="string"&&(o==null?void 0:o.name),{maxChatCompletions:u=uH}=n||{},c={};for(let d of t.functions)c[d.name||d.function.name]=d;let f=t.functions.map(d=>({name:d.name||d.function.name,parameters:d.parameters,description:d.description}));for(let d of t.messages)this._addMessage(d,!1);for(let d=0;d<u;++d){let v=(h=(await this._createChatCompletion(e,{...a,function_call:o,functions:f,messages:[...this.messages]},n)).choices[0])==null?void 0:h.message;if(!v)throw new Ke("missing message in ChatCompletion response");if(!v.function_call)return;let{name:b,arguments:C}=v.function_call,L=c[b];if(L){if(s&&s!==b){let z=`Invalid function_call: ${JSON.stringify(b)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:i,name:b,content:z});continue}}else{let z=`Invalid function_call: ${JSON.stringify(b)}. Available options are: ${f.map(G=>JSON.stringify(G.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:b,content:z});continue}let S;try{S=vy(L)?await L.parse(C):C}catch(z){this._addMessage({role:i,name:b,content:z instanceof Error?z.message:String(z)});continue}let P=await L.function(S,this),y=Ui(this,ri,"m",My).call(this,P);if(this._addMessage({role:i,name:b,content:y}),s)return}}async _runTools(e,t,n){var d,p,v;let i="tool",{tool_choice:o="auto",stream:l,...a}=t,s=typeof o!="string"&&((d=o==null?void 0:o.function)==null?void 0:d.name),{maxChatCompletions:u=uH}=n||{},c=t.tools.map(b=>{if(m2(b)){if(!b.$callback)throw new Ke("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),f={};for(let b of c)b.type==="function"&&(f[b.function.name||b.function.function.name]=b.function);let h="tools"in t?c.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(let b of t.messages)this._addMessage(b,!1);for(let b=0;b<u;++b){let L=(p=(await this._createChatCompletion(e,{...a,tool_choice:o,tools:h,messages:[...this.messages]},n)).choices[0])==null?void 0:p.message;if(!L)throw new Ke("missing message in ChatCompletion response");if(!((v=L.tool_calls)!=null&&v.length))return;for(let S of L.tool_calls){if(S.type!=="function")continue;let P=S.id,{name:y,arguments:z}=S.function,G=f[y];if(G){if(s&&s!==y){let Q=`Invalid tool_call: ${JSON.stringify(y)}. ${JSON.stringify(s)} requested. Please try again`;this._addMessage({role:i,tool_call_id:P,content:Q});continue}}else{let Q=`Invalid tool_call: ${JSON.stringify(y)}. Available options are: ${Object.keys(f).map(ee=>JSON.stringify(ee)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:P,content:Q});continue}let J;try{J=vy(G)?await G.parse(z):z}catch(Q){let ee=Q instanceof Error?Q.message:String(Q);this._addMessage({role:i,tool_call_id:P,content:ee});continue}let te=await G.function(J,this),ne=Ui(this,ri,"m",My).call(this,te);if(this._addMessage({role:i,tool_call_id:P,content:ne}),s)return}}}};ri=new WeakSet,ky=function(){var e;return(e=Ui(this,ri,"m",I6).call(this).content)!=null?e:null},I6=function(){var t,n;let e=this.messages.length;for(;e-- >0;){let i=this.messages[e];if(cu(i)){let{function_call:o,...l}=i,a={...l,content:(t=i.content)!=null?t:null,refusal:(n=i.refusal)!=null?n:null};return o&&(a.function_call=o),a}}throw new Ke("stream ended without producing a ChatCompletionMessage with role=assistant")},Ly=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){let i=this.messages[n];if(cu(i)&&(i!=null&&i.function_call))return i.function_call;if(cu(i)&&((e=i==null?void 0:i.tool_calls)!=null&&e.length))return(t=i.tool_calls.at(-1))==null?void 0:t.function}},Ey=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(Cy(t)&&t.content!=null||wy(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>{var i;return n.role==="assistant"&&((i=n.tool_calls)==null?void 0:i.some(o=>o.type==="function"&&o.id===t.tool_call_id))}))return t.content}},Sy=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},cH=function(e){if(e.n!=null&&e.n>1)throw new Ke("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},My=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var hd=class r extends b5{static runFunctions(e,t,n){let i=new r,o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,o)),i}static runTools(e,t,n){let i=new r,o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,o)),i}_addMessage(e,t=!0){super._addMessage(e,t),cu(e)&&e.content&&this._emit("content",e.content)}};var Mn={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},Ay=class extends Error{},Py=class extends Error{};function $ne(r,e=Mn.ALL){if(typeof r!="string")throw new TypeError(`expecting str, got ${typeof r}`);if(!r.trim())throw new Error(`${r} is empty`);return eie(r.trim(),e)}var eie=(r,e)=>{let t=r.length,n=0,i=h=>{throw new Ay(`${h} at position ${n}`)},o=h=>{throw new Py(`${h} at position ${n}`)},l=()=>(f(),n>=t&&i("Unexpected end of input"),r[n]==='"'?a():r[n]==="{"?s():r[n]==="["?u():r.substring(n,n+4)==="null"||Mn.NULL&e&&t-n<4&&"null".startsWith(r.substring(n))?(n+=4,null):r.substring(n,n+4)==="true"||Mn.BOOL&e&&t-n<4&&"true".startsWith(r.substring(n))?(n+=4,!0):r.substring(n,n+5)==="false"||Mn.BOOL&e&&t-n<5&&"false".startsWith(r.substring(n))?(n+=5,!1):r.substring(n,n+8)==="Infinity"||Mn.INFINITY&e&&t-n<8&&"Infinity".startsWith(r.substring(n))?(n+=8,1/0):r.substring(n,n+9)==="-Infinity"||Mn.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(r.substring(n))?(n+=9,-1/0):r.substring(n,n+3)==="NaN"||Mn.NAN&e&&t-n<3&&"NaN".startsWith(r.substring(n))?(n+=3,NaN):c()),a=()=>{let h=n,d=!1;for(n++;n<t&&(r[n]!=='"'||d&&r[n-1]==="\\");)d=r[n]==="\\"?!d:!1,n++;if(r.charAt(n)=='"')try{return JSON.parse(r.substring(h,++n-Number(d)))}catch(p){o(String(p))}else if(Mn.STR&e)try{return JSON.parse(r.substring(h,n-Number(d))+'"')}catch(p){return JSON.parse(r.substring(h,r.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},s=()=>{n++,f();let h={};try{for(;r[n]!=="}";){if(f(),n>=t&&Mn.OBJ&e)return h;let d=a();f(),n++;try{let p=l();Object.defineProperty(h,d,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(Mn.OBJ&e)return h;throw p}f(),r[n]===","&&n++}}catch(d){if(Mn.OBJ&e)return h;i("Expected '}' at end of object")}return n++,h},u=()=>{n++;let h=[];try{for(;r[n]!=="]";)h.push(l()),f(),r[n]===","&&n++}catch(d){if(Mn.ARR&e)return h;i("Expected ']' at end of array")}return n++,h},c=()=>{if(n===0){r==="-"&&Mn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(r)}catch(d){if(Mn.NUM&e)try{return r[r.length-1]==="."?JSON.parse(r.substring(0,r.lastIndexOf("."))):JSON.parse(r.substring(0,r.lastIndexOf("e")))}catch(p){}o(String(d))}}let h=n;for(r[n]==="-"&&n++;r[n]&&!",]}".includes(r[n]);)n++;n==t&&!(Mn.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(r.substring(h,n))}catch(d){r.substring(h,n)==="-"&&Mn.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(r.substring(h,r.lastIndexOf("e")))}catch(p){o(String(p))}}},f=()=>{for(;n<t&&` 
\r	`.includes(r[n]);)n++};return l()},Ty=r=>$ne(r,Mn.ALL^Mn.NUM);var v5=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},_r=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},dn,Js,C5,fu,Oy,z6,Ry,Iy,zy,H6,Hy,fH,w5=class r extends b5{constructor(e){super(),dn.add(this),Js.set(this,void 0),C5.set(this,void 0),fu.set(this,void 0),v5(this,Js,e,"f"),v5(this,C5,[],"f")}get currentChatCompletionSnapshot(){return _r(this,fu,"f")}static fromReadableStream(e){let t=new r(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){let i=new r(t);return i._run(()=>i._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createChatCompletion(e,t,n){var l;super._createChatCompletion;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),_r(this,dn,"m",Oy).call(this);let o=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(let a of o)_r(this,dn,"m",Ry).call(this,a);if((l=o.controller.signal)!=null&&l.aborted)throw new Dr;return this._addChatCompletion(_r(this,dn,"m",H6).call(this))}async _fromReadableStream(e,t){var l;let n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),_r(this,dn,"m",Oy).call(this),this._connected();let i=Aa.fromReadableStream(e,this.controller),o;for await(let a of i)o&&o!==a.id&&this._addChatCompletion(_r(this,dn,"m",H6).call(this)),_r(this,dn,"m",Ry).call(this,a),o=a.id;if((l=i.controller.signal)!=null&&l.aborted)throw new Dr;return this._addChatCompletion(_r(this,dn,"m",H6).call(this))}[(Js=new WeakMap,C5=new WeakMap,fu=new WeakMap,dn=new WeakSet,Oy=function(){this.ended||v5(this,fu,void 0,"f")},z6=function(t){let n=_r(this,C5,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},_r(this,C5,"f")[t.index]=n,n)},Ry=function(t){var i,o,l,a,s,u,c,f,h,d,p,v,b,C,L,S,P,y,z,G;if(this.ended)return;let n=_r(this,dn,"m",fH).call(this,t);this._emit("chunk",t,n);for(let J of t.choices){let te=n.choices[J.index];J.delta.content!=null&&((i=te.message)==null?void 0:i.role)==="assistant"&&((o=te.message)!=null&&o.content)&&(this._emit("content",J.delta.content,te.message.content),this._emit("content.delta",{delta:J.delta.content,snapshot:te.message.content,parsed:te.message.parsed})),J.delta.refusal!=null&&((l=te.message)==null?void 0:l.role)==="assistant"&&((a=te.message)!=null&&a.refusal)&&this._emit("refusal.delta",{delta:J.delta.refusal,snapshot:te.message.refusal}),((s=J.logprobs)==null?void 0:s.content)!=null&&((u=te.message)==null?void 0:u.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(c=J.logprobs)==null?void 0:c.content,snapshot:(h=(f=te.logprobs)==null?void 0:f.content)!=null?h:[]}),((d=J.logprobs)==null?void 0:d.refusal)!=null&&((p=te.message)==null?void 0:p.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(v=J.logprobs)==null?void 0:v.refusal,snapshot:(C=(b=te.logprobs)==null?void 0:b.refusal)!=null?C:[]});let ne=_r(this,dn,"m",z6).call(this,te);te.finish_reason&&(_r(this,dn,"m",zy).call(this,te),ne.current_tool_call_index!=null&&_r(this,dn,"m",Iy).call(this,te,ne.current_tool_call_index));for(let Q of(L=J.delta.tool_calls)!=null?L:[])ne.current_tool_call_index!==Q.index&&(_r(this,dn,"m",zy).call(this,te),ne.current_tool_call_index!=null&&_r(this,dn,"m",Iy).call(this,te,ne.current_tool_call_index)),ne.current_tool_call_index=Q.index;for(let Q of(S=J.delta.tool_calls)!=null?S:[]){let ee=(P=te.message.tool_calls)==null?void 0:P[Q.index];ee!=null&&ee.type&&((ee==null?void 0:ee.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(y=ee.function)==null?void 0:y.name,index:Q.index,arguments:ee.function.arguments,parsed_arguments:ee.function.parsed_arguments,arguments_delta:(G=(z=Q.function)==null?void 0:z.arguments)!=null?G:""}):(ee==null||ee.type,void 0))}}},Iy=function(t,n){var l,a,s;if(_r(this,dn,"m",z6).call(this,t).done_tool_calls.has(n))return;let o=(l=t.message.tool_calls)==null?void 0:l[n];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){let u=(s=(a=_r(this,Js,"f"))==null?void 0:a.tools)==null?void 0:s.find(c=>c.type==="function"&&c.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:n,arguments:o.function.arguments,parsed_arguments:m2(u)?u.$parseRaw(o.function.arguments):u!=null&&u.function.strict?JSON.parse(o.function.arguments):null})}else o.type},zy=function(t){var i,o;let n=_r(this,dn,"m",z6).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;let l=_r(this,dn,"m",Hy).call(this);this._emit("content.done",{content:t.message.content,parsed:l?l.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(i=t.logprobs)!=null&&i.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(o=t.logprobs)!=null&&o.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},H6=function(){if(this.ended)throw new Ke("stream has ended, this shouldn't happen");let t=_r(this,fu,"f");if(!t)throw new Ke("request ended without sending any chunks");return v5(this,fu,void 0,"f"),v5(this,C5,[],"f"),tie(t,_r(this,Js,"f"))},Hy=function(){var n;let t=(n=_r(this,Js,"f"))==null?void 0:n.response_format;return cd(t)?t:null},fH=function(t){var c,f,h,d,p,v;var n,i,o,l;let a=_r(this,fu,"f"),{choices:s,...u}=t;a?Object.assign(a,u):a=v5(this,fu,{...u,choices:[]},"f");for(let{delta:b,finish_reason:C,index:L,logprobs:S=null,...P}of t.choices){let y=a.choices[L];if(y||(y=a.choices[L]={finish_reason:C,index:L,message:{},logprobs:S,...P}),S)if(!y.logprobs)y.logprobs=Object.assign({},S);else{let{content:ee,refusal:se,...Pe}=S;Object.assign(y.logprobs,Pe),ee&&((c=(n=y.logprobs).content)!=null||(n.content=[]),y.logprobs.content.push(...ee)),se&&((f=(i=y.logprobs).refusal)!=null||(i.refusal=[]),y.logprobs.refusal.push(...se))}if(C&&(y.finish_reason=C,_r(this,Js,"f")&&yy(_r(this,Js,"f")))){if(C==="length")throw new u5;if(C==="content_filter")throw new c5}if(Object.assign(y,P),!b)continue;let{content:z,refusal:G,function_call:J,role:te,tool_calls:ne,...Q}=b;if(Object.assign(y.message,Q),G&&(y.message.refusal=(y.message.refusal||"")+G),te&&(y.message.role=te),J&&(y.message.function_call?(J.name&&(y.message.function_call.name=J.name),J.arguments&&((h=(o=y.message.function_call).arguments)!=null||(o.arguments=""),y.message.function_call.arguments+=J.arguments)):y.message.function_call=J),z&&(y.message.content=(y.message.content||"")+z,!y.message.refusal&&_r(this,dn,"m",Hy).call(this)&&(y.message.parsed=Ty(y.message.content))),ne){y.message.tool_calls||(y.message.tool_calls=[]);for(let{index:ee,id:se,type:Pe,function:Te,...be}of ne){let rt=(d=(l=y.message.tool_calls)[ee])!=null?d:l[ee]={};Object.assign(rt,be),se&&(rt.id=se),Pe&&(rt.type=Pe),Te&&((v=rt.function)!=null||(rt.function={name:(p=Te.name)!=null?p:"",arguments:""})),Te!=null&&Te.name&&(rt.function.name=Te.name),Te!=null&&Te.arguments&&(rt.function.arguments+=Te.arguments,aH(_r(this,Js,"f"),rt)&&(rt.function.parsed_arguments=Ty(rt.function.arguments)))}}}return a},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("chunk",i=>{let o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(let o of t)o.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(let o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Aa(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function tie(r,e){let{id:t,choices:n,created:i,model:o,system_fingerprint:l,...a}=r,s={...a,id:t,choices:n.map(({message:u,finish_reason:c,index:f,logprobs:h,...d})=>{var S,P,y;if(!c)throw new Ke(`missing finish_reason for choice ${f}`);let{content:p=null,function_call:v,tool_calls:b,...C}=u,L=u.role;if(!L)throw new Ke(`missing role for choice ${f}`);if(v){let{arguments:z,name:G}=v;if(z==null)throw new Ke(`missing function_call.arguments for choice ${f}`);if(!G)throw new Ke(`missing function_call.name for choice ${f}`);return{...d,message:{content:p,function_call:{arguments:z,name:G},role:L,refusal:(S=u.refusal)!=null?S:null},finish_reason:c,index:f,logprobs:h}}return b?{...d,index:f,finish_reason:c,logprobs:h,message:{...C,role:L,content:p,refusal:(P=u.refusal)!=null?P:null,tool_calls:b.map((z,G)=>{let{function:J,type:te,id:ne,...Q}=z,{arguments:ee,name:se,...Pe}=J||{};if(ne==null)throw new Ke(`missing choices[${f}].tool_calls[${G}].id
${N6(r)}`);if(te==null)throw new Ke(`missing choices[${f}].tool_calls[${G}].type
${N6(r)}`);if(se==null)throw new Ke(`missing choices[${f}].tool_calls[${G}].function.name
${N6(r)}`);if(ee==null)throw new Ke(`missing choices[${f}].tool_calls[${G}].function.arguments
${N6(r)}`);return{...Q,id:ne,type:te,function:{...Pe,name:se,arguments:ee}}})}}:{...d,message:{...C,content:p,role:L,refusal:(y=u.refusal)!=null?y:null},finish_reason:c,index:f,logprobs:h}}),created:i,model:o,object:"chat.completion",...l?{system_fingerprint:l}:{}};return lH(s,e)}function N6(r){return JSON.stringify(r)}var dd=class r extends w5{static fromReadableStream(e){let t=new r(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){let i=new r(null),o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return i._run(()=>i._runFunctions(e,t,o)),i}static runTools(e,t,n){let i=new r(t),o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return i._run(()=>i._runTools(e,t,o)),i}};var md=class extends ve{parse(e,t){return sH(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>fd(n,e))}runFunctions(e,t){return e.stream?dd.runFunctions(this._client,e,t):hd.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?dd.runTools(this._client,e,t):hd.runTools(this._client,e,t)}stream(e,t){return w5.createChatCompletion(this._client,e,t)}};var y5=class extends ve{constructor(){super(...arguments),this.completions=new md(this._client)}};(function(r){r.Completions=md})(y5||(y5={}));var k5=class extends ve{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}};var L5=class extends ve{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}};var hu=class extends ve{constructor(){super(...arguments),this.sessions=new k5(this._client),this.transcriptionSessions=new L5(this._client)}};hu.Sessions=k5;hu.TranscriptionSessions=L5;var g2=class extends ve{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,i){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,E5,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}},E5=class extends Dt{};g2.MessagesPage=E5;var p2=class extends ve{retrieve(e,t,n,i={},o){return Ct(i)?this.retrieve(e,t,n,{},i):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:i,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,t,n={},i){return Ct(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,S5,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}},S5=class extends Dt{};p2.RunStepsPage=S5;var Xs=class extends ve{constructor(){super(...arguments),this.steps=new p2(this._client)}create(e,t,n){var l;let{include:i,...o}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:i},body:o,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:(l=t.stream)!=null?l:!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,i){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,M5,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){let i=await this.create(e,t,n);return await this.poll(e,i.id,n)}createAndStream(e,t,n){return Ra.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){let i={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let{data:o,response:l}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...i}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let a=5e3;if(n!=null&&n.pollIntervalMs)a=n.pollIntervalMs;else{let s=l.headers.get("openai-poll-after-ms");if(s){let u=parseInt(s);isNaN(u)||(a=u)}}await Ws(a);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,t,n){return Ra.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,i){var o;return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers},stream:(o=n.stream)!=null?o:!1})}async submitToolOutputsAndPoll(e,t,n,i){let o=await this.submitToolOutputs(e,t,n,i);return await this.poll(e,o.id,i)}submitToolOutputsStream(e,t,n,i){return Ra.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,i)}},M5=class extends Dt{};Xs.RunsPage=M5;Xs.Steps=p2;Xs.RunStepsPage=S5;var Ia=class extends ve{constructor(){super(...arguments),this.runs=new Xs(this._client),this.messages=new g2(this._client)}create(e={},t){return Ct(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){var n;return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:(n=e.stream)!=null?n:!1})}async createAndRunPoll(e,t){let n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return Ra.createThreadAssistantStream(e,this._client.beta.threads,t)}};Ia.Runs=Xs;Ia.RunsPage=M5;Ia.Messages=g2;Ia.MessagesPage=E5;var Bl=class extends ve{constructor(){super(...arguments),this.realtime=new hu(this._client),this.chat=new y5(this._client),this.assistants=new d2(this._client),this.threads=new Ia(this._client)}};Bl.Realtime=hu;Bl.Assistants=d2;Bl.AssistantsPage=_5;Bl.Threads=Ia;var _2=class extends ve{create(e,t){var n;return this._client.post("/completions",{body:e,...t,stream:(n=e.stream)!=null?n:!1})}};var A5=class extends ve{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}};var du=class extends ve{constructor(){super(...arguments),this.content=new A5(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,qi({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,P5,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...n==null?void 0:n.headers}})}},P5=class extends Dt{};du.FileListResponsesPage=P5;du.Content=A5;var za=class extends ve{constructor(){super(...arguments),this.files=new du(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/containers",b2,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}},b2=class extends Dt{};za.ContainerListResponsesPage=b2;za.Files=du;za.FileListResponsesPage=P5;var v2=class extends ve{create(e,t){let n=!!e.encoding_format,i=n?e.encoding_format:"base64";n&&Us("Request","User defined encoding_format:",e.encoding_format);let o=this._client.post("/embeddings",{body:{...e,encoding_format:i},...t});return n?o:(Us("response","Decoding base64 embeddings to float32 array"),o._thenUnwrap(l=>(l&&l.data&&l.data.forEach(a=>{let s=a.embedding;a.embedding=Jz(s)}),l)))}};var C2=class extends ve{retrieve(e,t,n,i){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,i)}list(e,t,n={},i){return Ct(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,T5,{query:n,...i})}},T5=class extends Dt{};C2.OutputItemListResponsesPage=T5;var Qs=class extends ve{constructor(){super(...arguments),this.outputItems=new C2(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,O5,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}},O5=class extends Dt{};Qs.RunListResponsesPage=O5;Qs.OutputItems=C2;Qs.OutputItemListResponsesPage=T5;var Ha=class extends ve{constructor(){super(...arguments),this.runs=new Qs(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/evals",w2,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}},w2=class extends Dt{};Ha.EvalListResponsesPage=w2;Ha.Runs=Qs;Ha.RunListResponsesPage=O5;var mu=class extends ve{create(e,t){return this._client.post("/files",qi({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/files",y2,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){let i=new Set(["processed","error","deleted"]),o=Date.now(),l=await this.retrieve(e);for(;!l.status||!i.has(l.status);)if(await Ws(t),l=await this.retrieve(e),Date.now()-o>n)throw new Hl({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return l}},y2=class extends Dt{};mu.FileObjectsPage=y2;var R5=class extends ve{};var I5=class extends ve{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};var k2=class extends ve{constructor(){super(...arguments),this.graders=new I5(this._client)}};k2.Graders=I5;var L2=class extends ve{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,z5,{body:t,method:"post",...n})}retrieve(e,t={},n){return Ct(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}},z5=class extends Pa{};L2.PermissionCreateResponsesPage=z5;var gu=class extends ve{constructor(){super(...arguments),this.permissions=new L2(this._client)}};gu.Permissions=L2;gu.PermissionCreateResponsesPage=z5;var E2=class extends ve{list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,H5,{query:t,...n})}},H5=class extends Dt{};E2.FineTuningJobCheckpointsPage=H5;var Na=class extends ve{constructor(){super(...arguments),this.checkpoints=new E2(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",N5,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return Ct(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,V5,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}},N5=class extends Dt{},V5=class extends Dt{};Na.FineTuningJobsPage=N5;Na.FineTuningJobEventsPage=V5;Na.Checkpoints=E2;Na.FineTuningJobCheckpointsPage=H5;var _o=class extends ve{constructor(){super(...arguments),this.methods=new R5(this._client),this.jobs=new Na(this._client),this.checkpoints=new gu(this._client),this.alpha=new k2(this._client)}};_o.Methods=R5;_o.Jobs=Na;_o.FineTuningJobsPage=N5;_o.FineTuningJobEventsPage=V5;_o.Checkpoints=gu;_o.Alpha=k2;var B5=class extends ve{};var pu=class extends ve{constructor(){super(...arguments),this.graderModels=new B5(this._client)}};pu.GraderModels=B5;var S2=class extends ve{createVariation(e,t){return this._client.post("/images/variations",qi({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",qi({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}};var _u=class extends ve{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",M2,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}},M2=class extends Pa{};_u.ModelsPage=M2;var A2=class extends ve{create(e,t){return this._client.post("/moderations",{body:e,...t})}};function hH(r,e){return!e||!Lie(e)?{...r,output_parsed:null,output:r.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(n=>({...n,parsed:null}))}:t)}:Ny(r,e)}function Ny(r,e){let t=r.output.map(i=>{if(i.type==="function_call")return{...i,parsed_arguments:Mie(e,i)};if(i.type==="message"){let o=i.content.map(l=>l.type==="output_text"?{...l,parsed:kie(e,l.text)}:l);return{...i,content:o}}return i}),n=Object.assign({},r,{output:t});return Object.getOwnPropertyDescriptor(r,"output_text")||V6(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(let i of n.output)if(i.type==="message"){for(let o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),n}function kie(r,e){var t,n,i,o;return((n=(t=r.text)==null?void 0:t.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((i=r.text)==null?void 0:i.format)?((o=r.text)==null?void 0:o.format).$parseRaw(e):JSON.parse(e)}function Lie(r){var e;return!!cd((e=r.text)==null?void 0:e.format)}function Eie(r){return(r==null?void 0:r.$brand)==="auto-parseable-tool"}function Sie(r,e){return r.find(t=>t.type==="function"&&t.name===e)}function Mie(r,e){var n;let t=Sie((n=r.tools)!=null?n:[],e.name);return{...e,...e,parsed_arguments:Eie(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function V6(r){let e=[];for(let t of r.output)if(t.type==="message")for(let n of t.content)n.type==="output_text"&&e.push(n.text);r.output_text=e.join("")}var D5=class extends ve{list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,B6,{query:t,...n})}};var Z5=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},bu=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},F5,D6,vu,Z6,dH,mH,gH,pH,F6=class r extends uu{constructor(e){super(),F5.add(this),D6.set(this,void 0),vu.set(this,void 0),Z6.set(this,void 0),Z5(this,D6,e,"f")}static createResponse(e,t,n){let i=new r(t);return i._run(()=>i._createOrRetrieveResponse(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),i}async _createOrRetrieveResponse(e,t,n){var a,s;let i=n==null?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),bu(this,F5,"m",dH).call(this);let o,l=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),l=(a=t.starting_after)!=null?a:null):o=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(let u of o)bu(this,F5,"m",mH).call(this,u,l);if((s=o.controller.signal)!=null&&s.aborted)throw new Dr;return bu(this,F5,"m",gH).call(this)}[(D6=new WeakMap,vu=new WeakMap,Z6=new WeakMap,F5=new WeakSet,dH=function(){this.ended||Z5(this,vu,void 0,"f")},mH=function(t,n){if(this.ended)return;let i=(l,a)=>{(n==null||a.sequence_number>n)&&this._emit(l,a)},o=bu(this,F5,"m",pH).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{let l=o.output[t.output_index];if(!l)throw new Ke(`missing output at index ${t.output_index}`);if(l.type==="message"){let a=l.content[t.content_index];if(!a)throw new Ke(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new Ke(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",{...t,snapshot:a.text})}break}case"response.function_call_arguments.delta":{let l=o.output[t.output_index];if(!l)throw new Ke(`missing output at index ${t.output_index}`);l.type==="function_call"&&i("response.function_call_arguments.delta",{...t,snapshot:l.arguments});break}default:i(t.type,t);break}},gH=function(){if(this.ended)throw new Ke("stream has ended, this shouldn't happen");let t=bu(this,vu,"f");if(!t)throw new Ke("request ended without sending any events");Z5(this,vu,void 0,"f");let n=Pie(t,bu(this,D6,"f"));return Z5(this,Z6,n,"f"),n},pH=function(t){let n=bu(this,vu,"f");if(!n){if(t.type!=="response.created")throw new Ke(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return n=Z5(this,vu,t.response,"f"),n}switch(t.type){case"response.output_item.added":{n.output.push(t.item);break}case"response.content_part.added":{let i=n.output[t.output_index];if(!i)throw new Ke(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{let i=n.output[t.output_index];if(!i)throw new Ke(`missing output at index ${t.output_index}`);if(i.type==="message"){let o=i.content[t.content_index];if(!o)throw new Ke(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new Ke(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{let i=n.output[t.output_index];if(!i)throw new Ke(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{Z5(this,vu,t.response,"f");break}}return n},Symbol.asyncIterator)](){let e=[],t=[],n=!1;return this.on("event",i=>{let o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{n=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{n=!0;for(let o of t)o.reject(i);t.length=0}),this.on("error",i=>{n=!0;for(let o of t)o.reject(i);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,l)=>t.push({resolve:o,reject:l})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=bu(this,Z6,"f");if(!e)throw new Ke("stream ended without producing a ChatCompletion");return e}};function Pie(r,e){return hH(r,e)}var Cu=class extends ve{constructor(){super(...arguments),this.inputItems=new D5(this._client)}create(e,t){var n;return this._client.post("/responses",{body:e,...t,stream:(n=e.stream)!=null?n:!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&V6(i),i))}retrieve(e,t={},n){var i;return Ct(t)&&n===void 0?this.retrieve(e,{},t):this._client.get(`/responses/${e}`,{query:t,...n,stream:(i=t.stream)!=null?i:!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&V6(o),o))}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(n=>Ny(n,e))}stream(e,t){return F6.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}},B6=class extends Dt{};Cu.InputItems=D5;var j5=class extends ve{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,qi({body:t,...n}))}};var wu=class extends ve{constructor(){super(...arguments),this.parts=new j5(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}};wu.Parts=j5;var _H=async r=>{let e=await Promise.allSettled(r),t=e.filter(i=>i.status==="rejected");if(t.length){for(let i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}let n=[];for(let i of e)i.status==="fulfilled"&&n.push(i.value);return n};var yu=class extends ve{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,i){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}list(e,t={},n){return Ct(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,ku,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){let i=await this.create(e,t,n);return await this.poll(e,i.id,n)}async poll(e,t,n){let i={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let o=await this.retrieve(e,t,{...n,headers:i}).withResponse(),l=o.data;switch(l.status){case"in_progress":let a=5e3;if(n!=null&&n.pollIntervalMs)a=n.pollIntervalMs;else{let s=o.response.headers.get("openai-poll-after-ms");if(s){let u=parseInt(s);isNaN(u)||(a=u)}}await Ws(a);break;case"failed":case"completed":return l}}}async upload(e,t,n){let i=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:i.id},n)}async uploadAndPoll(e,t,n){let i=await this.upload(e,t,n);return await this.poll(e,i.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,x5,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}},ku=class extends Dt{},x5=class extends Pa{};yu.VectorStoreFilesPage=ku;yu.FileContentResponsesPage=x5;var q5=class extends ve{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){let i=await this.create(e,t);return await this.poll(e,i.id,n)}listFiles(e,t,n={},i){return Ct(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,ku,{query:n,...i,headers:{"OpenAI-Beta":"assistants=v2",...i==null?void 0:i.headers}})}async poll(e,t,n){let i={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(i["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){let{data:o,response:l}=await this.retrieve(e,t,{...n,headers:i}).withResponse();switch(o.status){case"in_progress":let a=5e3;if(n!=null&&n.pollIntervalMs)a=n.pollIntervalMs;else{let s=l.headers.get("openai-poll-after-ms");if(s){let u=parseInt(s);isNaN(u)||(a=u)}}await Ws(a);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},i){var h;if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let o=(h=i==null?void 0:i.maxConcurrency)!=null?h:5,l=Math.min(o,t.length),a=this._client,s=t.values(),u=[...n];async function c(d){for(let p of d){let v=await a.files.create({file:p,purpose:"assistants"},i);u.push(v.id)}}let f=Array(l).fill(s).map(c);return await _H(f),await this.createAndPoll(e,{file_ids:u})}};var bo=class extends ve{constructor(){super(...arguments),this.files=new yu(this._client),this.fileBatches=new q5(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return Ct(e)?this.list({},e):this._client.getAPIList("/vector_stores",P2,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,T2,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}},P2=class extends Dt{},T2=class extends Pa{};bo.VectorStoresPage=P2;bo.VectorStoreSearchResponsesPage=T2;bo.Files=yu;bo.VectorStoreFilesPage=ku;bo.FileContentResponsesPage=x5;bo.FileBatches=q5;var bH,ct=class extends y6{constructor({baseURL:e=td("OPENAI_BASE_URL"),apiKey:t=td("OPENAI_API_KEY"),organization:n=(l=>(l=td("OPENAI_ORG_ID"))!=null?l:null)(),project:i=(a=>(a=td("OPENAI_PROJECT_ID"))!=null?a:null)(),...o}={}){var u;if(t===void 0)throw new Ke("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let s={apiKey:t,organization:n,project:i,...o,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&Kz())throw new Ke(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:(u=s.timeout)!=null?u:6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new _2(this),this.chat=new Ys(this),this.embeddings=new v2(this),this.files=new mu(this),this.images=new S2(this),this.audio=new Ta(this),this.moderations=new A2(this),this.models=new _u(this),this.fineTuning=new _o(this),this.graders=new pu(this),this.vectorStores=new bo(this),this.beta=new Bl(this),this.batches=new su(this),this.uploads=new wu(this),this.responses=new Cu(this),this.evals=new Ha(this),this.containers=new za(this),this._options=s,this.apiKey=t,this.organization=n,this.project=i}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return ey(e,{arrayFormat:"brackets"})}};bH=ct;ct.OpenAI=bH;ct.DEFAULT_TIMEOUT=6e5;ct.OpenAIError=Ke;ct.APIError=nn;ct.APIConnectionError=qs;ct.APIConnectionTimeoutError=Hl;ct.APIUserAbortError=Dr;ct.NotFoundError=i5;ct.ConflictError=o5;ct.RateLimitError=a5;ct.BadRequestError=t5;ct.AuthenticationError=r5;ct.InternalServerError=s5;ct.PermissionDeniedError=n5;ct.UnprocessableEntityError=l5;ct.toFile=dy;ct.fileFromPath=m6;ct.Completions=_2;ct.Chat=Ys;ct.ChatCompletionsPage=au;ct.Embeddings=v2;ct.Files=mu;ct.FileObjectsPage=y2;ct.Images=S2;ct.Audio=Ta;ct.Moderations=A2;ct.Models=_u;ct.ModelsPage=M2;ct.FineTuning=_o;ct.Graders=pu;ct.VectorStores=bo;ct.VectorStoresPage=P2;ct.VectorStoreSearchResponsesPage=T2;ct.Beta=Bl;ct.Batches=su;ct.BatchesPage=c2;ct.Uploads=wu;ct.Responses=Cu;ct.Evals=Ha;ct.EvalListResponsesPage=w2;ct.Containers=za;ct.ContainerListResponsesPage=b2;ti();ga();ti();ga();ti();ga();_a();W9();ti();Jh();var Vy=class extends jt{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(n,i)=>this.parseResult([{text:n}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(n,i)=>this.parseResult([{message:n,text:this._baseMessageToString(n)}],i==null?void 0:i.callbacks),e,{...t,runType:"parser"})}},U5=class extends Vy{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}},Lu=class extends Error{constructor(e,t,n,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=n,this.sendToLLM=i,i&&(n===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");K1(this,"OUTPUT_PARSING_FAILURE")}};function $s(r,e){let t=typeof r;if(t!==typeof e)return!1;if(Array.isArray(r)){if(!Array.isArray(e))return!1;let n=r.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(!$s(r[i],e[i]))return!1;return!0}if(t==="object"){if(!r||!e)return r===e;let n=Object.keys(r),i=Object.keys(e);if(n.length!==i.length)return!1;for(let l of n)if(!$s(r[l],e[l]))return!1;return!0}return r===e}function vo(r){return encodeURI(zie(r))}function zie(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}var Hie={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},Nie={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},Vie={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0},Bie=typeof self!="undefined"&&self.location&&self.location.origin!=="null"?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function Eu(r,e=Object.create(null),t=Bie,n=""){if(r&&typeof r=="object"&&!Array.isArray(r)){let o=r.$id||r.id;if(o){let l=new URL(o,t.href);l.hash.length>1?e[l.href]=r:(l.hash="",n===""?t=l:Eu(r,e,t))}}else if(r!==!0&&r!==!1)return e;let i=t.href+(n?"#"+n:"");if(e[i]!==void 0)throw new Error(`Duplicate schema URI "${i}".`);if(e[i]=r,r===!0||r===!1)return e;if(r.__absolute_uri__===void 0&&Object.defineProperty(r,"__absolute_uri__",{enumerable:!1,value:i}),r.$ref&&r.__absolute_ref__===void 0){let o=new URL(r.$ref,t.href);o.hash=o.hash,Object.defineProperty(r,"__absolute_ref__",{enumerable:!1,value:o.href})}if(r.$recursiveRef&&r.__absolute_recursive_ref__===void 0){let o=new URL(r.$recursiveRef,t.href);o.hash=o.hash,Object.defineProperty(r,"__absolute_recursive_ref__",{enumerable:!1,value:o.href})}if(r.$anchor){let o=new URL("#"+r.$anchor,t.href);e[o.href]=r}for(let o in r){if(Vie[o])continue;let l=`${n}/${vo(o)}`,a=r[o];if(Array.isArray(a)){if(Hie[o]){let s=a.length;for(let u=0;u<s;u++)Eu(a[u],e,t,`${l}/${u}`)}}else if(Nie[o])for(let s in a)Eu(a[s],e,t,`${l}/${vo(s)}`);else Eu(a,e,t,l)}return e}var Die=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Zie=[0,31,28,31,30,31,30,31,31,30,31,30,31],Fie=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,jie=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,xie=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,qie=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Uie=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,Wie=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Gie=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Yie=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Kie=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Jie=r=>{if(r[0]==='"')return!1;let[e,t,...n]=r.split("@");return!e||!t||n.length!==0||e.length>64||t.length>253||e[0]==="."||e.endsWith(".")||e.includes("..")||!/^[a-z0-9.-]+$/i.test(t)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(e)?!1:t.split(".").every(i=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(i))},Xie=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Qie=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,$ie=r=>r.length>1&&r.length<80&&(/^P\d+([.,]\d+)?W$/.test(r)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(r)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(r));function Va(r){return r.test.bind(r)}var By={date:vH,time:CH.bind(void 0,!1),"date-time":roe,duration:$ie,uri:ooe,"uri-reference":Va(xie),"uri-template":Va(qie),url:Va(Uie),email:Jie,hostname:Va(jie),ipv4:Va(Xie),ipv6:Va(Qie),regex:aoe,uuid:Va(Wie),"json-pointer":Va(Gie),"json-pointer-uri-fragment":Va(Yie),"relative-json-pointer":Va(Kie)};function eoe(r){return r%4===0&&(r%100!==0||r%400===0)}function vH(r){let e=r.match(Die);if(!e)return!1;let t=+e[1],n=+e[2],i=+e[3];return n>=1&&n<=12&&i>=1&&i<=(n==2&&eoe(t)?29:Zie[n])}function CH(r,e){let t=e.match(Fie);if(!t)return!1;let n=+t[1],i=+t[2],o=+t[3],l=!!t[5];return(n<=23&&i<=59&&o<=59||n==23&&i==59&&o==60)&&(!r||l)}var toe=/t|\s/i;function roe(r){let e=r.split(toe);return e.length==2&&vH(e[0])&&CH(!0,e[1])}var noe=/\/|:/,ioe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function ooe(r){return noe.test(r)&&ioe.test(r)}var loe=/[^\\]\\Z/;function aoe(r){if(loe.test(r))return!1;try{return new RegExp(r,"u"),!0}catch(e){return!1}}var wH;(function(r){r[r.Flag=1]="Flag",r[r.Basic=2]="Basic",r[r.Detailed=4]="Detailed"})(wH||(wH={}));function yH(r){let e=0,t=r.length,n=0,i;for(;n<t;)e++,i=r.charCodeAt(n++),i>=55296&&i<=56319&&n<t&&(i=r.charCodeAt(n),(i&64512)==56320&&n++);return e}function Pr(r,e,t="2019-09",n=Eu(e),i=!0,o=null,l="#",a="#",s=Object.create(null)){if(e===!0)return{valid:!0,errors:[]};if(e===!1)return{valid:!1,errors:[{instanceLocation:l,keyword:"false",keywordLocation:l,error:"False boolean schema."}]};let u=typeof r,c;switch(u){case"boolean":case"number":case"string":c=u;break;case"object":r===null?c="null":Array.isArray(r)?c="array":c="object";break;default:throw new Error(`Instances of "${u}" type are not supported.`)}let{$ref:f,$recursiveRef:h,$recursiveAnchor:d,type:p,const:v,enum:b,required:C,not:L,anyOf:S,allOf:P,oneOf:y,if:z,then:G,else:J,format:te,properties:ne,patternProperties:Q,additionalProperties:ee,unevaluatedProperties:se,minProperties:Pe,maxProperties:Te,propertyNames:be,dependentRequired:rt,dependentSchemas:Ee,dependencies:Re,prefixItems:nr,items:Xt,additionalItems:Oe,unevaluatedItems:fe,contains:hr,minContains:qt,maxContains:Mr,minItems:sn,maxItems:$r,uniqueItems:Ao,minimum:vn,maximum:Tn,exclusiveMinimum:Mi,exclusiveMaximum:jn,multipleOf:ai,minLength:ke,maxLength:Po,pattern:sl,__absolute_ref__:Cn,__absolute_recursive_ref__:Ir}=e,we=[];if(d===!0&&o===null&&(o=e),h==="#"){let Qe=o===null?n[Ir]:o,Ie=`${a}/$recursiveRef`,st=Pr(r,o===null?e:o,t,n,i,Qe,l,Ie,s);st.valid||we.push({instanceLocation:l,keyword:"$recursiveRef",keywordLocation:Ie,error:"A subschema had errors."},...st.errors)}if(f!==void 0){let Ie=n[Cn||f];if(Ie===void 0){let Me=`Unresolved $ref "${f}".`;throw Cn&&Cn!==f&&(Me+=`  Absolute URI "${Cn}".`),Me+=`
Known schemas:
- ${Object.keys(n).join(`
- `)}`,new Error(Me)}let st=`${a}/$ref`,Ve=Pr(r,Ie,t,n,i,o,l,st,s);if(Ve.valid||we.push({instanceLocation:l,keyword:"$ref",keywordLocation:st,error:"A subschema had errors."},...Ve.errors),t==="4"||t==="7")return{valid:we.length===0,errors:we}}if(Array.isArray(p)){let Qe=p.length,Ie=!1;for(let st=0;st<Qe;st++)if(c===p[st]||p[st]==="integer"&&c==="number"&&r%1===0&&r===r){Ie=!0;break}Ie||we.push({instanceLocation:l,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${c}" is invalid. Expected "${p.join('", "')}".`})}else p==="integer"?(c!=="number"||r%1||r!==r)&&we.push({instanceLocation:l,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${c}" is invalid. Expected "${p}".`}):p!==void 0&&c!==p&&we.push({instanceLocation:l,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${c}" is invalid. Expected "${p}".`});if(v!==void 0&&(c==="object"||c==="array"?$s(r,v)||we.push({instanceLocation:l,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(v)}.`}):r!==v&&we.push({instanceLocation:l,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(v)}.`})),b!==void 0&&(c==="object"||c==="array"?b.some(Qe=>$s(r,Qe))||we.push({instanceLocation:l,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(b)}.`}):b.some(Qe=>r===Qe)||we.push({instanceLocation:l,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(b)}.`})),L!==void 0){let Qe=`${a}/not`;Pr(r,L,t,n,i,o,l,Qe).valid&&we.push({instanceLocation:l,keyword:"not",keywordLocation:Qe,error:'Instance matched "not" schema.'})}let en=[];if(S!==void 0){let Qe=`${a}/anyOf`,Ie=we.length,st=!1;for(let Ve=0;Ve<S.length;Ve++){let Me=S[Ve],Ae=Object.create(s),nt=Pr(r,Me,t,n,i,d===!0?o:null,l,`${Qe}/${Ve}`,Ae);we.push(...nt.errors),st=st||nt.valid,nt.valid&&en.push(Ae)}st?we.length=Ie:we.splice(Ie,0,{instanceLocation:l,keyword:"anyOf",keywordLocation:Qe,error:"Instance does not match any subschemas."})}if(P!==void 0){let Qe=`${a}/allOf`,Ie=we.length,st=!0;for(let Ve=0;Ve<P.length;Ve++){let Me=P[Ve],Ae=Object.create(s),nt=Pr(r,Me,t,n,i,d===!0?o:null,l,`${Qe}/${Ve}`,Ae);we.push(...nt.errors),st=st&&nt.valid,nt.valid&&en.push(Ae)}st?we.length=Ie:we.splice(Ie,0,{instanceLocation:l,keyword:"allOf",keywordLocation:Qe,error:"Instance does not match every subschema."})}if(y!==void 0){let Qe=`${a}/oneOf`,Ie=we.length,st=y.filter((Ve,Me)=>{let Ae=Object.create(s),nt=Pr(r,Ve,t,n,i,d===!0?o:null,l,`${Qe}/${Me}`,Ae);return we.push(...nt.errors),nt.valid&&en.push(Ae),nt.valid}).length;st===1?we.length=Ie:we.splice(Ie,0,{instanceLocation:l,keyword:"oneOf",keywordLocation:Qe,error:`Instance does not match exactly one subschema (${st} matches).`})}if((c==="object"||c==="array")&&Object.assign(s,...en),z!==void 0){let Qe=`${a}/if`;if(Pr(r,z,t,n,i,o,l,Qe,s).valid){if(G!==void 0){let st=Pr(r,G,t,n,i,o,l,`${a}/then`,s);st.valid||we.push({instanceLocation:l,keyword:"if",keywordLocation:Qe,error:'Instance does not match "then" schema.'},...st.errors)}}else if(J!==void 0){let st=Pr(r,J,t,n,i,o,l,`${a}/else`,s);st.valid||we.push({instanceLocation:l,keyword:"if",keywordLocation:Qe,error:'Instance does not match "else" schema.'},...st.errors)}}if(c==="object"){if(C!==void 0)for(let Ve of C)Ve in r||we.push({instanceLocation:l,keyword:"required",keywordLocation:`${a}/required`,error:`Instance does not have required property "${Ve}".`});let Qe=Object.keys(r);if(Pe!==void 0&&Qe.length<Pe&&we.push({instanceLocation:l,keyword:"minProperties",keywordLocation:`${a}/minProperties`,error:`Instance does not have at least ${Pe} properties.`}),Te!==void 0&&Qe.length>Te&&we.push({instanceLocation:l,keyword:"maxProperties",keywordLocation:`${a}/maxProperties`,error:`Instance does not have at least ${Te} properties.`}),be!==void 0){let Ve=`${a}/propertyNames`;for(let Me in r){let Ae=`${l}/${vo(Me)}`,nt=Pr(Me,be,t,n,i,o,Ae,Ve);nt.valid||we.push({instanceLocation:l,keyword:"propertyNames",keywordLocation:Ve,error:`Property name "${Me}" does not match schema.`},...nt.errors)}}if(rt!==void 0){let Ve=`${a}/dependantRequired`;for(let Me in rt)if(Me in r){let Ae=rt[Me];for(let nt of Ae)nt in r||we.push({instanceLocation:l,keyword:"dependentRequired",keywordLocation:Ve,error:`Instance has "${Me}" but does not have "${nt}".`})}}if(Ee!==void 0)for(let Ve in Ee){let Me=`${a}/dependentSchemas`;if(Ve in r){let Ae=Pr(r,Ee[Ve],t,n,i,o,l,`${Me}/${vo(Ve)}`,s);Ae.valid||we.push({instanceLocation:l,keyword:"dependentSchemas",keywordLocation:Me,error:`Instance has "${Ve}" but does not match dependant schema.`},...Ae.errors)}}if(Re!==void 0){let Ve=`${a}/dependencies`;for(let Me in Re)if(Me in r){let Ae=Re[Me];if(Array.isArray(Ae))for(let nt of Ae)nt in r||we.push({instanceLocation:l,keyword:"dependencies",keywordLocation:Ve,error:`Instance has "${Me}" but does not have "${nt}".`});else{let nt=Pr(r,Ae,t,n,i,o,l,`${Ve}/${vo(Me)}`);nt.valid||we.push({instanceLocation:l,keyword:"dependencies",keywordLocation:Ve,error:`Instance has "${Me}" but does not match dependant schema.`},...nt.errors)}}}let Ie=Object.create(null),st=!1;if(ne!==void 0){let Ve=`${a}/properties`;for(let Me in ne){if(!(Me in r))continue;let Ae=`${l}/${vo(Me)}`,nt=Pr(r[Me],ne[Me],t,n,i,o,Ae,`${Ve}/${vo(Me)}`);if(nt.valid)s[Me]=Ie[Me]=!0;else if(st=i,we.push({instanceLocation:l,keyword:"properties",keywordLocation:Ve,error:`Property "${Me}" does not match schema.`},...nt.errors),st)break}}if(!st&&Q!==void 0){let Ve=`${a}/patternProperties`;for(let Me in Q){let Ae=new RegExp(Me,"u"),nt=Q[Me];for(let Wr in r){if(!Ae.test(Wr))continue;let L1=`${l}/${vo(Wr)}`,$u=Pr(r[Wr],nt,t,n,i,o,L1,`${Ve}/${vo(Me)}`);$u.valid?s[Wr]=Ie[Wr]=!0:(st=i,we.push({instanceLocation:l,keyword:"patternProperties",keywordLocation:Ve,error:`Property "${Wr}" matches pattern "${Me}" but does not match associated schema.`},...$u.errors))}}}if(!st&&ee!==void 0){let Ve=`${a}/additionalProperties`;for(let Me in r){if(Ie[Me])continue;let Ae=`${l}/${vo(Me)}`,nt=Pr(r[Me],ee,t,n,i,o,Ae,Ve);nt.valid?s[Me]=!0:(st=i,we.push({instanceLocation:l,keyword:"additionalProperties",keywordLocation:Ve,error:`Property "${Me}" does not match additional properties schema.`},...nt.errors))}}else if(!st&&se!==void 0){let Ve=`${a}/unevaluatedProperties`;for(let Me in r)if(!s[Me]){let Ae=`${l}/${vo(Me)}`,nt=Pr(r[Me],se,t,n,i,o,Ae,Ve);nt.valid?s[Me]=!0:we.push({instanceLocation:l,keyword:"unevaluatedProperties",keywordLocation:Ve,error:`Property "${Me}" does not match unevaluated properties schema.`},...nt.errors)}}}else if(c==="array"){$r!==void 0&&r.length>$r&&we.push({instanceLocation:l,keyword:"maxItems",keywordLocation:`${a}/maxItems`,error:`Array has too many items (${r.length} > ${$r}).`}),sn!==void 0&&r.length<sn&&we.push({instanceLocation:l,keyword:"minItems",keywordLocation:`${a}/minItems`,error:`Array has too few items (${r.length} < ${sn}).`});let Qe=r.length,Ie=0,st=!1;if(nr!==void 0){let Ve=`${a}/prefixItems`,Me=Math.min(nr.length,Qe);for(;Ie<Me;Ie++){let Ae=Pr(r[Ie],nr[Ie],t,n,i,o,`${l}/${Ie}`,`${Ve}/${Ie}`);if(s[Ie]=!0,!Ae.valid&&(st=i,we.push({instanceLocation:l,keyword:"prefixItems",keywordLocation:Ve,error:"Items did not match schema."},...Ae.errors),st))break}}if(Xt!==void 0){let Ve=`${a}/items`;if(Array.isArray(Xt)){let Me=Math.min(Xt.length,Qe);for(;Ie<Me;Ie++){let Ae=Pr(r[Ie],Xt[Ie],t,n,i,o,`${l}/${Ie}`,`${Ve}/${Ie}`);if(s[Ie]=!0,!Ae.valid&&(st=i,we.push({instanceLocation:l,keyword:"items",keywordLocation:Ve,error:"Items did not match schema."},...Ae.errors),st))break}}else for(;Ie<Qe;Ie++){let Me=Pr(r[Ie],Xt,t,n,i,o,`${l}/${Ie}`,Ve);if(s[Ie]=!0,!Me.valid&&(st=i,we.push({instanceLocation:l,keyword:"items",keywordLocation:Ve,error:"Items did not match schema."},...Me.errors),st))break}if(!st&&Oe!==void 0){let Me=`${a}/additionalItems`;for(;Ie<Qe;Ie++){let Ae=Pr(r[Ie],Oe,t,n,i,o,`${l}/${Ie}`,Me);s[Ie]=!0,Ae.valid||(st=i,we.push({instanceLocation:l,keyword:"additionalItems",keywordLocation:Me,error:"Items did not match additional items schema."},...Ae.errors))}}}if(hr!==void 0)if(Qe===0&&qt===void 0)we.push({instanceLocation:l,keyword:"contains",keywordLocation:`${a}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(qt!==void 0&&Qe<qt)we.push({instanceLocation:l,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array has less items (${Qe}) than minContains (${qt}).`});else{let Ve=`${a}/contains`,Me=we.length,Ae=0;for(let nt=0;nt<Qe;nt++){let Wr=Pr(r[nt],hr,t,n,i,o,`${l}/${nt}`,Ve);Wr.valid?(s[nt]=!0,Ae++):we.push(...Wr.errors)}Ae>=(qt||0)&&(we.length=Me),qt===void 0&&Mr===void 0&&Ae===0?we.splice(Me,0,{instanceLocation:l,keyword:"contains",keywordLocation:Ve,error:"Array does not contain item matching schema."}):qt!==void 0&&Ae<qt?we.push({instanceLocation:l,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array must contain at least ${qt} items matching schema. Only ${Ae} items were found.`}):Mr!==void 0&&Ae>Mr&&we.push({instanceLocation:l,keyword:"maxContains",keywordLocation:`${a}/maxContains`,error:`Array may contain at most ${Mr} items matching schema. ${Ae} items were found.`})}if(!st&&fe!==void 0){let Ve=`${a}/unevaluatedItems`;for(Ie;Ie<Qe;Ie++){if(s[Ie])continue;let Me=Pr(r[Ie],fe,t,n,i,o,`${l}/${Ie}`,Ve);s[Ie]=!0,Me.valid||we.push({instanceLocation:l,keyword:"unevaluatedItems",keywordLocation:Ve,error:"Items did not match unevaluated items schema."},...Me.errors)}}if(Ao)for(let Ve=0;Ve<Qe;Ve++){let Me=r[Ve],Ae=typeof Me=="object"&&Me!==null;for(let nt=0;nt<Qe;nt++){if(Ve===nt)continue;let Wr=r[nt];(Me===Wr||Ae&&(typeof Wr=="object"&&Wr!==null)&&$s(Me,Wr))&&(we.push({instanceLocation:l,keyword:"uniqueItems",keywordLocation:`${a}/uniqueItems`,error:`Duplicate items at indexes ${Ve} and ${nt}.`}),Ve=Number.MAX_SAFE_INTEGER,nt=Number.MAX_SAFE_INTEGER)}}}else if(c==="number"){if(t==="4"?(vn!==void 0&&(Mi===!0&&r<=vn||r<vn)&&we.push({instanceLocation:l,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${r} is less than ${Mi?"or equal to ":""} ${vn}.`}),Tn!==void 0&&(jn===!0&&r>=Tn||r>Tn)&&we.push({instanceLocation:l,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${r} is greater than ${jn?"or equal to ":""} ${Tn}.`})):(vn!==void 0&&r<vn&&we.push({instanceLocation:l,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${r} is less than ${vn}.`}),Tn!==void 0&&r>Tn&&we.push({instanceLocation:l,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${r} is greater than ${Tn}.`}),Mi!==void 0&&r<=Mi&&we.push({instanceLocation:l,keyword:"exclusiveMinimum",keywordLocation:`${a}/exclusiveMinimum`,error:`${r} is less than ${Mi}.`}),jn!==void 0&&r>=jn&&we.push({instanceLocation:l,keyword:"exclusiveMaximum",keywordLocation:`${a}/exclusiveMaximum`,error:`${r} is greater than or equal to ${jn}.`})),ai!==void 0){let Qe=r%ai;Math.abs(0-Qe)>=11920929e-14&&Math.abs(ai-Qe)>=11920929e-14&&we.push({instanceLocation:l,keyword:"multipleOf",keywordLocation:`${a}/multipleOf`,error:`${r} is not a multiple of ${ai}.`})}}else if(c==="string"){let Qe=ke===void 0&&Po===void 0?0:yH(r);ke!==void 0&&Qe<ke&&we.push({instanceLocation:l,keyword:"minLength",keywordLocation:`${a}/minLength`,error:`String is too short (${Qe} < ${ke}).`}),Po!==void 0&&Qe>Po&&we.push({instanceLocation:l,keyword:"maxLength",keywordLocation:`${a}/maxLength`,error:`String is too long (${Qe} > ${Po}).`}),sl!==void 0&&!new RegExp(sl,"u").test(r)&&we.push({instanceLocation:l,keyword:"pattern",keywordLocation:`${a}/pattern`,error:"String does not match pattern."}),te!==void 0&&By[te]&&!By[te](r)&&we.push({instanceLocation:l,keyword:"format",keywordLocation:`${a}/format`,error:`String does not match format "${te}".`})}return{valid:we.length===0,errors:we}}xo();Q1();L9();var W5=class extends U5{async*_transform(e){for await(let t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}},O2=class extends W5{constructor(e){var t;super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(t=e==null?void 0:e.diff)!=null?t:this.diff}async*_transform(e){let t,n;for await(let i of e){if(typeof i!="string"&&typeof i.content!="string")throw new Error("Cannot handle non-string output.");let o;if(uC(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Ml({message:i,text:i.content})}else if(da(i)){if(typeof i.content!="string")throw new Error("Cannot handle non-string message output.");o=new Ml({message:hC(i),text:i.content})}else o=new ba({text:i});n===void 0?n=o:n=n.concat(o);let l=await this.parsePartialResult([n]);l!=null&&!$s(l,t)&&(this.diff?yield this._diff(t,l):yield l,t=l)}}getFormatInstructions(){return""}};U1();X0();var gd=class extends U5{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let t=Gn.object(Object.fromEntries(Object.entries(e).map(([n,i])=>[n,Gn.string().describe(i)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Uo(this.schema))}
\`\`\`
`}async parse(e){try{let n=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(n))}catch(t){throw new Lu(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}};Yv();iC();var pd=class extends O2{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?cm(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return nC(e[0].text)}async parse(e){return nC(e,JSON.parse)}getFormatInstructions(){return""}};x0();function j6(r,e){var i;if(r.function===void 0)return;let t;if(e!=null&&e.partial)try{t=b9((i=r.function.arguments)!=null?i:"{}")}catch(o){return}else try{t=JSON.parse(r.function.arguments)}catch(o){throw new Lu([`Function "${r.function.name}" arguments:`,"",r.function.arguments,"","are not valid JSON.",`Error: ${o.message}`].join(`
`))}let n={name:r.function.name,args:t,type:"tool_call"};return e!=null&&e.returnId&&(n.id=r.id),n}function kH(r){if(r.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:r.id,type:"function",function:{name:r.name,arguments:JSON.stringify(r.args)}}}function Zy(r,e){var t,n;return{name:(t=r.function)==null?void 0:t.name,args:(n=r.function)==null?void 0:n.arguments,id:r.id,error:e,type:"invalid_tool_call"}}var Dy=class extends O2{static lc_name(){return"JsonOutputToolsParser"}constructor(e){var t;super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(t=e==null?void 0:e.returnId)!=null?t:this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){var l;let n=e[0].message,i;if(kl(n)&&((l=n.tool_calls)!=null&&l.length)?i=n.tool_calls.map(a=>{let{id:s,...u}=a;return this.returnId?{id:s,...u}:u}):n.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map(s=>j6(s,{returnId:this.returnId,partial:t}))),!i)return[];let o=[];for(let a of i)if(a!==void 0){let s={type:a.name,args:a.args,id:a.id};o.push(s)}return o}},_d=class extends Dy{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){var t;super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=(t=e.returnSingle)!=null?t:this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;let t=await this.zodSchema.safeParseAsync(e);if(t.success)return t.data;throw new Lu(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){let n=(await super.parsePartialResult(e)).filter(o=>o.type===this.keyName),i=n;if(n.length)return this.returnId||(i=n.map(o=>o.args)),this.returnSingle?i[0]:i}async parseResult(e){let n=(await super.parsePartialResult(e,!1)).filter(l=>l.type===this.keyName),i=n;return n.length?(this.returnId||(i=n.map(l=>l.args)),this.returnSingle?this._validateResult(i[0]):await Promise.all(i.map(l=>this._validateResult(l)))):void 0}};X0();var EH=Symbol("Let zodToJsonSchema decide on which parser to use"),LH={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},SH=r=>typeof r=="string"?{...LH,basePath:["#"],definitions:{},name:r}:{...LH,basePath:["#"],definitions:{},...r};var bd=r=>"_def"in r?r._def:r;function MH(r){if(!r)return!0;for(let e in r)return!1;return!0}var AH=r=>{let e=SH(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[bd(i),{def:bd(i),path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function Fy(r,e,t,n){n!=null&&n.errorMessages&&t&&(r.errorMessage={...r.errorMessage,[e]:t})}function Yt(r,e,t,n,i){r[e]=t,Fy(r,e,n,i)}U1();function PH(){return{}}U1();function TH(r,e){var n,i;let t={type:"array"};return((i=(n=r.type)==null?void 0:n._def)==null?void 0:i.typeName)!==Se.ZodAny&&(t.items=ft(r.type._def,{...e,currentPath:[...e.currentPath,"items"]})),r.minLength&&Yt(t,"minItems",r.minLength.value,r.minLength.message,e),r.maxLength&&Yt(t,"maxItems",r.maxLength.value,r.maxLength.message,e),r.exactLength&&(Yt(t,"minItems",r.exactLength.value,r.exactLength.message,e),Yt(t,"maxItems",r.exactLength.value,r.exactLength.message,e)),t}function OH(r,e){let t={type:"integer",format:"int64"};if(!r.checks)return t;for(let n of r.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?Yt(t,"minimum",n.value,n.message,e):Yt(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),Yt(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Yt(t,"maximum",n.value,n.message,e):Yt(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),Yt(t,"maximum",n.value,n.message,e));break;case"multipleOf":Yt(t,"multipleOf",n.value,n.message,e);break}return t}function RH(){return{type:"boolean"}}function IH(r,e){return ft(r.type._def,e)}var zH=(r,e)=>ft(r.innerType._def,e);function jy(r,e,t){let n=t!=null?t:e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,o)=>jy(r,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return soe(r,e)}}var soe=(r,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let n of r.checks)switch(n.kind){case"min":Yt(t,"minimum",n.value,n.message,e);break;case"max":Yt(t,"maximum",n.value,n.message,e);break}return t};function HH(r,e){return{...ft(r.innerType._def,e),default:r.defaultValue()}}function NH(r,e,t){return e.effectStrategy==="input"?ft(r.schema._def,e,t):{}}function VH(r){return{type:"string",enum:[...r.values]}}var uoe=r=>"type"in r&&r.type==="string"?!1:"allOf"in r;function BH(r,e){let t=[ft(r.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),ft(r.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(o=>!!o),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return t.forEach(o=>{if(uoe(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(n=void 0);else{let l=o;if("additionalProperties"in o&&o.additionalProperties===!1){let{additionalProperties:a,...s}=o;l=s}else n=void 0;i.push(l)}}),i.length?{allOf:i,...n}:void 0}function DH(r,e){let t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}U1();var xy,R2={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(xy===void 0&&(xy=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),xy),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function x6(r,e){let t={type:"string"};function n(i){return e.patternStrategy==="escape"?coe(i):i}if(r.checks)for(let i of r.checks)switch(i.kind){case"min":Yt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e);break;case"max":Yt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Dl(t,"email",i.message,e);break;case"format:idn-email":Dl(t,"idn-email",i.message,e);break;case"pattern:zod":Zl(t,R2.email,i.message,e);break}break;case"url":Dl(t,"uri",i.message,e);break;case"uuid":Dl(t,"uuid",i.message,e);break;case"regex":Zl(t,i.regex,i.message,e);break;case"cuid":Zl(t,R2.cuid,i.message,e);break;case"cuid2":Zl(t,R2.cuid2,i.message,e);break;case"startsWith":Zl(t,RegExp(`^${n(i.value)}`),i.message,e);break;case"endsWith":Zl(t,RegExp(`${n(i.value)}$`),i.message,e);break;case"datetime":Dl(t,"date-time",i.message,e);break;case"date":Dl(t,"date",i.message,e);break;case"time":Dl(t,"time",i.message,e);break;case"duration":Dl(t,"duration",i.message,e);break;case"length":Yt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e),Yt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"includes":{Zl(t,RegExp(n(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&Dl(t,"ipv4",i.message,e),i.version!=="v4"&&Dl(t,"ipv6",i.message,e);break}case"emoji":Zl(t,R2.emoji,i.message,e);break;case"ulid":{Zl(t,R2.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Dl(t,"binary",i.message,e);break}case"contentEncoding:base64":{Yt(t,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{Zl(t,R2.base64,i.message,e);break}}break}case"nanoid":Zl(t,R2.nanoid,i.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}var coe=r=>Array.from(r).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Dl=(r,e,t,n)=>{var i;r.format||(i=r.anyOf)!=null&&i.some(o=>o.format)?(r.anyOf||(r.anyOf=[]),r.format&&(r.anyOf.push({format:r.format,...r.errorMessage&&n.errorMessages&&{errorMessage:{format:r.errorMessage.format}}}),delete r.format,r.errorMessage&&(delete r.errorMessage.format,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.anyOf.push({format:e,...t&&n.errorMessages&&{errorMessage:{format:t}}})):Yt(r,"format",e,t,n)},Zl=(r,e,t,n)=>{var i;r.pattern||(i=r.allOf)!=null&&i.some(o=>o.pattern)?(r.allOf||(r.allOf=[]),r.pattern&&(r.allOf.push({pattern:r.pattern,...r.errorMessage&&n.errorMessages&&{errorMessage:{pattern:r.errorMessage.pattern}}}),delete r.pattern,r.errorMessage&&(delete r.errorMessage.pattern,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.allOf.push({pattern:ZH(e,n),...t&&n.errorMessages&&{errorMessage:{pattern:t}}})):Yt(r,"pattern",ZH(e,n),t,n)},ZH=(r,e)=>{var u;let t=typeof r=="function"?r():r;if(!e.applyRegexFlags||!t.flags)return t.source;let n={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},i=n.i?t.source.toLowerCase():t.source,o="",l=!1,a=!1,s=!1;for(let c=0;c<i.length;c++){if(l){o+=i[c],l=!1;continue}if(n.i){if(a){if(i[c].match(/[a-z]/)){s?(o+=i[c],o+=`${i[c-2]}-${i[c]}`.toUpperCase(),s=!1):i[c+1]==="-"&&((u=i[c+2])!=null&&u.match(/[a-z]/))?(o+=i[c],s=!0):o+=`${i[c]}${i[c].toUpperCase()}`;continue}}else if(i[c].match(/[a-z]/)){o+=`[${i[c]}${i[c].toUpperCase()}]`;continue}}if(n.m){if(i[c]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(i[c]==="$"){o+=`($|(?=[\r
]))`;continue}}if(n.s&&i[c]==="."){o+=a?`${i[c]}\r
`:`[${i[c]}\r
]`;continue}o+=i[c],i[c]==="\\"?l=!0:a&&i[c]==="]"?a=!1:!a&&i[c]==="["&&(a=!0)}try{let c=new RegExp(o)}catch(c){return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o};function q6(r,e){var n,i,o,l,a;if(e.target==="openApi3"&&((n=r.keyType)==null?void 0:n._def.typeName)===Se.ZodEnum)return{type:"object",required:r.keyType._def.values,properties:r.keyType._def.values.reduce((s,u)=>{var c;return{...s,[u]:(c=ft(r.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]}))!=null?c:{}}},{}),additionalProperties:!1};let t={type:"object",additionalProperties:(i=ft(r.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?i:{}};if(e.target==="openApi3")return t;if(((o=r.keyType)==null?void 0:o._def.typeName)===Se.ZodString&&((l=r.keyType._def.checks)!=null&&l.length)){let s=Object.entries(x6(r.keyType._def,e)).reduce((u,[c,f])=>c==="type"?u:{...u,[c]:f},{});return{...t,propertyNames:s}}else if(((a=r.keyType)==null?void 0:a._def.typeName)===Se.ZodEnum)return{...t,propertyNames:{enum:r.keyType._def.values}};return t}function FH(r,e){if(e.mapStrategy==="record")return q6(r,e);let t=ft(r.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=ft(r.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,n],minItems:2,maxItems:2}}}function jH(r){let e=r.values,n=Object.keys(r.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(n.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function xH(){return{not:{}}}function qH(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var vd={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function WH(r,e){if(e.target==="openApi3")return UH(r,e);let t=r.options instanceof Map?Array.from(r.options.values()):r.options;if(t.every(n=>n._def.typeName in vd&&(!n._def.checks||!n._def.checks.length))){let n=t.reduce((i,o)=>{let l=vd[o._def.typeName];return l&&!i.includes(l)?[...i,l]:i},[]);return{type:n.length>1?n:n[0]}}else if(t.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=t.reduce((i,o)=>{let l=typeof o._def.value;switch(l){case"string":case"number":case"boolean":return[...i,l];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===t.length){let i=n.filter((o,l,a)=>a.indexOf(o)===l);return{type:i.length>1?i:i[0],enum:t.reduce((o,l)=>o.includes(l._def.value)?o:[...o,l._def.value],[])}}}else if(t.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((n,i)=>[...n,...i._def.values.filter(o=>!n.includes(o))],[])};return UH(r,e)}var UH=(r,e)=>{let t=(r.options instanceof Map?Array.from(r.options.values()):r.options).map((n,i)=>ft(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return t.length?{anyOf:t}:void 0};function GH(r,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:vd[r.innerType._def.typeName],nullable:!0}:{type:[vd[r.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=ft(r.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let t=ft(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function YH(r,e){let t={type:"number"};if(!r.checks)return t;for(let n of r.checks)switch(n.kind){case"int":t.type="integer",Fy(t,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?Yt(t,"minimum",n.value,n.message,e):Yt(t,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(t.exclusiveMinimum=!0),Yt(t,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Yt(t,"maximum",n.value,n.message,e):Yt(t,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(t.exclusiveMaximum=!0),Yt(t,"maximum",n.value,n.message,e));break;case"multipleOf":Yt(t,"multipleOf",n.value,n.message,e);break}return t}function foe(r,e){var t,n;return e.removeAdditionalStrategy==="strict"?r.catchall._def.typeName==="ZodNever"?r.unknownKeys!=="strict":(t=ft(r.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?t:!0:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":(n=ft(r.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?n:!0}function KH(r,e){let t={type:"object",...Object.entries(r.shape()).reduce((n,[i,o])=>{if(o===void 0||o._def===void 0)return n;let l=[...e.currentPath,"properties",i],a=ft(o._def,{...e,currentPath:l,propertyPath:l});return a===void 0?n:(e.openaiStrictMode&&o.isOptional()&&!o.isNullable()&&console.warn(`Zod field at \`${l.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...n.properties,[i]:a},required:o.isOptional()&&!e.openaiStrictMode?n.required:[...n.required,i]})},{properties:{},required:[]}),additionalProperties:foe(r,e)};return t.required.length||delete t.required,t}var JH=(r,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return ft(r.innerType._def,e);let t=ft(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}};var XH=(r,e)=>{if(e.pipeStrategy==="input")return ft(r.in._def,e);if(e.pipeStrategy==="output")return ft(r.out._def,e);let t=ft(r.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=ft(r.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,n].filter(i=>i!==void 0)}};function QH(r,e){return ft(r.type._def,e)}function $H(r,e){let n={type:"array",uniqueItems:!0,items:ft(r.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return r.minSize&&Yt(n,"minItems",r.minSize.value,r.minSize.message,e),r.maxSize&&Yt(n,"maxItems",r.maxSize.value,r.maxSize.message,e),n}function eN(r,e){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((t,n)=>ft(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[]),additionalItems:ft(r.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((t,n)=>ft(t._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((t,n)=>n===void 0?t:[...t,n],[])}}function tN(){return{not:{}}}function rN(){return{}}var nN=(r,e)=>ft(r.innerType._def,e);function ft(r,e,t=!1){var l;let n=e.seen.get(r);if(e.override){let a=(l=e.override)==null?void 0:l.call(e,r,e,n,t);if(a!==EH)return a}if(n&&!t){let a=hoe(n,e);if(a!==void 0)return"$ref"in a&&e.seenRefs.add(a.$ref),a}let i={def:r,path:e.currentPath,jsonSchema:void 0};e.seen.set(r,i);let o=moe(r,r.typeName,e,t);return o&&goe(r,e,o),i.jsonSchema=o,o}var hoe=(r,e)=>{switch(e.$refStrategy){case"root":return{$ref:r.path.join("/")};case"extract-to-root":let t=r.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=r.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:doe(e.currentPath,r.path)};case"none":case"seen":return r.path.length<e.currentPath.length&&r.path.every((n,i)=>e.currentPath[i]===n)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},doe=(r,e)=>{let t=0;for(;t<r.length&&t<e.length&&r[t]===e[t];t++);return[(r.length-t).toString(),...e.slice(t)].join("/")},moe=(r,e,t,n)=>{switch(e){case Se.ZodString:return x6(r,t);case Se.ZodNumber:return YH(r,t);case Se.ZodObject:return KH(r,t);case Se.ZodBigInt:return OH(r,t);case Se.ZodBoolean:return RH();case Se.ZodDate:return jy(r,t);case Se.ZodUndefined:return tN();case Se.ZodNull:return qH(t);case Se.ZodArray:return TH(r,t);case Se.ZodUnion:case Se.ZodDiscriminatedUnion:return WH(r,t);case Se.ZodIntersection:return BH(r,t);case Se.ZodTuple:return eN(r,t);case Se.ZodRecord:return q6(r,t);case Se.ZodLiteral:return DH(r,t);case Se.ZodEnum:return VH(r);case Se.ZodNativeEnum:return jH(r);case Se.ZodNullable:return GH(r,t);case Se.ZodOptional:return JH(r,t);case Se.ZodMap:return FH(r,t);case Se.ZodSet:return $H(r,t);case Se.ZodLazy:return ft(r.getter()._def,t);case Se.ZodPromise:return QH(r,t);case Se.ZodNaN:case Se.ZodNever:return xH();case Se.ZodEffects:return NH(r,t,n);case Se.ZodAny:return PH();case Se.ZodUnknown:return rN();case Se.ZodDefault:return HH(r,t);case Se.ZodBranded:return IH(r,t);case Se.ZodReadonly:return nN(r,t);case Se.ZodCatch:return zH(r,t);case Se.ZodPipeline:return XH(r,t);case Se.ZodFunction:case Se.ZodVoid:case Se.ZodSymbol:return;default:return(i=>{})(e)}},goe=(r,e,t)=>(r.description&&(t.description=r.description,e.markdownDescription&&(t.markdownDescription=r.description)),t);var iN=(r,e)=>{var s;let t=AH(e),n=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,i=(s=ft(r._def,n===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,n]},!1))!=null?s:{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o);let l=(()=>{var f;if(MH(t.definitions))return;let u={},c=new Set;for(let h=0;h<500;h++){let d=Object.entries(t.definitions).filter(([p])=>!c.has(p));if(d.length===0)break;for(let[p,v]of d)u[p]=(f=ft(bd(v),{...t,currentPath:[...t.basePath,t.definitionPath,p]},!0))!=null?f:{},c.add(p)}return u})(),a=n===void 0?l?{...i,[t.definitionPath]:l}:i:t.nameStrategy==="duplicate-ref"?{...i,...l||t.seenRefs.size?{[t.definitionPath]:{...l,...t.seenRefs.size?{[n]:i}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,n].join("/"),[t.definitionPath]:{...l,[n]:i}};return t.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function poe(r,e){return iN(r,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function oN(r,e,t){return oH({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:poe(r,{name:e})}},n=>r.parse(JSON.parse(n)))}function Su(r){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:o,azureADTokenProvider:l,azureOpenAIEndpoint:a}=r;if((n||l)&&i&&e)return`${i}/${e}`;if((n||l)&&a&&e)return`${a}/openai/deployments/${e}`;if(n||l){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return o}ti();function qy(r){return r!==void 0&&Array.isArray(r.lc_namespace)}function Uy(r){return r!==void 0&&jt.isRunnable(r)&&"lc_name"in r.constructor&&typeof r.constructor.lc_name=="function"&&r.constructor.lc_name()==="RunnableToolLike"}function Wy(r){return!!r&&typeof r=="object"&&"name"in r&&"schema"in r&&(xs(r.schema)||r.schema!=null&&typeof r.schema=="object"&&"type"in r.schema&&typeof r.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(r.schema.type))}function G5(r){return Wy(r)||Uy(r)||qy(r)}X0();function lN(r){return xs(r)?Uo(r):r}function aN(r,e){let t=typeof e=="number"?void 0:e;return{name:r.name,description:r.description,parameters:lN(r.schema),...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}}function Gy(r,e){let t=typeof e=="number"?void 0:e,n;return G5(r)?n={type:"function",function:aN(r)}:n=r,(t==null?void 0:t.strict)!==void 0&&(n.function.strict=t.strict),n}X0();function Cd(r,e){return r.lc_error_code=e,r.message=`${r.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,r}function Mu(r){let e;return r.constructor.name===Hl.name?(e=new Error(r.message),e.name="TimeoutError"):r.constructor.name===Dr.name?(e=new Error(r.message),e.name="AbortError"):r.status===400&&r.message.includes("tool_calls")?e=Cd(r,"INVALID_TOOL_RESULTS"):r.status===401?e=Cd(r,"MODEL_AUTHENTICATION"):r.status===429?e=Cd(r,"MODEL_RATE_LIMIT"):r.status===404?e=Cd(r,"MODEL_NOT_FOUND"):e=r,e}function Yy(r){if(r)return r==="any"||r==="required"?"required":r==="auto"?"auto":r==="none"?"none":typeof r=="string"?{type:"function",function:{name:r}}:r}function _oe(r){return r.anyOf!==void 0&&Array.isArray(r.anyOf)}function sN(r){var t;let e=["namespace functions {",""];for(let n of r)n.description&&e.push(`// ${n.description}`),Object.keys((t=n.parameters.properties)!=null?t:{}).length>0?(e.push(`type ${n.name} = (_: {`),e.push(uN(n.parameters,0)),e.push("}) => any;")):e.push(`type ${n.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function uN(r,e){var n,i;let t=[];for(let[o,l]of Object.entries((n=r.properties)!=null?n:{}))l.description&&e<2&&t.push(`// ${l.description}`),(i=r.required)!=null&&i.includes(o)?t.push(`${o}: ${U6(l,e)},`):t.push(`${o}?: ${U6(l,e)},`);return t.map(o=>" ".repeat(e)+o).join(`
`)}function U6(r,e){if(_oe(r))return r.anyOf.map(t=>U6(t,e)).join(" | ");switch(r.type){case"string":return r.enum?r.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return r.enum?r.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return r.enum?r.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",uN(r,e+2),"}"].join(`
`);case"array":return r.items?`${U6(r.items,e)}[]`:"any[]";default:return""}}function cN(r,e){let t;return G5(r)?t=Gy(r):t=r,(e==null?void 0:e.strict)!==void 0&&(t.function.strict=e.strict),t}function boe(r){return r.role!=="system"&&r.role!=="developer"&&r.role!=="assistant"&&r.role!=="user"&&r.role!=="function"&&r.role!=="tool"&&console.warn(`Unknown message role: ${r.role}`),r.role}function Xy(r){let e=r._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!ao.isInstance(r))throw new Error("Invalid generic chat message");return boe(r)}default:throw new Error(`Unknown message type: ${e}`)}}var dN={providerName:"ChatOpenAI",fromStandardTextBlock(r){return{type:"text",text:r.text}},fromStandardImageBlock(r){var e,t,n;if(r.source_type==="url")return{type:"image_url",image_url:{url:r.url,...(e=r.metadata)!=null&&e.detail?{detail:r.metadata.detail}:{}}};if(r.source_type==="base64")return{type:"image_url",image_url:{url:`data:${(t=r.mime_type)!=null?t:""};base64,${r.data}`,...(n=r.metadata)!=null&&n.detail?{detail:r.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${r.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(r){var e;if(r.source_type==="url"){let t=lC({dataUrl:r.url});if(!t)throw new Error(`URL audio blocks with source_type ${r.source_type} must be formatted as a data URL for ChatOpenAI`);let n=t.mime_type||r.mime_type||"",i;try{i=oC(n)}catch(o){throw new Error(`Audio blocks with source_type ${r.source_type} must have mime type of audio/wav or audio/mp3`)}if(i.type!=="audio"||i.subtype!=="wav"&&i.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${r.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:i.subtype,data:t.data}}}if(r.source_type==="base64"){let t;try{t=oC((e=r.mime_type)!=null?e:"")}catch(n){throw new Error(`Audio blocks with source_type ${r.source_type} must have mime type of audio/wav or audio/mp3`)}if(t.type!=="audio"||t.subtype!=="wav"&&t.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${r.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:r.data}}}throw new Error(`Audio content blocks with source_type ${r.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(r){var e,t,n,i,o,l,a,s,u,c,f;if(r.source_type==="url"){if(!lC({dataUrl:r.url}))throw new Error(`URL file blocks with source_type ${r.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:r.url,...(e=r.metadata)!=null&&e.filename||(t=r.metadata)!=null&&t.name?{filename:((n=r.metadata)==null?void 0:n.filename)||((i=r.metadata)==null?void 0:i.name)}:{}}}}if(r.source_type==="base64")return{type:"file",file:{file_data:`data:${(o=r.mime_type)!=null?o:""};base64,${r.data}`,...(l=r.metadata)!=null&&l.filename||(a=r.metadata)!=null&&a.name||(s=r.metadata)!=null&&s.title?{filename:((u=r.metadata)==null?void 0:u.filename)||((c=r.metadata)==null?void 0:c.name)||((f=r.metadata)==null?void 0:f.title)}:{}}};if(r.source_type==="id")return{type:"file",file:{file_id:r.id}};throw new Error(`File content blocks with source_type ${r.source_type} are not supported for ChatOpenAI`)}};function Jy(r,e){return r.flatMap(t=>{var l;let n=Xy(t);n==="system"&&G6(e)&&(n="developer");let i=typeof t.content=="string"?t.content:t.content.map(a=>Ms(a)?aC(a,dN):a),o={role:n,content:i};if(t.name!=null&&(o.name=t.name),t.additional_kwargs.function_call!=null&&(o.function_call=t.additional_kwargs.function_call,o.content=""),kl(t)&&((l=t.tool_calls)!=null&&l.length)?(o.tool_calls=t.tool_calls.map(kH),o.content=""):(t.additional_kwargs.tool_calls!=null&&(o.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(o.tool_call_id=t.tool_call_id)),t.additional_kwargs.audio&&typeof t.additional_kwargs.audio=="object"&&"id"in t.additional_kwargs.audio){let a={role:"assistant",audio:{id:t.additional_kwargs.audio.id}};return[o,a]}return o})}var Y5="__openai_function_call_ids__";function voe(r){let e=(r.summary.length>1?r.summary.reduce((t,n)=>{let i=t.at(-1);return i.index===n.index?i.text+=n.text:t.push(n),t},[{...r.summary[0]}]):r.summary).map(t=>Object.fromEntries(Object.entries(t).filter(([n])=>n!=="index")));return{...r,summary:e}}function fN(r,e,t){var l;let n=r.filter(a=>kl(a)).pop(),i=(l=n==null?void 0:n.response_metadata)==null?void 0:l.id;return(i&&i.startsWith("resp_")&&!t?r.slice(r.indexOf(n)+1):r).flatMap(a=>{var c,f,h;let s=Xy(a);if(s==="system"&&G6(e)&&(s="developer"),s==="function")throw new Error("Function messages are not supported in Responses API");if(s==="tool"){let d=a;return((c=d.additional_kwargs)==null?void 0:c.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof d.content=="string")return{type:"computer_screenshot",image_url:d.content};if(Array.isArray(d.content)){let v=d.content.find(C=>C.type==="computer_screenshot");if(v)return v;let b=d.content.find(C=>C.type==="image_url");if(b)return{type:"computer_screenshot",image_url:typeof b.image_url=="string"?b.image_url:b.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:d.tool_call_id}:{type:"function_call_output",call_id:d.tool_call_id,id:d.id,output:typeof d.content!="string"?JSON.stringify(d.content):d.content}}if(s==="assistant"){if(!t&&a.response_metadata.output!=null&&Array.isArray(a.response_metadata.output)&&a.response_metadata.output.length>0&&a.response_metadata.output.every(L=>"type"in L))return a.response_metadata.output;let d=[];if(!t&&a.additional_kwargs.reasoning!=null&&(S=>typeof S=="object"&&S!=null&&"type"in S&&S.type==="reasoning")(a.additional_kwargs.reasoning)){let S=voe(a.additional_kwargs.reasoning);d.push(S)}let{content:p}=a;a.additional_kwargs.refusal!=null&&(typeof p=="string"&&(p=[{type:"output_text",text:p,annotations:[]}]),p=[...p,{type:"refusal",refusal:a.additional_kwargs.refusal}]),d.push({type:"message",role:"assistant",...a.id&&!t?{id:a.id}:{},content:typeof p=="string"?p:p.flatMap(L=>{var S;return L.type==="text"?{type:"output_text",text:L.text,annotations:(S=L.annotations)!=null?S:[]}:L.type==="output_text"||L.type==="refusal"?L:[]})});let v=a.additional_kwargs[Y5];kl(a)&&((f=a.tool_calls)!=null&&f.length)?d.push(...a.tool_calls.map(L=>({type:"function_call",name:L.name,arguments:JSON.stringify(L.args),call_id:L.id,...t?{id:v==null?void 0:v[L.id]}:{}}))):a.additional_kwargs.tool_calls!=null&&d.push(...a.additional_kwargs.tool_calls.map(L=>({type:"function_call",name:L.function.name,call_id:L.id,...t?{id:v==null?void 0:v[L.id]}:{},arguments:L.function.arguments})));let b=(h=a.response_metadata.output)!=null&&h.length?a.response_metadata.output:a.additional_kwargs.tool_outputs,C=[];if(b!=null){let L=b;C=L==null?void 0:L.filter(S=>S.type==="computer_call"),C.length>0&&d.push(...C)}return d}let u=typeof a.content=="string"?a.content:a.content.flatMap(d=>{if(Ms(d))return aC(d,dN);if(d.type==="text")return{type:"input_text",text:d.text};if(d.type==="image_url"){let p=typeof d.image_url=="string"?d.image_url:d.image_url.url,v=typeof d.image_url=="string"?"auto":d.image_url.detail;return{type:"input_image",image_url:p,detail:v}}return d.type==="input_text"||d.type==="input_image"||d.type==="input_file"?d:[]});return s==="user"||s==="system"||s==="developer"?{type:"message",role:s,content:u}:(console.warn(`Unsupported role found when converting to OpenAI Responses API: ${s}`),[])})}function mN(r){var a,s;if(r.error){let u=new Error(r.error.message);throw u.name=r.error.code,u}let e,t=[],n=[],i=[],o={model:r.model,created_at:r.created_at,id:r.id,incomplete_details:r.incomplete_details,metadata:r.metadata,object:r.object,status:r.status,user:r.user,model_name:r.model},l={};for(let u of r.output)if(u.type==="message")e=u.id,t.push(...u.content.flatMap(c=>c.type==="output_text"?("parsed"in c&&c.parsed!=null&&(l.parsed=c.parsed),{type:"text",text:c.text,annotations:c.annotations}):c.type==="refusal"?(l.refusal=c.refusal,[]):c));else if(u.type==="function_call"){let c={function:{name:u.name,arguments:u.arguments},id:u.call_id};try{n.push(j6(c,{returnId:!0}))}catch(f){let h;typeof f=="object"&&f!=null&&"message"in f&&typeof f.message=="string"&&(h=f.message),i.push(Zy(c,h))}(a=l[Y5])!=null||(l[Y5]={}),u.id&&(l[Y5][u.call_id]=u.id)}else u.type==="reasoning"?l.reasoning=u:((s=l.tool_outputs)!=null||(l.tool_outputs=[]),l.tool_outputs.push(u));return new Hn({id:e,content:t,tool_calls:n,invalid_tool_calls:i,usage_metadata:r.usage,additional_kwargs:l,response_metadata:o})}function Coe(r){var s,u,c;let e=[],t={},n,i=[],o={},l={},a;if(r.type==="response.output_text.delta")e.push({type:"text",text:r.delta,index:r.content_index});else if(r.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[r.annotation],index:r.content_index});else if(r.type==="response.output_item.added"&&r.item.type==="message")a=r.item.id;else if(r.type==="response.output_item.added"&&r.item.type==="function_call")i.push({type:"tool_call_chunk",name:r.item.name,args:r.item.arguments,id:r.item.call_id,index:r.output_index}),l[Y5]={[r.item.call_id]:r.item.id};else if(r.type==="response.output_item.done"&&(r.item.type==="web_search_call"||r.item.type==="file_search_call"||r.item.type==="computer_call"))l.tool_outputs=[r.item];else if(r.type==="response.created")o.id=r.response.id,o.model_name=r.response.model,o.model=r.response.model;else if(r.type==="response.completed"){let f=mN(r.response);n=r.response.usage,((u=(s=r.response.text)==null?void 0:s.format)==null?void 0:u.type)==="json_schema"&&((c=l.parsed)!=null||(l.parsed=JSON.parse(f.text)));for(let[h,d]of Object.entries(r.response))h!=="id"&&(o[h]=d)}else if(r.type==="response.function_call_arguments.delta")i.push({type:"tool_call_chunk",args:r.delta,index:r.output_index});else if(r.type==="response.web_search_call.completed"||r.type==="response.file_search_call.completed")t={tool_outputs:{id:r.item_id,type:r.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(r.type==="response.refusal.done")l.refusal=r.refusal;else if(r.type==="response.output_item.added"&&"item"in r&&r.item.type==="reasoning"){let f=r.item.summary?r.item.summary.map((h,d)=>({...h,index:d})):void 0;l.reasoning={id:r.item.id,type:r.item.type,...f?{summary:f}:{}}}else if(r.type==="response.reasoning_summary_part.added")l.reasoning={type:"reasoning",summary:[{...r.part,index:r.summary_index}]};else if(r.type==="response.reasoning_summary_text.delta")l.reasoning={type:"reasoning",summary:[{text:r.delta,type:"summary_text",index:r.summary_index}]};else return null;return new Ml({text:e.map(f=>f.text).join(""),message:new pi({id:a,content:e,tool_call_chunks:i,usage_metadata:n,additional_kwargs:l,response_metadata:o}),generationInfo:t})}function Ky(r){return"type"in r&&r.type!=="function"}function woe(r){return r!=null&&typeof r=="object"&&"type"in r&&r.type!=="function"}function hN(r,e){return Kw(r)?(e==null?void 0:e.strict)!==void 0?{...r,function:{...r.function,strict:e.strict}}:r:cN(r,e)}function G6(r){return r&&/^o\d/.test(r)}var wd=class extends e5{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","useResponsesApi","zdrEnabled","reasoning"]}constructor(e){var t,n,i,o,l,a,s,u,c,f,h,d,p,v,b,C,L,S,P,y,z,G,J,te;super(e!=null?e:{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(o=(i=(t=e==null?void 0:e.apiKey)!=null?t:e==null?void 0:e.openAIApiKey)!=null?i:(n=e==null?void 0:e.configuration)==null?void 0:n.apiKey)!=null?o:pr("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=(a=(l=e==null?void 0:e.configuration)==null?void 0:l.organization)!=null?a:pr("OPENAI_ORGANIZATION"),this.model=(u=(s=e==null?void 0:e.model)!=null?s:e==null?void 0:e.modelName)!=null?u:this.model,this.modelName=this.model,this.modelKwargs=(c=e==null?void 0:e.modelKwargs)!=null?c:{},this.timeout=e==null?void 0:e.timeout,this.temperature=(f=e==null?void 0:e.temperature)!=null?f:this.temperature,this.topP=(h=e==null?void 0:e.topP)!=null?h:this.topP,this.frequencyPenalty=(d=e==null?void 0:e.frequencyPenalty)!=null?d:this.frequencyPenalty,this.presencePenalty=(p=e==null?void 0:e.presencePenalty)!=null?p:this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(v=e==null?void 0:e.n)!=null?v:this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(b=e==null?void 0:e.stopSequences)!=null?b:e==null?void 0:e.stop,this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoningEffort=(L=e==null?void 0:e.reasoningEffort)!=null?L:(C=e==null?void 0:e.reasoning)==null?void 0:C.effort,this.reasoning=(S=e==null?void 0:e.reasoning)!=null?S:e!=null&&e.reasoningEffort?{effort:e.reasoningEffort}:void 0,this.maxTokens=(P=e==null?void 0:e.maxCompletionTokens)!=null?P:e==null?void 0:e.maxTokens,this.useResponsesApi=(y=e==null?void 0:e.useResponsesApi)!=null?y:this.useResponsesApi,this.disableStreaming=(z=e==null?void 0:e.disableStreaming)!=null?z:this.disableStreaming,this.streaming=(G=e==null?void 0:e.streaming)!=null?G:!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=(J=e==null?void 0:e.streamUsage)!=null?J:this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),this.zdrEnabled=(te=e==null?void 0:e.zdrEnabled)!=null?te:!1}getLsParams(e){var n,i;let t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:(n=t.temperature)!=null?n:void 0,ls_max_tokens:(i=t.max_tokens)!=null?i:void 0,ls_stop:e.stop}}bindTools(e,t){let n;return(t==null?void 0:t.strict)!==void 0?n=t.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this.withConfig({tools:e.map(i=>Ky(i)?i:hN(i,{strict:n})),...t})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&W6(e.json_schema.schema)?oN(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}getReasoningParams(e){if(!G6(this.model))return;let t;return this.reasoningEffort!==void 0&&(t={effort:this.reasoningEffort}),this.reasoning!==void 0&&(t={...t,...this.reasoning}),(e==null?void 0:e.reasoning_effort)!==void 0&&(t={...t,effort:e.reasoning_effort}),(e==null?void 0:e.reasoning)!==void 0&&(t={...t,...e.reasoning}),t}invocationParams(e,t){var a,s,u;let n;if((e==null?void 0:e.strict)!==void 0?n=e.strict:this.supportsStrictToolCalling!==void 0&&(n=this.supportsStrictToolCalling),this._useResponseApi(e)){let c={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e==null?void 0:e.previous_response_id,truncation:e==null?void 0:e.truncation,include:e==null?void 0:e.include,tools:(a=e==null?void 0:e.tools)!=null&&a.length?e.tools.map(h=>Ky(h)?h:Kw(h)?{type:"function",name:h.function.name,parameters:h.function.parameters,description:h.function.description,strict:n}:null).filter(h=>h!==null):void 0,tool_choice:woe(e==null?void 0:e.tool_choice)?e==null?void 0:e.tool_choice:(()=>{let h=Yy(e==null?void 0:e.tool_choice);if(typeof h=="object"&&"type"in h)return{type:"function",name:h.function.name}})(),text:(()=>{if(e!=null&&e.text)return e.text;let h=this.createResponseFormat(e==null?void 0:e.response_format);return(h==null?void 0:h.type)==="json_schema"?h.json_schema.schema!=null?{format:{type:"json_schema",schema:h.json_schema.schema,description:h.json_schema.description,name:h.json_schema.name,strict:h.json_schema.strict}}:void 0:{format:h}})(),parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},f=this.getReasoningParams(e);return f!==void 0&&(c.reasoning=f),c}let i={};(e==null?void 0:e.stream_options)!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t!=null&&t.streaming)&&(i={stream_options:{include_usage:!0}});let o={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(s=e==null?void 0:e.stop)!=null?s:this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(u=e==null?void 0:e.tools)!=null&&u.length?e.tools.map(c=>hN(c,{strict:n})):void 0,tool_choice:Yy(e==null?void 0:e.tool_choice),response_format:this.createResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...i,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs};(e==null?void 0:e.prediction)!==void 0&&(o.prediction=e.prediction);let l=this.getReasoningParams(e);return l!==void 0&&l.effort!==void 0&&(o.reasoning_effort=l.effort),G6(o.model)?o.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:o.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,o}_convertOpenAIChatCompletionMessageToBaseMessage(e,t){var i;let n=e.tool_calls;switch(e.role){case"assistant":{let o=[],l=[];for(let u of n!=null?n:[])try{o.push(j6(u,{returnId:!0}))}catch(c){l.push(Zy(u,c.message))}let a={function_call:e.function_call,tool_calls:n};this.__includeRawResponse!==void 0&&(a.__raw_response=t);let s={model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};return e.audio&&(a.audio=e.audio),new Hn({content:e.content||"",tool_calls:o,invalid_tool_calls:l,additional_kwargs:a,response_metadata:s,id:t.id})}default:return new ao(e.content||"",(i=e.role)!=null?i:"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,t,n){var s,u,c,f;let i=(s=e.role)!=null?s:n,o=(u=e.content)!=null?u:"",l;e.function_call?l={function_call:e.function_call}:e.tool_calls?l={tool_calls:e.tool_calls}:l={},this.__includeRawResponse&&(l.__raw_response=t),e.audio&&(l.audio={...e.audio,index:t.choices[0].index});let a={usage:{...t.usage}};if(i==="user")return new W0({content:o,response_metadata:a});if(i==="assistant"){let h=[];if(Array.isArray(e.tool_calls))for(let d of e.tool_calls)h.push({name:(c=d.function)==null?void 0:c.name,args:(f=d.function)==null?void 0:f.arguments,id:d.id,index:d.index,type:"tool_call_chunk"});return new pi({content:o,tool_call_chunks:h,additional_kwargs:l,id:t.id,response_metadata:a})}else return i==="system"?new X1({content:o,response_metadata:a}):i==="developer"?new X1({content:o,response_metadata:a,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new U0({content:o,additional_kwargs:l,name:e.name,response_metadata:a}):i==="tool"?new v9({content:o,additional_kwargs:l,tool_call_id:e.tool_call_id,response_metadata:a}):new q0({content:o,role:i,response_metadata:a})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,n){var u,c,f,h,d,p,v,b,C,L,S,P,y,z,G;if(this._useResponseApi(t)){let J=e.filter(Q=>kl(Q)).pop(),te=(u=J==null?void 0:J.response_metadata)==null?void 0:u.id,ne=await this.responseApiWithRetry({...this.invocationParams(t,{streaming:!0}),input:fN(e,this.model,this.zdrEnabled),stream:!0,...te&&te.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:te}:{}},t);for await(let Q of ne){let ee=Coe(Q);ee!=null&&(yield ee)}return}let i=Jy(e,this.model),o={...this.invocationParams(t,{streaming:!0}),messages:i,stream:!0},l,a=await this.completionWithRetry(o,t),s;for await(let J of a){let te=(c=J==null?void 0:J.choices)==null?void 0:c[0];if(J.usage&&(s=J.usage),!te)continue;let{delta:ne}=te;if(!ne)continue;let Q=this._convertOpenAIDeltaToBaseMessageChunk(ne,J,l);l=(f=ne.role)!=null?f:l;let ee={prompt:(h=t.promptIndex)!=null?h:0,completion:(d=te.index)!=null?d:0};if(typeof Q.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let se={...ee};te.finish_reason!=null&&(se.finish_reason=te.finish_reason,se.system_fingerprint=J.system_fingerprint,se.model_name=J.model),this.logprobs&&(se.logprobs=te.logprobs);let Pe=new Ml({message:Q,text:Q.content,generationInfo:se});yield Pe,await(n==null?void 0:n.handleLLMNewToken((p=Pe.text)!=null?p:"",ee,void 0,void 0,void 0,{chunk:Pe}))}if(s){let J={...((v=s.prompt_tokens_details)==null?void 0:v.audio_tokens)!==null&&{audio:(b=s.prompt_tokens_details)==null?void 0:b.audio_tokens},...((C=s.prompt_tokens_details)==null?void 0:C.cached_tokens)!==null&&{cache_read:(L=s.prompt_tokens_details)==null?void 0:L.cached_tokens}},te={...((S=s.completion_tokens_details)==null?void 0:S.audio_tokens)!==null&&{audio:(P=s.completion_tokens_details)==null?void 0:P.audio_tokens},...((y=s.completion_tokens_details)==null?void 0:y.reasoning_tokens)!==null&&{reasoning:(z=s.completion_tokens_details)==null?void 0:z.reasoning_tokens}};yield new Ml({message:new pi({content:"",response_metadata:{usage:{...s}},usage_metadata:{input_tokens:s.prompt_tokens,output_tokens:s.completion_tokens,total_tokens:s.total_tokens,...Object.keys(J).length>0&&{input_token_details:J},...Object.keys(te).length>0&&{output_token_details:te}}}),text:""})}if((G=t.signal)!=null&&G.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,t,n){var u,c,f;let i=this.invocationParams(t);if(i.stream){let h=this._streamResponseChunks(e,t,n),d;for await(let p of h)p.message.response_metadata={...p.generationInfo,...p.message.response_metadata},d=(u=d==null?void 0:d.concat(p))!=null?u:p;return{generations:d?[d]:[],llmOutput:{estimatedTokenUsage:(c=d==null?void 0:d.message)==null?void 0:c.usage_metadata}}}let o=e.filter(h=>kl(h)).pop(),l=(f=o==null?void 0:o.response_metadata)==null?void 0:f.id,a=fN(e,this.model,this.zdrEnabled),s=await this.responseApiWithRetry({input:a,...i,...l&&l.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:l}:{}},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});return{generations:[{text:s.output_text,message:mN(s)}],llmOutput:{id:s.id,estimatedTokenUsage:s.usage?{promptTokens:s.usage.input_tokens,completionTokens:s.usage.output_tokens,totalTokens:s.usage.total_tokens}:void 0}}}_useResponseApi(e){var i,o,l;let t=(i=e==null?void 0:e.tools)==null?void 0:i.some(Ky),n=(e==null?void 0:e.previous_response_id)!=null||(e==null?void 0:e.text)!=null||(e==null?void 0:e.truncation)!=null||(e==null?void 0:e.include)!=null||((o=e==null?void 0:e.reasoning)==null?void 0:o.summary)!=null||((l=this.reasoning)==null?void 0:l.summary)!=null;return this.useResponsesApi||t||n}async _generate(e,t,n){var a,s,u,c,f,h,d,p,v,b;if(this._useResponseApi(t))return this._responseApiGenerate(e,t,n);let i={},o=this.invocationParams(t),l=Jy(e,this.model);if(o.stream){let C=this._streamResponseChunks(e,t,n),L={};for await(let J of C){J.message.response_metadata={...J.generationInfo,...J.message.response_metadata};let te=(s=(a=J.generationInfo)==null?void 0:a.completion)!=null?s:0;L[te]===void 0?L[te]=J:L[te]=L[te].concat(J)}let S=Object.entries(L).sort(([J],[te])=>parseInt(J,10)-parseInt(te,10)).map(([J,te])=>te),{functions:P,function_call:y}=this.invocationParams(t),z=await this.getEstimatedTokenCountFromPrompt(e,P,y),G=await this.getNumTokensFromGenerations(S);return i.input_tokens=z,i.output_tokens=G,i.total_tokens=z+G,{generations:S,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let C;t.response_format&&t.response_format.type==="json_schema"?C=await this.betaParsedCompletionWithRetry({...o,stream:!1,messages:l},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options}):C=await this.completionWithRetry({...o,stream:!1,messages:l},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});let{completion_tokens:L,prompt_tokens:S,total_tokens:P,prompt_tokens_details:y,completion_tokens_details:z}=(u=C==null?void 0:C.usage)!=null?u:{};L&&(i.output_tokens=((c=i.output_tokens)!=null?c:0)+L),S&&(i.input_tokens=((f=i.input_tokens)!=null?f:0)+S),P&&(i.total_tokens=((h=i.total_tokens)!=null?h:0)+P),((y==null?void 0:y.audio_tokens)!==null||(y==null?void 0:y.cached_tokens)!==null)&&(i.input_token_details={...(y==null?void 0:y.audio_tokens)!==null&&{audio:y==null?void 0:y.audio_tokens},...(y==null?void 0:y.cached_tokens)!==null&&{cache_read:y==null?void 0:y.cached_tokens}}),((z==null?void 0:z.audio_tokens)!==null||(z==null?void 0:z.reasoning_tokens)!==null)&&(i.output_token_details={...(z==null?void 0:z.audio_tokens)!==null&&{audio:z==null?void 0:z.audio_tokens},...(z==null?void 0:z.reasoning_tokens)!==null&&{reasoning:z==null?void 0:z.reasoning_tokens}});let G=[];for(let J of(d=C==null?void 0:C.choices)!=null?d:[]){let ne={text:(v=(p=J.message)==null?void 0:p.content)!=null?v:"",message:this._convertOpenAIChatCompletionMessageToBaseMessage((b=J.message)!=null?b:{role:"assistant"},C)};ne.generationInfo={...J.finish_reason?{finish_reason:J.finish_reason}:{},...J.logprobs?{logprobs:J.logprobs}:{}},kl(ne.message)&&(ne.message.usage_metadata=i),ne.message=new Hn(Object.fromEntries(Object.entries(ne.message).filter(([Q])=>!Q.startsWith("lc_")))),G.push(ne)}return{generations:G,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,t,n){let i=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&n!=="auto"){let o=sN(t);i+=await this.getNumTokens(o),i+=9}return t&&e.find(o=>o._getType()==="system")&&(i-=4),n==="none"?i+=1:typeof n=="object"&&(i+=await this.getNumTokens(n.name)+4),i}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async n=>{var i;return(i=n.message.additional_kwargs)!=null&&i.function_call?(await this.getNumTokensFromMessages([n.message])).countPerMessage[0]:await this.getNumTokens(n.message.content)}))).reduce((n,i)=>n+i,0)}async getNumTokensFromMessages(e){let t=0,n=0,i=0;this.model==="gpt-3.5-turbo-0301"?(n=4,i=-1):(n=3,i=1);let o=await Promise.all(e.map(async l=>{var h,d,p,v,b,C;let a=await this.getNumTokens(l.content),s=await this.getNumTokens(Xy(l)),u=l.name!==void 0?i+await this.getNumTokens(l.name):0,c=a+n+s+u,f=l;if(f._getType()==="function"&&(c-=2),(h=f.additional_kwargs)!=null&&h.function_call&&(c+=3),(d=f==null?void 0:f.additional_kwargs.function_call)!=null&&d.name&&(c+=await this.getNumTokens((p=f.additional_kwargs.function_call)==null?void 0:p.name)),(v=f.additional_kwargs.function_call)!=null&&v.arguments)try{c+=await this.getNumTokens(JSON.stringify(JSON.parse((b=f.additional_kwargs.function_call)==null?void 0:b.arguments)))}catch(L){console.error("Error parsing function arguments",L,JSON.stringify(f.additional_kwargs.function_call)),c+=await this.getNumTokens((C=f.additional_kwargs.function_call)==null?void 0:C.arguments)}return t+=c,c}));return t+=3,{totalCount:t,countPerMessage:o}}async completionWithRetry(e,t){let n=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,n)}catch(i){throw Mu(i)}})}async responseApiWithRetry(e,t){return this.caller.call(async()=>{var i,o;let n=this._getClientOptions(t);try{return((o=(i=e.text)==null?void 0:i.format)==null?void 0:o.type)==="json_schema"&&!e.stream?await this.client.responses.parse(e,n):await this.client.responses.create(e,n)}catch(l){throw Mu(l)}})}async betaParsedCompletionWithRetry(e,t){let n=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,n)}catch(i){throw Mu(i)}})}_getClientOptions(e){if(!this.client){let n={baseURL:this.clientConfig.baseURL},i=Su(n),o={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};o.baseURL||delete o.baseURL,this.client=new ct(o)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((t,n)=>{var i,o,l;return n&&n.tokenUsage&&(t.tokenUsage.completionTokens+=(i=n.tokenUsage.completionTokens)!=null?i:0,t.tokenUsage.promptTokens+=(o=n.tokenUsage.promptTokens)!=null?o:0,t.tokenUsage.totalTokens+=(l=n.tokenUsage.totalTokens)!=null?l:0),t},{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,t){var h,d;let n,i,o,l;yoe(e)?(n=e.schema,i=e.name,o=e.method,l=e.includeRaw):(n=e,i=t==null?void 0:t.name,o=t==null?void 0:t.method,l=t==null?void 0:t.includeRaw);let a,s;if((t==null?void 0:t.strict)!==void 0&&o==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?o===void 0&&(o="jsonSchema"):o==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),o==="jsonMode")a=this.withConfig({response_format:{type:"json_object"}}),W6(n)?s=gd.fromZodSchema(n):s=new pd;else if(o==="jsonSchema")if(a=this.withConfig({response_format:{type:"json_schema",json_schema:{name:i!=null?i:"extract",description:n.description,schema:n,strict:t==null?void 0:t.strict}}}),W6(n)){let p=gd.fromZodSchema(n);s=Ol.from(v=>"parsed"in v.additional_kwargs?v.additional_kwargs.parsed:p)}else s=new pd;else{let p=i!=null?i:"extract";if(W6(n)){let v=Uo(n);a=this.withConfig({tools:[{type:"function",function:{name:p,description:v.description,parameters:v}}],tool_choice:{type:"function",function:{name:p}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),s=new _d({returnSingle:!0,keyName:p,zodSchema:n})}else{let v;typeof n.name=="string"&&typeof n.parameters=="object"&&n.parameters!=null?(v=n,p=n.name):(p=(h=n.title)!=null?h:p,v={name:p,description:(d=n.description)!=null?d:"",parameters:n}),a=this.withConfig({tools:[{type:"function",function:v}],tool_choice:{type:"function",function:{name:p}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),s=new _d({returnSingle:!0,keyName:p})}}if(!l)return a.pipe(s);let u=Ea.assign({parsed:(p,v)=>s.invoke(p.raw,v)}),c=Ea.assign({parsed:()=>null}),f=u.withFallbacks({fallbacks:[c]});return Hs.from([{raw:a},f])}};function W6(r){return typeof(r==null?void 0:r.parse)=="function"}function yoe(r){return r!==void 0&&typeof r.schema=="object"}W9();L9();Y0();_a();Yh();var Qy=(r,e)=>r.reduce((t,n,i)=>{let o=Math.floor(i/e),l=t[o]||[];return t[o]=l.concat([n]),t},[]);o3();var Y6=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new va(e!=null?e:{})}};var yd=class extends Y6{constructor(e){var i,o,l,a,s,u,c,f;let t={maxConcurrency:2,...e};super(t),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"text-embedding-ada-002"}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchSize",{enumerable:!0,configurable:!0,writable:!0,value:512}),Object.defineProperty(this,"stripNewLines",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"dimensions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let n=(o=(i=t==null?void 0:t.apiKey)!=null?i:t==null?void 0:t.openAIApiKey)!=null?o:pr("OPENAI_API_KEY");this.organization=(a=(l=t==null?void 0:t.configuration)==null?void 0:l.organization)!=null?a:pr("OPENAI_ORGANIZATION"),this.model=(u=(s=t==null?void 0:t.model)!=null?s:t==null?void 0:t.modelName)!=null?u:this.model,this.modelName=this.model,this.batchSize=(c=t==null?void 0:t.batchSize)!=null?c:this.batchSize,this.stripNewLines=(f=t==null?void 0:t.stripNewLines)!=null?f:this.stripNewLines,this.timeout=t==null?void 0:t.timeout,this.dimensions=t==null?void 0:t.dimensions,this.clientConfig={apiKey:n,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration}}async embedDocuments(e){let t=Qy(this.stripNewLines?e.map(l=>l.replace(/\n/g," ")):e,this.batchSize),n=t.map(l=>{let a={model:this.model,input:l};return this.dimensions&&(a.dimensions=this.dimensions),this.embeddingWithRetry(a)}),i=await Promise.all(n),o=[];for(let l=0;l<i.length;l+=1){let a=t[l],{data:s}=i[l];for(let u=0;u<a.length;u+=1)o.push(s[u].embedding)}return o}async embedQuery(e){let t={model:this.model,input:this.stripNewLines?e.replace(/\n/g," "):e};this.dimensions&&(t.dimensions=this.dimensions);let{data:n}=await this.embeddingWithRetry(t);return n[0].embedding}async embeddingWithRetry(e){if(!this.client){let n={baseURL:this.clientConfig.baseURL},i=Su(n),o={...this.clientConfig,baseURL:i,timeout:this.timeout,maxRetries:0};o.baseURL||delete o.baseURL,this.client=new ct(o)}let t={};return this.caller.call(async()=>{try{return await this.client.embeddings.create(e,t)}catch(n){throw Mu(n)}})}};U1();Y0();ga();C9();k9();fm();var $y=class extends X3{get lc_namespace(){return["langchain","tools"]}constructor(e){var t,n;super(e!=null?e:{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),this.verboseParsingErrors=(t=e==null?void 0:e.verboseParsingErrors)!=null?t:this.verboseParsingErrors,this.responseFormat=(n=e==null?void 0:e.responseFormat)!=null?n:this.responseFormat}async invoke(e,t){let n,i=Vt(t);return J1(e)?(n=e.args,i={...i,toolCall:e}):n=e,this.call(n,i)}async call(e,t,n){let i=J1(e)?e.args:e,o;if(xs(this.schema))try{o=await this.schema.parseAsync(i)}catch(p){let v="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(v=`${v}
Details: ${p.message}`),new j0(v,JSON.stringify(e))}else{let p=Pr(i,this.schema);if(!p.valid){let v="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(v=`${v}
Details: ${p.errors.map(b=>`${b.keywordLocation}: ${b.error}`).join(`
`)}`),new j0(v,JSON.stringify(e))}o=i}let l=_m(t),a=cn.configure(l.callbacks,this.callbacks,l.tags||n,this.tags,l.metadata,this.metadata,{verbose:this.verbose}),s=await(a==null?void 0:a.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),l.runId,void 0,void 0,void 0,l.runName));delete l.runId;let u;try{u=await this._call(o,s,l)}catch(p){throw await(s==null?void 0:s.handleToolError(p)),p}let c,f;if(this.responseFormat==="content_and_artifact")if(Array.isArray(u)&&u.length===2)[c,f]=u;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(u)}`);else c=u;let h;J1(e)&&(h=e.id),!h&&nR(l)&&(h=l.toolCall.id);let d=koe({content:c,artifact:f,toolCallId:h,name:this.name});return await(s==null?void 0:s.handleToolEnd(d)),d}},K6=class extends $y{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:Gn.object({input:Gn.string().optional()}).transform(t=>t.input)})}call(e,t){let n=typeof e=="string"||e==null?{input:e}:e;return super.call(n,t)}};function koe(r){let{content:e,artifact:t,toolCallId:n}=r;return n&&!cR(e)?typeof e=="string"||Array.isArray(e)&&e.every(i=>typeof i=="object")?new As({content:e,artifact:t,tool_call_id:n,name:r.name}):new As({content:Loe(e),artifact:t,tool_call_id:n,name:r.name}):e}function Loe(r){var e;try{return(e=JSON.stringify(r,null,2))!=null?e:""}catch(t){return`${r}`}}var ek=class extends K6{static lc_name(){return"DallEAPIWrapper"}constructor(e){var o,l,a,s,u,c,f,h,d,p;(e==null?void 0:e.responseFormat)!==void 0&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let t=(l=(o=e==null?void 0:e.apiKey)!=null?o:e==null?void 0:e.openAIApiKey)!=null?l:pr("OPENAI_API_KEY"),n=(a=e==null?void 0:e.organization)!=null?a:pr("OPENAI_ORGANIZATION"),i={apiKey:t,organization:n,dangerouslyAllowBrowser:!0,baseURL:e==null?void 0:e.baseUrl};this.client=new ct(i),this.model=(u=(s=e==null?void 0:e.model)!=null?s:e==null?void 0:e.modelName)!=null?u:this.model,this.style=(c=e==null?void 0:e.style)!=null?c:this.style,this.quality=(f=e==null?void 0:e.quality)!=null?f:this.quality,this.n=(h=e==null?void 0:e.n)!=null?h:this.n,this.size=(d=e==null?void 0:e.size)!=null?d:this.size,this.dallEResponseFormat=(p=e==null?void 0:e.dallEResponseFormat)!=null?p:this.dallEResponseFormat,this.user=e==null?void 0:e.user}processMultipleGeneratedUrls(e){return this.dallEResponseFormat==="url"?e.flatMap(t=>{var i,o;return(o=(i=t.data)==null?void 0:i.flatMap(l=>l.url?{type:"image_url",image_url:l.url}:[]).filter(l=>l!==void 0&&l.type==="image_url"&&typeof l.image_url=="string"&&l.image_url!==void 0))!=null?o:[]}):e.flatMap(t=>{var i,o;return(o=(i=t.data)==null?void 0:i.flatMap(l=>l.b64_json?{type:"image_url",image_url:{url:l.b64_json}}:[]).filter(l=>l!==void 0&&l.type==="image_url"&&typeof l.image_url=="object"&&"url"in l.image_url&&typeof l.image_url.url=="string"&&l.image_url.url!==void 0))!=null?o:[]})}async _call(e){var o,l,a,s;let t={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){let u=await Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(t)));return this.processMultipleGeneratedUrls(u)}let n=await this.client.images.generate(t),i="";return this.dallEResponseFormat==="url"?[i]=(l=(o=n.data)==null?void 0:o.map(u=>u.url).filter(u=>u!=="undefined"))!=null?l:[]:[i]=(s=(a=n.data)==null?void 0:a.map(u=>u.b64_json).filter(u=>u!=="undefined"))!=null?s:[],i}};Object.defineProperty(ek,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});function I(){}var tk=r=>r;function R(r,e){for(let t in e)r[t]=e[t];return r}function gN(r){return!!r&&(typeof r=="object"||typeof r=="function")&&typeof r.then=="function"}function rk(r){return r()}function J6(){return Object.create(null)}function Y(r){r.forEach(rk)}function Vr(r){return typeof r=="function"}function N(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function pN(r){return Object.keys(r).length===0}function _N(r,...e){if(r==null){for(let n of e)n(void 0);return I}let t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function K5(r,e,t){r.$$.on_destroy.push(_N(e,t))}function gt(r,e,t,n){if(r){let i=bN(r,e,t,n);return r[0](i)}}function bN(r,e,t,n){return r[1]&&n?R(t.ctx.slice(),r[1](n(e))):t.ctx}function pt(r,e,t,n){if(r[2]&&n){let i=r[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){let o=[],l=Math.max(e.dirty.length,i.length);for(let a=0;a<l;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function _t(r,e,t,n,i,o){if(i){let l=bN(e,t,n,o);r.p(l,i)}}function bt(r){if(r.ctx.length>32){let e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function x(r){let e={};for(let t in r)t[0]!=="$"&&(e[t]=r[t]);return e}function Z(r,e){let t={};e=new Set(e);for(let n in r)!e.has(n)&&n[0]!=="$"&&(t[n]=r[n]);return t}function J5(r){let e={};for(let t in r)e[t]=!0;return e}function vN(r,e,t){return r.set(t),e}function kr(r){return r&&Vr(r.destroy)?r.destroy:I}var CN=typeof window!="undefined",nk=CN?()=>window.performance.now():()=>Date.now(),kd=CN?r=>requestAnimationFrame(r):I;var X5=new Set;function wN(r){X5.forEach(e=>{e.c(r)||(X5.delete(e),e.f())}),X5.size!==0&&kd(wN)}function ik(r){let e;return X5.size===0&&kd(wN),{promise:new Promise(t=>{X5.add(e={c:r,f:t})}),abort(){X5.delete(e)}}}var ok=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var X6=class r{constructor(e){ze(this,"_listeners","WeakMap"in ok?new WeakMap:void 0);ze(this,"_observer");ze(this,"options");this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!=null?e:this._observer=new ResizeObserver(t=>{var n;for(let i of t)r.entries.set(i.target,i),(n=this._listeners.get(i.target))==null||n(i)})}};X6.entries="WeakMap"in ok?new WeakMap:void 0;var yN=!1;function kN(){yN=!0}function LN(){yN=!1}function B(r,e){r.appendChild(e)}function Ba(r,e,t){let n=$6(r);if(!n.getElementById(e)){let i=Ge("style");i.id=e,i.textContent=t,SN(n,i)}}function $6(r){if(!r)return document;let e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function EN(r){let e=Ge("style");return e.textContent="/* empty */",SN($6(r),e),e.sheet}function SN(r,e){return B(r.head||r,e),e.sheet}function A(r,e,t){r.insertBefore(e,t||null)}function M(r){r.parentNode&&r.parentNode.removeChild(r)}function Q5(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function Ge(r){return document.createElement(r)}function F(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Zt(r){return document.createTextNode(r)}function et(){return Zt(" ")}function U(){return Zt("")}function j(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function MN(r){return function(e){return e.preventDefault(),r.call(this,e)}}function AN(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function k(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}var Soe=["width","height"];function mn(r,e){let t=Object.getOwnPropertyDescriptors(r.__proto__);for(let n in e)e[n]==null?r.removeAttribute(n):n==="style"?r.style.cssText=e[n]:n==="__value"?r.value=r[n]=e[n]:t[n]&&t[n].set&&Soe.indexOf(n)===-1?r[n]=e[n]:k(r,n,e[n])}function K(r,e){for(let t in e)k(r,t,e[t])}function Moe(r,e){Object.keys(e).forEach(t=>{Aoe(r,t,e[t])})}function Aoe(r,e,t){let n=e.toLowerCase();n in r?r[n]=typeof r[n]=="boolean"&&t===""?!0:t:e in r?r[e]=typeof r[e]=="boolean"&&t===""?!0:t:k(r,e,t)}function $5(r){return/-/.test(r)?Moe:mn}function PN(r){return Array.from(r.childNodes)}function gn(r,e){e=""+e,r.data!==e&&(r.data=e)}function Ld(r,e){r.value=e==null?"":e}function e1(r,e,t,n){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}function An(r,e,t){r.classList.toggle(e,!!t)}function Ed(r,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:n})}var Q6=class{constructor(e=!1){ze(this,"is_svg",!1);ze(this,"e");ze(this,"n");ze(this,"t");ze(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=F(t.nodeName):this.e=Ge(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)A(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(M)}};function TN(r){let e={};return r.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}function pn(r,e){return new r(e)}var eg=new Map,tg=0;function Poe(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function Toe(r,e){let t={stylesheet:EN(e),rules:{}};return eg.set(r,t),t}function lk(r,e,t,n,i,o,l,a=0){let s=16.666/n,u=`{
`;for(let b=0;b<=1;b+=s){let C=e+(t-e)*o(b);u+=b*100+`%{${l(C,1-C)}}
`}let c=u+`100% {${l(t,1-t)}}
}`,f=`__svelte_${Poe(c)}_${a}`,h=$6(r),{stylesheet:d,rules:p}=eg.get(h)||Toe(h,r);p[f]||(p[f]=!0,d.insertRule(`@keyframes ${f} ${c}`,d.cssRules.length));let v=r.style.animation||"";return r.style.animation=`${v?`${v}, `:""}${f} ${n}ms linear ${i}ms 1 both`,tg+=1,f}function ak(r,e){let t=(r.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-n.length;i&&(r.style.animation=n.join(", "),tg-=i,tg||Ooe())}function Ooe(){kd(()=>{tg||(eg.forEach(r=>{let{ownerNode:e}=r.stylesheet;e&&M(e)}),eg.clear())})}var Da;function Co(r){Da=r}function vr(){if(!Da)throw new Error("Function called outside component initialization");return Da}function sk(r){vr().$$.before_update.push(r)}function t1(r){vr().$$.on_mount.push(r)}function uk(r){vr().$$.after_update.push(r)}function I2(r){vr().$$.on_destroy.push(r)}function ck(){let r=vr();return(e,t,{cancelable:n=!1}={})=>{let i=r.$$.callbacks[e];if(i){let o=Ed(e,t,{cancelable:n});return i.slice().forEach(l=>{l.call(r,o)}),!o.defaultPrevented}return!0}}function Sd(r,e){return vr().$$.context.set(r,e),e}function X(r){return vr().$$.context.get(r)}function q(r,e){let t=r.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}var z2=[];var je=[],tf=[],hk=[],ON=Promise.resolve(),dk=!1;function mk(){dk||(dk=!0,ON.then(Ad))}function Md(){return mk(),ON}function rf(r){tf.push(r)}function St(r){hk.push(r)}var fk=new Set,ef=0;function Ad(){if(ef!==0)return;let r=Da;do{try{for(;ef<z2.length;){let e=z2[ef];ef++,Co(e),Roe(e.$$)}}catch(e){throw z2.length=0,ef=0,e}for(Co(null),z2.length=0,ef=0;je.length;)je.pop()();for(let e=0;e<tf.length;e+=1){let t=tf[e];fk.has(t)||(fk.add(t),t())}tf.length=0}while(z2.length);for(;hk.length;)hk.pop()();dk=!1,fk.clear(),Co(r)}function Roe(r){if(r.fragment!==null){r.update(),Y(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(rf)}}function RN(r){let e=[],t=[];tf.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),tf=e}var Pd;function Ioe(){return Pd||(Pd=Promise.resolve(),Pd.then(()=>{Pd=null})),Pd}function IN(r,e,t){r.dispatchEvent(Ed(`${e?"intro":"outro"}${t}`))}var rg=new Set,Au;function wt(){Au={r:0,c:[],p:Au}}function yt(){Au.r||Y(Au.c),Au=Au.p}function re(r,e){r&&r.i&&(rg.delete(r),r.i(e))}function oe(r,e,t,n){if(r&&r.o){if(rg.has(r))return;rg.add(r),Au.c.push(()=>{rg.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}var zoe={duration:0};function zN(r,e,t){let n={direction:"out"},i=e(r,t,n),o=!0,l,a=Au;a.r+=1;let s;function u(){let{delay:c=0,duration:f=300,easing:h=tk,tick:d=I,css:p}=i||zoe;p&&(l=lk(r,1,0,f,c,h,p));let v=nk()+c,b=v+f;rf(()=>IN(r,!1,"start")),"inert"in r&&(s=r.inert,r.inert=!0),ik(C=>{if(o){if(C>=b)return d(0,1),IN(r,!1,"end"),--a.r||Y(a.c),!1;if(C>=v){let L=h((C-v)/f);d(1-L,L)}}return o})}return Vr(i)?Ioe().then(()=>{i=i(n),u()}):u(),{end(c){c&&"inert"in r&&(r.inert=s),c&&i.tick&&i.tick(1,0),o&&(l&&ak(r,l),o=!1)}}}function Fl(r,e){let t=e.token={};function n(i,o,l,a){if(e.token!==t)return;e.resolved=a;let s=e.ctx;l!==void 0&&(s=s.slice(),s[l]=a);let u=i&&(e.current=i)(s),c=!1;e.block&&(e.blocks?e.blocks.forEach((f,h)=>{h!==o&&f&&(wt(),oe(f,1,1,()=>{e.blocks[h]===f&&(e.blocks[h]=null)}),yt())}):e.block.d(1),u.c(),re(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[o]=u),c&&Ad()}if(gN(r)){let i=vr();if(r.then(o=>{Co(i),n(e.then,1,e.value,o),Co(null)},o=>{if(Co(i),n(e.catch,2,e.error,o),Co(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,r),!0;e.resolved=r}}function gk(r,e,t){let n=e.slice(),{resolved:i}=r;r.current===r.then&&(n[r.value]=i),r.current===r.catch&&(n[r.error]=i),r.block.p(n,t)}function Qo(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function D(r,e){let t={},n={},i={$$scope:1},o=r.length;for(;o--;){let l=r[o],a=e[o];if(a){for(let s in l)s in a||(n[s]=1);for(let s in a)i[s]||(t[s]=a[s],i[s]=1);r[o]=a}else for(let s in l)i[s]=1}for(let l in n)l in t||(t[l]=void 0);return t}function tt(r){return typeof r=="object"&&r!==null?r:{}}var Hoe=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Noe=new Set([...Hoe]);function kt(r,e,t){let n=r.$$.props[e];n!==void 0&&(r.$$.bound[n]=t,t(r.$$.ctx[n]))}function _e(r){r&&r.c()}function ge(r,e,t){let{fragment:n,after_update:i}=r.$$;n&&n.m(e,t),rf(()=>{let o=r.$$.on_mount.map(rk).filter(Vr);r.$$.on_destroy?r.$$.on_destroy.push(...o):Y(o),r.$$.on_mount=[]}),i.forEach(rf)}function pe(r,e){let t=r.$$;t.fragment!==null&&(RN(t.after_update),Y(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Boe(r,e){r.$$.dirty[0]===-1&&(z2.push(r),mk(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function V(r,e,t,n,i,o,l=null,a=[-1]){let s=Da;Co(r);let u=r.$$={fragment:null,ctx:[],props:o,update:I,not_equal:i,bound:J6(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:J6(),dirty:a,skip_bound:!1,root:e.target||s.$$.root};l&&l(u.root);let c=!1;if(u.ctx=t?t(r,e.props||{},(f,h,...d)=>{let p=d.length?d[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&Boe(r,f)),h}):[],u.update(),c=!0,Y(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){kN();let f=PN(e.target);u.fragment&&u.fragment.l(f),f.forEach(M)}else u.fragment&&u.fragment.c();e.intro&&re(r.$$.fragment),ge(r,e.target,e.anchor),LN(),Ad()}Co(s)}var Doe;typeof HTMLElement=="function"&&(Doe=class extends HTMLElement{constructor(e,t,n){super();ze(this,"$$ctor");ze(this,"$$s");ze(this,"$$c");ze(this,"$$cn",!1);ze(this,"$$d",{});ze(this,"$$r",!1);ze(this,"$$p_d",{});ze(this,"$$l",{});ze(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){let i=this.$$c.$on(e,t);this.$$l_u.set(t,i)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){let i=this.$$l_u.get(t);i&&(i(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(o){return()=>{let l;return{c:function(){l=Ge("slot"),o!=="default"&&k(l,"name",o)},m:function(u,c){A(u,l,c)},d:function(u){u&&M(l)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let t={},n=TN(this);for(let o of this.$$s)o in n&&(t[o]=[e(o)]);for(let o of this.attributes){let l=this.$$g_p(o.name);l in this.$$d||(this.$$d[l]=pk(l,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});let i=()=>{this.$$r=!0;for(let o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){let l=pk(o,this.$$d[o],this.$$p_d,"toAttribute");l==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,l)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(let o in this.$$l)for(let l of this.$$l[o]){let a=this.$$c.$on(o,l);this.$$l_u.set(l,a)}this.$$l={}}}attributeChangedCallback(e,t,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=pk(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function pk(r,e,t,n){var o;let i=(o=t[r])==null?void 0:o.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!t[r])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var H=class{constructor(){ze(this,"$$");ze(this,"$$set")}$destroy(){pe(this,1),this.$destroy=I}$on(e,t){if(!Vr(t))return I;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!pN(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var HN="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(HN);function NN(r){let e,t=ng(r[1],r[2])+"",n;return{c(){e=new Q6(!1),n=U(),e.a=n},m(i,o){e.m(t,i,o),A(i,n,o)},p(i,o){o&6&&t!==(t=ng(i[1],i[2])+"")&&e.p(t)},d(i){i&&(M(n),e.d())}}}function Zoe(r){let e,t=r[0]&&NN(r);return{c(){t&&t.c(),e=U()},m(n,i){t&&t.m(n,i),A(n,e,i)},p(n,[i]){n[0]?t?t.p(n,i):(t=NN(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:I,o:I,d(n){n&&M(e),t&&t.d(n)}}}function Foe(r,e,t){let{observable:n=!1}=e,{component:i}=e,{code:o}=e;return r.$$set=l=>{"observable"in l&&t(0,n=l.observable),"component"in l&&t(1,i=l.component),"code"in l&&t(2,o=l.code)},[n,i,o]}var _k=class extends H{constructor(e){super(),V(this,e,Foe,Zoe,N,{observable:0,component:1,code:2})}},Pu=_k;var joe=()=>typeof window!="undefined",ig=joe();var VN=".modal-header{padding: 2px 16px;background-color: #339af0;color: white;}.modal-body{padding: 2px 16px;}.modal-footer{padding: 2px 16px;background-color: #339af0;color: white;}.modal-content{position: relative;background-color: #fefefe;margin: auto;padding: 0;border: 1px solid #888;width: 80%;box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);animation-name: animateTop;animation-duration: 0.4s;}@keyframes animateTop {from {top: -300px; opacity: 0}to {top: 0; opacity: 1}}";var BN=ig?document.createElement("style"):void 0;if(ig){let r=BN;r.textContent=VN,r.id="svelteui-inject"}function bk(r,e,t){return ig&&document.head.appendChild(BN),`
    <div class="modal-content">
        <div class="modal-header">
            <h2>[${r} Component Error]:</h2>
            <h3>${e}</h3>
        </div>
        <div class="modal-body">
            <pre>
                ${t||""}
            </pre>
        </div>
        <div class="modal-footer">
            <h3>Fix the code to dismiss this error.</h3>
        </div>
    </div>        
    `}function ng(r,e){let{message:t,solution:n}=e;return n?bk(r,t,n):bk(r,t)}function Ht(r,e){let t=[];if(e)for(let n=0;n<e.length;n++){let i=e[n],o=Array.isArray(i)?i[0]:i;Array.isArray(i)&&i.length>1?t.push(o(r,i[1])):t.push(o(r))}return{update(n){if((n&&n.length||0)!=t.length)throw new Error("You must not change the length of an actions array.");if(n)for(let i=0;i<n.length;i++){let o=t[i];if(o&&o.update){let l=n[i];Array.isArray(l)&&l.length>1?o.update(l[1]):o.update()}}},destroy(){for(let n=0;n<t.length;n++){let i=t[n];i&&i.destroy&&i.destroy()}}}}var vk="!",xoe=new RegExp(`^[^${vk}]+(?:${vk}(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$`);function _n(r,e=[]){let t,n=[];r.$on=(o,l)=>{let a=o,s=()=>{};for(let u of e){if(typeof u=="string"&&u===a){let c=r.$$.callbacks[a]||(r.$$.callbacks[a]=[]);return c.push(l),()=>{let f=c.indexOf(l);f!==-1&&c.splice(f,1)}}if(typeof u=="object"&&u.name===a){let c=l;l=(...f)=>{typeof u=="object"&&u.shouldExclude()||c(...f)}}}return t?s=t(a,l):n.push([a,l]),()=>{s()}};function i(o){q(r,o)}return o=>{let l=[],a={};t=(s,u)=>{let c=s,f=u,h=!1;if(c.match(xoe)){let b=c.split(vk);c=b[0];let C=Object.fromEntries(b.slice(1).map(L=>[L,!0]));C.passive&&(h=h||{},h.passive=!0),C.nonpassive&&(h=h||{},h.passive=!1),C.capture&&(h=h||{},h.capture=!0),C.once&&(h=h||{},h.once=!0),C.preventDefault&&(f=MN(f)),C.stopPropagation&&(f=AN(f))}let p=j(o,c,f,h),v=()=>{p();let b=l.indexOf(v);b>-1&&l.splice(b,1)};return l.push(v),c in a||(a[c]=j(o,c,i)),v};for(let s=0;s<n.length;s++)t(n[s][0],n[s][1]);return{destroy:()=>{for(let s=0;s<l.length;s++)l[s]();for(let s of Object.entries(a))s[1]()}}}}var og={};function wo(){return X(og)}var nf=[];function lg(r,e=I){let t,n=new Set;function i(a){if(N(r,a)&&(r=a,t)){let s=!nf.length;for(let u of n)u[1](),nf.push(u,r);if(s){for(let u=0;u<nf.length;u+=2)nf[u][0](nf[u+1]);nf.length=0}}}function o(a){i(a(r))}function l(a,s=I){let u=[a,s];return n.add(u),n.size===1&&(t=e(i,o)||I),a(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:l}}var Td=lg("light");var br="colors",Ci="sizes",Ye="space",yk={gap:Ye,gridGap:Ye,columnGap:Ye,gridColumnGap:Ye,rowGap:Ye,gridRowGap:Ye,inset:Ye,insetBlock:Ye,insetBlockEnd:Ye,insetBlockStart:Ye,insetInline:Ye,insetInlineEnd:Ye,insetInlineStart:Ye,margin:Ye,marginTop:Ye,marginRight:Ye,marginBottom:Ye,marginLeft:Ye,marginBlock:Ye,marginBlockEnd:Ye,marginBlockStart:Ye,marginInline:Ye,marginInlineEnd:Ye,marginInlineStart:Ye,padding:Ye,paddingTop:Ye,paddingRight:Ye,paddingBottom:Ye,paddingLeft:Ye,paddingBlock:Ye,paddingBlockEnd:Ye,paddingBlockStart:Ye,paddingInline:Ye,paddingInlineEnd:Ye,paddingInlineStart:Ye,top:Ye,right:Ye,bottom:Ye,left:Ye,scrollMargin:Ye,scrollMarginTop:Ye,scrollMarginRight:Ye,scrollMarginBottom:Ye,scrollMarginLeft:Ye,scrollMarginX:Ye,scrollMarginY:Ye,scrollMarginBlock:Ye,scrollMarginBlockEnd:Ye,scrollMarginBlockStart:Ye,scrollMarginInline:Ye,scrollMarginInlineEnd:Ye,scrollMarginInlineStart:Ye,scrollPadding:Ye,scrollPaddingTop:Ye,scrollPaddingRight:Ye,scrollPaddingBottom:Ye,scrollPaddingLeft:Ye,scrollPaddingX:Ye,scrollPaddingY:Ye,scrollPaddingBlock:Ye,scrollPaddingBlockEnd:Ye,scrollPaddingBlockStart:Ye,scrollPaddingInline:Ye,scrollPaddingInlineEnd:Ye,scrollPaddingInlineStart:Ye,fontSize:"fontSizes",background:br,backgroundColor:br,backgroundImage:br,borderImage:br,border:br,borderBlock:br,borderBlockEnd:br,borderBlockStart:br,borderBottom:br,borderBottomColor:br,borderColor:br,borderInline:br,borderInlineEnd:br,borderInlineStart:br,borderLeft:br,borderLeftColor:br,borderRight:br,borderRightColor:br,borderTop:br,borderTopColor:br,caretColor:br,color:br,columnRuleColor:br,fill:br,outline:br,outlineColor:br,stroke:br,textDecorationColor:br,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ci,minBlockSize:Ci,maxBlockSize:Ci,inlineSize:Ci,minInlineSize:Ci,maxInlineSize:Ci,width:Ci,minWidth:Ci,maxWidth:Ci,height:Ci,minHeight:Ci,maxHeight:Ci,flexBasis:Ci,gridTemplateColumns:Ci,gridTemplateRows:Ci,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},qoe=(r,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Id=()=>{let r=Object.create(null);return(e,t,...n)=>{let i=(o=>JSON.stringify(o,qoe))(e);return i in r?r[i]:r[i]=t(e,...n)}},ag=Symbol.for("sxs.internal"),kk=(r,e)=>Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)),DN=r=>{for(let e in r)return!0;return!1},{hasOwnProperty:Uoe}=Object.prototype,wk=r=>r.includes("-")?r:r.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),Woe=/\s+(?![^()]*\))/,of=r=>e=>r(...typeof e=="string"?String(e).split(Woe):[e]),ZN={appearance:r=>({WebkitAppearance:r,appearance:r}),backfaceVisibility:r=>({WebkitBackfaceVisibility:r,backfaceVisibility:r}),backdropFilter:r=>({WebkitBackdropFilter:r,backdropFilter:r}),backgroundClip:r=>({WebkitBackgroundClip:r,backgroundClip:r}),boxDecorationBreak:r=>({WebkitBoxDecorationBreak:r,boxDecorationBreak:r}),clipPath:r=>({WebkitClipPath:r,clipPath:r}),content:r=>({content:r.includes('"')||r.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(r)?r:`"${r}"`}),hyphens:r=>({WebkitHyphens:r,hyphens:r}),maskImage:r=>({WebkitMaskImage:r,maskImage:r}),maskSize:r=>({WebkitMaskSize:r,maskSize:r}),tabSize:r=>({MozTabSize:r,tabSize:r}),textSizeAdjust:r=>({WebkitTextSizeAdjust:r,textSizeAdjust:r}),userSelect:r=>({WebkitUserSelect:r,userSelect:r}),marginBlock:of((r,e)=>({marginBlockStart:r,marginBlockEnd:e||r})),marginInline:of((r,e)=>({marginInlineStart:r,marginInlineEnd:e||r})),maxSize:of((r,e)=>({maxBlockSize:r,maxInlineSize:e||r})),minSize:of((r,e)=>({minBlockSize:r,minInlineSize:e||r})),paddingBlock:of((r,e)=>({paddingBlockStart:r,paddingBlockEnd:e||r})),paddingInline:of((r,e)=>({paddingInlineStart:r,paddingInlineEnd:e||r}))},Ck=/([\d.]+)([^]*)/,Goe=(r,e)=>r.length?r.reduce((t,n)=>(t.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(i)?`:is(${n})`:n):n+" "+i)),t),[]):e,Yoe=(r,e)=>r in Koe&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,n,i,o)=>n+(i==="stretch"?`-moz-available${o};${wk(r)}:${n}-webkit-fill-available`:`-moz-fit-content${o};${wk(r)}:${n}fit-content`)+o):String(e),Koe={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},r1=r=>r?r+"-":"",qN=(r,e,t)=>r.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(n,i,o,l,a)=>l=="$"==!!o?n:(i||l=="--"?"calc(":"")+"var(--"+(l==="$"?r1(e)+(a.includes("$")?"":r1(t))+a.replace(/\$/g,"-"):a)+")"+(i||l=="--"?"*"+(i||"")+(o||"1")+")":"")),Joe=/\s*,\s*(?![^()]*\))/,Xoe=Object.prototype.toString,lf=(r,e,t,n,i)=>{let o,l,a,s=(u,c,f)=>{let h,d,p=v=>{for(h in v){let L=h.charCodeAt(0)===64,S=L&&Array.isArray(v[h])?v[h]:[v[h]];for(d of S){let P=/[A-Z]/.test(C=h)?C:C.replace(/-[^]/g,z=>z[1].toUpperCase()),y=typeof d=="object"&&d&&d.toString===Xoe&&(!n.utils[P]||!c.length);if(P in n.utils&&!y){let z=n.utils[P];if(z!==l){l=z,p(z(d)),l=null;continue}}else if(P in ZN){let z=ZN[P];if(z!==a){a=z,p(z(d)),a=null;continue}}if(L&&(b=h.slice(1)in n.media?"@media "+n.media[h.slice(1)]:h,h=b.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(z,G,J,te,ne,Q)=>{let ee=Ck.test(G),se=.0625*(ee?-1:1),[Pe,Te]=ee?[te,G]:[G,te];return"("+(J[0]==="="?"":J[0]===">"===ee?"max-":"min-")+Pe+":"+(J[0]!=="="&&J.length===1?Te.replace(Ck,(be,rt,Ee)=>Number(rt)+se*(J===">"?1:-1)+Ee):Te)+(ne?") and ("+(ne[0]===">"?"min-":"max-")+Pe+":"+(ne.length===1?Q.replace(Ck,(be,rt,Ee)=>Number(rt)+se*(ne===">"?-1:1)+Ee):Q):"")+")"})),y){let z=L?f.concat(h):[...f],G=L?[...c]:Goe(c,h.split(Joe));o!==void 0&&i(FN(...o)),o=void 0,s(d,G,z)}else o===void 0&&(o=[[],c,f]),h=L||h.charCodeAt(0)!==36?h:`--${r1(n.prefix)}${h.slice(1).replace(/\$/g,"-")}`,d=y?d:typeof d=="number"?d&&P in Qoe?String(d)+"px":String(d):qN(Yoe(P,d==null?"":d),n.prefix,n.themeMap[P]),o[0].push(`${L?`${h} `:`${wk(h)}:`}${d}`)}}var b,C};p(u),o!==void 0&&i(FN(...o)),o=void 0};s(r,e,t)},FN=(r,e,t)=>`${t.map(n=>`${n}{`).join("")}${e.length?`${e.join(",")}{`:""}${r.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,Qoe={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},jN=r=>String.fromCharCode(r+(r>25?39:97)),H2=r=>(e=>{let t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=jN(t%52)+n;return jN(t%52)+n})(((e,t)=>{let n=t.length;for(;n;)e=33*e^t.charCodeAt(--n);return e})(5381,JSON.stringify(r))>>>0),Rd=["themed","global","styled","onevar","resonevar","allvar","inline"],$oe=r=>{if(r.href&&!r.href.startsWith(location.origin))return!1;try{return!!r.cssRules}catch(e){return!1}},ele=r=>{let e,t=()=>{let{cssRules:i}=e.sheet;return[].map.call(i,(o,l)=>{let{cssText:a}=o,s="";if(a.startsWith("--sxs"))return"";if(i[l-1]&&(s=i[l-1].cssText).startsWith("--sxs")){if(!o.cssRules.length)return"";for(let u in e.rules)if(e.rules[u].group===o)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return o.cssRules.length?`${s}${a}`:""}return a}).join("")},n=()=>{if(e){let{rules:a,sheet:s}=e;if(!s.deleteRule){for(;Object(Object(s.cssRules)[0]).type===3;)s.cssRules.splice(0,1);s.cssRules=[]}for(let u in a)delete a[u]}let i=Object(r).styleSheets||[];for(let a of i)if($oe(a)){for(let s=0,u=a.cssRules;u[s];++s){let c=Object(u[s]);if(c.type!==1)continue;let f=Object(u[s+1]);if(f.type!==4)continue;++s;let{cssText:h}=c;if(!h.startsWith("--sxs"))continue;let d=h.slice(14,-3).trim().split(/\s+/),p=Rd[d[0]];p&&(e||(e={sheet:a,reset:n,rules:{},toString:t}),e.rules[p]={group:f,index:s,cache:new Set(d)})}if(e)break}if(!e){let a=(s,u)=>({type:u,cssRules:[],insertRule(c,f){this.cssRules.splice(f,0,a(c,{import:3,undefined:1}[(c.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return s==="@media{}"?`@media{${[].map.call(this.cssRules,c=>c.cssText).join("")}}`:s}});e={sheet:r?(r.head||r).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:n,toString:t}}let{sheet:o,rules:l}=e;for(let a=Rd.length-1;a>=0;--a){let s=Rd[a];if(!l[s]){let u=Rd[a+1],c=l[u]?l[u].index:o.cssRules.length;o.insertRule("@media{}",c),o.insertRule(`--sxs{--sxs:${a}}`,c),l[s]={group:o.cssRules[c+1],index:c,cache:new Set([a])}}tle(l[s])}};return n(),e},tle=r=>{let e=r.group,t=e.cssRules.length;r.apply=n=>{try{e.insertRule(n,t),++t}catch(i){}}},Od=Symbol(),rle=Id(),nle=(r,e)=>rle(r,()=>(...t)=>{let n={type:null,composers:new Set};for(let i of t)if(i!=null)if(i[ag]){n.type==null&&(n.type=i[ag].type);for(let o of i[ag].composers)n.composers.add(o)}else i.constructor!==Object||i.$$typeof?n.type==null&&(n.type=i):n.composers.add(ile(i,r));return n.type==null&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),ole(r,n,e)}),ile=({variants:r,compoundVariants:e,defaultVariants:t,...n},i)=>{let o=`${r1(i.prefix)}c-${H2(n)}`,l=[],a=[],s=Object.create(null),u=[];for(let h in t)s[h]=String(t[h]);if(typeof r=="object"&&r)for(let h in r){c=s,f=h,Uoe.call(c,f)||(s[h]="undefined");let d=r[h];for(let p in d){let v={[h]:String(p)};String(p)==="undefined"&&u.push(h);let b=d[p],C=[v,b,!DN(b)];l.push(C)}}var c,f;if(typeof e=="object"&&e)for(let h of e){let{css:d,...p}=h;d=typeof d=="object"&&d||{};for(let b in p)p[b]=String(p[b]);let v=[p,d,!DN(d)];a.push(v)}return[o,n,l,a,s,u]},ole=(r,e,t)=>{let[n,i,o,l]=lle(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(f=>{function h(){for(let d=0;d<h[Od].length;d++){let[p,v]=h[Od][d];f.rules[p].apply(v)}return h[Od]=[],null}return h[Od]=[],h.rules={},Rd.forEach(d=>h.rules[d]={apply:p=>h[Od].push([d,p])}),h})(t):null,s=(a||t).rules,u=`.${n}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,c=f=>{f=typeof f=="object"&&f||ale;let{css:h,...d}=f,p={};for(let C in o)if(delete d[C],C in f){let L=f[C];typeof L=="object"&&L?p[C]={"@initial":o[C],...L}:(L=String(L),p[C]=L!=="undefined"||l.has(C)?L:o[C])}else p[C]=o[C];let v=new Set([...i]);for(let[C,L,S,P]of e.composers){t.rules.styled.cache.has(C)||(t.rules.styled.cache.add(C),lf(L,[`.${C}`],[],r,G=>{s.styled.apply(G)}));let y=xN(S,p,r.media),z=xN(P,p,r.media,!0);for(let G of y)if(G!==void 0)for(let[J,te,ne]of G){let Q=`${C}-${H2(te)}-${J}`;v.add(Q);let ee=(ne?t.rules.resonevar:t.rules.onevar).cache,se=ne?s.resonevar:s.onevar;ee.has(Q)||(ee.add(Q),lf(te,[`.${Q}`],[],r,Pe=>{se.apply(Pe)}))}for(let G of z)if(G!==void 0)for(let[J,te]of G){let ne=`${C}-${H2(te)}-${J}`;v.add(ne),t.rules.allvar.cache.has(ne)||(t.rules.allvar.cache.add(ne),lf(te,[`.${ne}`],[],r,Q=>{s.allvar.apply(Q)}))}}if(typeof h=="object"&&h){let C=`${n}-i${H2(h)}-css`;v.add(C),t.rules.inline.cache.has(C)||(t.rules.inline.cache.add(C),lf(h,[`.${C}`],[],r,L=>{s.inline.apply(L)}))}for(let C of String(f.className||"").trim().split(/\s+/))C&&v.add(C);let b=d.className=[...v].join(" ");return{type:e.type,className:b,selector:u,props:d,toString:()=>b,deferredInjector:a}};return kk(c,{className:n,selector:u,[ag]:e,toString:()=>(t.rules.styled.cache.has(n)||c(),n)})},lle=r=>{let e="",t=[],n={},i=[];for(let[o,,,,l,a]of r){e===""&&(e=o),t.push(o),i.push(...a);for(let s in l){let u=l[s];(n[s]===void 0||u!=="undefined"||a.includes(u))&&(n[s]=u)}}return[e,t,n,new Set(i)]},xN=(r,e,t,n)=>{let i=[];e:for(let[o,l,a]of r){if(a)continue;let s,u=0,c=!1;for(s in o){let f=o[s],h=e[s];if(h!==f){if(typeof h!="object"||!h)continue e;{let d,p,v=0;for(let b in h){if(f===String(h[b])){if(b!=="@initial"){let C=b.slice(1);(p=p||[]).push(C in t?t[C]:b.replace(/^@media ?/,"")),c=!0}u+=v,d=!0}++v}if(p&&p.length&&(l={["@media "+p.join(", ")]:l}),!d)continue e}}}(i[u]=i[u]||[]).push([n?"cv":`${s}-${o[s]}`,l,c])}return i},ale={},sle=Id(),ule=(r,e)=>sle(r,()=>(...t)=>{let n=()=>{for(let i of t){i=typeof i=="object"&&i||{};let o=H2(i);if(!e.rules.global.cache.has(o)){if(e.rules.global.cache.add(o),"@import"in i){let l=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,l++);delete i["@import"]}lf(i,[],[],r,l=>{e.rules.global.apply(l)})}}return""};return kk(n,{toString:n})}),cle=Id(),fle=(r,e)=>cle(r,()=>t=>{let n=`${r1(r.prefix)}k-${H2(t)}`,i=()=>{if(!e.rules.global.cache.has(n)){e.rules.global.cache.add(n);let o=[];lf(t,[],[],r,a=>o.push(a));let l=`@keyframes ${n}{${o.join("")}}`;e.rules.global.apply(l)}return n};return kk(i,{get name(){return i()},toString:i})}),hle=class{constructor(r,e,t,n){this.token=r==null?"":String(r),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=n==null?"":String(n)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+r1(this.prefix)+r1(this.scale)+this.token}toString(){return this.computedValue}},dle=Id(),mle=(r,e)=>dle(r,()=>(t,n)=>{n=typeof t=="object"&&t||Object(n);let i=`.${t=(t=typeof t=="string"?t:"")||`${r1(r.prefix)}t-${H2(n)}`}`,o={},l=[];for(let s in n){o[s]={};for(let u in n[s]){let c=`--${r1(r.prefix)}${s}-${u}`,f=qN(String(n[s][u]),r.prefix,s);o[s][u]=new hle(u,f,s,r.prefix),l.push(`${c}:${f}`)}}let a=()=>{if(l.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);let s=`${n===r.theme?":root,":""}.${t}{${l.join(";")}}`;e.rules.themed.apply(s)}return t};return{...o,get className(){return a()},selector:i,toString:a}}),gle=Id(),UN=r=>{let e=!1,t=gle(r,n=>{e=!0;let i="prefix"in(n=typeof n=="object"&&n||{})?String(n.prefix):"",o=typeof n.media=="object"&&n.media||{},l=typeof n.root=="object"?n.root||null:globalThis.document||null,a=typeof n.theme=="object"&&n.theme||{},s={prefix:i,media:o,theme:a,themeMap:typeof n.themeMap=="object"&&n.themeMap||{...yk},utils:typeof n.utils=="object"&&n.utils||{}},u=ele(l),c={css:nle(s,u),globalCss:ule(s,u),keyframes:fle(s,u),createTheme:mle(s,u),reset(){u.reset(),c.theme.toString()},theme:{},sheet:u,config:s,prefix:i,getCssText:u.toString,toString:u.toString};return String(c.theme=c.createTheme(a)),c});return e||t.reset(),t};var Lk={primary:"#228be6",white:"#ffffff",black:"#000000",dark50:"#C1C2C5",dark100:"#A6A7AB",dark200:"#909296",dark300:"#5c5f66",dark400:"#373A40",dark500:"#2C2E33",dark600:"#25262b",dark700:"#1A1B1E",dark800:"#141517",dark900:"#101113",gray50:"#f8f9fa",gray100:"#f1f3f5",gray200:"#e9ecef",gray300:"#dee2e6",gray400:"#ced4da",gray500:"#adb5bd",gray600:"#868e96",gray700:"#495057",gray800:"#343a40",gray900:"#212529",red50:"#fff5f5",red100:"#ffe3e3",red200:"#ffc9c9",red300:"#ffa8a8",red400:"#ff8787",red500:"#ff6b6b",red600:"#fa5252",red700:"#f03e3e",red800:"#e03131",red900:"#c92a2a",pink50:"#fff0f6",pink100:"#ffdeeb",pink200:"#fcc2d7",pink300:"#faa2c1",pink400:"#f783ac",pink500:"#f06595",pink600:"#e64980",pink700:"#d6336c",pink800:"#c2255c",pink900:"#a61e4d",grape50:"#f8f0fc",grape100:"#f3d9fa",grape200:"#eebefa",grape300:"#e599f7",grape400:"#da77f2",grape500:"#cc5de8",grape600:"#be4bdb",grape700:"#ae3ec9",grape800:"#9c36b5",grape900:"#862e9c",violet50:"#f3f0ff",violet100:"#e5dbff",violet200:"#d0bfff",violet300:"#b197fc",violet400:"#9775fa",violet500:"#845ef7",violet600:"#7950f2",violet700:"#7048e8",violet800:"#6741d9",violet900:"#5f3dc4",indigo50:"#edf2ff",indigo100:"#dbe4ff",indigo200:"#bac8ff",indigo300:"#91a7ff",indigo400:"#748ffc",indigo500:"#5c7cfa",indigo600:"#4c6ef5",indigo700:"#4263eb",indigo800:"#3b5bdb",indigo900:"#364fc7",blue50:"#e7f5ff",blue100:"#d0ebff",blue200:"#a5d8ff",blue300:"#74c0fc",blue400:"#4dabf7",blue500:"#339af0",blue600:"#228be6",blue700:"#1c7ed6",blue800:"#1971c2",blue900:"#1864ab",cyan50:"#e3fafc",cyan100:"#c5f6fa",cyan200:"#99e9f2",cyan300:"#66d9e8",cyan400:"#3bc9db",cyan500:"#22b8cf",cyan600:"#15aabf",cyan700:"#1098ad",cyan800:"#0c8599",cyan900:"#0b7285",teal50:"#e6fcf5",teal100:"#c3fae8",teal200:"#96f2d7",teal300:"#63e6be",teal400:"#38d9a9",teal500:"#20c997",teal600:"#12b886",teal700:"#0ca678",teal800:"#099268",teal900:"#087f5b",green50:"#ebfbee",green100:"#d3f9d8",green200:"#b2f2bb",green300:"#8ce99a",green400:"#69db7c",green500:"#51cf66",green600:"#40c057",green700:"#37b24d",green800:"#2f9e44",green900:"#2b8a3e",lime50:"#f4fce3",lime100:"#e9fac8",lime200:"#d8f5a2",lime300:"#c0eb75",lime400:"#a9e34b",lime500:"#94d82d",lime600:"#82c91e",lime700:"#74b816",lime800:"#66a80f",lime900:"#5c940d",yellow50:"#fff9db",yellow100:"#fff3bf",yellow200:"#ffec99",yellow300:"#ffe066",yellow400:"#ffd43b",yellow500:"#fcc419",yellow600:"#fab005",yellow700:"#f59f00",yellow800:"#f08c00",yellow900:"#e67700",orange50:"#fff4e6",orange100:"#ffe8cc",orange200:"#ffd8a8",orange300:"#ffc078",orange400:"#ffa94d",orange500:"#ff922b",orange600:"#fd7e14",orange700:"#f76707",orange800:"#e8590c",orange900:"#d9480f"},WN={blue:"blue",cyan:"cyan",dark:"dark",grape:"grape",gray:"gray",green:"green",indigo:"indigo",lime:"lime",orange:"orange",pink:"pink",red:"red",teal:"teal",violet:"violet",yellow:"yellow"};var{css:N2,globalCss:Ek,keyframes:Sk,getCssText:ple,theme:zd,createTheme:GN,config:_le,reset:ble}=UN({prefix:"svelteui",theme:{colors:Lk,space:{0:"0rem",xs:10,sm:12,md:16,lg:20,xl:24,xsPX:"10px",smPX:"12px",mdPX:"16px",lgPX:"20px",xlPX:"24px",1:"0.125rem",2:"0.25rem",3:"0.375rem",4:"0.5rem",5:"0.625rem",6:"0.75rem",7:"0.875rem",8:"1rem",9:"1.25rem",10:"1.5rem",11:"1.75rem",12:"2rem",13:"2.25rem",14:"2.5rem",15:"2.75rem",16:"3rem",17:"3.5rem",18:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},fontSizes:{xs:"12px",sm:"14px",md:"16px",lg:"18px",xl:"20px"},fonts:{standard:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",mono:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",fallback:"Segoe UI, system-ui, sans-serif"},fontWeights:{thin:100,extralight:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800},lineHeights:{xs:1,sm:1.25,md:1.5,lg:1.625,xl:1.75},letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},sizes:{},radii:{xs:"2px",sm:"4px",md:"8px",lg:"16px",xl:"32px",squared:"33%",rounded:"50%",pill:"9999px"},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},zIndices:{1:"100",2:"200",3:"300",4:"400",5:"500",10:"1000",max:"9999"},borderWidths:{light:"1px",normal:"2px",bold:"3px",extrabold:"4px",black:"5px",xs:"1px",sm:"2px",md:"3px",lg:"4px",xl:"5px"},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},borderStyles:{},transitions:{}},media:{xs:"(min-width: 576px)",sm:"(min-width: 768px)",md:"(min-width: 992px)",lg:"(min-width: 1200px)",xl:"(min-width: 1400px)"},utils:{focusRing:r=>({WebkitTapHighlightColor:"transparent","&:focus":{outlineOffset:2,outline:r==="always"||r==="auto"?"2px solid $primary":"none"},"&:focus:not(:focus-visible)":{outline:r==="auto"||r==="never"?"none":void 0}}),p:r=>({padding:r}),pt:r=>({paddingTop:r}),pr:r=>({paddingRight:r}),pb:r=>({paddingBottom:r}),pl:r=>({paddingLeft:r}),px:r=>({paddingLeft:r,paddingRight:r}),py:r=>({paddingTop:r,paddingBottom:r}),m:r=>({margin:r}),mt:r=>({marginTop:r}),mr:r=>({marginRight:r}),mb:r=>({marginBottom:r}),ml:r=>({marginLeft:r}),mx:r=>({marginLeft:r,marginRight:r}),my:r=>({marginTop:r,marginBottom:r}),ta:r=>({textAlign:r}),tt:r=>({textTransform:r}),to:r=>({textOverflow:r}),d:r=>({display:r}),dflex:r=>({display:"flex",alignItems:r,justifyContent:r}),fd:r=>({flexDirection:r}),fw:r=>({flexWrap:r}),ai:r=>({alignItems:r}),ac:r=>({alignContent:r}),jc:r=>({justifyContent:r}),as:r=>({alignSelf:r}),fg:r=>({flexGrow:r}),fs:r=>({fontSize:r}),fb:r=>({flexBasis:r}),bc:r=>({backgroundColor:r}),bf:r=>({backdropFilter:r}),bg:r=>({background:r}),bgBlur:r=>({bf:"saturate(180%) blur(10px)",bg:r}),bgColor:r=>({backgroundColor:r}),backgroundClip:r=>({WebkitBackgroundClip:r,backgroundClip:r}),bgClip:r=>({WebkitBackgroundClip:r,backgroundClip:r}),br:r=>({borderRadius:r}),bw:r=>({borderWidth:r}),btrr:r=>({borderTopRightRadius:r}),bbrr:r=>({borderBottomRightRadius:r}),bblr:r=>({borderBottomLeftRadius:r}),btlr:r=>({borderTopLeftRadius:r}),bs:r=>({boxShadow:r}),normalShadow:r=>({boxShadow:`0 4px 14px 0 $${r}`}),lh:r=>({lineHeight:r}),ov:r=>({overflow:r}),ox:r=>({overflowX:r}),oy:r=>({overflowY:r}),pe:r=>({pointerEvents:r}),events:r=>({pointerEvents:r}),us:r=>({WebkitUserSelect:r,userSelect:r}),userSelect:r=>({WebkitUserSelect:r,userSelect:r}),w:r=>({width:r}),h:r=>({height:r}),minW:r=>({minWidth:r}),minH:r=>({minWidth:r}),mw:r=>({maxWidth:r}),maxW:r=>({maxWidth:r}),mh:r=>({maxHeight:r}),maxH:r=>({maxHeight:r}),size:r=>({width:r,height:r}),minSize:r=>({minWidth:r,minHeight:r,width:r,height:r}),sizeMin:r=>({minWidth:r,minHeight:r,width:r,height:r}),maxSize:r=>({maxWidth:r,maxHeight:r}),sizeMax:r=>({maxWidth:r,maxHeight:r}),appearance:r=>({WebkitAppearance:r,appearance:r}),scale:r=>({transform:`scale(${r})`}),linearGradient:r=>({backgroundImage:`linear-gradient(${r})`}),tdl:r=>({textDecorationLine:r}),textGradient:r=>({backgroundImage:`linear-gradient(${r})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"})},themeMap:{...yk,width:"space",height:"space",minWidth:"space",maxWidth:"space",minHeight:"space",maxHeight:"space",flexBasis:"space",gridTemplateColumns:"space",gridTemplateRows:"space",blockSize:"space",minBlockSize:"space",maxBlockSize:"space",inlineSize:"space",minInlineSize:"space",maxInlineSize:"space",borderWidth:"borderWeights"}}),cr=GN("dark-theme",{colors:Lk,shadows:{xs:"-4px 0 15px rgb(0 0 0 / 50%)",sm:"0 5px 20px -5px rgba(20, 20, 20, 0.1)",md:"0 8px 30px rgba(20, 20, 20, 0.15)",lg:"0 30px 60px rgba(20, 20, 20, 0.15)",xl:"0 40px 80px rgba(20, 20, 20, 0.25)"}}),Mk=Ek({a:{focusRing:"auto"},body:{[`${cr.selector} &`]:{backgroundColor:"$dark700",color:"$dark50"},backgroundColor:"$white",color:"$black"}}),Ak=Ek({html:{fontFamily:"sans-serif",lineHeight:"1.15",textSizeAdjust:"100%",margin:0},body:{margin:0},"article, aside, footer, header, nav, section, figcaption, figure, main":{display:"block"},h1:{fontSize:"2em",margin:0},hr:{boxSizing:"content-box",height:0,overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{background:"transparent",textDecorationSkip:"objects"},"a:active, a:hover":{outlineWidth:0},"abbr[title]":{borderBottom:"none",textDecoration:"underline"},"b, strong":{fontWeight:"bolder"},"code, kbp, samp":{fontFamily:"monospace, monospace",fontSize:"1em"},dfn:{fontStyle:"italic"},mark:{backgroundColor:"#ff0",color:"#000"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sup:{top:"-0.5em"},sub:{bottom:"-0.25em"},"audio, video":{display:"inline-block"},"audio:not([controls])":{display:"none",height:0},img:{borderStyle:"none",verticalAlign:"middle"},"svg:not(:root)":{overflow:"hidden"},"button, input, optgroup, select, textarea":{fontFamily:"sans-serif",fontSize:"100%",lineHeight:"1.15",margin:0},"button, input":{overflow:"visible"},"button, select":{textTransform:"none"},"button, [type=reset], [type=submit]":{WebkitAppearance:"button"},"button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner":{borderStyle:"none",padding:0},"button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring":{outline:"1px dotted ButtonText"},legend:{boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:0,whiteSpace:"normal"},progress:{display:"inline-block",verticalAlign:"baseline"},textarea:{overflow:"auto"},"[type=checkbox], [type=radio]":{boxSizing:"border-box",padding:0},"[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button":{height:"auto"},"[type=search]":{appearance:"textfield",outlineOffset:"-2px"},"[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration":{appearance:"none"},"::-webkit-file-upload-button":{appearance:"button",font:"inherit"},"details, menu":{display:"block"},summary:{display:"list-item"},canvas:{display:"inline-block"},template:{display:"none"},"[hidden]":{display:"none"}});function $t(r,e=0){var i,o;let t=((i=wo())==null?void 0:i.theme)||Wi(),n="50";return vle(r)?(e!==0&&(n=`${e.toString()}00`),(o=t.colors[`${r}${n}`])==null?void 0:o.value):r}function vle(r){let e=!1;switch(r){case"dark":e=!0;break;case"gray":e=!0;break;case"red":e=!0;break;case"pink":e=!0;break;case"grape":e=!0;break;case"violet":e=!0;break;case"indigo":e=!0;break;case"blue":e=!0;break;case"cyan":e=!0;break;case"teal":e=!0;break;case"green":e=!0;break;case"lime":e=!0;break;case"yellow":e=!0;break;case"orange":e=!0;break;default:e=!1;break}return e}function YN(r){return e=>{if(typeof e=="number")return`${e/16}${r}`;if(typeof e=="string"){let t=e.replace("px","");if(!Number.isNaN(Number(t)))return`${Number(t)/16}${r}`}return e}}var Hd=YN("rem"),ADe=YN("em");function KN(r=0){return{position:"absolute",top:Hd(r),right:Hd(r),left:Hd(r),bottom:Hd(r)}}function JN(r){var e,t;return typeof r.size=="number"?r.size:typeof r.sizes[r.size]=="number"?r.sizes[r.size]:+((e=r.sizes[r.size])==null?void 0:e.value)||+((t=r.sizes.md)==null?void 0:t.value)}function XN(r){var t;let e=((t=wo())==null?void 0:t.theme)||Wi();return typeof r=="number"?r:e.radii[r].value}function Cle(r){let e=r.replace("#","");return typeof e=="string"&&e.length===6&&!Number.isNaN(+`0x${e}`)}function wle(r){let e=r.replace("#",""),t=parseInt(e,16),n=t>>16&255,i=t>>8&255,o=t&255;return{r:n,g:i,b:o,a:1}}function yle(r){let[e,t,n,i]=r.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:e,g:t,b:n,a:i||1}}function QN(r){return Cle(r)?wle(r):r.startsWith("rgb")?yle(r):{r:0,g:0,b:0,a:1}}function jl(r,e=1){if(typeof r!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";let{r:t,g:n,b:i}=QN(r);return`rgba(${t}, ${n}, ${i}, ${e})`}var Pk={from:"indigo",to:"cyan",deg:45};function $N({variant:r,color:e,gradient:t}){var o;let n=((o=wo())==null?void 0:o.theme)||Wi(),i=6;if(r==="light")return{border:"transparent",background:[jl($t(e,8),.35),jl($t(e,0),1)],color:[e==="dark"?$t("dark",0):$t(e,2),e==="dark"?$t("dark",9):$t(e,i)],hover:[jl($t(e,7),.45),jl($t(e,1),.65)]};if(r==="default")return{border:[$t("dark",5),$t("gray",4)],background:[$t("dark",5),n.colors.white.value],color:[n.colors.white.value,n.colors.black.value],hover:[$t("dark",4),$t("gray",0)]};if(r==="white")return{border:"transparent",background:n.colors.white.value,color:$t(e,i),hover:null};if(r==="outline")return{border:[$t(e,4),$t(e,i)],background:"transparent",color:[$t(e,4),$t(e,i)],hover:[jl($t(e,4),.05),jl($t(e,0),.35)]};if(r==="gradient"){let l={from:(t==null?void 0:t.from)||Pk.from,to:(t==null?void 0:t.to)||Pk.to,deg:(t==null?void 0:t.deg)||Pk.deg};return{background:`linear-gradient(${l.deg}deg, ${$t(l.from,i)} 0%, ${$t(l.to,i)} 100%)`,color:n.colors.white.value,border:"transparent",hover:null}}return r==="subtle"?{border:"transparent",background:"transparent",color:[e==="dark"?$t("dark",0):$t(e,2),e==="dark"?$t("dark",9):$t(e,i)],hover:[jl($t(e,8),.35),jl($t(e,0),1)]}:{border:"transparent",background:[$t(e,8),$t(e,i)],color:n.colors.white.value,hover:$t(e,7)}}var yo={cover:KN,size:JN,radius:XN,themeColor:$t,variant:$N,rgba:jl};function Wi(){var t,n;let r;return(t=Td)==null||t.subscribe(i=>{r=i}),{...zd,colorNames:WN,colorScheme:r,dark:(n=cr)==null?void 0:n.selector,fn:{cover:yo.cover,themeColor:yo.themeColor,size:yo.size,radius:yo.radius,rgba:yo.rgba,variant:yo.variant}}}function kle(r){let e,t,n,i,o,l,a,s=r[19].default,u=gt(s,r,r[18],null),c=[{id:"SVELTEUI_PROVIDER"},{class:t=r[5](r[2],r[4].root,r[3])},r[7]],f={};for(let h=0;h<c.length;h+=1)f=R(f,c[h]);return{c(){e=Ge("div"),u&&u.c(),mn(e,f)},m(h,d){A(h,e,d),u&&u.m(e,null),r[20](e),o=!0,l||(a=[kr(n=Ht.call(null,e,r[1])),kr(i=r[6].call(null,e))],l=!0)},p(h,[d]){u&&u.p&&(!o||d&262144)&&_t(u,s,h,h[18],o?pt(s,h[18],d,null):bt(h[18]),null),mn(e,f=D(c,[{id:"SVELTEUI_PROVIDER"},(!o||d&60&&t!==(t=h[5](h[2],h[4].root,h[3])))&&{class:t},d&128&&h[7]])),n&&Vr(n.update)&&d&2&&n.update.call(null,h[1])},i(h){o||(re(u,h),o=!0)},o(h){oe(u,h),o=!1},d(h){h&&M(e),u&&u.d(h),r[20](null),l=!1,Y(a)}}}function Lle(r,e,t){let n,i,o,l,a=["use","class","element","theme","styles","defaultProps","themeObserver","withNormalizeCSS","withGlobalStyles","override","inherit"],s=Z(e,a),u;K5(r,Td,se=>t(21,u=se));let{$$slots:c={},$$scope:f}=e,{use:h=[],class:d="",element:p=void 0,theme:v=Wi(),styles:b={},defaultProps:C={},themeObserver:L="light",withNormalizeCSS:S=!1,withGlobalStyles:P=!1,override:y={},inherit:z=!1}=e;sk(()=>{let se=document.documentElement.classList;u==="dark"&&se.add(cr.className),u==="light"&&se.remove(cr.className)});let G=wo(),J=er(()=>({root:{}})),te=_n(vr()),ne=Wi(),Q=null;function ee(se){je[se?"unshift":"push"](()=>{p=se,t(0,p)})}return r.$$set=se=>{e=R(R({},e),x(se)),t(7,s=Z(e,a)),"use"in se&&t(1,h=se.use),"class"in se&&t(2,d=se.class),"element"in se&&t(0,p=se.element),"theme"in se&&t(8,v=se.theme),"styles"in se&&t(9,b=se.styles),"defaultProps"in se&&t(10,C=se.defaultProps),"themeObserver"in se&&t(11,L=se.themeObserver),"withNormalizeCSS"in se&&t(12,S=se.withNormalizeCSS),"withGlobalStyles"in se&&t(13,P=se.withGlobalStyles),"override"in se&&t(14,y=se.override),"inherit"in se&&t(15,z=se.inherit),"$$scope"in se&&t(18,f=se.$$scope)},r.$$.update=()=>{r.$$.dirty&34560&&t(16,n={themeOverride:z?{...G.theme,...v}:v,styles:z?{...G.styles,...b}:b,defaultProps:z?{...G.styles,...C}:C}),r.$$.dirty&65536&&t(17,i=Ok(ne,n.themeOverride)),r.$$.dirty&133120&&L!==null&&t(3,Q=L==="light"?i:cr),r.$$.dirty&8192&&P&&Mk(),r.$$.dirty&4096&&S&&Ak(),r.$$.dirty&65536&&Sd(og,{theme:n.themeOverride,styles:{},defaultProps:{}}),r.$$.dirty&2048&&Td.set(L),r.$$.dirty&16384&&t(5,{cx:o,classes:l}=J(null,{override:y}),o,(t(4,l),t(14,y)))},[p,h,d,Q,l,o,te,s,v,b,C,L,S,P,y,z,n,i,f,c,ee]}var Tk=class extends H{constructor(e){super(),V(this,e,Lle,kle,N,{use:1,class:2,element:0,theme:8,styles:9,defaultProps:10,themeObserver:11,withNormalizeCSS:12,withGlobalStyles:13,override:14,inherit:15})}},Nd=Tk;var n1=(r,e)=>{let{themeColor:t,rgba:n}=yo,i={filled:{[`${cr.selector} &`]:{backgroundColor:t(r,8)},border:"transparent",backgroundColor:t(r,6),color:"White","&:hover":{backgroundColor:t(r,7)}},light:{[`${cr.selector} &`]:{backgroundColor:n(t(r,8),.35),color:r==="dark"?t("dark",0):t(r,2),"&:hover":{backgroundColor:n(t(r,7),.45)}},border:"transparent",backgroundColor:t(r,0),color:r==="dark"?t("dark",9):t(r,6),"&:hover":{backgroundColor:t(r,1)}},outline:{[`${cr.selector} &`]:{border:`1px solid ${t(r,4)}`,color:`${t(r,4)}`,"&:hover":{backgroundColor:n(t(r,4),.05)}},border:`1px solid ${t(r,7)}`,backgroundColor:"transparent",color:t(r,7),"&:hover":{backgroundColor:n(t(r,0),.35)}},subtle:{[`${cr.selector} &`]:{color:r==="dark"?t("dark",0):t(r,2),"&:hover":{backgroundColor:n(t(r,8),.35)}},border:"transparent",backgroundColor:"transparent",color:r==="dark"?t("dark",9):t(r,6),"&:hover":{backgroundColor:t(r,0)}},default:{[`${cr.selector} &`]:{border:`1px solid ${t("dark",5)}`,backgroundColor:t("dark",5),color:"White","&:hover":{backgroundColor:t("dark",4)}},border:`1px solid ${t("gray",4)}`,backgroundColor:"White",color:"Black","&:hover":{backgroundColor:t("gray",0)}},white:{border:"transparent",backgroundColor:"White",color:t(r,7),"&:hover":{backgroundColor:"White"}},gradient:{}};return e&&(i.gradient={border:"transparent",background:`linear-gradient(${e.deg}deg, $${e.from}600 0%, $${e.to}600 100%)`,color:"White"}),i};function Rk(r="svelteui"){return`${r}-${Math.random().toString(36).substring(2,10)}`}function Ok(r,e){return e?Object.keys(r).reduce((t,n)=>(t[n]=typeof e[n]=="object"?{...r[n],...e[n]}:typeof e[n]=="number"?e[n]:e[n]||r[n],t),{}):r}var Ele={}.hasOwnProperty;function Sle(...r){let e=[];for(let t=0;t<r.length;t++){let n=r[t];if(!n)continue;let i=typeof n;if(i==="string"||i==="number")e.push(n);else if(Array.isArray(n)){if(n.length){let o={...n};o&&e.push(o)}}else if(i==="object")if(n.toString===Object.prototype.toString)for(let o in n)Ele.call(n,o)&&n[o]&&e.push(o);else e.push(n.toString())}return e.join(" ")}function eV(){return{cx:Sle}}function tV(r){let e={};return Object.keys(r).forEach(t=>{let[n,i]=r[t];e[n]=i}),e}var rV="svelteui";function Mle(r){return`__svelteui-ref-${r||""}`}function Ale(r,e){let t=[],n={},i=l=>{var u;let a=(u=l.variation)!=null?u:l,s=Object.keys(a);for(let c of s)o(a[c])},o=l=>{Object.keys(l).map(a=>{if(a==="variants"){i(l[a]);return}if(a==="ref"&&t.push(l.ref),a==="darkMode"&&(l[`${e.dark} &`]=l.darkMode),!(l[a]===null||typeof l[a]!="object")){if(o(l[a]),a==="darkMode")delete l[a];else if(!a.startsWith("@media")){if(!a.startsWith("&")&&!a.startsWith(e.dark)){let s=N2(l[a]);n[a]=s().toString(),l[`& .${s().toString()}`]=l[a],delete l[a]}}}})};return o(r),delete r["& .root"],{classMap:n,refs:Array.from(new Set(t))}}function er(r){let e=typeof r=="function"?r:()=>r;function t(n={},i){var C,L;let o=((C=wo())==null?void 0:C.theme)||Wi(),{cx:l}=eV(),{override:a,name:s}=i||{},u=e(o,n,Mle),c=Object.assign({},u),{classMap:f,refs:h}=Ale(c,o),d=(L=u.root)!=null?L:void 0,p=d!==void 0?{...d,...c}:u,v=N2(p),b=tV(Object.keys(u).map(S=>{var ne,Q,ee;let P=(ne=h.find(se=>se.includes(S)))!=null?ne:"",y=(Q=P==null?void 0:P.split("-"))!=null?Q:[],z=(P==null?void 0:P.split("-")[(y==null?void 0:y.length)-1])===S,G=S.toString(),J=(ee=f[G])!=null?ee:G;P&&z&&(J=`${J} ${P}`),S==="root"&&(J=v({css:a}).toString());let te=`${rV}-${S.toString()}`;return s&&(te=`${rV}-${s}-${S.toString()}`,J=`${J} ${te}`),[S,J]}));return{cx:l,theme:o,classes:b,getStyles:N2(p)}}return t}var nV={mt:"marginTop",mb:"marginBottom",ml:"marginLeft",mr:"marginRight",pt:"paddingTop",pb:"paddingBottom",pl:"paddingLeft",pr:"paddingRight"},Ple=["-xs","-sm","-md","-lg","-xl"];function V2(r){return typeof r=="string"||typeof r=="number"}function B2(r,e){return Ple.includes(r)?e.fn.size({size:r.replace("-",""),sizes:e.space})*-1:e.fn.size({size:r,sizes:e.space})}function Ik(r,e){let t={};if(V2(r.p)){let n=B2(r.p,e);t.padding=n}if(V2(r.m)){let n=B2(r.m,e);t.margin=n}if(V2(r.py)){let n=B2(r.py,e);t.paddingTop=n,t.paddingBottom=n}if(V2(r.px)){let n=B2(r.px,e);t.paddingLeft=n,t.paddingRight=n}if(V2(r.my)){let n=B2(r.my,e);t.marginTop=n,t.marginBottom=n}if(V2(r.mx)){let n=B2(r.mx,e);t.marginLeft=n,t.marginRight=n}return Object.keys(nV).forEach(n=>{V2(r[n])&&(t[nV[n]]=e.fn.size({size:B2(r[n],e),sizes:e.space}))}),t}function Tle(r){let e,t,n,i,o,l,a,s=r[28].default,u=gt(s,r,r[32],null),c=[{class:t=r[2]+" "+r[7]({css:{...r[8](r[11]),...r[6]}})},r[12]],f={};for(let h=0;h<c.length;h+=1)f=R(f,c[h]);return{c(){e=Ge("div"),u&&u.c(),mn(e,f)},m(h,d){A(h,e,d),u&&u.m(e,null),r[31](e),o=!0,l||(a=[kr(n=r[9].call(null,e)),kr(i=Ht.call(null,e,r[1]))],l=!0)},p(h,d){u&&u.p&&(!o||d[1]&2)&&_t(u,s,h,h[32],o?pt(s,h[32],d,null):bt(h[32]),null),mn(e,f=D(c,[(!o||d[0]&452&&t!==(t=h[2]+" "+h[7]({css:{...h[8](h[11]),...h[6]}})))&&{class:t},d[0]&4096&&h[12]])),i&&Vr(i.update)&&d[0]&2&&i.update.call(null,h[1])},i(h){o||(re(u,h),o=!0)},o(h){oe(u,h),o=!1},d(h){h&&M(e),u&&u.d(h),r[31](null),l=!1,Y(a)}}}function Ole(r){let e,t,n,i=[{use:[r[9],[Ht,r[1]]]},{class:r[2]+" "+r[7]({css:{...r[8](r[11]),...r[6]}})},r[12]];var o=r[3];function l(a,s){let u={$$slots:{default:[Ile]},$$scope:{ctx:a}};for(let c=0;c<i.length;c+=1)u=R(u,i[c]);return s!==void 0&&s[0]&7110&&(u=R(u,D(i,[s[0]&514&&{use:[a[9],[Ht,a[1]]]},s[0]&2500&&{class:a[2]+" "+a[7]({css:{...a[8](a[11]),...a[6]}})},s[0]&4096&&tt(a[12])]))),{props:u}}return o&&(e=pn(o,l(r)),r[30](e)),{c(){e&&_e(e.$$.fragment),t=U()},m(a,s){e&&ge(e,a,s),A(a,t,s),n=!0},p(a,s){if(s[0]&8&&o!==(o=a[3])){if(e){wt();let u=e;oe(u.$$.fragment,1,0,()=>{pe(u,1)}),yt()}o?(e=pn(o,l(a,s)),a[30](e),_e(e.$$.fragment),re(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(o){let u=s[0]&7110?D(i,[s[0]&514&&{use:[a[9],[Ht,a[1]]]},s[0]&2500&&{class:a[2]+" "+a[7]({css:{...a[8](a[11]),...a[6]}})},s[0]&4096&&tt(a[12])]):{};s[1]&2&&(u.$$scope={dirty:s,ctx:a}),e.$set(u)}},i(a){n||(e&&re(e.$$.fragment,a),n=!0)},o(a){e&&oe(e.$$.fragment,a),n=!1},d(a){a&&M(t),r[30](null),e&&pe(e,a)}}}function Rle(r){let e,t=r[10]()&&zle(r);return{c(){t&&t.c()},m(n,i){t&&t.m(n,i),e=!0},p(n,i){n[10]()&&t.p(n,i)},i(n){e||(re(t,n),e=!0)},o(n){oe(t,n),e=!1},d(n){t&&t.d(n)}}}function Ile(r){let e,t=r[28].default,n=gt(t,r,r[32],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o[1]&2)&&_t(n,t,i,i[32],e?pt(t,i[32],o,null):bt(i[32]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function zle(r){let e,t,n,i,o,l,a,s=r[28].default,u=gt(s,r,r[32],null),c=[{class:t=r[2]+" "+r[7]({css:{...r[8](r[11]),...r[6]}})},r[12]],f={};for(let h=0;h<c.length;h+=1)f=R(f,c[h]);return{c(){e=Ge(r[10]()),u&&u.c(),$5(r[10]())(e,f)},m(h,d){A(h,e,d),u&&u.m(e,null),r[29](e),o=!0,l||(a=[kr(n=r[9].call(null,e)),kr(i=Ht.call(null,e,r[1]))],l=!0)},p(h,d){u&&u.p&&(!o||d[1]&2)&&_t(u,s,h,h[32],o?pt(s,h[32],d,null):bt(h[32]),null),$5(h[10]())(e,f=D(c,[(!o||d[0]&452&&t!==(t=h[2]+" "+h[7]({css:{...h[8](h[11]),...h[6]}})))&&{class:t},d[0]&4096&&h[12]])),i&&Vr(i.update)&&d[0]&2&&i.update.call(null,h[1])},i(h){o||(re(u,h),o=!0)},o(h){oe(u,h),o=!1},d(h){h&&M(e),u&&u.d(h),r[29](null),l=!1,Y(a)}}}function Hle(r){let e,t,n,i,o=[Rle,Ole,Tle],l=[];function a(s,u){return s[4]?0:s[5]&&typeof s[3]!="string"?1:2}return e=a(r,[-1,-1]),t=l[e]=o[e](r),{c(){t.c(),n=U()},m(s,u){l[e].m(s,u),A(s,n,u),i=!0},p(s,u){let c=e;e=a(s,u),e===c?l[e].p(s,u):(wt(),oe(l[c],1,1,()=>{l[c]=null}),yt(),t=l[e],t?t.p(s,u):(t=l[e]=o[e](s),t.c()),re(t,1),t.m(n.parentNode,n))},i(s){i||(re(t),i=!0)},o(s){oe(t),i=!1},d(s){s&&M(n),l[e].d(s)}}}function Nle(r,e,t){var Xt;let n,i,o,l=["use","element","class","css","root","m","my","mx","mt","mb","ml","mr","p","py","px","pt","pb","pl","pr"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",css:d={},root:p=void 0,m:v=void 0,my:b=void 0,mx:C=void 0,mt:L=void 0,mb:S=void 0,ml:P=void 0,mr:y=void 0,p:z=void 0,py:G=void 0,px:J=void 0,pt:te=void 0,pb:ne=void 0,pl:Q=void 0,pr:ee=void 0}=e,se=_n(vr()),Pe=()=>p,Te=((Xt=wo())==null?void 0:Xt.theme)||Wi(),be,rt;function Ee(Oe){je[Oe?"unshift":"push"](()=>{f=Oe,t(0,f)})}function Re(Oe){je[Oe?"unshift":"push"](()=>{f=Oe,t(0,f)})}function nr(Oe){je[Oe?"unshift":"push"](()=>{f=Oe,t(0,f)})}return r.$$set=Oe=>{e=R(R({},e),x(Oe)),t(12,a=Z(e,l)),"use"in Oe&&t(1,c=Oe.use),"element"in Oe&&t(0,f=Oe.element),"class"in Oe&&t(2,h=Oe.class),"css"in Oe&&t(13,d=Oe.css),"root"in Oe&&t(3,p=Oe.root),"m"in Oe&&t(14,v=Oe.m),"my"in Oe&&t(15,b=Oe.my),"mx"in Oe&&t(16,C=Oe.mx),"mt"in Oe&&t(17,L=Oe.mt),"mb"in Oe&&t(18,S=Oe.mb),"ml"in Oe&&t(19,P=Oe.ml),"mr"in Oe&&t(20,y=Oe.mr),"p"in Oe&&t(21,z=Oe.p),"py"in Oe&&t(22,G=Oe.py),"px"in Oe&&t(23,J=Oe.px),"pt"in Oe&&t(24,te=Oe.pt),"pb"in Oe&&t(25,ne=Oe.pb),"pl"in Oe&&t(26,Q=Oe.pl),"pr"in Oe&&t(27,ee=Oe.pr),"$$scope"in Oe&&t(32,u=Oe.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&8192&&t(8,n=typeof d=="function"?d:()=>d),r.$$.dirty[0]&8&&(t(4,be=p&&typeof p=="string"),t(5,rt=p&&typeof p=="function")),r.$$.dirty[0]&268419072&&t(6,o=Ik({m:v,my:b,mx:C,mt:L,mb:S,ml:P,mr:y,p:z,py:G,px:J,pt:te,pb:ne,pl:Q,pr:ee},Te))},t(7,i=N2({})),[f,c,h,p,be,rt,o,i,n,se,Pe,Te,a,d,v,b,C,L,S,P,y,z,G,J,te,ne,Q,ee,s,Ee,Re,nr,u]}var zk=class extends H{constructor(e){super(),V(this,e,Nle,Hle,N,{use:1,element:0,class:2,css:13,root:3,m:14,my:15,mx:16,mt:17,mb:18,ml:19,mr:20,p:21,py:22,px:23,pt:24,pb:25,pl:26,pr:27},null,[-1,-1])}},fr=zk;var iV={xs:{height:30,padding:"0px 14px"},sm:{height:36,padding:"0px 18px"},md:{height:42,padding:"0px 22px"},lg:{height:50,padding:"0px 26px"},xl:{height:60,padding:"0px 32px"},"compact-xs":{height:22,padding:"0 7px"},"compact-sm":{height:26,padding:"0 8px"},"compact-md":{height:30,padding:"0 10px"},"compact-lg":{height:34,padding:"0 12px"},"compact-xl":{height:40,padding:"0 14px"}},oV=er((r,{color:e,compact:t,fullSize:n,gradient:i,radius:o,size:l,variant:a})=>{var s;return{root:{focusRing:"auto",cursor:"pointer",position:"relative",boxSizing:"border-box",textDecoration:"none",outline:"none",userSelect:"none",appearance:"none",textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center",background:null,borderRadius:typeof o=="number"?o:`$${o}`,height:typeof l=="number"?`${l}px`:iV[t?`compact-${l}`:l].height,padding:typeof l=="number"?`0px ${l}px`:iV[t?`compact-${l}`:l].padding,fontFamily:(s=r.fonts.standard.value)!=null?s:"sans-serif",fontWeight:"$semibold",fontSize:`$${l}`,lineHeight:1,flexGrow:0,width:n?"100%":"fit-content","&:hover":{backgroundColor:a==="gradient"?null:r.fn.themeColor(e,7),backgroundSize:a==="gradient"?"200%":null},"&:active":{transform:"translateY(1px)"},"&:disabled":{pointerEvents:"none",borderColor:"transparent",background:r.fn.themeColor("gray",2),backgroundColor:r.fn.themeColor("gray",2),color:r.fn.themeColor("gray",5),cursor:"not-allowed",darkMode:{borderColor:"transparent",backgroundColor:r.fn.themeColor("dark",4),color:r.fn.themeColor("dark",6)}}},disabled:{pointerEvents:"none",borderColor:"transparent",background:r.fn.themeColor("gray",2),backgroundColor:r.fn.themeColor("gray",2),color:r.fn.themeColor("gray",5),cursor:"not-allowed",darkMode:{backgroundColor:r.fn.themeColor("dark",4),color:r.fn.themeColor("dark",6)}},loading:{pointerEvents:"none","&::before":{content:'""',position:"absolute",inset:-1,backgroundColor:"rgba(255, 255, 255, .5)",borderRadius:`$${o}`,cursor:"not-allowed"},darkMode:{"&::before":{backgroundColor:r.fn.rgba(r.fn.themeColor("dark",7),.5)}}},variants:{variation:n1(e,i),disabled:{true:{pointerEvents:"none",borderColor:"transparent",background:r.fn.themeColor("gray",2),backgroundColor:r.fn.themeColor("gray",2),color:r.fn.themeColor("gray",5),cursor:"not-allowed",[`${cr.selector} &`]:{borderColor:"transparent",backgroundColor:r.fn.themeColor("dark",4),color:r.fn.themeColor("dark",6)}}}}}});var Hk=Object.freeze([{error:!0,message:"If using the disabled prop, a loading cannot be set at the same time",solution:`
                If your component looks like this:
                
                &lt;Button disabled loading ...&gt; Button Text &lt;/Button&gt;
                         ^^^^^^^^ ^^^^^^^ - Try removing one of these
                `},{error:!0,message:"If using the external prop, a href prop must be associated with it. If you have an href prop there must be content inside.",solution:`
                If your component looks like this:
                
                &lt;Button external ...&gt; Button Text &lt;/Button&gt;
                         ^^^^^^^^ - Try adding the href prop too
                `}]);function Vle(r){let e,t,n,i,o,l,a,s,u,c,f;return{c(){e=F("svg"),t=F("g"),n=F("g"),i=F("circle"),o=F("path"),l=F("animateTransform"),k(i,"stroke-opacity",".5"),k(i,"cx","16"),k(i,"cy","16"),k(i,"r","16"),k(l,"attributeName","transform"),k(l,"type","rotate"),k(l,"from","0 16 16"),k(l,"to","360 16 16"),k(l,"dur","1s"),k(l,"repeatCount","indefinite"),k(o,"d","M32 16c0-9.94-8.06-16-16-16"),k(n,"transform","translate(2.5 2.5)"),k(n,"stroke-width","5"),k(t,"fill","none"),k(t,"fill-rule","evenodd"),k(e,"width",a=`${r[1]}px`),k(e,"height",s=`${r[1]}px`),k(e,"viewBox","0 0 38 38"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"stroke",r[2]),k(e,"class",r[3])},m(h,d){A(h,e,d),B(e,t),B(t,n),B(n,i),B(n,o),B(o,l),c||(f=kr(u=Ht.call(null,e,r[0])),c=!0)},p(h,[d]){d&2&&a!==(a=`${h[1]}px`)&&k(e,"width",a),d&2&&s!==(s=`${h[1]}px`)&&k(e,"height",s),d&4&&k(e,"stroke",h[2]),d&8&&k(e,"class",h[3]),u&&Vr(u.update)&&d&1&&u.update.call(null,h[0])},i:I,o:I,d(h){h&&M(e),c=!1,f()}}}function Ble(r,e,t){let{use:n=[]}=e,{size:i=25}=e,{color:o="blue"}=e,{class:l=""}=e;return r.$$set=a=>{"use"in a&&t(0,n=a.use),"size"in a&&t(1,i=a.size),"color"in a&&t(2,o=a.color),"class"in a&&t(3,l=a.class)},[n,i,o,l]}var Nk=class extends H{constructor(e){super(),V(this,e,Ble,Vle,N,{use:0,size:1,color:2,class:3})}},lV=Nk;function Dle(r){let e,t,n,i,o,l,a,s,u,c,f,h,d,p,v,b,C,L,S,P;return{c(){e=F("svg"),t=F("rect"),n=F("animate"),i=F("animate"),o=F("rect"),l=F("animate"),a=F("animate"),s=F("rect"),u=F("animate"),c=F("animate"),f=F("rect"),h=F("animate"),d=F("animate"),p=F("rect"),v=F("animate"),b=F("animate"),k(n,"attributeName","height"),k(n,"begin","0.5s"),k(n,"dur","1s"),k(n,"values","120;110;100;90;80;70;60;50;40;140;120"),k(n,"calcMode","linear"),k(n,"repeatCount","indefinite"),k(i,"attributeName","y"),k(i,"begin","0.5s"),k(i,"dur","1s"),k(i,"values","10;15;20;25;30;35;40;45;50;0;10"),k(i,"calcMode","linear"),k(i,"repeatCount","indefinite"),k(t,"y","10"),k(t,"width","15"),k(t,"height","120"),k(t,"rx","6"),k(l,"attributeName","height"),k(l,"begin","0.25s"),k(l,"dur","1s"),k(l,"values","120;110;100;90;80;70;60;50;40;140;120"),k(l,"calcMode","linear"),k(l,"repeatCount","indefinite"),k(a,"attributeName","y"),k(a,"begin","0.25s"),k(a,"dur","1s"),k(a,"values","10;15;20;25;30;35;40;45;50;0;10"),k(a,"calcMode","linear"),k(a,"repeatCount","indefinite"),k(o,"x","30"),k(o,"y","10"),k(o,"width","15"),k(o,"height","120"),k(o,"rx","6"),k(u,"attributeName","height"),k(u,"begin","0s"),k(u,"dur","1s"),k(u,"values","120;110;100;90;80;70;60;50;40;140;120"),k(u,"calcMode","linear"),k(u,"repeatCount","indefinite"),k(c,"attributeName","y"),k(c,"begin","0s"),k(c,"dur","1s"),k(c,"values","10;15;20;25;30;35;40;45;50;0;10"),k(c,"calcMode","linear"),k(c,"repeatCount","indefinite"),k(s,"x","60"),k(s,"width","15"),k(s,"height","140"),k(s,"rx","6"),k(h,"attributeName","height"),k(h,"begin","0.25s"),k(h,"dur","1s"),k(h,"values","120;110;100;90;80;70;60;50;40;140;120"),k(h,"calcMode","linear"),k(h,"repeatCount","indefinite"),k(d,"attributeName","y"),k(d,"begin","0.25s"),k(d,"dur","1s"),k(d,"values","10;15;20;25;30;35;40;45;50;0;10"),k(d,"calcMode","linear"),k(d,"repeatCount","indefinite"),k(f,"x","90"),k(f,"y","10"),k(f,"width","15"),k(f,"height","120"),k(f,"rx","6"),k(v,"attributeName","height"),k(v,"begin","0.5s"),k(v,"dur","1s"),k(v,"values","120;110;100;90;80;70;60;50;40;140;120"),k(v,"calcMode","linear"),k(v,"repeatCount","indefinite"),k(b,"attributeName","y"),k(b,"begin","0.5s"),k(b,"dur","1s"),k(b,"values","10;15;20;25;30;35;40;45;50;0;10"),k(b,"calcMode","linear"),k(b,"repeatCount","indefinite"),k(p,"x","120"),k(p,"y","10"),k(p,"width","15"),k(p,"height","120"),k(p,"rx","6"),k(e,"viewBox","0 0 135 140"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"fill",r[2]),k(e,"width",C=`${r[1]}px`),k(e,"class",r[3])},m(y,z){A(y,e,z),B(e,t),B(t,n),B(t,i),B(e,o),B(o,l),B(o,a),B(e,s),B(s,u),B(s,c),B(e,f),B(f,h),B(f,d),B(e,p),B(p,v),B(p,b),S||(P=kr(L=Ht.call(null,e,r[0])),S=!0)},p(y,[z]){z&4&&k(e,"fill",y[2]),z&2&&C!==(C=`${y[1]}px`)&&k(e,"width",C),z&8&&k(e,"class",y[3]),L&&Vr(L.update)&&z&1&&L.update.call(null,y[0])},i:I,o:I,d(y){y&&M(e),S=!1,P()}}}function Zle(r,e,t){let{use:n=[]}=e,{size:i=25}=e,{color:o="blue"}=e,{class:l=""}=e;return r.$$set=a=>{"use"in a&&t(0,n=a.use),"size"in a&&t(1,i=a.size),"color"in a&&t(2,o=a.color),"class"in a&&t(3,l=a.class)},[n,i,o,l]}var Vk=class extends H{constructor(e){super(),V(this,e,Zle,Dle,N,{use:0,size:1,color:2,class:3})}},aV=Vk;function Fle(r){let e,t,n,i,o,l,a,s,u,c,f,h,d,p,v;return{c(){e=F("svg"),t=F("circle"),n=F("animate"),i=F("animate"),o=F("circle"),l=F("animate"),a=F("animate"),s=F("circle"),u=F("animate"),c=F("animate"),k(n,"attributeName","r"),k(n,"from","15"),k(n,"to","15"),k(n,"begin","0s"),k(n,"dur","0.8s"),k(n,"values","15;9;15"),k(n,"calcMode","linear"),k(n,"repeatCount","indefinite"),k(i,"attributeName","fill-opacity"),k(i,"from","1"),k(i,"to","1"),k(i,"begin","0s"),k(i,"dur","0.8s"),k(i,"values","1;.5;1"),k(i,"calcMode","linear"),k(i,"repeatCount","indefinite"),k(t,"cx","15"),k(t,"cy","15"),k(t,"r","15"),k(l,"attributeName","r"),k(l,"from","9"),k(l,"to","9"),k(l,"begin","0s"),k(l,"dur","0.8s"),k(l,"values","9;15;9"),k(l,"calcMode","linear"),k(l,"repeatCount","indefinite"),k(a,"attributeName","fill-opacity"),k(a,"from","0.5"),k(a,"to","0.5"),k(a,"begin","0s"),k(a,"dur","0.8s"),k(a,"values",".5;1;.5"),k(a,"calcMode","linear"),k(a,"repeatCount","indefinite"),k(o,"cx","60"),k(o,"cy","15"),k(o,"r","9"),k(o,"fill-opacity","0.3"),k(u,"attributeName","r"),k(u,"from","15"),k(u,"to","15"),k(u,"begin","0s"),k(u,"dur","0.8s"),k(u,"values","15;9;15"),k(u,"calcMode","linear"),k(u,"repeatCount","indefinite"),k(c,"attributeName","fill-opacity"),k(c,"from","1"),k(c,"to","1"),k(c,"begin","0s"),k(c,"dur","0.8s"),k(c,"values","1;.5;1"),k(c,"calcMode","linear"),k(c,"repeatCount","indefinite"),k(s,"cx","105"),k(s,"cy","15"),k(s,"r","15"),k(e,"width",f=`${r[1]}px`),k(e,"height",h=`${Number(r[1])/4}px`),k(e,"viewBox","0 0 120 30"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"fill",r[2]),k(e,"class",r[3])},m(b,C){A(b,e,C),B(e,t),B(t,n),B(t,i),B(e,o),B(o,l),B(o,a),B(e,s),B(s,u),B(s,c),p||(v=kr(d=Ht.call(null,e,r[0])),p=!0)},p(b,[C]){C&2&&f!==(f=`${b[1]}px`)&&k(e,"width",f),C&2&&h!==(h=`${Number(b[1])/4}px`)&&k(e,"height",h),C&4&&k(e,"fill",b[2]),C&8&&k(e,"class",b[3]),d&&Vr(d.update)&&C&1&&d.update.call(null,b[0])},i:I,o:I,d(b){b&&M(e),p=!1,v()}}}function jle(r,e,t){let{use:n=[]}=e,{size:i=25}=e,{color:o="blue"}=e,{class:l=""}=e;return r.$$set=a=>{"use"in a&&t(0,n=a.use),"size"in a&&t(1,i=a.size),"color"in a&&t(2,o=a.color),"class"in a&&t(3,l=a.class)},[n,i,o,l]}var Bk=class extends H{constructor(e){super(),V(this,e,jle,Fle,N,{use:0,size:1,color:2,class:3})}},sV=Bk;var sg={xs:18,sm:22,md:36,lg:44,xl:58},ug=(r,e=!1)=>zd.colors[e?`${r}400`:`${r}600`].value;function xle(r){let e,t,n,i=[{use:[r[5],[Ht,r[1]]]},{color:r[4]==="white"?"white":ug(r[4])},{size:sg[r[3]]||r[3]},{class:r[2]},r[8]];var o=r[6][r[7]];function l(a,s){let u={};for(let c=0;c<i.length;c+=1)u=R(u,i[c]);return s!==void 0&&s&318&&(u=R(u,D(i,[s&34&&{use:[a[5],[Ht,a[1]]]},s&16&&{color:a[4]==="white"?"white":ug(a[4])},s&8&&{size:sg[a[3]]||a[3]},s&4&&{class:a[2]},s&256&&tt(a[8])]))),{props:u}}return o&&(e=pn(o,l(r)),r[10](e)),{c(){e&&_e(e.$$.fragment),t=U()},m(a,s){e&&ge(e,a,s),A(a,t,s),n=!0},p(a,[s]){if(o!==(o=a[6][a[7]])){if(e){wt();let u=e;oe(u.$$.fragment,1,0,()=>{pe(u,1)}),yt()}o?(e=pn(o,l(a,s)),a[10](e),_e(e.$$.fragment),re(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(o){let u=s&318?D(i,[s&34&&{use:[a[5],[Ht,a[1]]]},s&16&&{color:a[4]==="white"?"white":ug(a[4])},s&8&&{size:sg[a[3]]||a[3]},s&4&&{class:a[2]},s&256&&tt(a[8])]):{};e.$set(u)}},i(a){n||(e&&re(e.$$.fragment,a),n=!0)},o(a){e&&oe(e.$$.fragment,a),n=!1},d(a){a&&M(t),r[10](null),e&&pe(e,a)}}}function qle(r,e,t){let n=["use","element","class","size","color","variant"],i=Z(e,n),{use:o=[],element:l=void 0,class:a="",size:s="md",color:u="blue",variant:c="circle"}=e,f=_n(vr()),h={bars:aV,circle:lV,dots:sV},d=c in h?c:"circle";function p(v){je[v?"unshift":"push"](()=>{l=v,t(0,l)})}return r.$$set=v=>{e=R(R({},e),x(v)),t(8,i=Z(e,n)),"use"in v&&t(1,o=v.use),"element"in v&&t(0,l=v.element),"class"in v&&t(2,a=v.class),"size"in v&&t(3,s=v.size),"color"in v&&t(4,u=v.color),"variant"in v&&t(9,c=v.variant)},[l,o,a,s,u,f,h,d,i,c,p]}var Dk=class extends H{constructor(e){super(),V(this,e,qle,xle,N,{use:1,element:0,class:2,size:3,color:4,variant:9})}},$o=Dk;function Ule(r){Ba(r,"svelte-3pkhve",`.ripple.svelte-3pkhve{display:block;position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;border-radius:inherit;color:inherit;pointer-events:none;z-index:0;contain:strict}.ripple.svelte-3pkhve .animation{color:inherit;position:absolute;top:0;left:0;border-radius:50%;opacity:0;pointer-events:none;overflow:hidden;will-change:transform, opacity}.ripple.svelte-3pkhve .animation-enter{transition:none}.ripple.svelte-3pkhve .animation-in{transition:opacity 0.1s cubic-bezier(0.4, 0, 0.2, 1);transition:transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
			opacity 0.1s cubic-bezier(0.4, 0, 0.2, 1)}.ripple.svelte-3pkhve .animation-out{transition:opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1)}`)}function Wle(r){let e;return{c(){e=Ge("div"),k(e,"class","ripple svelte-3pkhve")},m(t,n){A(t,e,n),r[4](e)},p:I,i:I,o:I,d(t){t&&M(e),r[4](null)}}}function Gle(r){return r.constructor.name==="TouchEvent"}function uV(r,e){r.style.transform=e,r.style.webkitTransform=e}function Zk(r,e){r.style.opacity=e.toString()}var Yle=(r,e)=>{let t=e.getBoundingClientRect(),n=Gle(r)?r.touches[r.touches.length-1]:r,i=n.clientX-t.left,o=n.clientY-t.top,l=0,a=.3,s=e.dataset.center;e.dataset.circle?(a=.15,l=e.clientWidth/2,l=s?l:l+Math.sqrt((i-l)**2+(o-l)**2)/4):l=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;let c=`${(e.clientWidth-l*2)/2}px`,f=`${(e.clientHeight-l*2)/2}px`,h=s?c:`${i-l}px`,d=s?f:`${o-l}px`;return{radius:l,scale:a,x:h,y:d,centerX:c,centerY:f}},hV=function(r,e){let t=["touchcancel","mouseleave","dragstart"],n=e.currentTarget||e.target;if(n&&!n.classList.contains("ripple")&&(n=n.querySelector(".ripple")),!n)return;let i=n.dataset.event;if(i&&i!==r)return;n.dataset.event=r;let o=document.createElement("span"),{radius:l,scale:a,x:s,y:u,centerX:c,centerY:f}=Yle(e,n),h=n.dataset.color,d=`${l*2}px`;o.className="animation",o.style.width=d,o.style.height=d,o.style.background=h,o.classList.add("animation-enter"),o.classList.add("animation--visible"),uV(o,`translate(${s}, ${u}) scale3d(${a},${a},${a})`),Zk(o,0),o.dataset.activated=String(performance.now()),n.appendChild(o),setTimeout(()=>{o.classList.remove("animation-enter"),o.classList.add("animation-in"),uV(o,`translate(${c}, ${f}) scale3d(1,1,1)`),Zk(o,.25)},0);let p=r==="mousedown"?"mouseup":"touchend",v=function(){document.removeEventListener(p,v),t.forEach(L=>{document.removeEventListener(L,v)});let b=performance.now()-Number(o.dataset.activated),C=Math.max(250-b,0);setTimeout(()=>{o.classList.remove("animation-in"),o.classList.add("animation-out"),Zk(o,0),setTimeout(()=>{o&&n.removeChild(o),n.children.length===0&&delete n.dataset.event},300)},C)};document.addEventListener(p,v),t.forEach(b=>{document.addEventListener(b,v,{passive:!0})})},cV=function(r){r.button===0&&hV(r.type,r)},fV=function(r){if(r.changedTouches)for(let e=0;e<r.changedTouches.length;++e)hV(r.type,r.changedTouches[e])};function Kle(r,e,t){let{center:n=!1}=e,{circle:i=!1}=e,{color:o="currentColor"}=e,l,a;t1(async()=>{await Md();try{n&&t(0,l.dataset.center="true",l),i&&t(0,l.dataset.circle="true",l),t(0,l.dataset.color=o,l),a=l.parentElement}catch(c){}if(!a){console.error("Ripple: Trigger element not found.");return}let u=window.getComputedStyle(a);(u.position.length===0||u.position==="static")&&(a.style.position="relative"),a.addEventListener("touchstart",fV,{passive:!0}),a.addEventListener("mousedown",cV,{passive:!0})}),I2(()=>{a&&(a.removeEventListener("mousedown",cV),a.removeEventListener("touchstart",fV))});function s(u){je[u?"unshift":"push"](()=>{l=u,t(0,l)})}return r.$$set=u=>{"center"in u&&t(1,n=u.center),"circle"in u&&t(2,i=u.circle),"color"in u&&t(3,o=u.color)},[l,n,i,o,s]}var Fk=class extends H{constructor(e){super(),V(this,e,Kle,Wle,N,{center:1,circle:2,color:3},Ule)}},jk=Fk;function Jle(r){Ba(r,"svelte-5xpm5q",".uppercase.svelte-5xpm5q{text-transform:uppercase}.left-section.svelte-5xpm5q{margin-right:10px;display:flex;align-items:center;justify-content:center}.right-section.svelte-5xpm5q{margin-left:10px;display:flex;align-items:center;justify-content:center}")}var Xle=r=>({}),dV=r=>({}),Qle=r=>({}),mV=r=>({}),$le=r=>({}),gV=r=>({}),eae=r=>({}),pV=r=>({});function tae(r){let e,t,n,i,o,l,a,s,u,c,f,h,d,p,v=[iae,nae],b=[];function C(Q,ee){return Q[11]&&Q[5]==="left"?0:Q[21].leftIcon?1:-1}~(t=C(r,-1))&&(n=b[t]=v[t](r));let L=r[28].default,S=gt(L,r,r[27],null),P=S||lae(r),y=r[13]&&_V(r),z=[sae,aae],G=[];function J(Q,ee){return Q[11]&&Q[5]==="right"?0:Q[21].rightIcon?1:-1}~(a=J(r,-1))&&(s=G[a]=z[a](r));let te=[{class:u=r[18](r[3],r[17].root,r[16]({css:r[1],variation:r[4]}),{[r[17].disabled]:r[9],[r[17].loading]:r[11]})},{disabled:r[9]},r[20],{tabindex:"0"}],ne={};for(let Q=0;Q<te.length;Q+=1)ne=R(ne,te[Q]);return{c(){e=Ge("button"),n&&n.c(),i=et(),P&&P.c(),o=et(),y&&y.c(),l=et(),s&&s.c(),mn(e,ne),An(e,"compact",r[10]),An(e,"uppercase",r[12]),An(e,"svelte-5xpm5q",!0)},m(Q,ee){A(Q,e,ee),~t&&b[t].m(e,null),B(e,i),P&&P.m(e,null),B(e,o),y&&y.m(e,null),B(e,l),~a&&G[a].m(e,null),e.autofocus&&e.focus(),r[30](e),h=!0,d||(p=[kr(c=Ht.call(null,e,r[2])),kr(f=r[19].call(null,e))],d=!0)},p(Q,ee){let se=t;t=C(Q,ee),t===se?~t&&b[t].p(Q,ee):(n&&(wt(),oe(b[se],1,1,()=>{b[se]=null}),yt()),~t?(n=b[t],n?n.p(Q,ee):(n=b[t]=v[t](Q),n.c()),re(n,1),n.m(e,i)):n=null),S&&S.p&&(!h||ee&134217728)&&_t(S,L,Q,Q[27],h?pt(L,Q[27],ee,null):bt(Q[27]),null),Q[13]?y?ee&8192&&re(y,1):(y=_V(Q),y.c(),re(y,1),y.m(e,l)):y&&(wt(),oe(y,1,1,()=>{y=null}),yt());let Pe=a;a=J(Q,ee),a===Pe?~a&&G[a].p(Q,ee):(s&&(wt(),oe(G[Pe],1,1,()=>{G[Pe]=null}),yt()),~a?(s=G[a],s?s.p(Q,ee):(s=G[a]=z[a](Q),s.c()),re(s,1),s.m(e,null)):s=null),mn(e,ne=D(te,[(!h||ee&461338&&u!==(u=Q[18](Q[3],Q[17].root,Q[16]({css:Q[1],variation:Q[4]}),{[Q[17].disabled]:Q[9],[Q[17].loading]:Q[11]})))&&{class:u},(!h||ee&512)&&{disabled:Q[9]},ee&1048576&&Q[20],{tabindex:"0"}])),c&&Vr(c.update)&&ee&4&&c.update.call(null,Q[2]),An(e,"compact",Q[10]),An(e,"uppercase",Q[12]),An(e,"svelte-5xpm5q",!0)},i(Q){h||(re(n),re(P,Q),re(y),re(s),h=!0)},o(Q){oe(n),oe(P,Q),oe(y),oe(s),h=!1},d(Q){Q&&M(e),~t&&b[t].d(),P&&P.d(Q),y&&y.d(),~a&&G[a].d(),r[30](null),d=!1,Y(p)}}}function rae(r){let e,t,n,i,o,l,a,s,u,c,f,h,d,p,v,b=[fae,cae],C=[];function L(ee,se){return ee[11]&&ee[5]==="left"?0:ee[21].leftIcon?1:-1}~(t=L(r,-1))&&(n=C[t]=b[t](r));let S=r[28].default,P=gt(S,r,r[27],null),y=P||dae(r),z=r[13]&&bV(r),G=[gae,mae],J=[];function te(ee,se){return ee[11]&&ee[5]==="right"?0:ee[21].rightIcon?1:-1}~(a=te(r,-1))&&(s=J[a]=G[a](r));let ne=[{href:r[7]},{class:u=r[18](r[3],r[17].root,r[16]({css:r[1],variation:r[4],disabled:r[9]}),{[r[17].disabled]:r[9],[r[17].loading]:r[11]})},{role:"button"},{rel:"noreferrer noopener"},{target:c=r[8]?"_blank":""},r[20],{tabindex:"0"}],Q={};for(let ee=0;ee<ne.length;ee+=1)Q=R(Q,ne[ee]);return{c(){e=Ge("a"),n&&n.c(),i=et(),y&&y.c(),o=et(),z&&z.c(),l=et(),s&&s.c(),mn(e,Q),An(e,"compact",r[10]),An(e,"uppercase",r[12]),An(e,"svelte-5xpm5q",!0)},m(ee,se){A(ee,e,se),~t&&C[t].m(e,null),B(e,i),y&&y.m(e,null),B(e,o),z&&z.m(e,null),B(e,l),~a&&J[a].m(e,null),r[29](e),d=!0,p||(v=[kr(f=Ht.call(null,e,r[2])),kr(h=r[19].call(null,e))],p=!0)},p(ee,se){let Pe=t;t=L(ee,se),t===Pe?~t&&C[t].p(ee,se):(n&&(wt(),oe(C[Pe],1,1,()=>{C[Pe]=null}),yt()),~t?(n=C[t],n?n.p(ee,se):(n=C[t]=b[t](ee),n.c()),re(n,1),n.m(e,i)):n=null),P&&P.p&&(!d||se&134217728)&&_t(P,S,ee,ee[27],d?pt(S,ee[27],se,null):bt(ee[27]),null),ee[13]?z?se&8192&&re(z,1):(z=bV(ee),z.c(),re(z,1),z.m(e,l)):z&&(wt(),oe(z,1,1,()=>{z=null}),yt());let Te=a;a=te(ee,se),a===Te?~a&&J[a].p(ee,se):(s&&(wt(),oe(J[Te],1,1,()=>{J[Te]=null}),yt()),~a?(s=J[a],s?s.p(ee,se):(s=J[a]=G[a](ee),s.c()),re(s,1),s.m(e,null)):s=null),mn(e,Q=D(ne,[(!d||se&128)&&{href:ee[7]},(!d||se&461338&&u!==(u=ee[18](ee[3],ee[17].root,ee[16]({css:ee[1],variation:ee[4],disabled:ee[9]}),{[ee[17].disabled]:ee[9],[ee[17].loading]:ee[11]})))&&{class:u},{role:"button"},{rel:"noreferrer noopener"},(!d||se&256&&c!==(c=ee[8]?"_blank":""))&&{target:c},se&1048576&&ee[20],{tabindex:"0"}])),f&&Vr(f.update)&&se&4&&f.update.call(null,ee[2]),An(e,"compact",ee[10]),An(e,"uppercase",ee[12]),An(e,"svelte-5xpm5q",!0)},i(ee){d||(re(n),re(y,ee),re(z),re(s),d=!0)},o(ee){oe(n),oe(y,ee),oe(z),oe(s),d=!1},d(ee){ee&&M(e),~t&&C[t].d(),y&&y.d(ee),z&&z.d(),~a&&J[a].d(),r[29](null),p=!1,Y(v)}}}function nae(r){let e,t,n=r[28].leftIcon,i=gt(n,r,r[27],mV),o=i||oae(r);return{c(){e=Ge("span"),o&&o.c(),k(e,"class","left-section svelte-5xpm5q")},m(l,a){A(l,e,a),o&&o.m(e,null),t=!0},p(l,a){i&&i.p&&(!t||a&134217728)&&_t(i,n,l,l[27],t?pt(n,l[27],a,Qle):bt(l[27]),mV)},i(l){t||(re(o,l),t=!0)},o(l){oe(o,l),t=!1},d(l){l&&M(e),o&&o.d(l)}}}function iae(r){let e,t,n;return t=new $o({props:{variant:r[6].variant,size:r[6].size,color:r[6].color}}),{c(){e=Ge("span"),_e(t.$$.fragment),k(e,"class","left-section svelte-5xpm5q")},m(i,o){A(i,e,o),ge(t,e,null),n=!0},p(i,o){let l={};o&64&&(l.variant=i[6].variant),o&64&&(l.size=i[6].size),o&64&&(l.color=i[6].color),t.$set(l)},i(i){n||(re(t.$$.fragment,i),n=!0)},o(i){oe(t.$$.fragment,i),n=!1},d(i){i&&M(e),pe(t)}}}function oae(r){let e;return{c(){e=Zt("X")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function lae(r){let e;return{c(){e=Zt("Button")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function _V(r){let e,t;return e=new jk({props:{center:!1,circle:!1}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function aae(r){let e,t,n=r[28].rightIcon,i=gt(n,r,r[27],dV),o=i||uae(r);return{c(){e=Ge("span"),o&&o.c(),k(e,"class","right-section svelte-5xpm5q")},m(l,a){A(l,e,a),o&&o.m(e,null),t=!0},p(l,a){i&&i.p&&(!t||a&134217728)&&_t(i,n,l,l[27],t?pt(n,l[27],a,Xle):bt(l[27]),dV)},i(l){t||(re(o,l),t=!0)},o(l){oe(o,l),t=!1},d(l){l&&M(e),o&&o.d(l)}}}function sae(r){let e,t,n;return t=new $o({props:{variant:r[6].variant,size:r[6].size,color:r[6].color}}),{c(){e=Ge("span"),_e(t.$$.fragment),k(e,"class","right-section svelte-5xpm5q")},m(i,o){A(i,e,o),ge(t,e,null),n=!0},p(i,o){let l={};o&64&&(l.variant=i[6].variant),o&64&&(l.size=i[6].size),o&64&&(l.color=i[6].color),t.$set(l)},i(i){n||(re(t.$$.fragment,i),n=!0)},o(i){oe(t.$$.fragment,i),n=!1},d(i){i&&M(e),pe(t)}}}function uae(r){let e;return{c(){e=Zt("X")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function cae(r){let e,t,n=r[28].leftIcon,i=gt(n,r,r[27],pV),o=i||hae(r);return{c(){e=Ge("span"),o&&o.c(),k(e,"class","left-section svelte-5xpm5q")},m(l,a){A(l,e,a),o&&o.m(e,null),t=!0},p(l,a){i&&i.p&&(!t||a&134217728)&&_t(i,n,l,l[27],t?pt(n,l[27],a,eae):bt(l[27]),pV)},i(l){t||(re(o,l),t=!0)},o(l){oe(o,l),t=!1},d(l){l&&M(e),o&&o.d(l)}}}function fae(r){let e,t,n;return t=new $o({props:{variant:r[6].variant,size:r[6].size,color:r[6].color}}),{c(){e=Ge("span"),_e(t.$$.fragment),k(e,"class","left-section svelte-5xpm5q")},m(i,o){A(i,e,o),ge(t,e,null),n=!0},p(i,o){let l={};o&64&&(l.variant=i[6].variant),o&64&&(l.size=i[6].size),o&64&&(l.color=i[6].color),t.$set(l)},i(i){n||(re(t.$$.fragment,i),n=!0)},o(i){oe(t.$$.fragment,i),n=!1},d(i){i&&M(e),pe(t)}}}function hae(r){let e;return{c(){e=Zt("X")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function dae(r){let e;return{c(){e=Zt("Button")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function bV(r){let e,t;return e=new jk({props:{center:!1,circle:!1}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function mae(r){let e,t,n=r[28].rightIcon,i=gt(n,r,r[27],gV),o=i||pae(r);return{c(){e=Ge("span"),o&&o.c(),k(e,"class","right-section svelte-5xpm5q")},m(l,a){A(l,e,a),o&&o.m(e,null),t=!0},p(l,a){i&&i.p&&(!t||a&134217728)&&_t(i,n,l,l[27],t?pt(n,l[27],a,$le):bt(l[27]),gV)},i(l){t||(re(o,l),t=!0)},o(l){oe(o,l),t=!1},d(l){l&&M(e),o&&o.d(l)}}}function gae(r){let e,t,n;return t=new $o({props:{variant:r[6].variant,size:r[6].size,color:r[6].color}}),{c(){e=Ge("span"),_e(t.$$.fragment),k(e,"class","right-section svelte-5xpm5q")},m(i,o){A(i,e,o),ge(t,e,null),n=!0},p(i,o){let l={};o&64&&(l.variant=i[6].variant),o&64&&(l.size=i[6].size),o&64&&(l.color=i[6].color),t.$set(l)},i(i){n||(re(t.$$.fragment,i),n=!0)},o(i){oe(t.$$.fragment,i),n=!1},d(i){i&&M(e),pe(t)}}}function pae(r){let e;return{c(){e=Zt("X")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function _ae(r){let e,t,n,i,o,l;e=new Pu({props:{observable:r[14],component:"Button",code:r[15]}});let a=[rae,tae],s=[];function u(c,f){return c[7]?0:1}return n=u(r,-1),i=s[n]=a[n](r),{c(){_e(e.$$.fragment),t=et(),i.c(),o=U()},m(c,f){ge(e,c,f),A(c,t,f),s[n].m(c,f),A(c,o,f),l=!0},p(c,[f]){let h={};f&16384&&(h.observable=c[14]),f&32768&&(h.code=c[15]),e.$set(h);let d=n;n=u(c,f),n===d?s[n].p(c,f):(wt(),oe(s[d],1,1,()=>{s[d]=null}),yt(),i=s[n],i?i.p(c,f):(i=s[n]=a[n](c),i.c()),re(i,1),i.m(o.parentNode,o))},i(c){l||(re(e.$$.fragment,c),re(i),l=!0)},o(c){oe(e.$$.fragment,c),oe(i),l=!1},d(c){c&&(M(t),M(o)),pe(e,c),s[n].d(c)}}}function bae(r,e,t){let n,i,o,l=["use","element","class","override","variant","color","size","radius","gradient","loaderPosition","loaderProps","href","external","disabled","compact","loading","uppercase","fullSize","ripple"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,c=J5(s),{use:f=[],element:h=void 0,class:d="",override:p={},variant:v="filled",color:b="blue",size:C="sm",radius:L="sm",gradient:S={from:"indigo",to:"cyan",deg:45},loaderPosition:P="left",loaderProps:y={size:"xs",color:"white",variant:"circle"},href:z=null,external:G=!1,disabled:J=!1,compact:te=!1,loading:ne=!1,uppercase:Q=!1,fullSize:ee=!1,ripple:se=!1}=e,Pe=_n(vr()),Te=!1,be;J&&ne&&(Te=!0,be=Hk[0]),(G&&typeof z!="string"||(z==null?void 0:z.length)<1)&&(Te=!0,be=Hk[1]);function rt(Re){je[Re?"unshift":"push"](()=>{h=Re,t(0,h)})}function Ee(Re){je[Re?"unshift":"push"](()=>{h=Re,t(0,h)})}return r.$$set=Re=>{e=R(R({},e),x(Re)),t(20,a=Z(e,l)),"use"in Re&&t(2,f=Re.use),"element"in Re&&t(0,h=Re.element),"class"in Re&&t(3,d=Re.class),"override"in Re&&t(1,p=Re.override),"variant"in Re&&t(4,v=Re.variant),"color"in Re&&t(22,b=Re.color),"size"in Re&&t(23,C=Re.size),"radius"in Re&&t(24,L=Re.radius),"gradient"in Re&&t(25,S=Re.gradient),"loaderPosition"in Re&&t(5,P=Re.loaderPosition),"loaderProps"in Re&&t(6,y=Re.loaderProps),"href"in Re&&t(7,z=Re.href),"external"in Re&&t(8,G=Re.external),"disabled"in Re&&t(9,J=Re.disabled),"compact"in Re&&t(10,te=Re.compact),"loading"in Re&&t(11,ne=Re.loading),"uppercase"in Re&&t(12,Q=Re.uppercase),"fullSize"in Re&&t(26,ee=Re.fullSize),"ripple"in Re&&t(13,se=Re.ripple),"$$scope"in Re&&t(27,u=Re.$$scope)},r.$$.update=()=>{r.$$.dirty&16384&&Te&&t(1,p={display:"none"}),r.$$.dirty&130024464&&t(18,{cx:n,classes:i,getStyles:o}=oV({color:b,compact:te,fullSize:ee,gradient:S,radius:L,size:C,variant:v},{name:"Button"}),n,(t(17,i),t(22,b),t(10,te),t(26,ee),t(25,S),t(24,L),t(23,C),t(4,v)),(t(16,o),t(22,b),t(10,te),t(26,ee),t(25,S),t(24,L),t(23,C),t(4,v)))},[h,p,f,d,v,P,y,z,G,J,te,ne,Q,se,Te,be,o,i,n,Pe,a,c,b,C,L,S,ee,u,s,rt,Ee]}var xk=class extends H{constructor(e){super(),V(this,e,bae,_ae,N,{use:2,element:0,class:3,override:1,variant:4,color:22,size:23,radius:24,gradient:25,loaderPosition:5,loaderProps:6,href:7,external:8,disabled:9,compact:10,loading:11,uppercase:12,fullSize:26,ripple:13},Jle)}},cg=xk;var fg={xs:18,sm:22,md:28,lg:34,xl:44};function vae(r){let{themeColor:e}=yo;return{...n1(r),hover:{[`${cr.selector} &`]:{color:e(r,2),"&:hover":{backgroundColor:e("dark",8)}},border:"1px solid transparent",backgroundColor:"transparent",color:e(r,7),"&:hover":{backgroundColor:e(r)}},transparent:{[`${cr.selector} &`]:{color:e(r,8),"&:hover":{backgroundColor:null}},border:"1px solid transparent",backgroundColor:"transparent",color:e(r,7),"&:hover":{backgroundColor:null}}}}var vV=er((r,{color:e,radius:t,size:n})=>({root:{focusRing:"auto",position:"relative",appearance:"none",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",boxSizing:"border-box",height:typeof n=="string"?fg[n]:`${n}px`,minHeight:typeof n=="string"?fg[n]:`${n}px`,width:typeof n=="string"?fg[n]:`${n}px`,minWidth:typeof n=="string"?fg[n]:`${n}px`,borderRadius:`$${t}`,padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",textDecoration:"none","&:not(:disabled):active":{transform:"translateY(1px)"},"&:disabled":{pointerEvents:"none",borderColor:"transparent",background:r.fn.themeColor("gray",2),backgroundColor:r.fn.themeColor("gray",2),color:r.fn.themeColor("gray",5),cursor:"not-allowed",darkMode:{borderColor:"transparent",backgroundColor:r.fn.themeColor("dark",4),color:r.fn.themeColor("dark",6)}}},loading:{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:"rgba(255, 255, 255, .5)",borderRadius:`$${t}`,cursor:"not-allowed"}},variants:{variation:vae(e)}}));var CV=Object.freeze([{error:!0,message:"If using the 'href' prop, set 'root' prop to an anchor ('a') tag",solution:`
                If your component looks like this:

                &lt;ActionIcon href='https://example.com'&gt;
                          ^^^ - Try adding prop root='a'
                       &lt;Icon /&gt;
                &lt;/ActionIcon&gt;
                `}]);function Cae(r){let e,t=r[21].default,n=gt(t,r,r[23],null),i=n||yae(r);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){n&&n.p&&(!e||l&8388608)&&_t(n,t,o,o[23],e?pt(t,o[23],l,null):bt(o[23]),null)},i(o){e||(re(i,o),e=!0)},o(o){oe(i,o),e=!1},d(o){i&&i.d(o)}}}function wae(r){let e,t;return e=new $o({props:{size:r[6].size,color:r[6].color,variant:r[6].variant}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,i){let o={};i&64&&(o.size=n[6].size),i&64&&(o.color=n[6].color),i&64&&(o.variant=n[6].variant),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function yae(r){let e;return{c(){e=Zt("+")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function kae(r){let e,t,n,i,o=[wae,Cae],l=[];function a(s,u){return s[7]?0:1}return e=a(r,-1),t=l[e]=o[e](r),{c(){t.c(),n=U()},m(s,u){l[e].m(s,u),A(s,n,u),i=!0},p(s,u){let c=e;e=a(s,u),e===c?l[e].p(s,u):(wt(),oe(l[c],1,1,()=>{l[c]=null}),yt(),t=l[e],t?t.p(s,u):(t=l[e]=o[e](s),t.c()),re(t,1),t.m(n.parentNode,n))},i(s){i||(re(t),i=!0)},o(s){oe(t),i=!1},d(s){s&&M(n),l[e].d(s)}}}function Lae(r){let e,t,n,i,o;e=new Pu({props:{observable:r[11],component:"ActionIcon",code:r[12]}});let l=[{use:[r[16],[Ht,r[2]]]},{tabindex:0},{disabled:r[8]||r[7]},{class:r[15](r[3],r[14].root,{[r[14].loading]:r[7]},r[13]({css:r[1],variation:r[5]}))},{target:r[10]?"_blank":null},{rel:r[10]?"noreferrer noopener":null},{root:r[4]},{href:r[9]},r[17]];function a(u){r[22](u)}let s={$$slots:{default:[kae]},$$scope:{ctx:r}};for(let u=0;u<l.length;u+=1)s=R(s,l[u]);return r[0]!==void 0&&(s.element=r[0]),n=new fr({props:s}),je.push(()=>kt(n,"element",a)),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment)},m(u,c){ge(e,u,c),A(u,t,c),ge(n,u,c),o=!0},p(u,[c]){let f={};c&2048&&(f.observable=u[11]),c&4096&&(f.code=u[12]),e.$set(f);let h=c&255934?D(l,[c&65540&&{use:[u[16],[Ht,u[2]]]},l[1],c&384&&{disabled:u[8]||u[7]},c&57514&&{class:u[15](u[3],u[14].root,{[u[14].loading]:u[7]},u[13]({css:u[1],variation:u[5]}))},c&1024&&{target:u[10]?"_blank":null},c&1024&&{rel:u[10]?"noreferrer noopener":null},c&16&&{root:u[4]},c&512&&{href:u[9]},c&131072&&tt(u[17])]):{};c&8388800&&(h.$$scope={dirty:c,ctx:u}),!i&&c&1&&(i=!0,h.element=u[0],St(()=>i=!1)),n.$set(h)},i(u){o||(re(e.$$.fragment,u),re(n.$$.fragment,u),o=!0)},o(u){oe(e.$$.fragment,u),oe(n.$$.fragment,u),o=!1},d(u){u&&M(t),pe(e,u),pe(n,u)}}}function Eae(r,e,t){let n,i,o,l=["use","element","class","override","root","color","variant","size","radius","loaderProps","loading","disabled","href","external"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},root:p="button",color:v="gray",variant:b="hover",size:C="md",radius:L="sm",loaderProps:S={size:"xs",color:"gray",variant:"circle"},loading:P=!1,disabled:y=!1,href:z="",external:G=!1}=e,J=_n(vr()),te=!1,ne;p!=="a"&&e.href&&(te=!0,ne=CV[0]);function Q(ee){f=ee,t(0,f)}return r.$$set=ee=>{t(24,e=R(R({},e),x(ee))),t(17,a=Z(e,l)),"use"in ee&&t(2,c=ee.use),"element"in ee&&t(0,f=ee.element),"class"in ee&&t(3,h=ee.class),"override"in ee&&t(1,d=ee.override),"root"in ee&&t(4,p=ee.root),"color"in ee&&t(18,v=ee.color),"variant"in ee&&t(5,b=ee.variant),"size"in ee&&t(19,C=ee.size),"radius"in ee&&t(20,L=ee.radius),"loaderProps"in ee&&t(6,S=ee.loaderProps),"loading"in ee&&t(7,P=ee.loading),"disabled"in ee&&t(8,y=ee.disabled),"href"in ee&&t(9,z=ee.href),"external"in ee&&t(10,G=ee.external),"$$scope"in ee&&t(23,u=ee.$$scope)},r.$$.update=()=>{r.$$.dirty&2048&&te&&t(1,d={display:"none"}),r.$$.dirty&1835008&&t(15,{cx:n,classes:i,getStyles:o}=vV({color:v,radius:L,size:C},{name:"ActionIcon"}),n,(t(14,i),t(18,v),t(20,L),t(19,C)),(t(13,o),t(18,v),t(20,L),t(19,C)))},e=x(e),[f,d,c,h,p,b,S,P,y,z,G,te,ne,o,i,n,J,a,v,C,L,s,Q,u]}var qk=class extends H{constructor(e){super(),V(this,e,Eae,Lae,N,{use:2,element:0,class:3,override:1,root:4,color:18,variant:5,size:19,radius:20,loaderProps:6,loading:7,disabled:8,href:9,external:10})}},Vd=qk;function Sae(r){let e,t,n=[{width:r[0]},{height:r[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},r[2]],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return{c(){e=F("svg"),t=F("path"),k(t,"d","M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z"),k(t,"fill","currentColor"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),K(e,i)},m(o,l){A(o,e,l),B(e,t)},p(o,[l]){K(e,i=D(n,[l&1&&{width:o[0]},l&2&&{height:o[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},l&4&&o[2]]))},i:I,o:I,d(o){o&&M(e)}}}function Mae(r,e,t){let n=["width","height"],i=Z(e,n),{width:o=16}=e,{height:l=16}=e;return r.$$set=a=>{e=R(R({},e),x(a)),t(2,i=Z(e,n)),"width"in a&&t(0,o=a.width),"height"in a&&t(1,l=a.height)},[o,l,i]}var Uk=class extends H{constructor(e){super(),V(this,e,Mae,Sae,N,{width:0,height:1})}},wV=Uk;function Aae(r){let e,t;return e=new wV({props:{width:r[16][r[4]],height:r[16][r[4]]}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,i){let o={};i&16&&(o.width=n[16][n[4]]),i&16&&(o.height=n[16][n[4]]),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Pae(r){let e,t,n,i=[{class:r[2]},{use:[r[15],[Ht,r[1]]]},{override:r[3]},{root:r[5]},{color:r[6]},{variant:r[7]},{size:r[8]},{radius:r[9]},{loaderProps:r[10]},{loading:r[11]},{disabled:r[12]},{href:r[13]},{external:r[14]},r[17]];function o(a){r[18](a)}let l={$$slots:{default:[Aae]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new Vd({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&196590?D(i,[s&4&&{class:a[2]},s&32770&&{use:[a[15],[Ht,a[1]]]},s&8&&{override:a[3]},s&32&&{root:a[5]},s&64&&{color:a[6]},s&128&&{variant:a[7]},s&256&&{size:a[8]},s&512&&{radius:a[9]},s&1024&&{loaderProps:a[10]},s&2048&&{loading:a[11]},s&4096&&{disabled:a[12]},s&8192&&{href:a[13]},s&16384&&{external:a[14]},s&131072&&tt(a[17])]):{};s&524304&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function Tae(r,e,t){let n=["use","element","class","override","iconSize","root","color","variant","size","radius","loaderProps","loading","disabled","href","external"],i=Z(e,n),{use:o=[],element:l=void 0,class:a="",override:s={},iconSize:u="md",root:c="button",color:f="gray",variant:h="hover",size:d="md",radius:p="sm",loaderProps:v={size:"xs",color:"gray",variant:"circle"},loading:b=!1,disabled:C=!1,href:L="",external:S=!1}=e,P=_n(vr()),y={xs:12,sm:14,md:16,lg:20,xl:24};function z(G){l=G,t(0,l)}return r.$$set=G=>{e=R(R({},e),x(G)),t(17,i=Z(e,n)),"use"in G&&t(1,o=G.use),"element"in G&&t(0,l=G.element),"class"in G&&t(2,a=G.class),"override"in G&&t(3,s=G.override),"iconSize"in G&&t(4,u=G.iconSize),"root"in G&&t(5,c=G.root),"color"in G&&t(6,f=G.color),"variant"in G&&t(7,h=G.variant),"size"in G&&t(8,d=G.size),"radius"in G&&t(9,p=G.radius),"loaderProps"in G&&t(10,v=G.loaderProps),"loading"in G&&t(11,b=G.loading),"disabled"in G&&t(12,C=G.disabled),"href"in G&&t(13,L=G.href),"external"in G&&t(14,S=G.external)},[l,o,a,s,u,c,f,h,d,p,v,b,C,L,S,P,y,i,z]}var Wk=class extends H{constructor(e){super(),V(this,e,Tae,Pae,N,{use:1,element:0,class:2,override:3,iconSize:4,root:5,color:6,variant:7,size:8,radius:9,loaderProps:10,loading:11,disabled:12,href:13,external:14})}},Bd=Wk;var yV=er((r,{iconSize:e})=>({root:{focusRing:"auto",position:"relative",appearance:"none",WebkitAppearance:"none",WebkitTapHighlightColor:"transparent",boxSizing:"border-box",height:`${r.fn.size({size:e,sizes:r.space})}px`,minHeight:`${r.fn.size({size:e,sizes:r.space})}px`,width:`${r.fn.size({size:e,sizes:r.space})}px`,minWidth:`${r.fn.size({size:e,sizes:r.space})}px`,padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",textDecoration:"none"},icon:{height:`${r.fn.size({size:e,sizes:r.space})}px`,minHeight:`${r.fn.size({size:e,sizes:r.space})}px`,position:"static",margin:0,ml:0,mr:0,mt:0,mb:0}}));function Oae(r){let e,t=(r[2]instanceof HTMLElement||r[2]instanceof SVGElement)&&kV(r);return{c(){t&&t.c(),e=U()},m(n,i){t&&t.m(n,i),A(n,e,i)},p(n,i){n[2]instanceof HTMLElement||n[2]instanceof SVGElement?t?t.p(n,i):(t=kV(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:I,o:I,d(n){n&&M(e),t&&t.d(n)}}}function Rae(r){let e,t,n,i=[{class:r[6](r[0],r[4].root,r[5]({css:r[1]}))},r[3]];var o=r[2];function l(a,s){let u={};for(let c=0;c<i.length;c+=1)u=R(u,i[c]);return s!==void 0&&s&123&&(u=R(u,D(i,[s&115&&{class:a[6](a[0],a[4].root,a[5]({css:a[1]}))},s&8&&tt(a[3])]))),{props:u}}return o&&(e=pn(o,l(r))),{c(){e&&_e(e.$$.fragment),t=U()},m(a,s){e&&ge(e,a,s),A(a,t,s),n=!0},p(a,s){if(s&4&&o!==(o=a[2])){if(e){wt();let u=e;oe(u.$$.fragment,1,0,()=>{pe(u,1)}),yt()}o?(e=pn(o,l(a,s)),_e(e.$$.fragment),re(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(o){let u=s&123?D(i,[s&115&&{class:a[6](a[0],a[4].root,a[5]({css:a[1]}))},s&8&&tt(a[3])]):{};e.$set(u)}},i(a){n||(e&&re(e.$$.fragment,a),n=!0)},o(a){e&&oe(e.$$.fragment,a),n=!1},d(a){a&&M(t),e&&pe(e,a)}}}function kV(r){let e,t=r[2].outerHTML+"",n;return{c(){e=Ge("span"),k(e,"class",n=r[6](r[0],r[4].root,r[5]({css:r[1]})))},m(i,o){A(i,e,o),e.innerHTML=t},p(i,o){o&4&&t!==(t=i[2].outerHTML+"")&&(e.innerHTML=t),o&115&&n!==(n=i[6](i[0],i[4].root,i[5]({css:i[1]})))&&k(e,"class",n)},d(i){i&&M(e)}}}function Iae(r){let e,t,n,i,o=[Rae,Oae],l=[];function a(s,u){return typeof s[2]=="function"?0:s[7]?-1:1}return~(e=a(r,-1))&&(t=l[e]=o[e](r)),{c(){t&&t.c(),n=U()},m(s,u){~e&&l[e].m(s,u),A(s,n,u),i=!0},p(s,[u]){let c=e;e=a(s,u),e===c?~e&&l[e].p(s,u):(t&&(wt(),oe(l[c],1,1,()=>{l[c]=null}),yt()),~e?(t=l[e],t?t.p(s,u):(t=l[e]=o[e](s),t.c()),re(t,1),t.m(n.parentNode,n)):t=null)},i(s){i||(re(t),i=!0)},o(s){oe(t),i=!1},d(s){s&&M(n),~e&&l[e].d(s)}}}function zae(r,e,t){let n,i,o,{className:l="",override:a={},icon:s=void 0,iconSize:u=16,iconProps:c={}}=e,f=typeof HTMLElement=="undefined"&&typeof SVGElement=="undefined";return r.$$set=h=>{"className"in h&&t(0,l=h.className),"override"in h&&t(1,a=h.override),"icon"in h&&t(2,s=h.icon),"iconSize"in h&&t(8,u=h.iconSize),"iconProps"in h&&t(3,c=h.iconProps)},r.$$.update=()=>{r.$$.dirty&256&&t(6,{cx:n,getStyles:i,classes:o}=yV({iconSize:u},{name:"IconRenderer"}),n,(t(5,i),t(8,u)),(t(4,o),t(8,u))),r.$$.dirty&20&&!f&&(s instanceof HTMLElement||s instanceof SVGElement)&&s.classList.add(...o.icon.split(" "))},[l,a,s,c,o,i,n,f,u]}var Gk=class extends H{constructor(e){super(),V(this,e,zae,Iae,N,{className:0,override:1,icon:2,iconSize:8,iconProps:3})}},D2=Gk;function LV(r,e,t,n,i=!1){if(e==="dimmed")return i?r.fn.themeColor("dark",2):r.fn.themeColor("gray",6);if(t==="gradient"||n)return r.fn.themeColor(e,6);if(t==="link")return i?r.fn.themeColor("blue",4):r.fn.themeColor("blue",7);if(t==="text")return i?r.fn.themeColor(e,5):r.fn.themeColor(e,7)}var EV=er((r,{align:e,color:t,inherit:n,inline:i,lineClamp:o,size:l,tracking:a,transform:s,underline:u,weight:c,gradient:f,variant:h})=>{var d;return{root:{focusRing:"auto",[`${r.dark} &`]:{color:t==="dark"?"$dark50":LV(r,t,h,f,!0)},fontFamily:n?"inherit":"$standard",fontSize:n?"inherit":typeof l=="string"?`$${l}`:`${l}px`,fontWeight:n?"inherit":`$${c}`,letterSpacing:(d=r.letterSpacings[a])==null?void 0:d.value,lineHeight:n?"inherit":i?1:typeof l=="string"?`$${l}`:`${l}px`,textTransform:s,textDecoration:u?"underline":"none",textAlign:e,cursor:h==="link"?"pointer":"inherit",color:t==="green"?"Black":LV(r,t,h,f),backgroundImage:h==="gradient"?`linear-gradient(${f==null?void 0:f.deg}deg, $${f==null?void 0:f.from}600 0%, $${f==null?void 0:f.to}600 100%)`:null,WebkitBackgroundClip:h==="gradient"?"text":null,WebkitTextFillColor:h==="gradient"?"transparent":null,...o!==void 0?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:o,WebkitBoxOrient:"vertical"}:{},"&:hover":h==="link"&&u===!0?{textDecoration:"underline"}:void 0}}});var SV=Object.freeze([{error:!0,message:"If using the 'gradient' prop, set 'variant' prop to 'gradient' to apply the gradient",solution:`
                If your component looks like this:

                &lt;Text gradient={{from: 'blue', to: 'red', deg: 45}}&gt;Text string &lt;/Text&gt;
                                                                    ^^^ - Try adding prop variant='gradient'
                `},{error:!0,message:"If using the 'link' variant, an href needs to be set and the root must be an anchor",solution:`
                If your component looks like this:

                &lt;Text variant='link'&gt;Text string &lt;/Text&gt;
                                    ^^^ - Try adding props href && root={'a'}'
                `}]);function Hae(r){let e,t=r[25].default,n=gt(t,r,r[27],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&134217728)&&_t(n,t,i,i[27],e?pt(t,i[27],o,null):bt(i[27]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function Nae(r){var u;let e,t,n,i,o;e=new Pu({props:{observable:r[6],component:"Text",code:r[7]}});let l=[{root:r[4]},{use:[r[11],[Ht,r[1]]]},{class:r[10](r[2],r[9].root,r[8]({css:r[3]}))},{href:(u=r[5])!=null?u:void 0},r[12]];function a(c){r[26](c)}let s={$$slots:{default:[Hae]},$$scope:{ctx:r}};for(let c=0;c<l.length;c+=1)s=R(s,l[c]);return r[0]!==void 0&&(s.element=r[0]),n=new fr({props:s}),je.push(()=>kt(n,"element",a)),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment)},m(c,f){ge(e,c,f),A(c,t,f),ge(n,c,f),o=!0},p(c,[f]){var p;let h={};f&64&&(h.observable=c[6]),f&128&&(h.code=c[7]),e.$set(h);let d=f&7998?D(l,[f&16&&{root:c[4]},f&2050&&{use:[c[11],[Ht,c[1]]]},f&1804&&{class:c[10](c[2],c[9].root,c[8]({css:c[3]}))},f&32&&{href:(p=c[5])!=null?p:void 0},f&4096&&tt(c[12])]):{};f&134217728&&(d.$$scope={dirty:f,ctx:c}),!i&&f&1&&(i=!0,d.element=c[0],St(()=>i=!1)),n.$set(d)},i(c){o||(re(e.$$.fragment,c),re(n.$$.fragment,c),o=!0)},o(c){oe(e.$$.fragment,c),oe(n.$$.fragment,c),o=!1},d(c){c&&M(t),pe(e,c),pe(n,c)}}}function Vae(r,e,t){let n,i,o,l=["use","element","class","override","align","color","root","transform","variant","size","weight","gradient","inline","lineClamp","underline","inherit","href","tracking"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},align:p="left",color:v="dark",root:b=void 0,transform:C="none",variant:L="text",size:S="md",weight:P="normal",gradient:y={from:"indigo",to:"cyan",deg:45},inline:z=!0,lineClamp:G=void 0,underline:J=!1,inherit:te=!1,href:ne="",tracking:Q="normal"}=e,ee=_n(vr()),se=!1,Pe;y.from==="indigo"&&y.to==="cyan0"&&y.deg===45&&L!=="gradient"&&(se=!0,Pe=SV[0]);function Te(be){f=be,t(0,f)}return r.$$set=be=>{e=R(R({},e),x(be)),t(12,a=Z(e,l)),"use"in be&&t(1,c=be.use),"element"in be&&t(0,f=be.element),"class"in be&&t(2,h=be.class),"override"in be&&t(3,d=be.override),"align"in be&&t(13,p=be.align),"color"in be&&t(14,v=be.color),"root"in be&&t(4,b=be.root),"transform"in be&&t(15,C=be.transform),"variant"in be&&t(16,L=be.variant),"size"in be&&t(17,S=be.size),"weight"in be&&t(18,P=be.weight),"gradient"in be&&t(19,y=be.gradient),"inline"in be&&t(20,z=be.inline),"lineClamp"in be&&t(21,G=be.lineClamp),"underline"in be&&t(22,J=be.underline),"inherit"in be&&t(23,te=be.inherit),"href"in be&&t(5,ne=be.href),"tracking"in be&&t(24,Q=be.tracking),"$$scope"in be&&t(27,u=be.$$scope)},r.$$.update=()=>{r.$$.dirty&33546240&&t(10,{cx:n,classes:i,getStyles:o}=EV({lineClamp:G,underline:J,inline:z,inherit:te,gradient:y,variant:L,align:p,color:v,transform:C,size:S,weight:P,tracking:Q},{name:"Text"}),n,(t(9,i),t(21,G),t(22,J),t(20,z),t(23,te),t(19,y),t(16,L),t(13,p),t(14,v),t(15,C),t(17,S),t(18,P),t(24,Q)),(t(8,o),t(21,G),t(22,J),t(20,z),t(23,te),t(19,y),t(16,L),t(13,p),t(14,v),t(15,C),t(17,S),t(18,P),t(24,Q)))},[f,c,h,d,b,ne,se,Pe,o,i,n,ee,a,p,v,C,L,S,P,y,z,G,J,te,Q,s,Te,u]}var Yk=class extends H{constructor(e){super(),V(this,e,Vae,Nae,N,{use:1,element:0,class:2,override:3,align:13,color:14,root:4,transform:15,variant:16,size:17,weight:18,gradient:19,inline:20,lineClamp:21,underline:22,inherit:23,href:5,tracking:24})}},Pn=Yk;var MV=er((r,{radius:e,shadow:t,withBorder:n,padding:i})=>({root:{darkMode:{backgroundColor:r.fn.themeColor("dark",7),color:r.fn.themeColor("dark")},padding:r.fn.size({size:i,sizes:r.space}),outline:0,display:"block",textDecoration:"none",color:r.colors.black.value,backgroundColor:r.colors.white.value,boxSizing:"border-box",borderRadius:`$${e}`,WebkitTapHighlightColor:"transparent",boxShadow:r.shadows[t].value||t||"none",border:void 0},withBorder:{darkMode:{border:`1px solid ${r.fn.themeColor("dark",4)}`},border:`1px solid ${r.fn.themeColor("gray",3)}`}}));function Bae(r){let e,t=r[12].default,n=gt(t,r,r[14],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&16384)&&_t(n,t,i,i[14],e?pt(t,i[14],o,null):bt(i[14]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function Dae(r){let e,t,n,i=[{class:r[7](r[6].root,r[2],r[4]&&r[6].withBorder,r[5]({css:r[3]}))},{use:r[1]},r[8]];function o(a){r[13](a)}let l={$$slots:{default:[Bae]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&510?D(i,[s&252&&{class:a[7](a[6].root,a[2],a[4]&&a[6].withBorder,a[5]({css:a[3]}))},s&2&&{use:a[1]},s&256&&tt(a[8])]):{};s&16384&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function Zae(r,e,t){let n,i,o,l=["use","element","class","override","shadow","radius","withBorder","padding"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},shadow:p="xs",radius:v="sm",withBorder:b=!1,padding:C="md"}=e;function L(S){f=S,t(0,f)}return r.$$set=S=>{e=R(R({},e),x(S)),t(8,a=Z(e,l)),"use"in S&&t(1,c=S.use),"element"in S&&t(0,f=S.element),"class"in S&&t(2,h=S.class),"override"in S&&t(3,d=S.override),"shadow"in S&&t(9,p=S.shadow),"radius"in S&&t(10,v=S.radius),"withBorder"in S&&t(4,b=S.withBorder),"padding"in S&&t(11,C=S.padding),"$$scope"in S&&t(14,u=S.$$scope)},r.$$.update=()=>{r.$$.dirty&3600&&t(7,{cx:n,classes:i,getStyles:o}=MV({radius:v,shadow:p,withBorder:b,padding:C},{name:"Paper"}),n,(t(6,i),t(10,v),t(9,p),t(4,b),t(11,C)),(t(5,o),t(10,v),t(9,p),t(4,b),t(11,C)))},[f,c,h,d,b,o,i,n,a,p,v,C,s,L,u]}var Kk=class extends H{constructor(e){super(),V(this,e,Zae,Dae,N,{use:1,element:0,class:2,override:3,shadow:9,radius:10,withBorder:4,padding:11})}},Jk=Kk;var AV=er((r,{inline:e})=>({root:{display:e?"inline-flex":"flex",alignItems:"center",justifyContent:"center"}}));function Fae(r){let e,t=r[9].default,n=gt(t,r,r[11],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&2048)&&_t(n,t,i,i[11],e?pt(t,i[11],o,null):bt(i[11]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function jae(r){let e,t,n,i=[{use:r[1]},{class:r[6](r[2],r[5].root,r[4]({css:r[3]}))},r[7]];function o(a){r[10](a)}let l={$$slots:{default:[Fae]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&254?D(i,[s&2&&{use:a[1]},s&124&&{class:a[6](a[2],a[5].root,a[4]({css:a[3]}))},s&128&&tt(a[7])]):{};s&2048&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function xae(r,e,t){let n,i,o,l=["use","element","class","override","inline"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},inline:p=!1}=e;function v(b){f=b,t(0,f)}return r.$$set=b=>{e=R(R({},e),x(b)),t(7,a=Z(e,l)),"use"in b&&t(1,c=b.use),"element"in b&&t(0,f=b.element),"class"in b&&t(2,h=b.class),"override"in b&&t(3,d=b.override),"inline"in b&&t(8,p=b.inline),"$$scope"in b&&t(11,u=b.$$scope)},r.$$.update=()=>{r.$$.dirty&256&&t(6,{cx:n,classes:i,getStyles:o}=AV({inline:p},{name:"Center"}),n,(t(5,i),t(8,p)),(t(4,o),t(8,p)))},[f,c,h,d,o,i,n,a,p,s,v,u]}var Xk=class extends H{constructor(e){super(),V(this,e,xae,jae,N,{use:1,element:0,class:2,override:3,inline:8})}},Qk=Xk;var{rgba:qae}=yo,$k={xs:16,sm:20,md:26,lg:32,xl:40};function Uae(r,e,t){let n={from:"blue",to:"cyan",deg:45};return e==="gradient"?PV(r,t):PV(r,n)}var PV=(r,e)=>{let t={lightBg:cr.colors[`${r}800`].value,lightHv:cr.colors[`${r}700`].value,outlineHv:cr.colors[`${r}400`].value,subtleHv:cr.colors[`${r}800`].value};return{filled:{[`${cr.selector} &`]:{backgroundColor:`$${r}800`},border:"transparent",backgroundColor:`$${r}600`,color:"White"},light:{[`${cr.selector} &`]:{backgroundColor:qae(t.lightBg,.35),color:r==="dark"?"$dark50":`$${r}200`},border:"transparent",backgroundColor:`$${r}50`,color:r==="dark"?"$dark900":`$${r}600`},outline:{[`${cr.selector} &`]:{border:`1px solid $${r}400`,color:`$${r}400`},border:`1px solid $${r}700`,backgroundColor:"transparent",color:`$${r}700`},subtle:{[`${cr.selector} &`]:{color:r==="dark"?"$dark50":`$${r}200`},border:"transparent",backgroundColor:"transparent",color:r==="dark"?"$dark900":`$${r}600`},default:{[`${cr.selector} &`]:{border:"1px solid $dark500",backgroundColor:"$dark500",color:"White"},border:"1px solid $gray400",backgroundColor:"White",color:"Black"},white:{border:"transparent",backgroundColor:"White",color:`$${r}700`},gradient:{border:"transparent",background:`linear-gradient(${e.deg}deg, $${e.from}600 0%, $${e.to}600 100%)`,color:"White"}}},TV=er((r,{color:e,gradient:t,iconSize:n,radius:i,variant:o})=>({root:{display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:n,height:n,minWidth:n,minHeight:n,borderRadius:`$${i}`,variants:{variation:Uae(e,o,t)}}}));function Wae(r){let e,t=r[14].default,n=gt(t,r,r[16],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&65536)&&_t(n,t,i,i[16],e?pt(t,i[16],o,null):bt(i[16]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function Gae(r){let e,t,n,i=[{use:r[1]},{class:r[7](r[2],r[6].root,r[5]({css:r[3],variation:r[4]}))},r[8]];function o(a){r[15](a)}let l={$$slots:{default:[Wae]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&510?D(i,[s&2&&{use:a[1]},s&252&&{class:a[7](a[2],a[6].root,a[5]({css:a[3],variation:a[4]}))},s&256&&tt(a[8])]):{};s&65536&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function Yae(r,e,t){let n,i,o,l,a=["use","element","class","override","size","radius","color","variant","gradient"],s=Z(e,a),{$$slots:u={},$$scope:c}=e,{use:f=[],element:h=void 0,class:d="",override:p={},size:v="md",radius:b="sm",color:C="blue",variant:L="filled",gradient:S={from:"blue",to:"cyan",deg:45}}=e;function P(y){h=y,t(0,h)}return r.$$set=y=>{e=R(R({},e),x(y)),t(8,s=Z(e,a)),"use"in y&&t(1,f=y.use),"element"in y&&t(0,h=y.element),"class"in y&&t(2,d=y.class),"override"in y&&t(3,p=y.override),"size"in y&&t(9,v=y.size),"radius"in y&&t(10,b=y.radius),"color"in y&&t(11,C=y.color),"variant"in y&&t(4,L=y.variant),"gradient"in y&&t(12,S=y.gradient),"$$scope"in y&&t(16,c=y.$$scope)},r.$$.update=()=>{var y;r.$$.dirty&512&&t(13,n=typeof v=="number"?`${v}px`:(y=$k[v])!=null?y:$k.md),r.$$.dirty&15376&&t(7,{cx:i,classes:o,getStyles:l}=TV({color:C,gradient:S,iconSize:n,radius:b,variant:L},{name:"ThemeIcon"}),i,(t(6,o),t(11,C),t(12,S),t(13,n),t(10,b),t(4,L),t(9,v)),(t(5,l),t(11,C),t(12,S),t(13,n),t(10,b),t(4,L),t(9,v)))},[h,f,d,p,L,l,o,i,s,v,b,C,S,n,u,P,c]}var eL=class extends H{constructor(e){super(),V(this,e,Yae,Gae,N,{use:1,element:0,class:2,override:3,size:9,radius:10,color:11,variant:4,gradient:12})}},Dd=eL;var hg=er((r,{size:e})=>{var t;return{root:{lineHeight:r.lineHeights.md.value},label:{[`${r.dark} &`]:{color:r.fn.themeColor("dark",0)},display:"inline-block",marginBottom:4,fontFamily:(t=r.fonts.standard.value)!=null?t:"sans-serif",fontSize:r.fontSizes[e].value,fontWeight:500,color:r.fn.themeColor("gray",9),wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},error:{[`${r.dark} &`]:{color:r.fn.themeColor("red",6)},marginTop:5,wordBreak:"break-word",color:r.fn.themeColor("red",7)},description:{[`${r.dark} &`]:{color:`${r.fn.themeColor("dark",2)} !important`},marginTop:-3,marginBottom:7,wordBreak:"break-word",color:`${r.fn.themeColor("gray",6)} !important`,fontSize:r.fontSizes[e].value,lineHeight:1.2},required:{[`${r.dark} &`]:{color:r.fn.themeColor("red",5)},color:r.fn.themeColor("red",7)}}});function OV(r){let e,t=" *",n,i;return{c(){e=Ge("span"),n=Zt(t),k(e,"class",i=r[5].required),k(e,"aria-hidden","")},m(o,l){A(o,e,l),B(e,n)},p(o,l){l&32&&i!==(i=o[5].required)&&k(e,"class",i)},d(o){o&&M(e)}}}function Kae(r){let e,t,n,i=r[3]&&OV(r);return{c(){e=Zt(r[1]),t=et(),i&&i.c(),n=U()},m(o,l){A(o,e,l),A(o,t,l),i&&i.m(o,l),A(o,n,l)},p(o,l){l&2&&gn(e,o[1]),o[3]?i?i.p(o,l):(i=OV(o),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(o){o&&(M(e),M(t),M(n)),i&&i.d(o)}}}function Jae(r){let e,t;return e=new fr({props:{for:r[4],root:r[2],class:r[0],$$slots:{default:[Kae]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,[i]){let o={};i&16&&(o.for=n[4]),i&4&&(o.root=n[2]),i&1&&(o.class=n[0]),i&106&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Xae(r,e,t){let n,{class:i="label"}=e,{label:o="label"}=e,{labelElement:l="label"}=e,{required:a=!1}=e,{id:s=void 0}=e;return r.$$set=u=>{"class"in u&&t(0,i=u.class),"label"in u&&t(1,o=u.label),"labelElement"in u&&t(2,l=u.labelElement),"required"in u&&t(3,a=u.required),"id"in u&&t(4,s=u.id)},t(5,{classes:n}=hg({size:"md"},{name:"InputWrapper"}),n),[i,o,l,a,s,n]}var tL=class extends H{constructor(e){super(),V(this,e,Xae,Jae,N,{class:0,label:1,labelElement:2,required:3,id:4})}},RV=tL;function IV(r){let e,t,n=[{class:r[15].label},r[8],{label:r[4]},{id:r[11]},{labelElement:r[12]},{required:r[7]}],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new RV({props:i}),{c(){_e(e.$$.fragment)},m(o,l){ge(e,o,l),t=!0},p(o,l){let a=l&39312?D(n,[l&32768&&{class:o[15].label},l&256&&tt(o[8]),l&16&&{label:o[4]},l&2048&&{id:o[11]},l&4096&&{labelElement:o[12]},l&128&&{required:o[7]}]):{};e.$set(a)},i(o){t||(re(e.$$.fragment,o),t=!0)},o(o){oe(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function zV(r){let e,t,n=[r[9],{color:"gray"},{class:r[15].description}],i={$$slots:{default:[Qae]},$$scope:{ctx:r}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new Pn({props:i}),{c(){_e(e.$$.fragment)},m(o,l){ge(e,o,l),t=!0},p(o,l){let a=l&33280?D(n,[l&512&&tt(o[9]),n[1],l&32768&&{class:o[15].description}]):{};l&1048608&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(o){t||(re(e.$$.fragment,o),t=!0)},o(o){oe(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function Qae(r){let e;return{c(){e=Zt(r[5])},m(t,n){A(t,e,n)},p(t,n){n&32&&gn(e,t[5])},d(t){t&&M(e)}}}function HV(r){let e,t,n=[r[10],{size:r[13]},{class:r[15].error}],i={$$slots:{default:[$ae]},$$scope:{ctx:r}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new Pn({props:i}),{c(){_e(e.$$.fragment)},m(o,l){ge(e,o,l),t=!0},p(o,l){let a=l&41984?D(n,[l&1024&&tt(o[10]),l&8192&&{size:o[13]},l&32768&&{class:o[15].error}]):{};l&1048640&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(o){t||(re(e.$$.fragment,o),t=!0)},o(o){oe(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function $ae(r){let e;return{c(){e=Zt(r[6])},m(t,n){A(t,e,n)},p(t,n){n&64&&gn(e,t[6])},d(t){t&&M(e)}}}function ese(r){let e,t,n,i,o,l=r[4]&&IV(r),a=r[5]&&zV(r),s=r[18].default,u=gt(s,r,r[20],null),c=typeof r[6]!="boolean"&&r[6]&&HV(r);return{c(){l&&l.c(),e=et(),a&&a.c(),t=et(),u&&u.c(),n=et(),c&&c.c(),i=U()},m(f,h){l&&l.m(f,h),A(f,e,h),a&&a.m(f,h),A(f,t,h),u&&u.m(f,h),A(f,n,h),c&&c.m(f,h),A(f,i,h),o=!0},p(f,h){f[4]?l?(l.p(f,h),h&16&&re(l,1)):(l=IV(f),l.c(),re(l,1),l.m(e.parentNode,e)):l&&(wt(),oe(l,1,1,()=>{l=null}),yt()),f[5]?a?(a.p(f,h),h&32&&re(a,1)):(a=zV(f),a.c(),re(a,1),a.m(t.parentNode,t)):a&&(wt(),oe(a,1,1,()=>{a=null}),yt()),u&&u.p&&(!o||h&1048576)&&_t(u,s,f,f[20],o?pt(s,f[20],h,null):bt(f[20]),null),typeof f[6]!="boolean"&&f[6]?c?(c.p(f,h),h&64&&re(c,1)):(c=HV(f),c.c(),re(c,1),c.m(i.parentNode,i)):c&&(wt(),oe(c,1,1,()=>{c=null}),yt())},i(f){o||(re(l),re(a),re(u,f),re(c),o=!0)},o(f){oe(l),oe(a),oe(u,f),oe(c),o=!1},d(f){f&&(M(e),M(t),M(n),M(i)),l&&l.d(f),a&&a.d(f),u&&u.d(f),c&&c.d(f)}}}function tse(r){let e,t,n,i=[{use:r[1]},{class:r[16](r[2],r[15].root,r[14]({css:r[3]}))},r[17]];function o(a){r[19](a)}let l={$$slots:{default:[ese]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&245774?D(i,[s&2&&{use:a[1]},s&114700&&{class:a[16](a[2],a[15].root,a[14]({css:a[3]}))},s&131072&&tt(a[17])]):{};s&1097712&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function rse(r,e,t){let n,i,o,l=["use","element","class","override","label","description","error","required","labelProps","descriptionProps","errorProps","id","labelElement","size"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},label:p=void 0,description:v=null,error:b=null,required:C=!1,labelProps:L={},descriptionProps:S={},errorProps:P={},id:y="input-id",labelElement:z="label",size:G="sm"}=e;function J(te){f=te,t(0,f)}return r.$$set=te=>{e=R(R({},e),x(te)),t(17,a=Z(e,l)),"use"in te&&t(1,c=te.use),"element"in te&&t(0,f=te.element),"class"in te&&t(2,h=te.class),"override"in te&&t(3,d=te.override),"label"in te&&t(4,p=te.label),"description"in te&&t(5,v=te.description),"error"in te&&t(6,b=te.error),"required"in te&&t(7,C=te.required),"labelProps"in te&&t(8,L=te.labelProps),"descriptionProps"in te&&t(9,S=te.descriptionProps),"errorProps"in te&&t(10,P=te.errorProps),"id"in te&&t(11,y=te.id),"labelElement"in te&&t(12,z=te.labelElement),"size"in te&&t(13,G=te.size),"$$scope"in te&&t(20,u=te.$$scope)},r.$$.update=()=>{r.$$.dirty&8192&&t(16,{cx:n,classes:i,getStyles:o}=hg({size:G},{name:"InputWrapper"}),n,(t(15,i),t(13,G)),(t(14,o),t(13,G)))},[f,c,h,d,p,v,b,C,L,S,P,y,z,G,o,i,n,a,s,J,u]}var rL=class extends H{constructor(e){super(),V(this,e,rse,tse,N,{use:1,element:0,class:2,override:3,label:4,description:5,error:6,required:7,labelProps:8,descriptionProps:9,errorProps:10,id:11,labelElement:12,size:13})}},NV=rL;var dg={xs:1,sm:2,md:3,lg:4,xl:5},VV=er((r,{color:e,size:t,variant:n})=>{let{size:i,themeColor:o}=r.fn;return{root:{},horizontal:{border:0,borderTopWidth:typeof t=="number"?`${t}px`:i({size:t,sizes:dg}),borderTopColor:o(e,4),borderTopStyle:n,margin:"12px 0px 12px 0px"},vertical:{border:0,alignSelf:"stretch",height:"100%",borderLeftWidth:typeof t=="number"?`${t}px`:i({size:t,sizes:dg}),borderLeftColor:o(e,4),borderLeftStyle:n},showsLabel:{borderTop:"0 !important"},label:{display:"flex",alignItems:"center",color:e==="dark"?o("dark",1):o(e,6),[`${r.dark} &`]:{color:e==="dark"?o("dark",1):o(e,5)},"&.left":{"&::before":{display:"none"}},"&.right":{"&::after":{display:"none"}},"&::before":{content:'""',flex:1,height:1,borderTopWidth:typeof t=="number"?`${t}px`:i({size:t,sizes:dg}),borderTopStyle:`${n}`,borderTopColor:o(e,4),marginRight:"10px",[`${r.dark} &`]:{borderTopColor:o(e,3)}},"&::after":{content:'""',flex:1,borderTopWidth:typeof t=="number"?`${t}px`:i({size:t,sizes:dg}),borderTopStyle:`${n}`,borderTopColor:o(e,3),marginLeft:"10px"}}}});var BV=Object.freeze([{error:!0,message:"If using label or label slot, it cannot use orientation 'vertical'",solution:`
                If your component looks like this:
                
                &lt;Divider orientation='vertical' label='text...'&lt;/Divider&gt;
                                        ^^^^^^^^^ - Try changing orientation to 'horizontal'
                `}]);var nse=r=>({}),DV=r=>({});function ZV(r){var o;let e,t,n=[{class:r[12](r[11].label,r[6])},r[7],{size:((o=r[7])==null?void 0:o.size)||r[4]}],i={$$slots:{default:[ose]},$$scope:{ctx:r}};for(let l=0;l<n.length;l+=1)i=R(i,n[l]);return e=new Pn({props:i}),{c(){_e(e.$$.fragment)},m(l,a){ge(e,l,a),t=!0},p(l,a){var u;let s=a&6352?D(n,[a&6208&&{class:l[12](l[11].label,l[6])},a&128&&tt(l[7]),a&144&&{size:((u=l[7])==null?void 0:u.size)||l[4]}]):{};a&4194336&&(s.$$scope={dirty:a,ctx:l}),e.$set(s)},i(l){t||(re(e.$$.fragment,l),t=!0)},o(l){oe(e.$$.fragment,l),t=!1},d(l){pe(e,l)}}}function ise(r){let e;return{c(){e=Zt(r[5])},m(t,n){A(t,e,n)},p(t,n){n&32&&gn(e,t[5])},d(t){t&&M(e)}}}function ose(r){let e,t=r[20].label,n=gt(t,r,r[22],DV),i=n||ise(r);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){n?n.p&&(!e||l&4194304)&&_t(n,t,o,o[22],e?pt(t,o[22],l,nse):bt(o[22]),DV):i&&i.p&&(!e||l&32)&&i.p(o,e?l:-1)},i(o){e||(re(i,o),e=!0)},o(o){oe(i,o),e=!1},d(o){i&&i.d(o)}}}function lse(r){let e,t,n=r[15]&&ZV(r);return{c(){n&&n.c(),e=U()},m(i,o){n&&n.m(i,o),A(i,e,o),t=!0},p(i,o){i[15]?n?(n.p(i,o),o&32768&&re(n,1)):(n=ZV(i),n.c(),re(n,1),n.m(e.parentNode,e)):n&&(wt(),oe(n,1,1,()=>{n=null}),yt())},i(i){t||(re(n),t=!0)},o(i){oe(n),t=!1},d(i){i&&M(e),n&&n.d(i)}}}function ase(r){let e,t,n,i,o;e=new Pu({props:{observable:r[8],component:"Divider",code:r[9]}});let l=[{use:r[2]},{class:r[12](r[3],r[11].root,r[14]?r[11].horizontal:{},r[13]?r[11].vertical:{},r[15]?r[11].showsLabel:{},r[10]({css:r[1]}))},r[16]];function a(u){r[21](u)}let s={$$slots:{default:[lse]},$$scope:{ctx:r}};for(let u=0;u<l.length;u+=1)s=R(s,l[u]);return r[0]!==void 0&&(s.element=r[0]),n=new fr({props:s}),je.push(()=>kt(n,"element",a)),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment)},m(u,c){ge(e,u,c),A(u,t,c),ge(n,u,c),o=!0},p(u,[c]){let f={};c&256&&(f.observable=u[8]),c&512&&(f.code=u[9]),e.$set(f);let h=c&130062?D(l,[c&4&&{use:u[2]},c&64522&&{class:u[12](u[3],u[11].root,u[14]?u[11].horizontal:{},u[13]?u[11].vertical:{},u[15]?u[11].showsLabel:{},u[10]({css:u[1]}))},c&65536&&tt(u[16])]):{};c&4233456&&(h.$$scope={dirty:c,ctx:u}),!i&&c&1&&(i=!0,h.element=u[0],St(()=>i=!1)),n.$set(h)},i(u){o||(re(e.$$.fragment,u),re(n.$$.fragment,u),o=!0)},o(u){oe(e.$$.fragment,u),oe(n.$$.fragment,u),o=!1},d(u){u&&M(t),pe(e,u),pe(n,u)}}}function sse(r,e,t){let n,i,o,l,a,s,u=["use","element","class","override","color","orientation","size","label","labelPosition","labelProps","variant"],c=Z(e,u),{$$slots:f={},$$scope:h}=e,d=J5(f),{use:p=[],element:v=void 0,class:b="",override:C={},color:L="gray",orientation:S="horizontal",size:P="xs",label:y=null,labelPosition:z="left",labelProps:G=null,variant:J="solid"}=e,te=!1,ne;i&&(y||d.label)&&(te=!0,ne=BV[0]);function Q(ee){v=ee,t(0,v)}return r.$$set=ee=>{e=R(R({},e),x(ee)),t(16,c=Z(e,u)),"use"in ee&&t(2,p=ee.use),"element"in ee&&t(0,v=ee.element),"class"in ee&&t(3,b=ee.class),"override"in ee&&t(1,C=ee.override),"color"in ee&&t(17,L=ee.color),"orientation"in ee&&t(18,S=ee.orientation),"size"in ee&&t(4,P=ee.size),"label"in ee&&t(5,y=ee.label),"labelPosition"in ee&&t(6,z=ee.labelPosition),"labelProps"in ee&&t(7,G=ee.labelProps),"variant"in ee&&t(19,J=ee.variant),"$$scope"in ee&&t(22,h=ee.$$scope)},r.$$.update=()=>{r.$$.dirty&262176&&t(15,n=(y||d.label)&&S==="horizontal"),r.$$.dirty&262144&&t(13,i=S==="vertical"),r.$$.dirty&262144&&t(14,o=S==="horizontal"),r.$$.dirty&256&&te&&t(1,C={display:"none"}),r.$$.dirty&655376&&t(12,{cx:l,classes:a,getStyles:s}=VV({color:L,size:P,variant:J},{name:"Divider"}),l,(t(11,a),t(17,L),t(4,P),t(19,J)),(t(10,s),t(17,L),t(4,P),t(19,J)))},[v,C,p,b,P,y,z,G,te,ne,s,a,l,i,o,n,c,L,S,J,f,Q,h]}var nL=class extends H{constructor(e){super(),V(this,e,sse,ase,N,{use:2,element:0,class:3,override:1,color:17,orientation:18,size:4,label:5,labelPosition:6,labelProps:7,variant:19})}},iL=nL;var FV=er((r,{gap:e,rowGap:t,columnGap:n,align:i,justify:o,wrap:l,direction:a})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:a,alignItems:i,flexWrap:l,justifyContent:o,gap:e?r.fn.size({size:e,sizes:r.space}):void 0,rowGap:t?r.fn.size({size:t,sizes:r.space}):void 0,columnGap:n?r.fn.size({size:n,sizes:r.space}):void 0}}));function use(r){let e,t=r[15].default,n=gt(t,r,r[17],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&131072)&&_t(n,t,i,i[17],e?pt(t,i[17],o,null):bt(i[17]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function cse(r){let e,t,n,i=[{use:r[1]},{class:r[6](r[2],r[5].root,r[4]({css:r[3]}))},r[7]];function o(a){r[16](a)}let l={$$slots:{default:[use]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&254?D(i,[s&2&&{use:a[1]},s&124&&{class:a[6](a[2],a[5].root,a[4]({css:a[3]}))},s&128&&tt(a[7])]):{};s&131072&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function fse(r,e,t){let n,i,o,l=["use","element","class","override","gap","rowGap","columnGap","align","justify","wrap","direction"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},gap:p=void 0,rowGap:v=void 0,columnGap:b=void 0,align:C=void 0,justify:L=void 0,wrap:S=void 0,direction:P=void 0}=e;function y(z){f=z,t(0,f)}return r.$$set=z=>{e=R(R({},e),x(z)),t(7,a=Z(e,l)),"use"in z&&t(1,c=z.use),"element"in z&&t(0,f=z.element),"class"in z&&t(2,h=z.class),"override"in z&&t(3,d=z.override),"gap"in z&&t(8,p=z.gap),"rowGap"in z&&t(9,v=z.rowGap),"columnGap"in z&&t(10,b=z.columnGap),"align"in z&&t(11,C=z.align),"justify"in z&&t(12,L=z.justify),"wrap"in z&&t(13,S=z.wrap),"direction"in z&&t(14,P=z.direction),"$$scope"in z&&t(17,u=z.$$scope)},r.$$.update=()=>{r.$$.dirty&32512&&t(6,{cx:n,classes:i,getStyles:o}=FV({gap:p,rowGap:v,columnGap:b,align:C,justify:L,wrap:S,direction:P},{name:"Flex"}),n,(t(5,i),t(8,p),t(9,v),t(10,b),t(11,C),t(12,L),t(13,S),t(14,P)),(t(4,o),t(8,p),t(9,v),t(10,b),t(11,C),t(12,L),t(13,S),t(14,P)))},[f,c,h,d,o,i,n,a,p,v,b,C,L,S,P,s,y,u]}var oL=class extends H{constructor(e){super(),V(this,e,fse,cse,N,{use:1,element:0,class:2,override:3,gap:8,rowGap:9,columnGap:10,align:11,justify:12,wrap:13,direction:14})}},mg=oL;var hse=Sk({"from, to":{opacity:.4},"50%":{opacity:1}}),jV=er((r,{animate:e,circle:t,height:n,radius:i,width:o})=>({root:{[`${r.dark} &`]:{"&.visible":{"&::before":{background:r.fn.themeColor("dark",7)},"&::after":{background:r.fn.themeColor("dark",4)}}},height:n,width:t?n:`${o}%`,borderRadius:t?n:`$${i}`,position:"relative",overflow:"hidden","&.visible":{"&::before":{content:'""',position:"absolute",background:"white",top:0,bottom:0,left:0,right:0,zIndex:10},"&::after":{content:'""',position:"absolute",background:r.fn.themeColor("gray",3),top:0,bottom:0,left:0,right:0,animation:e?`${hse} 1500ms linear infinite`:"none",zIndex:11}}}}));function dse(r){let e,t=r[14].default,n=gt(t,r,r[16],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&65536)&&_t(n,t,i,i[16],e?pt(t,i[16],o,null):bt(i[16]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function mse(r){let e,t,n,i=[{class:r[7](r[2],r[6].root,{visible:r[4]},r[5]({css:r[3]}))},{use:r[1]},r[8]];function o(a){r[15](a)}let l={$$slots:{default:[dse]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&510?D(i,[s&252&&{class:a[7](a[2],a[6].root,{visible:a[4]},a[5]({css:a[3]}))},s&2&&{use:a[1]},s&256&&tt(a[8])]):{};s&65536&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function gse(r,e,t){let n,i,o,l=["use","element","class","override","visible","height","width","circle","radius","animate"],a=Z(e,l),{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},visible:p=!0,height:v="auto",width:b=100,circle:C=null,radius:L=null,animate:S=!0}=e;function P(y){f=y,t(0,f)}return r.$$set=y=>{e=R(R({},e),x(y)),t(8,a=Z(e,l)),"use"in y&&t(1,c=y.use),"element"in y&&t(0,f=y.element),"class"in y&&t(2,h=y.class),"override"in y&&t(3,d=y.override),"visible"in y&&t(4,p=y.visible),"height"in y&&t(9,v=y.height),"width"in y&&t(10,b=y.width),"circle"in y&&t(11,C=y.circle),"radius"in y&&t(12,L=y.radius),"animate"in y&&t(13,S=y.animate),"$$scope"in y&&t(16,u=y.$$scope)},r.$$.update=()=>{r.$$.dirty&15872&&t(7,{cx:n,classes:i,getStyles:o}=jV({animate:S,circle:C,height:v,radius:L,width:b},{name:"Skeleton"}),n,(t(6,i),t(13,S),t(11,C),t(9,v),t(12,L),t(10,b)),(t(5,o),t(13,S),t(11,C),t(9,v),t(12,L),t(10,b)))},[f,c,h,d,p,o,i,n,a,v,b,C,L,S,s,P,u]}var lL=class extends H{constructor(e){super(),V(this,e,gse,mse,N,{use:1,element:0,class:2,override:3,visible:4,height:9,width:10,circle:11,radius:12,animate:13})}},Zd=lL;var wi={xs:30,sm:36,md:42,lg:50,xl:60},xV=er((r,{icon:e,iconWidth:t,invalid:n,multiline:i,radius:o,rightSectionWidth:l,size:a,resize:s,variant:u,showRightSection:c})=>{var f,h,d,p,v,b,C,L;return{root:{darkMode:{"&:disabled":{backgroundColor:r.fn.themeColor("dark",6)},"&::placeholder":{color:r.fn.themeColor("dark",3)}},position:"relative"},input:u!=="headless"?{height:i?"auto":typeof a=="number"?`${a}px`:(f=wi[a])!=null?f:wi.md,WebkitTapHighlightColor:"transparent",lineHeight:i?"$md":`${wi[a]-2}px`,appearance:"none",resize:s,boxSizing:"border-box",fontFamily:(h=r.fonts.standard.value)!=null?h:"sans-serif",fontSize:typeof a=="number"?`${a}px`:`${a}`,width:"100%",color:"Black",display:"block",textAlign:"left",minHeight:u==="default"||u==="filled"?(d=wi[a])!=null?d:wi.md:null,paddingLeft:u==="default"&&e||u==="filled"&&e?(p=wi[a])!=null?p:wi.md/3:12,paddingRight:(u==="default"||u==="filled")&&c?l:null,borderRadius:u==="default"||u==="filled"?`$${o}`:null,"&:disabled":{backgroundColor:r.fn.themeColor("gray",1),color:r.fn.themeColor("dark",2),opacity:.6,cursor:"not-allowed","&::placeholder":{color:r.fn.themeColor("dark",2)}},"&::placeholder":{opacity:1,userSelect:"none",color:r.fn.themeColor("gray",5)},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"},darkMode:{color:r.fn.themeColor("dark",0)}}:{},defaultVariant:{border:`1px solid ${r.fn.themeColor("gray",4)}`,backgroundColor:"White",transition:"border-color 100ms ease",minHeight:(v=wi[a])!=null?v:wi.md,"&:focus, &:focus-within":{outline:"none",borderColor:r.fn.themeColor("blue",5)},darkMode:{border:`1px solid ${r.fn.themeColor("dark",5)}`,backgroundColor:r.fn.themeColor("dark",8),"&:focus, &:focus-within":{borderColor:r.fn.themeColor("blue",8)}}},filledVariant:{border:"1px solid transparent",backgroundColor:r.fn.themeColor("gray",1),minHeight:(b=wi[a])!=null?b:wi.md,"&:focus, &:focus-within":{outline:"none",borderColor:`${r.fn.themeColor("blue",5)} !important`},darkMode:{backgroundColor:r.fn.themeColor("dark",5),"&:focus, &:focus-within":{borderColor:`${r.fn.themeColor("blue",8)} !important`}}},unstyledVariant:{height:i?void 0:"auto",borderWidth:0,color:"Black",backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}},withIcon:{paddingLeft:typeof t=="number"?`${t}px`:(C=wi[a])!=null?C:wi.md},iconWrapper:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:t?`${t}px`:(L=wi[a])!=null?L:wi.md},disabled:{backgroundColor:r.fn.themeColor("gray",1),color:r.fn.themeColor("dark",2),opacity:.6,cursor:"not-allowed","&::placeholder":{color:r.fn.themeColor("dark",2)},darkMode:{backgroundColor:r.fn.themeColor("dark",6),borderColor:r.fn.themeColor("dark",4)}},invalid:{color:r.fn.themeColor("red",7),borderColor:r.fn.themeColor("red",7),"&::placeholder":{opacity:1,color:r.fn.themeColor("red",7)},darkMode:{color:r.fn.themeColor("red",6),borderColor:r.fn.themeColor("red",6),"&::placeholder":{color:r.fn.themeColor("red",6)}}},icon:{color:n?r.fn.themeColor("red",7):r.fn.themeColor("gray",5),pointerEvents:"none",darkMode:{color:n?r.fn.themeColor("red",6):r.fn.themeColor("dark",2)}},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:l},noPointerEvents:{pointerEvents:"none"}}});var pse=r=>({}),qV=r=>({}),_se=r=>({}),UV=r=>({});function bse(r){var f;let e,t,n,i,o,l=[{use:[r[28],[Ht,r[2]]]},{"aria-invalid":r[15]},{class:r[26](r[3],{[r[25].disabled]:r[14],[r[25].invalid]:r[15],[r[25].withIcon]:r[6]||r[27]},(f=r[25][`${r[13]}Variant`])!=null?f:{})},{disabled:r[14]},{required:r[12]},{id:r[11]},{type:r[17]},{autofocus:r[19]},r[33]];function a(h){r[43](h)}function s(h){r[44](h)}var u=r[5];function c(h,d){var v;let p={$$slots:{default:[wse]},$$scope:{ctx:h}};for(let b=0;b<l.length;b+=1)p=R(p,l[b]);return d!==void 0&&d[0]&504035404|d[1]&4&&(p=R(p,D(l,[d[0]&268435460&&{use:[h[28],[Ht,h[2]]]},d[0]&32768&&{"aria-invalid":h[15]},d[0]&234938440&&{class:h[26](h[3],{[h[25].disabled]:h[14],[h[25].invalid]:h[15],[h[25].withIcon]:h[6]||h[27]},(v=h[25][`${h[13]}Variant`])!=null?v:{})},d[0]&16384&&{disabled:h[14]},d[0]&4096&&{required:h[12]},d[0]&2048&&{id:h[11]},d[0]&131072&&{type:h[17]},d[0]&524288&&{autofocus:h[19]},d[1]&4&&tt(h[33])]))),h[0]!==void 0&&(p.element=h[0]),h[1]!==void 0&&(p.value=h[1]),{props:p}}return u&&(e=pn(u,c(r)),je.push(()=>kt(e,"element",a)),je.push(()=>kt(e,"value",s))),{c(){e&&_e(e.$$.fragment),i=U()},m(h,d){e&&ge(e,h,d),A(h,i,d),o=!0},p(h,d){var p;if(d[0]&32&&u!==(u=h[5])){if(e){wt();let v=e;oe(v.$$.fragment,1,0,()=>{pe(v,1)}),yt()}u?(e=pn(u,c(h,d)),je.push(()=>kt(e,"element",a)),je.push(()=>kt(e,"value",s)),_e(e.$$.fragment),re(e.$$.fragment,1),ge(e,i.parentNode,i)):e=null}else if(u){let v=d[0]&504035404|d[1]&4?D(l,[d[0]&268435460&&{use:[h[28],[Ht,h[2]]]},d[0]&32768&&{"aria-invalid":h[15]},d[0]&234938440&&{class:h[26](h[3],{[h[25].disabled]:h[14],[h[25].invalid]:h[15],[h[25].withIcon]:h[6]||h[27]},(p=h[25][`${h[13]}Variant`])!=null?p:{})},d[0]&16384&&{disabled:h[14]},d[0]&4096&&{required:h[12]},d[0]&2048&&{id:h[11]},d[0]&131072&&{type:h[17]},d[0]&524288&&{autofocus:h[19]},d[1]&4&&tt(h[33])]):{};d[1]&32768&&(v.$$scope={dirty:d,ctx:h}),!t&&d[0]&1&&(t=!0,v.element=h[0],St(()=>t=!1)),!n&&d[0]&2&&(n=!0,v.value=h[1],St(()=>n=!1)),e.$set(v)}},i(h){o||(e&&re(e.$$.fragment,h),o=!0)},o(h){e&&oe(e.$$.fragment,h),o=!1},d(h){h&&M(i),e&&pe(e,h)}}}function vse(r){let e,t=r[29]()&&yse(r);return{c(){t&&t.c()},m(n,i){t&&t.m(n,i),e=!0},p(n,i){n[29]()&&t.p(n,i)},i(n){e||(re(t,n),e=!0)},o(n){oe(t,n),e=!1},d(n){t&&t.d(n)}}}function Cse(r){var u;let e,t,n,i,o,l,a=[{value:r[1]},{type:r[17]},{required:r[12]},{disabled:r[14]},{id:r[11]},{placeholder:r[18]},{autocomplete:r[16]},{autofocus:r[19]},{"aria-invalid":r[15]},{class:t=r[26](r[3],r[25].input,{[r[25].disabled]:r[14],[r[25].invalid]:r[15],[r[25].withIcon]:r[6]||r[27]},(u=r[25][`${r[13]}Variant`])!=null?u:{})},r[33]],s={};for(let c=0;c<a.length;c+=1)s=R(s,a[c]);return{c(){e=Ge("input"),mn(e,s)},m(c,f){A(c,e,f),"value"in s&&(e.value=s.value),e.autofocus&&e.focus(),r[41](e),o||(l=[kr(n=Ht.call(null,e,r[2])),kr(i=r[28].call(null,e)),j(e,"input",r[31])],o=!0)},p(c,f){var h;mn(e,s=D(a,[f[0]&2&&e.value!==c[1]&&{value:c[1]},f[0]&131072&&{type:c[17]},f[0]&4096&&{required:c[12]},f[0]&16384&&{disabled:c[14]},f[0]&2048&&{id:c[11]},f[0]&262144&&{placeholder:c[18]},f[0]&65536&&{autocomplete:c[16]},f[0]&524288&&{autofocus:c[19]},f[0]&32768&&{"aria-invalid":c[15]},f[0]&234938440&&t!==(t=c[26](c[3],c[25].input,{[c[25].disabled]:c[14],[c[25].invalid]:c[15],[c[25].withIcon]:c[6]||c[27]},(h=c[25][`${c[13]}Variant`])!=null?h:{}))&&{class:t},f[1]&4&&c[33]])),"value"in s&&(e.value=s.value),n&&Vr(n.update)&&f[0]&4&&n.update.call(null,c[2])},i:I,o:I,d(c){c&&M(e),r[41](null),o=!1,Y(l)}}}function wse(r){let e,t=r[40].default,n=gt(t,r,r[46],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o[1]&32768)&&_t(n,t,i,i[46],e?pt(t,i[46],o,null):bt(i[46]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function yse(r){var h;let e,t,n,i,o,l,a,s=r[40].default,u=gt(s,r,r[46],null),c=[{value:r[1]},{required:r[12]},{disabled:r[14]},{id:r[11]},{placeholder:r[18]},{autocomplete:r[16]},{type:r[17]},{autofocus:r[19]},{"aria-invalid":r[15]},{class:t=r[26](r[3],r[25].input,{[r[25].disabled]:r[14],[r[25].invalid]:r[15],[r[25].withIcon]:r[6]||r[27]},(h=r[25][`${r[13]}Variant`])!=null?h:{})},r[33]],f={};for(let d=0;d<c.length;d+=1)f=R(f,c[d]);return{c(){e=Ge(r[29]()),u&&u.c(),$5(r[29]())(e,f),An(e,"disabled",r[14]),An(e,"invalid",r[15])},m(d,p){A(d,e,p),u&&u.m(e,null),r[42](e),o=!0,l||(a=[j(e,"change",r[30]),j(e,"input",r[31]),kr(n=Ht.call(null,e,r[2])),kr(i=r[28].call(null,e))],l=!0)},p(d,p){var v;u&&u.p&&(!o||p[1]&32768)&&_t(u,s,d,d[46],o?pt(s,d[46],p,null):bt(d[46]),null),$5(d[29]())(e,f=D(c,[(!o||p[0]&2)&&{value:d[1]},(!o||p[0]&4096)&&{required:d[12]},(!o||p[0]&16384)&&{disabled:d[14]},(!o||p[0]&2048)&&{id:d[11]},(!o||p[0]&262144)&&{placeholder:d[18]},(!o||p[0]&65536)&&{autocomplete:d[16]},(!o||p[0]&131072)&&{type:d[17]},(!o||p[0]&524288)&&{autofocus:d[19]},(!o||p[0]&32768)&&{"aria-invalid":d[15]},(!o||p[0]&234938440&&t!==(t=d[26](d[3],d[25].input,{[d[25].disabled]:d[14],[d[25].invalid]:d[15],[d[25].withIcon]:d[6]||d[27]},(v=d[25][`${d[13]}Variant`])!=null?v:{})))&&{class:t},p[1]&4&&d[33]])),n&&Vr(n.update)&&p[0]&4&&n.update.call(null,d[2]),An(e,"disabled",d[14]),An(e,"invalid",d[15])},i(d){o||(re(u,d),o=!0)},o(d){oe(u,d),o=!1},d(d){d&&M(e),u&&u.d(d),r[42](null),l=!1,Y(a)}}}function WV(r){let e,t,n,i;return t=new D2({props:{icon:r[6],iconProps:r[7],iconSize:16}}),{c(){e=Ge("div"),_e(t.$$.fragment),k(e,"class",n=r[25].icon)},m(o,l){A(o,e,l),ge(t,e,null),i=!0},p(o,l){let a={};l[0]&64&&(a.icon=o[6]),l[0]&128&&(a.iconProps=o[7]),t.$set(a),(!i||l[0]&33554432&&n!==(n=o[25].icon))&&k(e,"class",n)},i(o){i||(re(t.$$.fragment,o),i=!0)},o(o){oe(t.$$.fragment,o),i=!1},d(o){o&&M(e),pe(t)}}}function kse(r){let e,t,n=r[6]&&WV(r);return{c(){n&&n.c(),e=U()},m(i,o){n&&n.m(i,o),A(i,e,o),t=!0},p(i,o){i[6]?n?(n.p(i,o),o[0]&64&&re(n,1)):(n=WV(i),n.c(),re(n,1),n.m(e.parentNode,e)):n&&(wt(),oe(n,1,1,()=>{n=null}),yt())},i(i){t||(re(n),t=!0)},o(i){oe(n),t=!1},d(i){i&&M(e),n&&n.d(i)}}}function GV(r){let e,t,n,i;return t=new D2({props:{icon:r[6],iconProps:r[7],iconSize:16}}),{c(){e=Ge("div"),_e(t.$$.fragment),k(e,"class",n=r[26](r[25].icon,r[25].iconWrapper))},m(o,l){A(o,e,l),ge(t,e,null),i=!0},p(o,l){let a={};l[0]&64&&(a.icon=o[6]),l[0]&128&&(a.iconProps=o[7]),t.$set(a),(!i||l[0]&100663296&&n!==(n=o[26](o[25].icon,o[25].iconWrapper)))&&k(e,"class",n)},i(o){i||(re(t.$$.fragment,o),i=!0)},o(o){oe(t.$$.fragment,o),i=!1},d(o){o&&M(e),pe(t)}}}function YV(r){let e,t,n,i=r[40].rightSection,o=gt(i,r,r[46],qV),l=[r[9],{class:t=r[26](r[25].rightSection,{[r[25].noPointerEvents]:r[20]})}],a={};for(let s=0;s<l.length;s+=1)a=R(a,l[s]);return{c(){e=Ge("div"),o&&o.c(),mn(e,a)},m(s,u){A(s,e,u),o&&o.m(e,null),n=!0},p(s,u){o&&o.p&&(!n||u[1]&32768)&&_t(o,i,s,s[46],n?pt(i,s[46],u,pse):bt(s[46]),qV),mn(e,a=D(l,[u[0]&512&&s[9],(!n||u[0]&101711872&&t!==(t=s[26](s[25].rightSection,{[s[25].noPointerEvents]:s[20]})))&&{class:t}]))},i(s){n||(re(o,s),n=!0)},o(s){oe(o,s),n=!1},d(s){s&&M(e),o&&o.d(s)}}}function Lse(r){let e,t,n,i,o,l,a,s,u,c,f=[Cse,vse,bse],h=[];function d(S,P){return P[0]&4194336&&(e=null),S[22]&&S[5]==="input"?0:(e==null&&(e=!!(S[22]&&Sse(String(S[5])))),e?1:S[23]&&typeof S[5]!="string"?2:-1)}~(t=d(r,[-1,-1]))&&(n=h[t]=f[t](r));let p=r[40].icon,v=gt(p,r,r[46],UV),b=v||kse(r),C=r[6]&&r[32].icon&&!r[27]&&GV(r),L=r[8]&&YV(r);return{c(){n&&n.c(),i=et(),o=Ge("span"),b&&b.c(),a=et(),C&&C.c(),s=et(),L&&L.c(),u=U(),k(o,"class",l=r[26]({[r[25].iconWrapper]:!!r[6]||r[27]}))},m(S,P){~t&&h[t].m(S,P),A(S,i,P),A(S,o,P),b&&b.m(o,null),r[45](o),A(S,a,P),C&&C.m(S,P),A(S,s,P),L&&L.m(S,P),A(S,u,P),c=!0},p(S,P){let y=t;t=d(S,P),t===y?~t&&h[t].p(S,P):(n&&(wt(),oe(h[y],1,1,()=>{h[y]=null}),yt()),~t?(n=h[t],n?n.p(S,P):(n=h[t]=f[t](S),n.c()),re(n,1),n.m(i.parentNode,i)):n=null),v?v.p&&(!c||P[1]&32768)&&_t(v,p,S,S[46],c?pt(p,S[46],P,_se):bt(S[46]),UV):b&&b.p&&(!c||P[0]&33554624)&&b.p(S,c?P:[-1,-1]),(!c||P[0]&234881088&&l!==(l=S[26]({[S[25].iconWrapper]:!!S[6]||S[27]})))&&k(o,"class",l),S[6]&&S[32].icon&&!S[27]?C?(C.p(S,P),P[0]&134217792|P[1]&2&&re(C,1)):(C=GV(S),C.c(),re(C,1),C.m(s.parentNode,s)):C&&(wt(),oe(C,1,1,()=>{C=null}),yt()),S[8]?L?(L.p(S,P),P[0]&256&&re(L,1)):(L=YV(S),L.c(),re(L,1),L.m(u.parentNode,u)):L&&(wt(),oe(L,1,1,()=>{L=null}),yt())},i(S){c||(re(n),re(b,S),re(C),re(L),c=!0)},o(S){oe(n),oe(b,S),oe(C),oe(L),c=!1},d(S){S&&(M(i),M(o),M(a),M(s),M(u)),~t&&h[t].d(S),b&&b.d(S),r[45](null),C&&C.d(S),L&&L.d(S)}}}function Ese(r){let e,t,n=[r[10],{class:r[26](r[25].root,r[24]({css:r[4]}))},r[33]],i={$$slots:{default:[Lse]},$$scope:{ctx:r}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new fr({props:i}),{c(){_e(e.$$.fragment)},m(o,l){ge(e,o,l),t=!0},p(o,l){let a=l[0]&117441552|l[1]&4?D(n,[l[0]&1024&&tt(o[10]),l[0]&117440528&&{class:o[26](o[25].root,o[24]({css:o[4]}))},l[1]&4&&tt(o[33])]):{};l[0]&251657199|l[1]&32774&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(o){t||(re(e.$$.fragment,o),t=!0)},o(o){oe(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function Sse(r){return["input","select","textarea","datalist"].includes(r)}function Mse(r,e,t){let n,i,o,l,a=["use","element","class","override","root","icon","iconWidth","iconProps","showRightSection","rightSectionWidth","rightSectionProps","wrapperProps","id","required","radius","variant","disabled","size","value","invalid","multiline","autocomplete","type","placeholder","autofocus","resize","noPointerEventsRightSection"],s=Z(e,a),{$$slots:u={},$$scope:c}=e,f=J5(u),{use:h=[],element:d=void 0,class:p="",override:v={},root:b="input",icon:C=null,iconWidth:L=36,iconProps:S={size:20,color:"currentColor"},showRightSection:P=f.rightSection,rightSectionWidth:y=36,rightSectionProps:z={},wrapperProps:G={},id:J="input-id",required:te=!1,radius:ne="sm",variant:Q="default",disabled:ee=!1,size:se="sm",value:Pe="",invalid:Te=!1,multiline:be=!1,autocomplete:rt="on",type:Ee="text",placeholder:Re=void 0,autofocus:nr=void 0,resize:Xt="none",noPointerEventsRightSection:Oe=!1}=e,fe=_n(vr());function hr(){return b}let qt=!0,Mr=!1,sn;function $r(){t(1,Pe=this.value)}function Ao(ke){ke.target.type==="checkbox"?t(1,Pe=ke.target.checked):ke.target.type==="number"||ke.target.type==="range"?t(1,Pe=+ke.target.value):t(1,Pe=ke.target.value)}function vn(ke){je[ke?"unshift":"push"](()=>{d=ke,t(0,d)})}function Tn(ke){je[ke?"unshift":"push"](()=>{d=ke,t(0,d)})}function Mi(ke){d=ke,t(0,d)}function jn(ke){Pe=ke,t(1,Pe)}function ai(ke){je[ke?"unshift":"push"](()=>{sn=ke,t(21,sn)})}return r.$$set=ke=>{e=R(R({},e),x(ke)),t(33,s=Z(e,a)),"use"in ke&&t(2,h=ke.use),"element"in ke&&t(0,d=ke.element),"class"in ke&&t(3,p=ke.class),"override"in ke&&t(4,v=ke.override),"root"in ke&&t(5,b=ke.root),"icon"in ke&&t(6,C=ke.icon),"iconWidth"in ke&&t(34,L=ke.iconWidth),"iconProps"in ke&&t(7,S=ke.iconProps),"showRightSection"in ke&&t(8,P=ke.showRightSection),"rightSectionWidth"in ke&&t(35,y=ke.rightSectionWidth),"rightSectionProps"in ke&&t(9,z=ke.rightSectionProps),"wrapperProps"in ke&&t(10,G=ke.wrapperProps),"id"in ke&&t(11,J=ke.id),"required"in ke&&t(12,te=ke.required),"radius"in ke&&t(36,ne=ke.radius),"variant"in ke&&t(13,Q=ke.variant),"disabled"in ke&&t(14,ee=ke.disabled),"size"in ke&&t(37,se=ke.size),"value"in ke&&t(1,Pe=ke.value),"invalid"in ke&&t(15,Te=ke.invalid),"multiline"in ke&&t(38,be=ke.multiline),"autocomplete"in ke&&t(16,rt=ke.autocomplete),"type"in ke&&t(17,Ee=ke.type),"placeholder"in ke&&t(18,Re=ke.placeholder),"autofocus"in ke&&t(19,nr=ke.autofocus),"resize"in ke&&t(39,Xt=ke.resize),"noPointerEventsRightSection"in ke&&t(20,Oe=ke.noPointerEventsRightSection),"$$scope"in ke&&t(46,c=ke.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&2097152&&t(27,n=!!(sn!=null&&sn.innerHTML)),r.$$.dirty[0]&32&&(t(22,qt=b&&typeof b=="string"),t(23,Mr=b&&typeof b=="function")),r.$$.dirty[0]&41280|r.$$.dirty[1]&504&&t(26,{cx:i,classes:o,getStyles:l}=xV({icon:C,iconWidth:L,invalid:Te,multiline:be,radius:ne,rightSectionWidth:y,showRightSection:P,size:se,resize:Xt,variant:Q},{name:"Input"}),i,(t(25,o),t(6,C),t(34,L),t(15,Te),t(38,be),t(36,ne),t(35,y),t(8,P),t(37,se),t(39,Xt),t(13,Q)),(t(24,l),t(6,C),t(34,L),t(15,Te),t(38,be),t(36,ne),t(35,y),t(8,P),t(37,se),t(39,Xt),t(13,Q)))},[d,Pe,h,p,v,b,C,S,P,z,G,J,te,Q,ee,Te,rt,Ee,Re,nr,Oe,sn,qt,Mr,l,o,i,n,fe,hr,$r,Ao,f,s,L,y,ne,se,be,Xt,u,vn,Tn,Mi,jn,ai,c]}var aL=class extends H{constructor(e){super(),V(this,e,Mse,Ese,N,{use:2,element:0,class:3,override:4,root:5,icon:6,iconWidth:34,iconProps:7,showRightSection:8,rightSectionWidth:35,rightSectionProps:9,wrapperProps:10,id:11,required:12,radius:36,variant:13,disabled:14,size:37,value:1,invalid:15,multiline:38,autocomplete:16,type:17,placeholder:18,autofocus:19,resize:39,noPointerEventsRightSection:20},null,[-1,-1])}},KV=aL;function Ase(r){let e,t;return{c(){e=F("svg"),t=F("path"),k(t,"d","M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z"),k(t,"fill",r[0]),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(e,"width",r[1]),k(e,"height",r[1]),k(e,"viewBox","0 0 15 15"),k(e,"fill","none"),k(e,"xmlns","http://www.w3.org/2000/svg"),e1(e,"color","#868e96"),k(e,"data-chevron","true")},m(n,i){A(n,e,i),B(e,t)},p(n,[i]){i&1&&k(t,"fill",n[0]),i&2&&k(e,"width",n[1]),i&2&&k(e,"height",n[1])},i:I,o:I,d(n){n&&M(e)}}}function Pse(r,e,t){let{color:n="currentColor"}=e,{size:i=15}=e;return r.$$set=o=>{"color"in o&&t(0,n=o.color),"size"in o&&t(1,i=o.size)},[n,i]}var sL=class extends H{constructor(e){super(),V(this,e,Pse,Ase,N,{color:0,size:1})}},uL=sL;function JV(r,e,t){let n=r.slice();return n[35]=e[t],n}var Tse=r=>({}),XV=r=>({slot:"icon"}),Ose=r=>({size:r[0]&2048,color:r[0]&2048}),QV=r=>({size:r[11].size,color:r[11].color});function $V(r){let e,t,n;return{c(){e=Ge("option"),t=Zt(r[5]),e.__value="",Ld(e,e.__value),e.disabled=!0,e.hidden=!0,e.selected=n=!r[1]},m(i,o){A(i,e,o),B(e,t)},p(i,o){o[0]&32&&gn(t,i[5]),o[0]&2&&n!==(n=!i[1])&&(e.selected=n)},d(i){i&&M(e)}}}function eB(r){let e;return{c(){e=Ge("option"),e.textContent="Add Some Options",e.__value="",Ld(e,e.__value),e.disabled=!0,e.hidden=!0},m(t,n){A(t,e,n)},p:I,d(t){t&&M(e)}}}function tB(r){var s;let e,t=((s=r[35].label)!=null?s:r[35].value)+"",n,i,o,l,a;return{c(){e=Ge("option"),n=Zt(t),i=et(),e.__value=o=r[35].value,Ld(e,e.__value),e.disabled=l=r[35].disabled,e.selected=a=r[35].value===r[1]},m(u,c){A(u,e,c),B(e,n),B(e,i)},p(u,c){var f;c[0]&16777216&&t!==(t=((f=u[35].label)!=null?f:u[35].value)+"")&&gn(n,t),c[0]&16777216&&o!==(o=u[35].value)&&(e.__value=o,Ld(e,e.__value)),c[0]&16777216&&l!==(l=u[35].disabled)&&(e.disabled=l),c[0]&16777218&&a!==(a=u[35].value===u[1])&&(e.selected=a)},d(u){u&&M(e)}}}function Rse(r){let e,t,n=r[5]&&$V(r),i=Qo(r[24]),o=[];for(let a=0;a<i.length;a+=1)o[a]=tB(JV(r,i,a));let l=null;return i.length||(l=eB(r)),{c(){n&&n.c(),e=et();for(let a=0;a<o.length;a+=1)o[a].c();t=U(),l&&l.c()},m(a,s){n&&n.m(a,s),A(a,e,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(a,s);A(a,t,s),l&&l.m(a,s)},p(a,s){if(a[5]?n?n.p(a,s):(n=$V(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),s[0]&16777218){i=Qo(a[24]);let u;for(u=0;u<i.length;u+=1){let c=JV(a,i,u);o[u]?o[u].p(c,s):(o[u]=tB(c),o[u].c(),o[u].m(t.parentNode,t))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length,!i.length&&l?l.p(a,s):i.length?l&&(l.d(1),l=null):(l=eB(a),l.c(),l.m(t.parentNode,t))}},d(a){a&&(M(e),M(t)),n&&n.d(a),Q5(o,a),l&&l.d(a)}}}function Ise(r){let e,t=r[31].icon,n=gt(t,r,r[34],XV);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o[1]&8)&&_t(n,t,i,i[34],e?pt(t,i[34],o,Tse):bt(i[34]),XV)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function zse(r){let e,t,n;var i=uL;function o(l,a){return{props:{size:l[11].size,color:l[11].color}}}return i&&(e=pn(i,o(r))),{c(){e&&_e(e.$$.fragment),t=U()},m(l,a){e&&ge(e,l,a),A(l,t,a),n=!0},p(l,a){if(i!==(i=uL)){if(e){wt();let s=e;oe(s.$$.fragment,1,0,()=>{pe(s,1)}),yt()}i?(e=pn(i,o(l,a)),_e(e.$$.fragment),re(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}else if(i){let s={};a[0]&2048&&(s.size=l[11].size),a[0]&2048&&(s.color=l[11].color),e.$set(s)}},i(l){n||(e&&re(e.$$.fragment,l),n=!0)},o(l){e&&oe(e.$$.fragment,l),n=!1},d(l){l&&M(t),e&&pe(e,l)}}}function Hse(r){let e,t=r[31].rightSection,n=gt(t,r,r[34],QV),i=n||zse(r);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){n?n.p&&(!e||l[0]&2048|l[1]&8)&&_t(n,t,o,o[34],e?pt(t,o[34],l,Ose):bt(o[34]),QV):i&&i.p&&(!e||l[0]&2048)&&i.p(o,e?l:[-1,-1])},i(o){e||(re(i,o),e=!0)},o(o){oe(i,o),e=!1},d(o){i&&i.d(o)}}}function Nse(r){let e,t,n,i,o=[{use:[r[26],[Ht,r[2]]]},{root:"select"},{id:r[25]},{autocomplete:"off"},{invalid:!!r[20]},{override:{...r[27],...r[6]}},{noPointerEventsRightSection:!0},{size:r[8]},{icon:r[9]},{radius:r[15]},{variant:r[16]},{required:r[14]},{disabled:r[17]},{iconWidth:r[10]},{iconProps:r[11]},{placeholder:r[5]},{rightSectionWidth:r[12]},{rightSectionProps:r[13]},r[28]];function l(u){r[32](u)}function a(u){r[33](u)}let s={$$slots:{rightSection:[Hse],icon:[Ise],default:[Rse]},$$scope:{ctx:r}};for(let u=0;u<o.length;u+=1)s=R(s,o[u]);return r[0]!==void 0&&(s.element=r[0]),r[1]!==void 0&&(s.value=r[1]),e=new KV({props:s}),je.push(()=>kt(e,"element",l)),je.push(()=>kt(e,"value",a)),{c(){_e(e.$$.fragment)},m(u,c){ge(e,u,c),i=!0},p(u,c){let f=c[0]&504627044?D(o,[c[0]&67108868&&{use:[u[26],[Ht,u[2]]]},o[1],c[0]&33554432&&{id:u[25]},o[3],c[0]&1048576&&{invalid:!!u[20]},c[0]&134217792&&{override:{...u[27],...u[6]}},o[6],c[0]&256&&{size:u[8]},c[0]&512&&{icon:u[9]},c[0]&32768&&{radius:u[15]},c[0]&65536&&{variant:u[16]},c[0]&16384&&{required:u[14]},c[0]&131072&&{disabled:u[17]},c[0]&1024&&{iconWidth:u[10]},c[0]&2048&&{iconProps:u[11]},c[0]&32&&{placeholder:u[5]},c[0]&4096&&{rightSectionWidth:u[12]},c[0]&8192&&{rightSectionProps:u[13]},c[0]&268435456&&tt(u[28])]):{};c[0]&16779298|c[1]&8&&(f.$$scope={dirty:c,ctx:u}),!t&&c[0]&1&&(t=!0,f.element=u[0],St(()=>t=!1)),!n&&c[0]&2&&(n=!0,f.value=u[1],St(()=>n=!1)),e.$set(f)},i(u){i||(re(e.$$.fragment,u),i=!0)},o(u){oe(e.$$.fragment,u),i=!1},d(u){pe(e,u)}}}function Vse(r){let e,t,n=[{id:r[25]},{class:r[3]+" svelteui-NativeSelect-root"},{size:r[8]},{label:r[18]},{error:r[20]},{override:r[4]},{required:r[14]},{labelProps:r[21]},{errorProps:r[23]},{description:r[19]},{descriptionProps:r[22]},r[7]],i={$$slots:{default:[Nse]},$$scope:{ctx:r}};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new NV({props:i}),{c(){_e(e.$$.fragment)},m(o,l){ge(e,o,l),t=!0},p(o,l){let a=l[0]&50086296?D(n,[l[0]&33554432&&{id:o[25]},l[0]&8&&{class:o[3]+" svelteui-NativeSelect-root"},l[0]&256&&{size:o[8]},l[0]&262144&&{label:o[18]},l[0]&1048576&&{error:o[20]},l[0]&16&&{override:o[4]},l[0]&16384&&{required:o[14]},l[0]&2097152&&{labelProps:o[21]},l[0]&8388608&&{errorProps:o[23]},l[0]&524288&&{description:o[19]},l[0]&4194304&&{descriptionProps:o[22]},l[0]&128&&tt(o[7])]):{};l[0]&286523239|l[1]&8&&(a.$$scope={dirty:l,ctx:o}),e.$set(a)},i(o){t||(re(e.$$.fragment,o),t=!0)},o(o){oe(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function Bse(r,e,t){let n=["use","element","class","override","id","placeholder","data","inputStyle","wrapperProps","size","icon","iconWidth","iconProps","rightSectionWidth","rightSectionProps","required","radius","variant","disabled","value","label","description","error","labelProps","descriptionProps","errorProps"],i=Z(e,n),{$$slots:o={},$$scope:l}=e,{use:a=[],element:s=void 0,class:u="",override:c={},id:f="NativeSelect",placeholder:h="",data:d=[],inputStyle:p={},wrapperProps:v={},size:b="sm",icon:C=null,iconWidth:L=36,iconProps:S={size:20,color:"currentColor"},rightSectionWidth:P=36,rightSectionProps:y={},required:z=!1,radius:G="sm",variant:J="default",disabled:te=!1,value:ne="",label:Q="",description:ee="",error:se="",labelProps:Pe={},descriptionProps:Te={},errorProps:be={}}=e,rt=Rk(f),Ee=[],Re=_n(vr()),nr={"& .input":{paddingLeft:12}};function Xt(fe){s=fe,t(0,s)}function Oe(fe){ne=fe,t(1,ne)}return r.$$set=fe=>{e=R(R({},e),x(fe)),t(28,i=Z(e,n)),"use"in fe&&t(2,a=fe.use),"element"in fe&&t(0,s=fe.element),"class"in fe&&t(3,u=fe.class),"override"in fe&&t(4,c=fe.override),"id"in fe&&t(29,f=fe.id),"placeholder"in fe&&t(5,h=fe.placeholder),"data"in fe&&t(30,d=fe.data),"inputStyle"in fe&&t(6,p=fe.inputStyle),"wrapperProps"in fe&&t(7,v=fe.wrapperProps),"size"in fe&&t(8,b=fe.size),"icon"in fe&&t(9,C=fe.icon),"iconWidth"in fe&&t(10,L=fe.iconWidth),"iconProps"in fe&&t(11,S=fe.iconProps),"rightSectionWidth"in fe&&t(12,P=fe.rightSectionWidth),"rightSectionProps"in fe&&t(13,y=fe.rightSectionProps),"required"in fe&&t(14,z=fe.required),"radius"in fe&&t(15,G=fe.radius),"variant"in fe&&t(16,J=fe.variant),"disabled"in fe&&t(17,te=fe.disabled),"value"in fe&&t(1,ne=fe.value),"label"in fe&&t(18,Q=fe.label),"description"in fe&&t(19,ee=fe.description),"error"in fe&&t(20,se=fe.error),"labelProps"in fe&&t(21,Pe=fe.labelProps),"descriptionProps"in fe&&t(22,Te=fe.descriptionProps),"errorProps"in fe&&t(23,be=fe.errorProps),"$$scope"in fe&&t(34,l=fe.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&1073741824&&d&&t(24,Ee=d.map(fe=>typeof fe=="string"?{label:fe,value:fe}:fe))},[s,ne,a,u,c,h,p,v,b,C,L,S,P,y,z,G,J,te,Q,ee,se,Pe,Te,be,Ee,rt,Re,nr,i,f,d,o,Xt,Oe,l]}var cL=class extends H{constructor(e){super(),V(this,e,Bse,Vse,N,{use:2,element:0,class:3,override:4,id:29,placeholder:5,data:30,inputStyle:6,wrapperProps:7,size:8,icon:9,iconWidth:10,iconProps:11,rightSectionWidth:12,rightSectionProps:13,required:14,radius:15,variant:16,disabled:17,value:1,label:18,description:19,error:20,labelProps:21,descriptionProps:22,errorProps:23},null,[-1,-1])}},fL=cL;var rB=er((r,{color:e,radius:t},n)=>{let i=r.fn.radius(t),o=parseInt(i.toString().split("px")[0]),l=Math.min(Math.max(o/1.2,4),30),a=n1(e).filled;return{root:{darkMode:{backgroundColor:r.fn.themeColor("dark",6),border:`1px solid ${r.fn.themeColor("dark",6)}`},fontFamily:r.fonts.standard.value,boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",paddingLeft:22,paddingRight:5,paddingTop:r.space.xsPX.value,paddingBottom:r.space.xsPX.value,borderRadius:o,backgroundColor:r.colors.white.value,boxShadow:r.shadows.lg,border:`1px solid ${r.fn.themeColor("gray",2)}`,"&::before":{content:"''",display:"block",position:"absolute",width:6,top:l,bottom:l,left:4,borderRadius:o,backgroundColor:a.backgroundColor},"&.withLoader":{paddingLeft:r.space.xsPX.value,"&::before":{display:"none"}},"&.withIcon":{paddingLeft:r.space.xsPX.value,"&::before":{display:"none"},[`& .${n("icon")}`]:{backgroundColor:a.backgroundColor,color:r.colors.white.value}}},icon:{ref:n("icon"),boxSizing:"border-box",marginRight:r.space.mdPX.value,width:28,height:28,borderRadius:28,display:"flex",flex:"none",alignItems:"center",justifyContent:"center",color:r.colors.white.value},loader:{marginRight:r.space.mdPX.value},content:{flex:1,overflow:"hidden",marginRight:10},title:{darkMode:{color:r.colors.white.value},lineHeight:1.4,marginBottom:2,overflow:"hidden",textOverflow:"ellipsis",color:r.fn.themeColor("gray",9)},description:{darkMode:{color:r.fn.themeColor("dark",2)},color:r.fn.themeColor("gray",6),lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis","&:only-child":{darkMode:{color:r.fn.themeColor("dark",0)},color:r.colors.black.value}},closeButton:{darkMode:{color:r.colors.white.value},color:r.colors.black.value}}});var Dse=r=>({}),nB=r=>({});function iB(r){let e,t,n=[{icon:r[6]},{className:r[12].icon},r[8]],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new D2({props:i}),{c(){_e(e.$$.fragment)},m(o,l){ge(e,o,l),t=!0},p(o,l){let a=l&4416?D(n,[l&64&&{icon:o[6]},l&4096&&{className:o[12].icon},l&256&&tt(o[8])]):{};e.$set(a)},i(o){t||(re(e.$$.fragment,o),t=!0)},o(o){oe(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function Zse(r){let e,t,n=r[6]&&!r[5]&&iB(r);return{c(){n&&n.c(),e=U()},m(i,o){n&&n.m(i,o),A(i,e,o),t=!0},p(i,o){i[6]&&!i[5]?n?(n.p(i,o),o&96&&re(n,1)):(n=iB(i),n.c(),re(n,1),n.m(e.parentNode,e)):n&&(wt(),oe(n,1,1,()=>{n=null}),yt())},i(i){t||(re(n),t=!0)},o(i){oe(n),t=!1},d(i){i&&M(e),n&&n.d(i)}}}function oB(r){let e,t;return e=new $o({props:{class:r[12].loader,size:28,color:r[4]}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,i){let o={};i&4096&&(o.class=n[12].loader),i&16&&(o.color=n[4]),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function lB(r){let e,t;return e=new Pn({props:{class:r[12].title,size:"sm",weight:500,$$slots:{default:[Fse]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,i){let o={};i&4096&&(o.class=n[12].title),i&1048584&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Fse(r){let e;return{c(){e=Zt(r[3])},m(t,n){A(t,e,n)},p(t,n){n&8&&gn(e,t[3])},d(t){t&&M(e)}}}function jse(r){let e,t=r[18].default,n=gt(t,r,r[20],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&1048576)&&_t(n,t,i,i[20],e?pt(t,i[20],o,null):bt(i[20]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function aB(r){let e,t,n=[{class:r[12].closeButton},{"aria-label":r[10]},{variant:"hover"},{size:28},{iconSize:r[7]},r[11]],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return e=new Bd({props:i}),e.$on("click",r[14]),{c(){_e(e.$$.fragment)},m(o,l){ge(e,o,l),t=!0},p(o,l){let a=l&7296?D(n,[l&4096&&{class:o[12].closeButton},l&1024&&{"aria-label":o[10]},n[2],n[3],l&128&&{iconSize:o[7]},l&2048&&tt(o[11])]):{};e.$set(a)},i(o){t||(re(e.$$.fragment,o),t=!0)},o(o){oe(e.$$.fragment,o),t=!1},d(o){pe(e,o)}}}function xse(r){let e,t,n,i,o,l,a,s,u,c=r[18].icon,f=gt(c,r,r[20],nB),h=f||Zse(r),d=r[5]&&oB(r),p=r[3]&&lB(r);o=new Pn({props:{class:r[12].description,size:"sm",color:"dimmed",$$slots:{default:[jse]},$$scope:{ctx:r}}});let v=r[9]&&aB(r);return{c(){h&&h.c(),e=et(),d&&d.c(),t=et(),n=Ge("div"),p&&p.c(),i=et(),_e(o.$$.fragment),a=et(),v&&v.c(),s=U(),k(n,"class",l=r[12].content)},m(b,C){h&&h.m(b,C),A(b,e,C),d&&d.m(b,C),A(b,t,C),A(b,n,C),p&&p.m(n,null),B(n,i),ge(o,n,null),A(b,a,C),v&&v.m(b,C),A(b,s,C),u=!0},p(b,C){f?f.p&&(!u||C&1048576)&&_t(f,c,b,b[20],u?pt(c,b[20],C,Dse):bt(b[20]),nB):h&&h.p&&(!u||C&4448)&&h.p(b,u?C:-1),b[5]?d?(d.p(b,C),C&32&&re(d,1)):(d=oB(b),d.c(),re(d,1),d.m(t.parentNode,t)):d&&(wt(),oe(d,1,1,()=>{d=null}),yt()),b[3]?p?(p.p(b,C),C&8&&re(p,1)):(p=lB(b),p.c(),re(p,1),p.m(n,i)):p&&(wt(),oe(p,1,1,()=>{p=null}),yt());let L={};C&4096&&(L.class=b[12].description),C&1048576&&(L.$$scope={dirty:C,ctx:b}),o.$set(L),(!u||C&4096&&l!==(l=b[12].content))&&k(n,"class",l),b[9]?v?(v.p(b,C),C&512&&re(v,1)):(v=aB(b),v.c(),re(v,1),v.m(s.parentNode,s)):v&&(wt(),oe(v,1,1,()=>{v=null}),yt())},i(b){u||(re(h,b),re(d),re(p),re(o.$$.fragment,b),re(v),u=!0)},o(b){oe(h,b),oe(d),oe(p),oe(o.$$.fragment,b),oe(v),u=!1},d(b){b&&(M(e),M(t),M(n),M(a),M(s)),h&&h.d(b),d&&d.d(b),p&&p.d(),pe(o),v&&v.d(b)}}}function qse(r){let e,t,n,i=[{use:r[1]},{role:"alert"},{class:r[13](r[2],r[12].root,{withIcon:r[6],withLoader:r[5]})},r[15]];function o(a){r[19](a)}let l={$$slots:{default:[xse]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&45158?D(i,[s&2&&{use:a[1]},i[1],s&12388&&{class:a[13](a[2],a[12].root,{withIcon:a[6],withLoader:a[5]})},s&32768&&tt(a[15])]):{};s&1056760&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function Use(r,e,t){let n,i,o=["use","element","class","override","title","color","radius","loading","icon","iconSize","iconProps","withCloseButton","closeButtonLabel","closeButtonProps"],l=Z(e,o),{$$slots:a={},$$scope:s}=e,{use:u=[],element:c=void 0,class:f="blue",override:h={},title:d=void 0,color:p="blue",radius:v="sm",loading:b=!1,icon:C=void 0,iconSize:L=16,iconProps:S={},withCloseButton:P=!0,closeButtonLabel:y=void 0,closeButtonProps:z={}}=e,G=ck();function J(){G("close")}function te(ne){c=ne,t(0,c)}return r.$$set=ne=>{e=R(R({},e),x(ne)),t(15,l=Z(e,o)),"use"in ne&&t(1,u=ne.use),"element"in ne&&t(0,c=ne.element),"class"in ne&&t(2,f=ne.class),"override"in ne&&t(16,h=ne.override),"title"in ne&&t(3,d=ne.title),"color"in ne&&t(4,p=ne.color),"radius"in ne&&t(17,v=ne.radius),"loading"in ne&&t(5,b=ne.loading),"icon"in ne&&t(6,C=ne.icon),"iconSize"in ne&&t(7,L=ne.iconSize),"iconProps"in ne&&t(8,S=ne.iconProps),"withCloseButton"in ne&&t(9,P=ne.withCloseButton),"closeButtonLabel"in ne&&t(10,y=ne.closeButtonLabel),"closeButtonProps"in ne&&t(11,z=ne.closeButtonProps),"$$scope"in ne&&t(20,s=ne.$$scope)},r.$$.update=()=>{r.$$.dirty&196624&&t(13,{cx:n,classes:i}=rB({color:p,radius:v},{override:h,name:"Notification"}),n,(t(12,i),t(4,p),t(17,v),t(16,h)))},[c,u,f,d,p,b,C,L,S,P,y,z,i,n,J,l,h,v,a,te,s]}var hL=class extends H{constructor(e){super(),V(this,e,Use,qse,N,{use:1,element:0,class:2,override:16,title:3,color:4,radius:17,loading:5,icon:6,iconSize:7,iconProps:8,withCloseButton:9,closeButtonLabel:10,closeButtonProps:11})}},gg=hL;var sB=er((r,{align:e,bulletSize:t,lineWidth:n})=>({root:{paddingLeft:e==="left"?t/2+n/2:0,paddingRight:e==="left"?0:t/2+n/2}}));function Wse(r){let e,t=r[15].default,n=gt(t,r,r[17],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&131072)&&_t(n,t,i,i[17],e?pt(t,i[17],o,null):bt(i[17]),null)},i(i){e||(re(n,i),e=!0)},o(i){oe(n,i),e=!1},d(i){n&&n.d(i)}}}function Gse(r){let e,t,n,i=[{use:r[1]},{class:r[4](r[2],r[3].root)},r[6]];function o(a){r[16](a)}let l={$$slots:{default:[Wse]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&94?D(i,[s&2&&{use:a[1]},s&28&&{class:a[4](a[2],a[3].root)},s&64&&tt(a[6])]):{};s&131072&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}var mL="Timeline";function Yse(r,e,t){let n,i,o=["use","element","class","override","active","align","bulletSize","radius","color","lineWidth","reverseActive"],l=Z(e,o),a,{$$slots:s={},$$scope:u}=e,{use:c=[],element:f=void 0,class:h="",override:d={},active:p=-1,align:v="left",bulletSize:b=20,radius:C="xl",color:L="blue",lineWidth:S=4,reverseActive:P=!1}=e,y=lg({active:p,reverseActive:P,align:v,bulletSize:b,radius:C,color:L,lineWidth:S});K5(r,y,G=>t(18,a=G)),Sd(mL,y);function z(G){f=G,t(0,f)}return r.$$set=G=>{e=R(R({},e),x(G)),t(6,l=Z(e,o)),"use"in G&&t(1,c=G.use),"element"in G&&t(0,f=G.element),"class"in G&&t(2,h=G.class),"override"in G&&t(7,d=G.override),"active"in G&&t(8,p=G.active),"align"in G&&t(9,v=G.align),"bulletSize"in G&&t(10,b=G.bulletSize),"radius"in G&&t(11,C=G.radius),"color"in G&&t(12,L=G.color),"lineWidth"in G&&t(13,S=G.lineWidth),"reverseActive"in G&&t(14,P=G.reverseActive),"$$scope"in G&&t(17,u=G.$$scope)},r.$$.update=()=>{r.$$.dirty&32512&&vN(y,a={active:p,reverseActive:P,align:v,bulletSize:b,radius:C,color:L,lineWidth:S},a),r.$$.dirty&9856&&t(4,{cx:n,classes:i}=sB({align:v,bulletSize:b,lineWidth:S},{override:d,name:"Timeline"}),n,(t(3,i),t(9,v),t(10,b),t(13,S),t(7,d)))},[f,c,h,i,n,y,l,d,p,v,b,C,L,S,P,s,z,u]}var dL=class extends H{constructor(e){super(),V(this,e,Yse,Gse,N,{use:1,element:0,class:2,override:7,active:8,align:9,bulletSize:10,radius:11,color:12,lineWidth:13,reverseActive:14})}},gL=dL;var uB=er((r,{align:e,bulletSize:t,radius:n,color:i,lineVariant:o,lineWidth:l},a)=>{let s=n1(i).filled;return{root:{position:"relative",boxSizing:"border-box",color:r.colors.black.value,paddingLeft:e==="left"?r.space.xlPX.value:0,paddingRight:e==="right"?r.space.xlPX.value:0,textAlign:e,fontFamily:r.fonts.standard.value,darkMode:{color:r.fn.themeColor("dark",0)},"&:not(:last-of-type)::before":{display:"block"},"&:not(:first-of-type)":{marginTop:r.space.xlPX.value},"&::before":{boxSizing:"border-box",position:"absolute",top:0,bottom:`${-r.space.xl.value}px`,left:e==="left"?-l:"auto",right:e==="right"?-l:"auto",borderLeft:`${l}px ${o} ${r.fn.themeColor("gray",3)}`,content:'""',display:"none",darkMode:{borderLeft:`${l}px ${o} ${r.fn.themeColor("dark",4)}`}},"&.lineActive":{"&::before":{borderLeftColor:s.backgroundColor}},[`&.active .${a("bulletContainer")}`]:{borderColor:s.backgroundColor,backgroundColor:r.colors.white.value},[`&.active .${a("bulletContainerWithChild")}`]:{backgroundColor:s.backgroundColor,color:r.colors.white.value}},bulletContainer:{ref:a("bulletContainer"),boxSizing:"border-box",width:t,height:t,borderRadius:r.fn.radius(n),border:`${l}px solid ${r.fn.themeColor("gray",3)}`,backgroundColor:r.colors.white.value,position:"absolute",top:0,left:e==="left"?-t/2-l/2:"auto",right:e==="right"?-t/2-l/2:"auto",display:"flex",alignItems:"center",justifyContent:"center",color:r.colors.white.value,darkMode:{border:`${l}px solid ${r.fn.themeColor("dark",4)}`,backgroundColor:r.fn.themeColor("dark",7)}},bulletContainerWithChild:{ref:a("bulletContainerWithChild"),borderWidth:1,backgroundColor:r.fn.themeColor("gray",3),color:r.colors.black.value,darkMode:{backgroundColor:r.fn.themeColor("dark",4),color:r.fn.themeColor("dark",0)}},bullet:{},container:{},title:{fontWeight:500,lineHeight:1,marginBottom:`${+r.space.xs.value/2}px`,textAlign:e},content:{textAlign:e}}});var Kse=r=>({}),cB=r=>({});function fB(r){let e,t;return e=new D2({props:{icon:r[3],className:r[7].bullet,iconSize:r[4],color:r[5]}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,i){let o={};i&8&&(o.icon=n[3]),i&128&&(o.className=n[7].bullet),i&16&&(o.iconSize=n[4]),i&32&&(o.color=n[5]),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Jse(r){let e,t,n=r[3]&&fB(r);return{c(){n&&n.c(),e=U()},m(i,o){n&&n.m(i,o),A(i,e,o),t=!0},p(i,o){i[3]?n?(n.p(i,o),o&8&&re(n,1)):(n=fB(i),n.c(),re(n,1),n.m(e.parentNode,e)):n&&(wt(),oe(n,1,1,()=>{n=null}),yt())},i(i){t||(re(n),t=!0)},o(i){oe(n),t=!1},d(i){i&&M(e),n&&n.d(i)}}}function hB(r){let e,t;return e=new Pn({props:{class:r[7].title,$$slots:{default:[Xse]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,i){let o={};i&128&&(o.class=n[7].title),i&268435520&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Xse(r){let e;return{c(){e=Zt(r[6])},m(t,n){A(t,e,n)},p(t,n){n&64&&gn(e,t[6])},d(t){t&&M(e)}}}function Qse(r){let e,t,n,i,o,l,a,s,u,c=r[26].bullet,f=gt(c,r,r[28],cB),h=f||Jse(r),d=r[6]&&hB(r),p=r[26].default,v=gt(p,r,r[28],null);return{c(){e=Ge("div"),h&&h.c(),n=et(),i=Ge("div"),d&&d.c(),o=et(),l=Ge("div"),v&&v.c(),k(e,"class",t=r[8](r[7].bulletContainer,r[3]&&r[7].bulletContainerWithChild)),k(l,"class",a=r[7].content),k(i,"class",s=r[7].container)},m(b,C){A(b,e,C),h&&h.m(e,null),A(b,n,C),A(b,i,C),d&&d.m(i,null),B(i,o),B(i,l),v&&v.m(l,null),u=!0},p(b,C){f?f.p&&(!u||C&268435456)&&_t(f,c,b,b[28],u?pt(c,b[28],C,Kse):bt(b[28]),cB):h&&h.p&&(!u||C&184)&&h.p(b,u?C:-1),(!u||C&392&&t!==(t=b[8](b[7].bulletContainer,b[3]&&b[7].bulletContainerWithChild)))&&k(e,"class",t),b[6]?d?(d.p(b,C),C&64&&re(d,1)):(d=hB(b),d.c(),re(d,1),d.m(i,o)):d&&(wt(),oe(d,1,1,()=>{d=null}),yt()),v&&v.p&&(!u||C&268435456)&&_t(v,p,b,b[28],u?pt(p,b[28],C,null):bt(b[28]),null),(!u||C&128&&a!==(a=b[7].content))&&k(l,"class",a),(!u||C&128&&s!==(s=b[7].container))&&k(i,"class",s)},i(b){u||(re(h,b),re(d),re(v,b),u=!0)},o(b){oe(h,b),oe(d),oe(v,b),u=!1},d(b){b&&(M(e),M(n),M(i)),h&&h.d(b),d&&d.d(),v&&v.d(b)}}}function $se(r){let e,t,n,i=[{use:r[1]},{class:r[8](r[2],r[7].root,{lineActive:r[9],active:r[10]})},r[12]];function o(a){r[27](a)}let l={$$slots:{default:[Qse]},$$scope:{ctx:r}};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.element=r[0]),e=new fr({props:l}),je.push(()=>kt(e,"element",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&6022?D(i,[s&2&&{use:a[1]},s&1924&&{class:a[8](a[2],a[7].root,{lineActive:a[9],active:a[10]})},s&4096&&tt(a[12])]):{};s&268435960&&(u.$$scope={dirty:s,ctx:a}),!t&&s&1&&(t=!0,u.element=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){pe(e,a)}}}function e1e(r,e,t){let n,i,o,l,a,s,u,c,f,h=["use","element","class","override","active","align","bullet","bulletSize","radius","color","lineActive","lineVariant","lineWidth","title"],d=Z(e,h),p,{$$slots:v={},$$scope:b}=e,{use:C=[],element:L=void 0,class:S="",override:P={},active:y=void 0,align:z=void 0,bullet:G=void 0,bulletSize:J=void 0,radius:te=void 0,color:ne=void 0,lineActive:Q=void 0,lineVariant:ee="solid",lineWidth:se=void 0,title:Pe=void 0}=e,Te=X(mL);K5(r,Te,Ee=>t(25,p=Ee));function be(){if(!L)return;let Ee=L.parentNode.children,Re=Array.prototype.indexOf.call(Ee,L);t(10,n=y!==void 0?y:p.reverseActive?p.active>=Ee.length-Re-1:p.active>=Re),t(9,i=Q!==void 0?Q:p.reverseActive?p.active>=Ee.length-Re-1:p.active-1>=Re)}t1(()=>be());function rt(Ee){L=Ee,t(0,L)}return r.$$set=Ee=>{e=R(R({},e),x(Ee)),t(12,d=Z(e,h)),"use"in Ee&&t(1,C=Ee.use),"element"in Ee&&t(0,L=Ee.element),"class"in Ee&&t(2,S=Ee.class),"override"in Ee&&t(13,P=Ee.override),"active"in Ee&&t(14,y=Ee.active),"align"in Ee&&t(15,z=Ee.align),"bullet"in Ee&&t(3,G=Ee.bullet),"bulletSize"in Ee&&t(4,J=Ee.bulletSize),"radius"in Ee&&t(16,te=Ee.radius),"color"in Ee&&t(5,ne=Ee.color),"lineActive"in Ee&&t(17,Q=Ee.lineActive),"lineVariant"in Ee&&t(18,ee=Ee.lineVariant),"lineWidth"in Ee&&t(19,se=Ee.lineWidth),"title"in Ee&&t(6,Pe=Ee.title),"$$scope"in Ee&&t(28,b=Ee.$$scope)},r.$$.update=()=>{r.$$.dirty&16384&&t(10,n=y),r.$$.dirty&131072&&t(9,i=Q),r.$$.dirty&33587200&&t(24,o=z!==void 0?z:p.align),r.$$.dirty&33554464&&t(21,l=ne!==void 0?ne:p.color),r.$$.dirty&33619968&&t(22,a=te!==void 0?te:p.radius),r.$$.dirty&33554448&&t(23,s=J!==void 0?J:p.bulletSize),r.$$.dirty&34078720&&t(20,u=se!==void 0?se:p.lineWidth),r.$$.dirty&33554432&&be(),r.$$.dirty&32776192&&t(8,{cx:c,classes:f}=uB({align:o,bulletSize:s,radius:a,color:l,lineVariant:ee,lineWidth:u},{override:P,name:"TimelineItem"}),c,(t(7,f),t(24,o),t(23,s),t(22,a),t(21,l),t(18,ee),t(20,u),t(13,P),t(15,z),t(25,p),t(4,J),t(16,te),t(5,ne),t(19,se)))},[L,C,S,G,J,ne,Pe,f,c,i,n,Te,d,P,y,z,te,Q,ee,se,u,l,a,s,o,p,v,rt,b]}var pL=class extends H{constructor(e){super(),V(this,e,e1e,$se,N,{use:1,element:0,class:2,override:13,active:14,align:15,bullet:3,bulletSize:4,radius:16,color:5,lineActive:17,lineVariant:18,lineWidth:19,title:6})}},dB=pL;gL.Item=dB;var af=gL;var sf=class{constructor(e){this.plugin=e}async getAPIToken(){return await this.plugin.getAPIToken()}createAIThinkingNotice(){var o;let e=document.createDocumentFragment(),t=e.createEl("div",{attr:{id:"ai-breathing-icon",style:"background: white;"}}),n=new gg({target:t,props:{title:"AI is Thinking...",color:"green",loading:!0,withCloseButton:!1,override:{"border-width":"0px",color:"white !important"}}}),i=new Z2.Notice(e,0);return i.noticeEl.style.backgroundColor="white",(o=i.noticeEl.parentElement)==null||o.setCssStyles({backgroundColor:"white"}),{notice:i,notification:n}}createAIFeaturedImageNotice(){var o;let e=document.createDocumentFragment(),t=e.createEl("div",{attr:{id:"ai-breahting-icon",style:"background: white;"}}),n=new gg({target:t,props:{title:"AI is Generating Featured Images...",color:"green",loading:!0,withCloseButton:!1,override:{"border-width":"0px",color:"white !important"}}}),i=new Z2.Notice(e,0);return i.noticeEl.style.backgroundColor="white",(o=i.noticeEl.parentElement)==null||o.setCssStyles({backgroundColor:"white"}),i.noticeEl.createEl("hr",{attr:{id:"ai-featured-image-progress-hr",style:"margin:unset;"}}),{notice:i,notification:n}}async createQwenLLM(e="qwen-max",t=.8){let n=await this.getAPIToken();return new c6({model:e,temperature:t,alibabaApiKey:n})}async createOpenAICompatibleLLM(e="qwen-max",t=.8){let n=await this.getAPIToken();return new wd({model:e,apiKey:n,configuration:{baseURL:"https://dashscope.aliyuncs.com/compatible-mode/v1"},temperature:t})}async createOpenAIEmbeddings(e="text-embedding-v3",t=512){let n=await this.getAPIToken();return new yd({model:e,dimensions:t,apiKey:n,configuration:{baseURL:"https://dashscope.aliyuncs.com/compatible-mode/v1"}})}async withFetchPolyfill(e){let t=globalThis.fetch,n=globalThis.Headers,i=globalThis.Request,o=globalThis.Response;globalThis.fetch=js,globalThis.Headers=Ln,globalThis.Request=Jo,globalThis.Response=Nn;try{return await e()}finally{globalThis.fetch=t,globalThis.Headers=n,globalThis.Request=i,globalThis.Response=o}}cleanMarkdownContent(e){let t=e.replace(/^```.*?$(?:\n.*?)*^```$/gm,"");return t=t.replace(/%%[\s\S]*?%%/g,""),t=t.replace(/\[\[[\w-]+\.[a-z]{1,}\]\]/g,""),t}getDocumentContent(e){let t=(0,Z2.getFrontMatterInfo)(e);return{content:e.slice(t.contentStart),frontmatterInfo:t}}async shouldUpdateFile(e,t,n=1e3){try{let i=await this.plugin.app.vault.adapter.read(t),o=JSON.parse(i),l=this.plugin.app.vault.getAbstractFileByPath(e);if(l&&l instanceof Z2.TFile)return l.stat.mtime-o[0].metadata.lastModified>n}catch(i){console.error(i,t)}return!0}};var pg=class{constructor(e){this.plugin=e,this.aiUtils=new sf(e)}async streamLLM(e,t,n,i){let o=await this.aiUtils.createOpenAICompatibleLLM(this.plugin.settings.modelName,.8),l=(i||[]).map(p=>`${p.role==="user"?"Human":"Assistant"}: ${p.role==="assistant"?p.content.split(`

---
> [!personal-assistant-ai]- RAG References`)[0]:p.content}`).join(`
`),a=l?`${l}
Human: ${e}
Assistant:`:`Human: ${e}
Assistant:`,s=K9.fromMessages([D3.fromTemplate(`\u4F60\u662F\u4E00\u4E2A\u4E25\u683C\u6839\u636E\u77E5\u8BC6\u5E93\u7684\u5185\u5BB9\u56DE\u7B54\u95EE\u9898\u7684\u52A9\u624B\u3002

** \u77E5\u8BC6\u5E93\u5185\u5BB9\uFF1A**
{rag_content}
---
`),Y9.fromTemplate(`{input}
**\u6CE8\u610F**\uFF1A1. \u6700\u540E\u4EE5\u5217\u8868\u5F62\u5F0F\u9644\u4E0A\u4F60\u56DE\u7B54\u95EE\u9898\u4E2D\u5F15\u7528\u77E5\u8BC6\u5E93\u5185\u5BB9\u7684\u6765\u6E90\uFF0C\u5373\u77E5\u8BC6\u5E93\u5185\u5BB9\u4E2Dmetadata\u4E2D\u7684path\u5B57\u6BB5
2. \u8F93\u51FA\u683C\u5F0F\u4E3A\uFF1A
<AI \u56DE\u7B54>

---
> [!personal-assistant-ai]- RAG Referencs
> 
> 1. [[<metadata1.path>]]
> 2. [[<metadata2.path>]]
> 3. [[<metadata3.path>]]
> 4. ...
`)]),c=(await this.plugin.vss.searchSimilarity(e)).slice(0,3).map(p=>JSON.stringify(p,null,0)).join(`
---
`),h=await s.pipe(o).stream({rag_content:c,input:a},{signal:n}),d="";for await(let p of h)try{let v=p.content.toString();d+=v,t(d),await new Promise(b=>setTimeout(b,150))}catch(v){throw console.error("Error parsing chunk:",v),v}if(n!=null&&n.aborted)throw new DOMException("Aborted","AbortError")}};var GGe=require("obsidian");var Fu=require("obsidian"),Rj=require("@codemirror/state"),NGe=require("@codemirror/view");var mB="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var gB=(r=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(r|=0));for(;r--;)e+=mB[t[r]&63];return e};var xl=class{constructor(e){var t;Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=(t=e.metadata)!=null?t:{},this.id=e.id}};ti();var _g=class extends jt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,t){return this.transformDocuments(e)}};Y0();ti();ga();var bg=class extends jt{constructor(e){var t,n,i;super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e==null?void 0:e.callbacks,this.tags=(t=e==null?void 0:e.tags)!=null?t:[],this.metadata=(n=e==null?void 0:e.metadata)!=null?n:{},this.verbose=(i=e==null?void 0:e.verbose)!=null?i:!1}_getRelevantDocuments(e,t){throw new Error("Not implemented!")}async invoke(e,t){return this.getRelevantDocuments(e,Vt(t))}async getRelevantDocuments(e,t){let n=Vt(_m(t)),i=await cn.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),o=await(i==null?void 0:i.handleRetrieverStart(this.toJSON(),e,n.runId,void 0,void 0,void 0,n.runName));try{let l=await this._getRelevantDocuments(e,o);return await(o==null?void 0:o.handleRetrieverEnd(l)),l}catch(l){throw await(o==null?void 0:o.handleRetrieverError(l)),l}}};p9();var Fd=class extends bg{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){var t,n;super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=(t=e.k)!=null?t:this.k,this.searchType=(n=e.searchType)!=null?n:this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}async _getRelevantDocuments(e,t){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,{k:this.k,filter:this.filter,...this.searchKwargs},t==null?void 0:t.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,t==null?void 0:t.getChild("vectorstore"))}async addDocuments(e,t){return this.vectorStore.addDocuments(e,t)}},vg=class extends lo{constructor(e,t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}async delete(e){throw new Error("Not implemented.")}async similaritySearch(e,t=4,n=void 0,i=void 0){return(await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)).map(l=>l[0])}async similaritySearchWithScore(e,t=4,n=void 0,i=void 0){return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(e),t,n)}static fromTexts(e,t,n,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,n){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t,n,i,o,l){var a;if(typeof e=="number")return new Fd({vectorStore:this,k:e,filter:t,tags:[...i!=null?i:[],this._vectorstoreType()],metadata:o,verbose:l,callbacks:n});{let s={vectorStore:this,k:e==null?void 0:e.k,filter:e==null?void 0:e.filter,tags:[...(a=e==null?void 0:e.tags)!=null?a:[],this._vectorstoreType()],metadata:e==null?void 0:e.metadata,verbose:e==null?void 0:e.verbose,callbacks:e==null?void 0:e.callbacks,searchType:e==null?void 0:e.searchType};return(e==null?void 0:e.searchType)==="mmr"?new Fd({...s,searchKwargs:e.searchKwargs}):new Fd({...s})}}};function pB(r,e){let t=0,n=0,i=0;for(let o=0;o<r.length;o++)t+=r[o]*e[o],n+=r[o]*r[o],i+=e[o]*e[o];return t/(Math.sqrt(n)*Math.sqrt(i))}function _B(r,e){let t=0,n=0,i=0;for(let o=0;o<r.length;o++)t+=r[o]*e[o],n+=r[o]*r[o],i+=e[o]*e[o];return t/(Math.sqrt(n)*Math.sqrt(i))}function t1e(r,e,t){if(r.length===0||r[0].length===0||e.length===0||e[0].length===0)return[[]];if(r[0].length!==e[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[r.length,r[0].length]} and Y has shape ${[e.length,e[0].length]}.`);return r.map(n=>e.map(i=>t(n,i)).map(i=>Number.isNaN(i)?0:i))}function bB(r,e){return t1e(r,e,_B)}function vB(r,e,t=.5,n=4){if(Math.min(n,e.length)<=0)return[];let i=Array.isArray(r[0])?r:[r],o=bB(i,e)[0],l=r1e(o).maxIndex,a=[e[l]],s=[l];for(;s.length<Math.min(n,e.length);){let u=-1/0,c=-1,f=bB(e,a);o.forEach((h,d)=>{if(s.includes(d))return;let p=Math.max(...f[d]),v=t*h-(1-t)*p;v>u&&(u=v,c=d)}),a.push(e[c]),s.push(c)}return s}function r1e(r){if(r.length===0)return{maxIndex:-1,maxValue:NaN};let e=r[0],t=0;for(let n=1;n<r.length;n+=1)r[n]>e&&(t=n,e=r[n]);return{maxIndex:t,maxValue:e}}var uf=class r extends vg{_vectorstoreType(){return"memory"}constructor(e,{similarity:t,...n}={}){super(e,n),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=t!=null?t:pB}async addDocuments(e){let t=e.map(({pageContent:n})=>n);return this.addVectors(await this.embeddings.embedDocuments(t),e)}async addVectors(e,t){let n=e.map((i,o)=>({content:t[o].pageContent,embedding:i,metadata:t[o].metadata,id:t[o].id}));this.memoryVectors=this.memoryVectors.concat(n)}async _queryVectors(e,t,n){let i=l=>{if(!n)return!0;let a=new xl({metadata:l.metadata,pageContent:l.content,id:l.id});return n(a)};return this.memoryVectors.filter(i).map((l,a)=>({similarity:this.similarity(e,l.embedding),index:a,metadata:l.metadata,content:l.content,embedding:l.embedding,id:l.id})).sort((l,a)=>l.similarity>a.similarity?-1:0).slice(0,t)}async similaritySearchVectorWithScore(e,t,n){return(await this._queryVectors(e,t,n)).map(l=>[new xl({metadata:l.metadata,pageContent:l.content,id:l.id}),l.similarity])}async maxMarginalRelevanceSearch(e,t){var a;let n=await this.embeddings.embedQuery(e),i=await this._queryVectors(n,(a=t.fetchK)!=null?a:20,t.filter),o=i.map(s=>s.embedding);return vB(n,o,t.lambda,t.k).map(s=>new xl({metadata:i[s].metadata,pageContent:i[s].content,id:i[s].id}))}static async fromTexts(e,t,n,i){let o=[];for(let l=0;l<e.length;l+=1){let a=Array.isArray(t)?t[l]:t,s=new xl({pageContent:e[l],metadata:a});o.push(s)}return r.fromDocuments(o,n,i)}static async fromDocuments(e,t,n){let i=new this(t,n);return await i.addDocuments(e),i}static async fromExistingIndex(e,t){return new this(e,t)}};var _L=class extends _g{constructor(e){var t,n,i,o;if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","document_transformers","text_splitters"]}),Object.defineProperty(this,"chunkSize",{enumerable:!0,configurable:!0,writable:!0,value:1e3}),Object.defineProperty(this,"chunkOverlap",{enumerable:!0,configurable:!0,writable:!0,value:200}),Object.defineProperty(this,"keepSeparator",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lengthFunction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chunkSize=(t=e==null?void 0:e.chunkSize)!=null?t:this.chunkSize,this.chunkOverlap=(n=e==null?void 0:e.chunkOverlap)!=null?n:this.chunkOverlap,this.keepSeparator=(i=e==null?void 0:e.keepSeparator)!=null?i:this.keepSeparator,this.lengthFunction=(o=e==null?void 0:e.lengthFunction)!=null?o:l=>l.length,this.chunkOverlap>=this.chunkSize)throw new Error("Cannot have chunkOverlap >= chunkSize")}async transformDocuments(e,t={}){return this.splitDocuments(e,t)}splitOnSeparator(e,t){let n;if(t)if(this.keepSeparator){let i=t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&");n=e.split(new RegExp(`(?=${i})`))}else n=e.split(t);else n=e.split("");return n.filter(i=>i!=="")}async createDocuments(e,t=[],n={}){let i=t.length>0?t:[...Array(e.length)].map(()=>({})),{chunkHeader:o="",chunkOverlapHeader:l="(cont'd) ",appendChunkOverlapHeader:a=!1}=n,s=new Array;for(let u=0;u<e.length;u+=1){let c=e[u],f=1,h=null,d=-1;for(let p of await this.splitText(c)){let v=o,b=c.indexOf(p,d+1);if(h===null){let P=this.numberOfNewLines(c,0,b);f+=P}else{let P=d+await this.lengthFunction(h);if(P<b){let y=this.numberOfNewLines(c,P,b);f+=y}else if(P>b){let y=this.numberOfNewLines(c,b,P);f-=y}a&&(v+=l)}let C=this.numberOfNewLines(p),L=i[u].loc&&typeof i[u].loc=="object"?{...i[u].loc}:{};L.lines={from:f,to:f+C};let S={...i[u],loc:L};v+=p,s.push(new xl({pageContent:v,metadata:S})),f+=C,h=p,d=b}}return s}numberOfNewLines(e,t,n){return(e.slice(t,n).match(/\n/g)||[]).length}async splitDocuments(e,t={}){let n=e.filter(l=>l.pageContent!==void 0),i=n.map(l=>l.pageContent),o=n.map(l=>l.metadata);return this.createDocuments(i,o,t)}joinDocs(e,t){let n=e.join(t).trim();return n===""?null:n}async mergeSplits(e,t){let n=[],i=[],o=0;for(let a of e){let s=await this.lengthFunction(a);if(o+s+i.length*t.length>this.chunkSize&&(o>this.chunkSize&&console.warn(`Created a chunk of size ${o}, +
which is longer than the specified ${this.chunkSize}`),i.length>0)){let u=this.joinDocs(i,t);for(u!==null&&n.push(u);o>this.chunkOverlap||o+s+i.length*t.length>this.chunkSize&&o>0;)o-=await this.lengthFunction(i[0]),i.shift()}i.push(a),o+=s}let l=this.joinDocs(i,t);return l!==null&&n.push(l),n}};var Cg=class r extends _L{static lc_name(){return"RecursiveCharacterTextSplitter"}constructor(e){var t,n;super(e),Object.defineProperty(this,"separators",{enumerable:!0,configurable:!0,writable:!0,value:[`

`,`
`," ",""]}),this.separators=(t=e==null?void 0:e.separators)!=null?t:this.separators,this.keepSeparator=(n=e==null?void 0:e.keepSeparator)!=null?n:!0}async _splitText(e,t){let n=[],i=t[t.length-1],o;for(let u=0;u<t.length;u+=1){let c=t[u];if(c===""){i=c;break}if(e.includes(c)){i=c,o=t.slice(u+1);break}}let l=this.splitOnSeparator(e,i),a=[],s=this.keepSeparator?"":i;for(let u of l)if(await this.lengthFunction(u)<this.chunkSize)a.push(u);else{if(a.length){let c=await this.mergeSplits(a,s);n.push(...c),a=[]}if(!o)n.push(u);else{let c=await this._splitText(u,o);n.push(...c)}}if(a.length){let u=await this.mergeSplits(a,s);n.push(...u)}return n}async splitText(e){return this._splitText(e,this.separators)}static fromLanguage(e,t){return new r({...t,separators:r.getSeparatorsForLanguage(e)})}static getSeparatorsForLanguage(e){if(e==="cpp")return[`
class `,`
void `,`
int `,`
float `,`
double `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="go")return[`
func `,`
var `,`
const `,`
type `,`
if `,`
for `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="java")return[`
class `,`
public `,`
protected `,`
private `,`
static `,`
if `,`
for `,`
while `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="js")return[`
function `,`
const `,`
let `,`
var `,`
class `,`
if `,`
for `,`
while `,`
switch `,`
case `,`
default `,`

`,`
`," ",""];if(e==="php")return[`
function `,`
class `,`
if `,`
foreach `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="proto")return[`
message `,`
service `,`
enum `,`
option `,`
import `,`
syntax `,`

`,`
`," ",""];if(e==="python")return[`
class `,`
def `,`
	def `,`

`,`
`," ",""];if(e==="rst")return[`
===
`,`
---
`,`
***
`,`
.. `,`

`,`
`," ",""];if(e==="ruby")return[`
def `,`
class `,`
if `,`
unless `,`
while `,`
for `,`
do `,`
begin `,`
rescue `,`

`,`
`," ",""];if(e==="rust")return[`
fn `,`
const `,`
let `,`
if `,`
while `,`
for `,`
loop `,`
match `,`
const `,`

`,`
`," ",""];if(e==="scala")return[`
class `,`
object `,`
def `,`
val `,`
var `,`
if `,`
for `,`
while `,`
match `,`
case `,`

`,`
`," ",""];if(e==="swift")return[`
func `,`
class `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do `,`
switch `,`
case `,`

`,`
`," ",""];if(e==="markdown")return[`
## `,`
### `,`
#### `,`
##### `,`
###### `,"```\n\n",`

***

`,`

---

`,`

___

`,`

`,`
`," ",""];if(e==="latex")return[`
\\chapter{`,`
\\section{`,`
\\subsection{`,`
\\subsubsection{`,`
\\begin{enumerate}`,`
\\begin{itemize}`,`
\\begin{description}`,`
\\begin{list}`,`
\\begin{quote}`,`
\\begin{quotation}`,`
\\begin{verse}`,`
\\begin{verbatim}`,`
\\begin{align}`,"$$","$",`

`,`
`," ",""];if(e==="html")return["<body>","<div>","<p>","<br>","<li>","<h1>","<h2>","<h3>","<h4>","<h5>","<h6>","<span>","<table>","<tr>","<td>","<th>","<ul>","<ol>","<header>","<footer>","<nav>","<head>","<style>","<script>","<meta>","<title>"," ",""];if(e==="sol")return[`
pragma `,`
using `,`
contract `,`
interface `,`
library `,`
constructor `,`
type `,`
function `,`
event `,`
modifier `,`
error `,`
struct `,`
enum `,`
if `,`
for `,`
while `,`
do while `,`
assembly `,`

`,`
`," ",""];throw new Error(`Language ${e} is not supported.`)}};var wg=class extends Cg{constructor(e){super({...e,separators:Cg.getSeparatorsForLanguage("markdown")})}};var oS=require("obsidian"),Pj=wr(Aj());var oi={PluginAST:'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 172 172" style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="currentColor"><path d="M53.75,21.5c-8.27246,0 -14.86523,5.20703 -18.39257,12.09375c-8.39844,1.76368 -15.91504,6.84473 -19.31641,15.03321c-6.50879,15.5371 -16.04102,41.53027 -16.04102,64.24804c0,20.70215 16.92285,37.625 37.625,37.625c14.90723,0 27.75683,-8.86035 33.84571,-21.5h29.05859c6.08886,12.63965 18.93847,21.5 33.8457,21.5c20.70215,0 37.625,-16.92285 37.625,-37.625c0,-8.44043 -2.60351,-19.44239 -5.87891,-30.90625c-3.31739,-11.50585 -7.39062,-23.26367 -10.58203,-32.08203c-3.10742,-8.44043 -10.41406,-13.85742 -18.77051,-15.99902c-3.48534,-7.05469 -10.12011,-12.3877 -18.51855,-12.3877c-7.68457,0 -13.73145,4.61915 -17.51074,10.75h-29.47852c-3.77929,-6.13085 -9.82617,-10.75 -17.51074,-10.75zM53.75,32.25c4.70313,0 8.6084,3.02344 10.07813,7.18067l1.25977,3.56933h41.82422l1.25976,-3.56933c1.46973,-4.15723 5.375,-7.18067 10.07813,-7.18067c4.8291,0 8.77636,3.19141 10.16211,7.5166l1.00781,3.14942l3.27539,0.50391c5.87891,0.92382 10.70801,4.61914 12.76563,10.1621c2.81348,7.72656 6.21484,17.7627 9.19629,27.71484c-5.87891,-3.77929 -12.80761,-6.04687 -20.28223,-6.04687c-14.90723,0 -27.75683,8.86035 -33.8457,21.5h-29.05859c-6.08888,-12.63965 -18.93848,-21.5 -33.84571,-21.5c-8.18848,0 -15.74707,2.72949 -21.91992,7.22266c3.06543,-11.21192 7.01269,-21.87793 10.24609,-29.68848c2.22558,-5.375 7.22266,-8.86034 13.10156,-9.49023l3.44335,-0.37793l1.0918,-3.2754c1.42773,-4.2832 5.375,-7.39062 10.1621,-7.39062zM37.625,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM134.375,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM74.7041,107.5h22.59179c-0.25195,1.76368 -0.5459,3.52734 -0.5459,5.375c0,1.84766 0.29395,3.61133 0.5459,5.375h-22.59179c0.25195,-1.76367 0.5459,-3.52734 0.5459,-5.375c0,-1.84766 -0.29395,-3.61132 -0.5459,-5.375z"></path></g></g></svg>',PluginAST_STATUSBAR:'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 172 172"><g fill="currentColor" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g id="svg-animate" fill="currentColor"><path d="M53.75,21.5c-8.27246,0 -14.86523,5.20703 -18.39257,12.09375c-8.39844,1.76368 -15.91504,6.84473 -19.31641,15.03321c-6.50879,15.5371 -16.04102,41.53027 -16.04102,64.24804c0,20.70215 16.92285,37.625 37.625,37.625c14.90723,0 27.75683,-8.86035 33.84571,-21.5h29.05859c6.08886,12.63965 18.93847,21.5 33.8457,21.5c20.70215,0 37.625,-16.92285 37.625,-37.625c0,-8.44043 -2.60351,-19.44239 -5.87891,-30.90625c-3.31739,-11.50585 -7.39062,-23.26367 -10.58203,-32.08203c-3.10742,-8.44043 -10.41406,-13.85742 -18.77051,-15.99902c-3.48534,-7.05469 -10.12011,-12.3877 -18.51855,-12.3877c-7.68457,0 -13.73145,4.61915 -17.51074,10.75h-29.47852c-3.77929,-6.13085 -9.82617,-10.75 -17.51074,-10.75zM53.75,32.25c4.70313,0 8.6084,3.02344 10.07813,7.18067l1.25977,3.56933h41.82422l1.25976,-3.56933c1.46973,-4.15723 5.375,-7.18067 10.07813,-7.18067c4.8291,0 8.77636,3.19141 10.16211,7.5166l1.00781,3.14942l3.27539,0.50391c5.87891,0.92382 10.70801,4.61914 12.76563,10.1621c2.81348,7.72656 6.21484,17.7627 9.19629,27.71484c-5.87891,-3.77929 -12.80761,-6.04687 -20.28223,-6.04687c-14.90723,0 -27.75683,8.86035 -33.8457,21.5h-29.05859c-6.08888,-12.63965 -18.93848,-21.5 -33.84571,-21.5c-8.18848,0 -15.74707,2.72949 -21.91992,7.22266c3.06543,-11.21192 7.01269,-21.87793 10.24609,-29.68848c2.22558,-5.375 7.22266,-8.86034 13.10156,-9.49023l3.44335,-0.37793l1.0918,-3.2754c1.42773,-4.2832 5.375,-7.39062 10.1621,-7.39062zM37.625,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM134.375,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM74.7041,107.5h22.59179c-0.25195,1.76368 -0.5459,3.52734 -0.5459,5.375c0,1.84766 0.29395,3.61133 0.5459,5.375h-22.59179c0.25195,-1.76367 0.5459,-3.52734 0.5459,-5.375c0,-1.84766 -0.29395,-3.61132 -0.5459,-5.375z"></path></g></g></svg>',PluginAST_PREVIEW:'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 172 172"><g fill="blue" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="5,5" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g id="svg-animate" fill="#2fcc70ee" fill-rule="nonzero"><path d="M53.75,21.5c-8.27246,0 -14.86523,5.20703 -18.39257,12.09375c-8.39844,1.76368 -15.91504,6.84473 -19.31641,15.03321c-6.50879,15.5371 -16.04102,41.53027 -16.04102,64.24804c0,20.70215 16.92285,37.625 37.625,37.625c14.90723,0 27.75683,-8.86035 33.84571,-21.5h29.05859c6.08886,12.63965 18.93847,21.5 33.8457,21.5c20.70215,0 37.625,-16.92285 37.625,-37.625c0,-8.44043 -2.60351,-19.44239 -5.87891,-30.90625c-3.31739,-11.50585 -7.39062,-23.26367 -10.58203,-32.08203c-3.10742,-8.44043 -10.41406,-13.85742 -18.77051,-15.99902c-3.48534,-7.05469 -10.12011,-12.3877 -18.51855,-12.3877c-7.68457,0 -13.73145,4.61915 -17.51074,10.75h-29.47852c-3.77929,-6.13085 -9.82617,-10.75 -17.51074,-10.75zM53.75,32.25c4.70313,0 8.6084,3.02344 10.07813,7.18067l1.25977,3.56933h41.82422l1.25976,-3.56933c1.46973,-4.15723 5.375,-7.18067 10.07813,-7.18067c4.8291,0 8.77636,3.19141 10.16211,7.5166l1.00781,3.14942l3.27539,0.50391c5.87891,0.92382 10.70801,4.61914 12.76563,10.1621c2.81348,7.72656 6.21484,17.7627 9.19629,27.71484c-5.87891,-3.77929 -12.80761,-6.04687 -20.28223,-6.04687c-14.90723,0 -27.75683,8.86035 -33.8457,21.5h-29.05859c-6.08888,-12.63965 -18.93848,-21.5 -33.84571,-21.5c-8.18848,0 -15.74707,2.72949 -21.91992,7.22266c3.06543,-11.21192 7.01269,-21.87793 10.24609,-29.68848c2.22558,-5.375 7.22266,-8.86034 13.10156,-9.49023l3.44335,-0.37793l1.0918,-3.2754c1.42773,-4.2832 5.375,-7.39062 10.1621,-7.39062zM37.625,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM134.375,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM74.7041,107.5h22.59179c-0.25195,1.76368 -0.5459,3.52734 -0.5459,5.375c0,1.84766 0.29395,3.61133 0.5459,5.375h-22.59179c0.25195,-1.76367 0.5459,-3.52734 0.5459,-5.375c0,-1.84766 -0.29395,-3.61132 -0.5459,-5.375z"></path></g></g></svg>',PluginAST_STAT:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bar-chart-3"><path d="M3 3v18h18"/><path stroke-width="3" stroke="green" d="M18 17V9"/><path stroke-width="3" stroke="red" d="M13 17V5"/><path stroke-width="3" stroke="goldenrod" d="M8 17v-3"/></svg>',SWITCH_ON_STATUS:'<svg width="99px" height="99px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="green" fill-rule="nonzero"><path d="M18.25,3 C19.7687831,3 21,4.23121694 21,5.75 L21,18.25 C21,19.7687831 19.7687831,21 18.25,21 L5.75,21 C4.23121694,21 3,19.7687831 3,18.25 L3,5.75 C3,4.23121694 4.23121694,3 5.75,3 L18.25,3 Z M18.25,4.5 L5.75,4.5 C5.05964406,4.5 4.5,5.05964406 4.5,5.75 L4.5,18.25 C4.5,18.9403559 5.05964406,19.5 5.75,19.5 L18.25,19.5 C18.9403559,19.5 19.5,18.9403559 19.5,18.25 L19.5,5.75 C19.5,5.05964406 18.9403559,4.5 18.25,4.5 Z M10,14.4393398 L16.4696699,7.96966991 C16.7625631,7.6767767 17.2374369,7.6767767 17.5303301,7.96966991 C17.7965966,8.23593648 17.8208027,8.65260016 17.6029482,8.94621165 L17.5303301,9.03033009 L10.5303301,16.0303301 C10.2640635,16.2965966 9.84739984,16.3208027 9.55378835,16.1029482 L9.46966991,16.0303301 L6.46966991,13.0303301 C6.1767767,12.7374369 6.1767767,12.2625631 6.46966991,11.9696699 C6.73593648,11.7034034 7.15260016,11.6791973 7.44621165,11.8970518 L7.53033009,11.9696699 L10,14.4393398 L16.4696699,7.96966991 L10,14.4393398 Z"></path></g></g></svg>',SWITCH_OFF_STATUS:'<svg width="99px" height="99px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="red" fill-rule="nonzero"><path d="M5.75,3 L18.25,3 C19.7687831,3 21,4.23121694 21,5.75 L21,18.25 C21,19.7687831 19.7687831,21 18.25,21 L5.75,21 C4.23121694,21 3,19.7687831 3,18.25 L3,5.75 C3,4.23121694 4.23121694,3 5.75,3 Z M5.75,4.5 C5.05964406,4.5 4.5,5.05964406 4.5,5.75 L4.5,18.25 C4.5,18.9403559 5.05964406,19.5 5.75,19.5 L18.25,19.5 C18.9403559,19.5 19.5,18.9403559 19.5,18.25 L19.5,5.75 C19.5,5.05964406 18.9403559,4.5 18.25,4.5 L5.75,4.5 Z"></path></g></g></svg>',PLUGIN_UPDATE_STATUS:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"><path fill='red' d="M2,7H0V3C0,1.35,1.35,0,3,0H7V2H3c-.55,0-1,.45-1,1V7Zm0,14v-4H0v4c0,1.65,1.35,3,3,3H7v-2H3c-.55,0-1-.45-1-1Zm20,0c0,.55-.45,1-1,1h-4v2h4c1.65,0,3-1.35,3-3v-4h-2v4Zm-4-10.08v-.92h-4.33l-1.18-4.5h-.97l-1.18,4.5H6v.92l3.32,1.85-1.3,4.08,.72,.54,3.27-2.53,3.26,2.52,.75-.52-1.33-4.03,3.3-1.91ZM17,0V8l7-4L17,0Z"/></svg>`,PLUGIN_UPDATED_STATUS:'<svg xmlns="http://www.w3.org/2000/svg" width="99px" height="99px" viewBox="0 -960 960 960" width="48"><path fill="green" d="M229.911-160Q201-160 180.5-180.589q-20.5-20.588-20.5-49.5Q160-259 180.589-279.5q20.588-20.5 49.5-20.5Q259-300 279.5-279.411q20.5 20.588 20.5 49.5Q300-201 279.411-180.5q-20.588 20.5-49.5 20.5Zm335 0Q536-160 515.5-180.589q-20.5-20.588-20.5-49.5Q495-259 515.589-279.5q20.588-20.5 49.5-20.5Q594-300 614.5-279.411q20.5 20.588 20.5 49.5Q635-201 614.411-180.5q-20.588 20.5-49.5 20.5Zm-170-165Q366-325 345.5-345.589q-20.5-20.588-20.5-49.5Q325-424 345.589-444.5q20.588-20.5 49.5-20.5Q424-465 444.5-444.411q20.5 20.588 20.5 49.5Q465-366 444.411-345.5q-20.588 20.5-49.5 20.5Zm335 0Q701-325 680.5-345.589q-20.5-20.588-20.5-49.5Q660-424 680.589-444.5q20.588-20.5 49.5-20.5Q759-465 779.5-444.411q20.5 20.588 20.5 49.5Q800-366 779.411-345.5q-20.588 20.5-49.5 20.5Zm-500-170Q201-495 180.5-515.589q-20.5-20.588-20.5-49.5Q160-594 180.589-614.5q20.588-20.5 49.5-20.5Q259-635 279.5-614.411q20.5 20.588 20.5 49.5Q300-536 279.411-515.5q-20.588 20.5-49.5 20.5Zm335 0Q536-495 515.5-515.589q-20.5-20.588-20.5-49.5Q495-594 515.589-614.5q20.588-20.5 49.5-20.5Q594-635 614.5-614.411q20.5 20.588 20.5 49.5Q635-536 614.411-515.5q-20.588 20.5-49.5 20.5Zm-170-165Q366-660 345.5-680.589q-20.5-20.588-20.5-49.5Q325-759 345.589-779.5q20.588-20.5 49.5-20.5Q424-800 444.5-779.411q20.5 20.588 20.5 49.5Q465-701 444.411-680.5q-20.588 20.5-49.5 20.5Zm335 0Q701-660 680.5-680.589q-20.5-20.588-20.5-49.5Q660-759 680.589-779.5q20.588-20.5 49.5-20.5Q759-800 779.5-779.411q20.5 20.588 20.5 49.5Q800-701 779.411-680.5q-20.588 20.5-49.5 20.5Z"/></svg>',PLUGIN_AI_BOT:'<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bot-icon lucide-bot"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>',PLUGIN_AI_BRAIN:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-brain-icon lucide-brain"><path d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"/><path d="M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"/><path d="M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4"/><path d="M17.599 6.5a3 3 0 0 0 .399-1.375"/><path d="M6.003 5.125A3 3 0 0 0 6.401 6.5"/><path d="M3.477 10.896a4 4 0 0 1 .585-.396"/><path d="M19.938 10.5a4 4 0 0 1 .585.396"/><path d="M6 18a4 4 0 0 1-1.967-.516"/><path d="M19.967 17.484A4 4 0 0 1 18 18"/></svg>'},Tj=()=>Math.floor(Math.random()*Date.now()).toString(6),Oj=async r=>(await(0,oS.requestUrl)({url:r})).arrayBuffer;var lS=async(r,e)=>{let t=new Pj.default;t=await t.loadAsync(r);let n=new RegExp(`.*${e}$`),i=t.file(n);return i?await i[0].async("string"):null},nS=16,iS=new TextEncoder,Lce=new TextDecoder,Ece=1e3,Sce=iS.encode("XHWnDAT6ehMVY2zD"),mp="personal-assistant-plugin-api-token";var Vf=class{async deriveKey(e){let t=iS.encode(e),n=await crypto.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",hash:{name:"SHA-256"},iterations:Ece,salt:Sce},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async encryptToBytes(e,t){let n=await this.deriveKey(t),i=iS.encode(e),o=crypto.getRandomValues(new Uint8Array(nS)),l=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:o},n,i)),a=new Uint8Array(o.byteLength+l.byteLength);return a.set(o,0),a.set(l,o.byteLength),a}convertToString(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}async encryptToBase64(e,t){let n=await this.encryptToBytes(e,t);return btoa(this.convertToString(n))}stringToArray(e){let t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n));return new Uint8Array(t)}async decryptFromBytes(e,t){try{let n=e.slice(0,nS),i=e.slice(nS),o=await this.deriveKey(t),l=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},o,i);return Lce.decode(l)}catch(n){return console.error(n),null}}async decryptFromBase64(e,t){try{let n=this.stringToArray(atob(e));return await this.decryptFromBytes(n,t)}catch(n){return console.error(n),null}}},gp=(r,e)=>r.plugins.manifests.hasOwnProperty(e)&&r.plugins.enabledPlugins.has(e);var ju=class{constructor(e){this.plugin=e,this.aiUtils=new sf(e)}async generateSummary(e,t){let{notice:n,notification:i}=this.aiUtils.createAIThinkingNotice();try{let o=e.getValue(),{content:l}=this.aiUtils.getDocumentContent(o),a=await this.callQwenLLM(l,this.getSummaryPrompt());if(a.length<=0){new Fu.Notice("AI is not available.");return}let{summary:s,keywords:u}=JSON.parse(a);t.file&&this.plugin.app.fileManager.processFrontMatter(t.file,c=>{c["AI Summary"]=s;let f=c.tags||[];c.tags=f.concat(u)})}finally{n.hide()}}async generateTags(e,t,n){let i=e.getValue(),{content:o}=this.aiUtils.getDocumentContent(i),l=Object.keys(n.metadataCache.getTags()),a=this.getTagsPrompt(o,l),s=await this.callQwenLLM(o,a);return JSON.parse(s)}async generateFeaturedImage(e,t,n){let i=t.editor.cm,{notice:o,notification:l}=this.aiUtils.createAIFeaturedImageNotice();try{let a=e.getValue(),{content:s}=this.aiUtils.getDocumentContent(a),u=o.noticeEl.createEl("div",{attr:{id:"ai-featured-image-progress-1",style:"background: white;color: black;margin-top: 4px;"}});u.setText("    \u{1F6A7}   Agent Generating Prompt...");let c=await this.callQwenLLM(s,this.getImageDescriptionPrompt());if(c.length<=0){l.$destroy(),o.hide(),new Fu.Notice("AI is not available.");return}u.setText("    \u2705   Generating Prompt Success!");let f=o.noticeEl.createEl("div",{attr:{id:"ai-featured-image-progress-2",style:"background: white;color: black;margin-top: 4px;"}});f.setText("    \u{1F6A7}   Agent Generating Images...");let h=await this.generateImage(c);f.setText("    \u2705   Generating Images Success!");let d=o.noticeEl.createEl("div",{attr:{id:"ai-featured-image-progress-3",style:"background: white;color: black;margin-top: 4px;"}});if(d.setText("    \u{1F6A7}   Agent Downloading Images..."),h){let p=await this.getImage(h);if(p){let v=Rj.StateEffect.define({map:(z,G)=>({from:G.mapPos(z.from),to:G.mapPos(z.to,1),id:z.id})}),b=gB(),C;n.exists?C=i.state.doc.lineAt(n.contentStart):C=i.state.doc.lineAt(0);let L="",S=this.plugin.settings.featuredImagePath,P="";gp(this.plugin.app,"image-converter")&&(P="|480");for(let z=0;z<p.length;z++){let G=p[z].url,J=await this.downloadImageToVault(this.plugin.app,G,S);J&&(L+=`![[${J}${P}]]
> `)}d.setText("    \u2705   Downloading Images Success!"),L+=`

`,i.dispatch({changes:[{from:C.from,insert:`
>[!personal-assistant]+ Featured Images
> ${L}`}],effects:[v.of({from:C.to,to:C.to,id:b})]}),o.noticeEl.createEl("div",{attr:{id:"ai-featured-image-progress-4",style:"background: white;color: black;margin-top: 4px;"}}).setText("    \u2705   Generating Featured Images Success!"),l.$destroy(),o.hide()}}else{l.$destroy(),o.hide(),new Fu.Notice("AI feautured image generation failed.");return}}finally{o.hide()}}async vectorizeDocument(e,t){let n=await this.aiUtils.createOpenAIEmbeddings(),i=new wg({chunkSize:4e3,chunkOverlap:80}),o=await this.plugin.app.vault.adapter.read(e.path),{content:l}=this.aiUtils.getDocumentContent(o),a=this.aiUtils.cleanMarkdownContent(l);if(a.length===0)return!1;let u=(await i.splitText(a)).map(v=>new xl({pageContent:v,metadata:{path:e.path,created:e.stat.ctime,lastModified:e.stat.mtime}})),c=this.plugin.join(t,e.path.split(e.name)[0]);await this.plugin.app.vault.adapter.exists(c)||await this.plugin.app.vault.adapter.mkdir(c);let f=this.plugin.join(t,e.path+".json");if(!await this.aiUtils.shouldUpdateFile(e.path,f))return this.plugin.log(`skip ${f}`),!1;let d=new uf(n);await this.aiUtils.withFetchPolyfill(async()=>{if(u.length>3)for(let v=0;v<u.length;v+=3){let b=u.slice(v,v+3);await d.addDocuments(b),await new Promise(C=>setTimeout(C,3e3))}else await d.addDocuments(u)});let p=JSON.stringify(d.memoryVectors,null,0);return await this.plugin.app.vault.adapter.write(f,p),!0}async searchSimilarDocuments(e,t){if(!t)return new Fu.Notice("Please wait for the vector store to be loaded."),[];let n=await t.similaritySearchWithScore(e,8),i=[];for(let[o,l]of n)this.plugin.log(`* [SIM=${l.toFixed(3)}] [${JSON.stringify(o.metadata)}]`),i.push({score:l,doc:o});return i}async callQwenLLM(e,t){let n=await this.aiUtils.createQwenLLM(this.plugin.settings.modelName,.8),i=new ma(t),o=new Qn(`**\u6587\u5B57\u5185\u5BB9\uFF1A**${e}`),l=[i,o],a=await this.aiUtils.withFetchPolyfill(async()=>await n.invoke(l));return this.plugin.log(a.content),a.content.toString()}getSummaryPrompt(){return`\u4F60\u662F\u4E00\u4E2A\u4E13\u4E1A\u7F16\u8F91\uFF0C\u64C5\u957F\u6587\u5B57\u603B\u7ED3\u3001\u6982\u62EC\u7B49\u5DE5\u4F5C\u3002
**\u4F60\u7684\u4EFB\u52A1\u662F\uFF1A**
1. \u8DDF\u6839\u636E\u7ED9\u51FA\u7684\u6587\u5B57\u5185\u5BB9\u8FDB\u884C\u6982\u62EC\u603B\u7ED3
2. \u6839\u636E\u6587\u5B57\u5185\u5BB9\u63D0\u70BC\u6700\u80FD\u4F53\u73B0\u6587\u5B57\u5185\u5BB9\u7684\u5173\u952E\u8BCD

**\u8981\u6C42\uFF1A**
- \u6982\u62EC\u603B\u7ED3\u7684\u5B57\u6570\u8981\u6C42\u4E0D\u8D85\u8FC7120\u5B57
- \u63D0\u70BC\u7684\u5173\u952E\u8BCD\u6570\u76EE\u8981\u6C42\u662F3\u4E2A\u5DE6\u53F3
- \u63D0\u70BC\u7684\u5173\u952E\u8BCD\u8981\u6C42\u662F\u82F1\u6587
- \u5173\u952E\u8BCD\u53EA\u80FD\u4F7F\u7528\uFF1A\u82F1\u6587\u5B57\u6BCD\u3001\u6570\u5B57\u3001\u8FDE\u5B57\u7B26\uFF0C\u4E0D\u53EF\u4EE5\u4F7F\u7528\u5176\u4ED6\u5B57\u7B26
- \u8F93\u51FA\u7ED3\u679C\u7684\u683C\u5F0F\u4E3A\uFF1A
{
  "summary": "...",
  "keywords": ["...", "..."]
}`}getTagsPrompt(e,t){return`\u4F60\u662F\u4E00\u4E2A\u4E13\u4E1A\u7F16\u8F91\uFF0C\u64C5\u957F\u6587\u5B57\u603B\u7ED3\u3001\u6982\u62EC\u7B49\u5DE5\u4F5C\u3002
**\u4F60\u7684\u4EFB\u52A1\u662F\uFF1A**
\u5BF9\u7ED9\u51FA\u7684\u6587\u5B57\u5185\u5BB9\u8FDB\u884C\u5206\u6790\u548C\u603B\u7ED3\uFF0C\u5728\u7ED9\u51FA\u7684\u6807\u7B7E\u5217\u8868\u4E2D\u627E\u52303\u4E2A\u6700\u80FD\u8868\u8FBE\u6587\u5B57\u5185\u5BB9\u7684\u6807\u7B7E

**\u8981\u6C42\uFF1A**
- \u7ED9\u51FA\u7684\u6807\u7B7E\u5185\u5BB9\u5982\u679C\u80FD\u5728\u7ED9\u5B9A\u7684\u5217\u8868\u4E2D\u627E\u5230\uFF0C\u5219\u8981\u6C42\u8F93\u51FA\u5185\u5BB9\u8DDF\u5217\u8868\u4E00\u81F4
- \u5982\u679C\u6700\u80FD\u4F53\u73B0\u6587\u5B57\u5185\u5BB9\u7684\u5173\u952E\u8BCD\u4E0D\u5728\u7ED9\u5B9A\u7684\u5217\u8868\u4E2D\uFF0C\u53EF\u4EE5\u81EA\u5DF1\u589E\u52A0\u6807\u7B7E\u5185\u5BB9\uFF0C\u6807\u7B7E\u7684\u683C\u5F0F\u5FC5\u987B\u662F\uFF1A'''#\u5173\u952E\u8BCD'''
- \u8F93\u51FA\u7ED3\u679C\u7684\u683C\u5F0F\u4E3A\uFF1A
["#\u5173\u952E\u8BCD1", "#\u5173\u952E\u8BCD2", "#\u5173\u952E\u8BCD3", ...]`}getImageDescriptionPrompt(){return`\u4F60\u662F\u4E00\u4E2A\u7CBE\u901A\u6587\u5B57\u7F16\u8F91\u548C\u56FE\u7247\u5904\u7406\u7684\u4E13\u5BB6\uFF0C\u4F60\u4F1A\u6839\u636E\u6211\u7ED9\u51FA\u7684\u6587\u5B57\u5185\u5BB9\u751F\u6210\u4E00\u6BB5\u56FE\u7247\u63CF\u8FF0\uFF0C\u8BE5\u56FE\u7247\u4F1A\u4F5C\u4E3A\u7ED9\u51FA\u7684\u6587\u5B57\u5185\u5BB9\u7684\u7279\u8272\u56FE\u7247\uFF08\u7279\u8272\u56FE\u7247featured image\u4EE3\u8868\u535A\u5BA2\u6216\u9875\u9762\u7684\u6587\u5B57\u5185\u5BB9\uFF0C\u60C5\u7EEA\u6216\u4E3B\u9898\uFF0C\u5E76\u5728\u6574\u4E2A\u7F51\u7AD9\u4E2D\u4F7F\u7528\uFF09\u3002
## \u4EFB\u52A1\u8981\u6C42\uFF1A
1. \u8BE5\u63CF\u8FF0\u80FD\u591F\u5E2E\u52A9AI\u7406\u89E3\u5E76\u751F\u6210\u4E0E\u6587\u5B57\u5185\u5BB9\u76F8\u5173\u7684\u56FE\u7247\uFF1B
2. \u8BE5\u63CF\u8FF0\u80FD\u591F\u6982\u62EC\u51FA\u6587\u5B57\u5185\u5BB9\u4E2D\u7684\u4E3B\u8981\u4FE1\u606F\u548C\u4E3B\u9898\uFF0C\u4E3A\u4E86\u8BA9\u56FE\u7247\u66F4\u6709\u521B\u610F\u6027\uFF0C\u4F60\u53EF\u9002\u5F53\u7684\u589E\u52A0\u5929\u9A6C\u884C\u7A7A\u7684\u5143\u7D20\u548C\u63CF\u8FF0\uFF1B
3. \u4F60\u4F1A\u4ECE\u56FE\u7247\u4E13\u5BB6\u7684\u89D2\u5EA6\u601D\u8003\uFF0C\u63CF\u8FF0\u4E2D\u5C3D\u91CF\u5305\u62EC\u56FE\u7247\u4E2D\u5FC3\u4E3B\u9898\uFF0C\u73AF\u5883\u4FE1\u606F\uFF0C\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u4F4D\u7F6E\u3001\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u5927\u5C0F\u3001\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u989C\u8272\u3001\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u5F62\u72B6\u3001\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u6750\u8D28\u3001\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u98CE\u683C\u3001\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u6570\u91CF\u3001\u56FE\u7247\u4E2D\u7684\u7269\u4F53\u5173\u7CFB\u7B49\u7B49\uFF1B
4. \u540C\u65F6\u4F60\u8FD8\u4F1A\u7ED9\u51FA\u56FE\u7247\u827A\u672F\u98CE\u683C\u7684\u63CF\u8FF0\uFF0C\u5177\u4F53\u56FE\u7247\u827A\u672F\u98CE\u683C\u4F60\u53EF\u4EE5\u6839\u636E\u81EA\u5DF1\u5BF9\u7ED9\u51FA\u7684\u6587\u5B57\u5185\u5BB9\u7684\u7406\u89E3\u81EA\u884C\u51B3\u5B9A\uFF1B
5. \u4F60\u4F1A\u4ECE\u56FE\u7247\u4E13\u5BB6\u7684\u89D2\u5EA6\u601D\u8003\uFF0C\u7ED9\u51FA\u4E00\u4E9B\u7528\u4E8EAI\u751F\u6210\u56FE\u7247\u65F6\u53EF\u4EE5\u5229\u7528\u7684\u6280\u672F\u53C2\u6570\u4ECE\u800C\u8BA9\u56FE\u7247\u53D8\u5F97\u66F4\u52A0\u7F8E\u89C2\uFF0C\u4F60\u53EF\u4EE5\u6839\u636E\u81EA\u8EAB\u5BF9\u56FE\u7247\u4EE5\u53CA\u7F8E\u89C2\u7684\u7406\u89E3\u81EA\u884C\u9009\u62E9\u9700\u8981\u8BBE\u7F6E\u7684\u56FE\u7247\u6280\u672F\u53C2\u6570\u4F8B\u5982\u8FD1\u666F\u955C\u5934\u3001\u534A\u8EAB\u7279\u5199\u3001\u9510\u5316\u7B49\u7B49\uFF1B

## \u8F93\u51FA\u683C\u5F0F\uFF1A
\u9700\u8981\u751F\u6210\u7684\u56FE\u7247\u63CF\u8FF0\u683C\u5F0F\u4E3A\uFF1A\u4E3B\u4F53\uFF08\u4E3B\u4F53\u63CF\u8FF0\uFF09+ \u573A\u666F\uFF08\u573A\u666F\u63CF\u8FF0\uFF09+ \u98CE\u683C\uFF08\u5B9A\u4E49\u98CE\u683C\uFF09+ \u955C\u5934\u8BED\u8A00 + \u6C1B\u56F4\u8BCD + \u7EC6\u8282\u4FEE\u9970

- \u4E3B\u4F53\u63CF\u8FF0\uFF1A\u786E\u5B9A\u4E3B\u4F53\u6E05\u6670\u5730\u63CF\u8FF0\u56FE\u50CF\u4E2D\u7684\u4E3B\u4F53\uFF0C\u5305\u62EC\u5176\u7279\u5F81\u3001\u52A8\u4F5C\u7B49\u3002\u4F8B\u5982\uFF0C\u201C\u4E00\u4E2A\u53EF\u7231\u768410\u5C81\u4E2D\u56FD\u5C0F\u5973\u5B69\uFF0C\u7A7F\u7740\u7EA2\u8272\u8863\u670D\u201D\u3002
- \u573A\u666F\u63CF\u8FF0\uFF1A\u573A\u666F\u63CF\u8FF0\u662F\u5BF9\u4E3B\u4F53\u6240\u5904\u73AF\u5883\u7279\u5F81\u7EC6\u8282\u7684\u63CF\u8FF0\uFF0C\u53EF\u901A\u8FC7\u5F62\u5BB9\u8BCD\u6216\u77ED\u53E5\u5217\u4E3E\u3002
- \u5B9A\u4E49\u98CE\u683C\uFF1A\u5B9A\u4E49\u98CE\u683C\u662F\u660E\u786E\u5730\u63CF\u8FF0\u56FE\u50CF\u6240\u5E94\u5177\u6709\u7684\u7279\u5B9A\u827A\u672F\u98CE\u683C\u3001\u8868\u73B0\u624B\u6CD5\u6216\u89C6\u89C9\u7279\u5F81\u3002\u4F8B\u5982\uFF0C\u201C\u6C34\u5F69\u98CE\u683C\u201D\u3001\u201C\u6F2B\u753B\u98CE\u683C\u201D\u5E38\u89C1\u98CE\u683C\u5316\u8BE6\u89C1\u4E0B\u65B9\u63D0\u793A\u8BCD\u8BCD\u5178\u3002
- \u955C\u5934\u8BED\u8A00\uFF1A\u955C\u5934\u8BED\u8A00\u5305\u542B\u666F\u522B\u3001\u89C6\u89D2\u7B49\uFF0C\u5E38\u89C1\u955C\u5934\u8BED\u8A00\u8BE6\u89C1\u63D0\u793A\u8BCD\u8BCD\u5178\u3002
- \u6C1B\u56F4\u8BCD\uFF1A\u6C1B\u56F4\u8BCD\u662F\u5BF9\u9884\u671F\u753B\u9762\u6C1B\u56F4\u7684\u63CF\u8FF0\uFF0C\u4F8B\u5982\u201C\u68A6\u5E7B\u201D\u3001\u201C\u5B64\u72EC\u201D\u3001\u201C\u5B8F\u4F1F\u201D\uFF0C\u5E38\u89C1\u6C1B\u56F4\u8BCD\u8BE6\u89C1\u63D0\u793A\u8BCD\u8BCD\u5178\u3002
- \u7EC6\u8282\u4FEE\u9970\uFF1A\u7EC6\u8282\u4FEE\u9970\u662F\u5BF9\u753B\u9762\u8FDB\u4E00\u6B65\u7684\u7CBE\u7EC6\u5316\u548C\u4F18\u5316\uFF0C\u4EE5\u589E\u5F3A\u56FE\u50CF\u7684\u7EC6\u8282\u8868\u73B0\u529B\u3001\u4E30\u5BCC\u5EA6\u548C\u7F8E\u611F\u3002\u4F8B\u5982\u201C\u5149\u6E90\u7684\u4F4D\u7F6E\u201D\u3001\u201C\u9053\u5177\u642D\u914D\u201D\u3001\u201C\u73AF\u5883\u7EC6\u8282\u201D\uFF0C\u201C\u9AD8\u5206\u8FA8\u7387\u201D\u7B49\u3002

**\u56FE\u7247\u63CF\u8FF0\u793A\u4F8B**\uFF1A\u7531\u7F8A\u6BDB\u6BE1\u5236\u6210\u7684\u5927\u718A\u732B\uFF0C\u5934\u6234\u5927\u6A90\u5E3D\uFF0C\u7A7F\u7740\u84DD\u8272\u8B66\u670D\u9A6C\u7532\uFF0C\u624E\u7740\u8170\u5E26\uFF0C\u643A\u5E26\u8B66\u68B0\u88C5\u5907\uFF0C\u6234\u7740\u84DD\u8272\u624B\u5957\uFF0C\u7A7F\u7740\u76AE\u978B\uFF0C\u5927\u6B65\u5954\u8DD1\u59FF\u6001\uFF0C\u6BDB\u6BE1\u6548\u679C\uFF0C\u5468\u56F4\u662F\u52A8\u7269\u738B\u56FD\u57CE\u5E02\u8857\u9053\u5546\u6237\uFF0C\u9AD8\u7EA7\u6EE4\u955C\uFF0C\u8DEF\u706F\uFF0C\u52A8\u7269\u738B\u56FD\uFF0C\u5947\u5999\u7AE5\u8DA3\uFF0C\u61A8\u6001\u53EF\u63AC\uFF0C\u591C\u665A\uFF0C\u660E\u4EAE\uFF0C\u81EA\u7136\uFF0C\u53EF\u7231\uFF0C4K\uFF0C\u6BDB\u6BE1\u6750\u8D28\uFF0C\u6444\u5F71\u955C\u5934\uFF0C\u5C45\u4E2D\u6784\u56FE\uFF0C\u6BDB\u6BE1\u98CE\u683C\uFF0C\u76AE\u514B\u65AF\u98CE\u683C\uFF0C\u9006\u5149\u3002

## \u63D0\u793A\u8BCD\u8BCD\u5178\uFF1A
1. \u666F\u522B

| \u666F\u522B\u7C7B\u578B | \u63D0\u793A\u8BCD\u793A\u4F8B |
|------|-------------|
| \u7279\u5199   | \u7279\u5199\u955C\u5934 | \u9AD8\u6E05\u76F8\u673A\uFF0C\u60C5\u7EEA\u5927\u7247\uFF0C\u65E5\u843D\uFF0C\u7279\u5199\u4EBA\u50CF\u3002 |
| \u8FD1\u666F   | \u8FD1\u666F\u955C\u5934 | \u8FD1\u666F\u955C\u5934\uFF0C18\u5C81\u7684\u4E2D\u56FD\u5973\u5B69\uFF0C\u53E4\u4EE3\u670D\u9970\uFF0C\u5706\u8138\uFF0C\u770B\u7740\u955C\u5934\uFF0C\u6C11\u65CF\u4F18\u96C5\u7684\u670D\u88C5\uFF0C\u5546\u4E1A\u6444\u5F71\uFF0C\u5BA4\u5916\uFF0C\u7535\u5F71\u7EA7\u5149\u7167\uFF0C\u534A\u8EAB\u7279\u5199\uFF0C\u7CBE\u81F4\u7684\u6DE1\u5986\uFF0C\u9510\u5229\u7684\u8FB9\u7F18\u3002|
| \u4E2D\u666F   | \u4E2D\u666F\u955C\u5934 | \u7535\u5F71\u65F6\u5C1A\u9B45\u529B\u6444\u5F71\uFF0C\u5E74\u8F7B\u4E9A\u6D32\u5973\u5B50\uFF0C\u4E2D\u56FD\u82D7\u65CF\u5973\u5B69\uFF0C\u5706\u8138\uFF0C\u770B\u7740\u955C\u5934\uFF0C\u6C11\u65CF\u6DF1\u8272\u4F18\u96C5\u7684\u670D\u88C5\uFF0C\u4E2D\u5E7F\u89D2\u955C\u5934\uFF0C\u9633\u5149\u660E\u5A9A\uFF0C\u4E4C\u6258\u90A6\u5F0F\uFF0C\u7531\u9AD8\u6E05\u76F8\u673A\u62CD\u6444\u3002|
| \u8FDC\u666F   | \u8FDC\u666F\u955C\u5934 | \u5C55\u793A\u4E86\u8FDC\u666F\u955C\u5934\uFF0C\u5728\u58EE\u4E3D\u7684\u96EA\u5C71\u80CC\u666F\u4E0B\uFF0C\u4E24\u4E2A\u5C0F\u5C0F\u7684\u4EBA\u5F71\u7AD9\u5728\u8FDC\u5904\u5C71\u9876\uFF0C\u80CC\u5BF9\u7740\u955C\u5934\uFF0C\u9759\u9759\u5730\u89C2\u8D4F\u7740\u65E5\u843D\u7684\u7F8E\u666F\u3002\u5915\u9633\u7684\u4F59\u6656\u6D12\u5728\u96EA\u5C71\u4E0A\uFF0C\u5448\u73B0\u51FA\u4E00\u7247\u91D1\u9EC4\u8272\u7684\u5149\u8F89\uFF0C\u4E0E\u851A\u84DD\u7684\u5929\u7A7A\u5F62\u6210\u9C9C\u660E\u5BF9\u6BD4\u3002\u4E24\u4EBA\u4EFF\u4F5B\u88AB\u8FD9\u58EE\u89C2\u7684\u81EA\u7136\u666F\u8C61\u6240\u5438\u5F15\uFF0C\u6574\u4E2A\u753B\u9762\u5145\u6EE1\u4E86\u5B81\u9759\u4E0E\u548C\u8C10\u3002|

2. \u89C6\u89D2

| \u89C6\u89D2\u7C7B\u578B | \u63D0\u793A\u8BCD\u793A\u4F8B |
|------|-------------|
| \u5E73\u89C6   | \u5E73\u89C6\u89C6\u89D2 | \u56FE\u50CF\u5C55\u793A\u4E86\u4ECE\u5E73\u89C6\u89C6\u89D2\u6355\u6349\u5230\u7684\u8349\u5730\u666F\u8C61\uFF0C\u4E00\u7FA4\u7F8A\u60A0\u95F2\u5730\u5728\u7EFF\u8335\u8335\u7684\u8349\u5730\u4E0A\u4F4E\u5934\u89C5\u98DF\uFF0C\u5B83\u4EEC\u7684\u7F8A\u6BDB\u5728\u65E9\u6668\u5FAE\u5F31\u7684\u9633\u5149\u7167\u8000\u4E0B\u5448\u73B0\u51FA\u6E29\u6696\u7684\u91D1\u8272\u5149\u6CFD\uFF0C\u5F62\u6210\u7F8E\u4E3D\u7684\u5149\u5F71\u6548\u679C\u3002|
| \u4FEF\u89C6   | \u4FEF\u89C6\u89C6\u89D2 | \u6211\u4ECE\u7A7A\u4E2D\u4FEF\u77B0\u51B0\u6E56\uFF0C\u4E2D\u5FC3\u6709\u4E00\u8258\u5C0F\u8239\uFF0C\u5468\u56F4\u73AF\u7ED5\u7740\u6F29\u6DA1\u56FE\u6848\u548C\u5145\u6EE1\u6D3B\u529B\u7684\u84DD\u8272\u6D77\u6C34\u3002\u87BA\u65CB\u6DF1\u6E0A\uFF0C\u8BE5\u573A\u666F\u662F\u4ECE\u4E0A\u65B9\u4EE5\u81EA\u4E0A\u800C\u4E0B\u7684\u89C6\u89D2\u62CD\u6444\u7684\uFF0C\u5C55\u793A\u4E86\u590D\u6742\u7684\u7EC6\u8282\uFF0C\u4F8B\u5982\u8868\u9762\u7684\u6CE2\u7EB9\u548C\u79EF\u96EA\u8986\u76D6\u7684\u5730\u9762\u4E0B\u7684\u5C42\u3002\u773A\u671B\u51B0\u51B7\u7684\u5E7F\u9614\u5929\u5730\u3002\u8425\u9020\u51FA\u4E00\u79CD\u4EE4\u4EBA\u656C\u754F\u7684\u5B81\u9759\u611F\u3002|
| \u4EF0\u89C6   | \u4EF0\u89C6\u89C6\u89D2 | \u5C55\u793A\u4E86\u70ED\u5E26\u5730\u533A\u7684\u58EE\u89C2\u666F\u8C61\uFF0C\u9AD8\u5927\u7684\u6930\u5B50\u6811\u5982\u540C\u53C2\u5929\u5DE8\u4EBA\u822C\u8038\u7ACB\uFF0C\u679D\u53F6\u8302\u76DB\uFF0C\u76F4\u6307\u84DD\u5929\u3002\u955C\u5934\u91C7\u7528\u4EF0\u89C6\u89C6\u89D2\uFF0C\u8BA9\u89C2\u4F17\u4EFF\u4F5B\u7F6E\u8EAB\u6811\u4E0B\uFF0C\u611F\u53D7\u5927\u81EA\u7136\u7684\u96C4\u4F1F\u4E0E\u751F\u673A\u3002\u9633\u5149\u900F\u8FC7\u6811\u53F6\u95F4\u9699\u6D12\u843D\uFF0C\u5F62\u6210\u6591\u9A73\u5149\u5F71\uFF0C\u589E\u6DFB\u4E86\u51E0\u5206\u795E\u79D8\u4E0E\u6D6A\u6F2B\u3002\u6574\u4E2A\u753B\u9762\u5145\u6EE1\u4E86\u70ED\u5E26\u98CE\u60C5\uFF0C\u8BA9\u4EBA\u4EFF\u4F5B\u80FD\u95FB\u5230\u6930\u9999\uFF0C\u611F\u53D7\u5230\u5FAE\u98CE\u62C2\u9762\u7684\u60EC\u610F\u3002|
| \u822A\u62CD   | \u822A\u62CD\u89C6\u89D2 | \u5C55\u793A\u4E86\u5927\u96EA\uFF0C\u6751\u5E84\uFF0C\u9053\u8DEF\uFF0C\u706F\u706B\uFF0C\u6811\u6728\u3002\u822A\u62CD\u89C6\u89D2\uFF0C\u903C\u771F\u6548\u679C\u3002|

3. \u955C\u5934

| \u955C\u5934\u7C7B\u578B | \u63D0\u793A\u8BCD\u793A\u4F8B|
|------|------------|
| \u5FAE\u8DDD   | \u5FAE\u8DDD\u955C\u5934 | cherries, carbonated water, macro, professional color grading, clean sharp focus, commercial high quality, magazine winning photography, hyper realistic, uhd, 8K |
| \u8D85\u5E7F\u89D2  | \u8D85\u5E7F\u89D2\u955C\u5934 | \u8D85\u5E7F\u89D2\u955C\u5934\uFF0C\u78A7\u6D77\u84DD\u5929\u4E0B\u7684\u6D77\u5C9B\uFF0C\u9633\u5149\u900F\u8FC7\u6811\u53F6\u7F1D\u9699\uFF0C\u6D12\u4E0B\u6591\u9A73\u5149\u5F71\u3002|
| \u957F\u7126   | \u957F\u7126\u955C\u5934 | \u5C55\u793A\u4E86\u957F\u7126\u955C\u5934\u4E0B\uFF0C\u4E00\u53EA\u730E\u8C79\u5728\u90C1\u90C1\u8471\u8471\u7684\u68EE\u6797\u4E2D\u7AD9\u7ACB\uFF0C\u9762\u5BF9\u955C\u5934\uFF0C\u80CC\u666F\u88AB\u5DE7\u5999\u5730\u865A\u5316\uFF0C\u730E\u8C79\u7684\u9762\u90E8\u6210\u4E3A\u753B\u9762\u7684\u7EDD\u5BF9\u7126\u70B9\u3002\u9633\u5149\u900F\u8FC7\u6811\u53F6\u7684\u7F1D\u9699\uFF0C\u6D12\u5728\u730E\u8C79\u8EAB\u4E0A\uFF0C\u5F62\u6210\u6591\u9A73\u7684\u5149\u5F71\u6548\u679C\uFF0C\u589E\u5F3A\u4E86\u89C6\u89C9\u51B2\u51FB\u529B\u3002|
| \u9C7C\u773C   | \u9C7C\u773C\u955C\u5934 | \u5C55\u793A\u4E86\u5728\u9C7C\u773C\u955C\u5934\u7684\u7279\u6B8A\u89C6\u89D2\u4E0B\uFF0C\u4E00\u4F4D\u5973\u6027\u7AD9\u7ACB\u7740\u5E76\u76F4\u89C6\u955C\u5934\u7684\u573A\u666F\u3002\u5979\u7684\u5F62\u8C61\u5728\u753B\u9762\u4E2D\u5FC3\u88AB\u5938\u5F20\u5730\u653E\u5927\uFF0C\u56DB\u5468\u5219\u5448\u73B0\u51FA\u5F3A\u70C8\u7684\u626D\u66F2\u6548\u679C\uFF0C\u8425\u9020\u51FA\u4E00\u79CD\u72EC\u7279\u7684\u89C6\u89C9\u51B2\u51FB\u529B\u3002|

4. \u98CE\u683C

| \u98CE\u683C\u7C7B\u578B | \u63D0\u793A\u8BCD\u793A\u4F8B|
|------|------------|
| 3D\u5361\u901A | \u7F51\u7403\u5973\u8FD0\u52A8\u5458\uFF0C\u77ED\u53D1\uFF0C\u767D\u8272\u7F51\u7403\u670D\uFF0C\u9ED1\u8272\u77ED\u88E4\uFF0C\u4FA7\u8EAB\u56DE\u7403\uFF0C3D\u5361\u901A\u98CE\u683C\u3002|
| \u5E9F\u571F\u98CE  | \u706B\u661F\u4E0A\u7684\u57CE\u5E02\uFF0C\u5E9F\u571F\u98CE\u683C\u3002|
| \u70B9\u5F69\u753B  | \u4E00\u5EA7\u767D\u8272\u7684\u53EF\u7231\u7684\u5C0F\u623F\u5B50\uFF0C\u8305\u8349\u623F\uFF0C\u4E00\u7247\u88AB\u96EA\u8986\u76D6\u7684\u8349\u539F\uFF0C\u5927\u80C6\u4F7F\u7528\u70B9\u5F69\u8272\u753B\uFF0C\u83AB\u5948\u611F\uFF0C\u6E05\u6670\u7684\u7B14\u89E6\uFF0C\u8FB9\u7F18\u6A21\u7CCA\uFF0C\u539F\u59CB\u7684\u8FB9\u7F18\u7EB9\u7406\uFF0C\u4F4E\u9971\u548C\u5EA6\u7684\u989C\u8272\uFF0C\u4F4E\u5BF9\u6BD4\u5EA6\uFF0C\u83AB\u5170\u8FEA\u8272\u3002|
| \u8D85\u73B0\u5B9E  | \u6DF1\u7070\u8272\u5927\u6D77\u4E2D\u4E00\u6761\u7C89\u7EA2\u8272\u7684\u53D1\u5149\u6CB3\u6D41\uFF0C\u5177\u6709\u6781\u7B80\u3001\u7F8E\u4E3D\u548C\u5BA1\u7F8E\u7684\u6C1B\u56F4\uFF0C\u5177\u6709\u8D85\u73B0\u5B9E\u98CE\u683C\u7684\u7535\u5F71\u706F\u5149\u3002|
| \u6C34\u5F69   | \u6D45\u6C34\u5F69\uFF0C\u5496\u5561\u9986\u5916\uFF0C\u660E\u4EAE\u7684\u767D\u8272\u80CC\u666F\uFF0C\u66F4\u5C11\u7EC6\u8282\uFF0C\u68A6\u5E7B\uFF0C\u5409\u535C\u529B\u5DE5\u4F5C\u5BA4\u3002|
| \u7C98\u571F   | \u7C98\u571F\u98CE\u683C\uFF0C\u84DD\u8272\u6BDB\u8863\u7684\u5C0F\u7537\u5B69\uFF0C\u68D5\u8272\u5377\u53D1\uFF0C\u6DF1\u84DD\u8272\u8D1D\u96F7\u5E3D\uFF0C\u753B\u677F\uFF0C\u6237\u5916\uFF0C\u6D77\u8FB9\uFF0C\u534A\u8EAB\u7167\u3002|
| \u5199\u5B9E   | \u7BEE\u5B50\uFF0C\u8461\u8404\uFF0C\u91CE\u9910\u5E03\uFF0C\u8D85\u5199\u5B9E\u9759\u7269\u6444\u5F71\uFF0C\u5FAE\u8DDD\u955C\u5934\uFF0C\u4E01\u8FBE\u5C14\u6548\u5E94\u3002|
| \u9676\u74F7   | \u5C55\u793A\u4E86\u9AD8\u7EC6\u8282\u7684\u74F7\u5668\u5C0F\u72D7\uFF0C\u5B83\u9759\u9759\u5730\u8EBA\u5728\u684C\u4E0A\uFF0C\u8116\u5B50\u4E0A\u7CFB\u7740\u4E00\u4E2A\u7CBE\u81F4\u7684\u94C3\u94DB\u3002\u5C0F\u72D7\u7684\u6BCF\u4E00\u6839\u6BDB\u53D1\u90FD\u88AB\u7EC6\u817B\u5730\u523B\u753B\u51FA\u6765\uFF0C\u773C\u775B\u3001\u9F3B\u5B50\u548C\u5634\u5DF4\u7684\u7EC6\u8282\u6829\u6829\u5982\u751F\u3002|
| 3D   | \u4E2D\u56FD\u9F99\uFF0C\u53EF\u7231\u7684\u4E2D\u56FD\u9F99\u7761\u5728\u767D\u4E91\u4E0A\uFF0C\u8FF7\u4EBA\u7684\u82B1\u56ED\uFF0C\u5728\u6668\u96FE\u4E2D\uFF0C\u7279\u5199\uFF0C\u6B63\u9762\uFF0C3D\u7ACB\u4F53\uFF0CC4D\u6E32\u67D3\uFF0C32k\u8D85\u9AD8\u6E05\uFF0C32k UHD\uFF0C\u4E2D\u56FD\u670B\u514B\uFF0C32k UHD\uFF0C\u52A8\u7269\u96D5\u50CF\uFF0C\u8F9B\u70F7\u503C\u6E32\u67D3\uFF0C\u8D85\u9AD8\u6E05\u6670\u5EA6\u3002 |
| \u6C34\u58A8   | \u5170\u82B1\uFF0C\u6C34\u58A8\u753B\uFF0C\u7559\u767D\uFF0C\u610F\u5883\uFF0C\u5434\u51A0\u4E2D\u98CE\u683C\uFF0C\u7EC6\u817B\u7684\u7B14\u89E6\uFF0C\u5BA3\u7EB8\u7684\u7EB9\u7406\u3002|
| \u6298\u7EB8   | \u6298\u7EB8\u6770\u4F5C\uFF0C\u725B\u76AE\u7EB8\u6750\u8D28\u7684\u718A\u732B\uFF0C\u68EE\u6797\u80CC\u666F\uFF0C\u4E2D\u666F\uFF0C\u6781\u7B80\u4E3B\u4E49\uFF0C\u80CC\u5149\uFF0C\u6700\u4F73\u54C1\u8D28\u3002|
| \u5DE5\u7B14   | \u6668\u66E6\u4E2D\uFF0C\u4E00\u679D\u5BD2\u6885\u50B2\u7ACB\u96EA\u4E2D\uFF0C\u82B1\u74E3\u7EC6\u817B\u5982\u4E1D\uFF0C\u9732\u73E0\u8F7B\u6302\uFF0C\u5C55\u73B0\u5DE5\u7B14\u753B\u4E4B\u7CBE\u81F4\u7F8E|
| \u56FD\u98CE\u6C34\u58A8 | \u56FD\u98CE\u6C34\u58A8\u98CE\u683C\uFF0C\u4E00\u4E2A\u957F\u957F\u9ED1\u53D1\u7684\u7537\u4EBA\uFF0C\u91D1\u8272\u7684\u53D1\u7C2A\uFF0C\u98DE\u821E\u7740\u91D1\u8272\u7684\u8774\u8776\uFF0C\u767D\u8272\u7684\u670D\u88C5\uFF0C\u9AD8\u7EC6\u8282\uFF0C\u9AD8\u8D28\u91CF\uFF0C\u6DF1\u84DD\u8272\u80CC\u666F\uFF0C\u80CC\u666F\u4E2D\u6709\u82E5\u9690\u82E5\u73B0\u7684\u6C34\u58A8\u7AF9\u6797\u3002|

5. \u5149\u7EBF

| \u5149\u7EBF\u7C7B\u578B | \u63D0\u793A\u8BCD\u793A\u4F8B |
|------|-------------|
| \u81EA\u7136\u5149  | \u592A\u9633\u5149\u3001\u6708\u5149\u3001\u661F\u5149 | \u56FE\u50CF\u5C55\u793A\u4E86\u65E9\u6668\u7684\u9633\u5149\u6D12\u5728\u4E00\u7247\u8302\u5BC6\u68EE\u6797\u7684\u5730\u9762\u4E0A\uFF0C\u94F6\u767D\u8272\u7684\u5149\u8292\u7A7F\u900F\u6811\u68A2\uFF0C\u5F62\u6210\u6591\u9A73\u9646\u79BB\u7684\u5149\u5F71\uFF0C\u8425\u9020\u51FA\u4E00\u79CD\u5199\u5B9E\u800C\u9759\u8C27\u7684\u6C1B\u56F4\u3002|
| \u9006\u5149   | \u9006\u5149 | \u5C55\u793A\u4E86\u5728\u9006\u5149\u73AF\u5883\u4E0B\uFF0C\u6A21\u7279\u8F6E\u5ED3\u7EBF\u6761\u66F4\u52A0\u5206\u660E\uFF0C\u91D1\u8272\u7684\u5149\u7EBF\u4EE5\u53CA\u4E1D\u7EF8\u73AF\u7ED5\u5728\u6A21\u7279\u5468\u56F4\uFF0C\u5F62\u6210\u68A6\u5E7B\u822C\u7684\u5149\u73AF\u6548\u679C\u3002\u6574\u4E2A\u573A\u666F\u5145\u6EE1\u827A\u672F\u6C14\u606F\uFF0C\u5C55\u73B0\u4E86\u9AD8\u6C34\u51C6\u7684\u6444\u5F71\u6280\u672F\u548C\u521B\u610F\u3002|
| \u9713\u8679\u706F  | \u9713\u8679\u706F | \u96E8\u540E\u7684\u57CE\u5E02\u8857\u666F\uFF0C\u9713\u8679\u706F\u5149\u5728\u6E7F\u6DA6\u7684\u5730\u9762\u4E0A\u53CD\u5C04\u51FA\u7EDA\u4E3D\u591A\u5F69\u7684\u5149\u8292\u3002\u884C\u4EBA\u6491\u4F1E\u5306\u5306\u8D70\u8FC7\uFF0C\u8F66\u8F86\u5728\u5149\u602A\u9646\u79BB\u7684\u8857\u9053\u4E0A\u7F13\u7F13\u884C\u9A76\uFF0C\u7559\u4E0B\u4E00\u9053\u9053\u5F69\u8272\u7684\u5C3E\u8FF9\u3002\u6574\u4E2A\u753B\u9762\u5145\u6EE1\u4E86\u90FD\u5E02\u591C\u665A\u7684\u795E\u79D8\u4E0E\u6D6A\u6F2B\uFF0C\u4EFF\u4F5B\u6BCF\u4E00\u6EF4\u96E8\u6C34\u90FD\u5728\u8BB2\u8FF0\u7740\u57CE\u5E02\u7684\u6545\u4E8B\u3002|
| \u6C1B\u56F4\u5149  | \u6C1B\u56F4\u5149 | \u591C\u665A\u6CB3\u8FB9\u7684\u6D6A\u6F2B\u827A\u672F\u666F\u8C61\uFF0C\u6C1B\u56F4\u706F\u6E29\u67D4\u5730\u7167\u4EAE\u4E86\u6C34\u9762\uFF0C\u4E00\u7FA4\u83B2\u82B1\u706F\u7F13\u7F13\u98D8\u5411\u6CB3\u5FC3\uFF0C\u706F\u5149\u4E0E\u6C34\u9762\u6CE2\u5149\u7CBC\u7CBC\u76F8\u4E92\u8F89\u6620\uFF0C\u8425\u9020\u51FA\u68A6\u5E7B\u822C\u7684\u89C6\u89C9\u6548\u679C\u3002|`}async generateImage(e){let t=await this.plugin.getAPIToken(),n=globalThis.fetch,i=globalThis.Headers,o=globalThis.Request,l=globalThis.Response;globalThis.fetch=js,globalThis.Headers=Ln,globalThis.Request=Jo,globalThis.Response=Nn;let a=await globalThis.fetch("https://dashscope.aliyuncs.com/api/v1/services/aigc/text2image/image-synthesis",{method:"POST",headers:{"Content-Type":"application/json","X-DashScope-Async":"enable",Authorization:"Bearer "+t},body:JSON.stringify({model:"wanx2.1-t2i-plus",input:{prompt:e},parameters:{size:"1024*1024",n:this.plugin.settings.numFeaturedImages,seed:42,prompt_extend:!0,watermark:!1}})});if(globalThis.fetch=n,globalThis.Headers=i,globalThis.Request=o,globalThis.Response=l,a.ok){let s=await a.json();return this.plugin.log(s),s}else return null}async getImage(e){let t=await this.plugin.getAPIToken(),n=e.output.task_id,i=async(u,c,f=3e5)=>{let h=Date.now();for(;Date.now()-h<=f;)try{let d=globalThis.fetch,p=globalThis.Headers,v=globalThis.Request,b=globalThis.Response;globalThis.fetch=js,globalThis.Headers=Ln,globalThis.Request=Jo,globalThis.Response=Nn;let C=await js(`${c}/${u}`,{method:"GET",headers:{Authorization:"Bearer "+t}});if(globalThis.fetch=d,globalThis.Headers=p,globalThis.Request=v,globalThis.Response=b,C.ok){let L=await C.json();if(L.output.task_status==="SUCCEEDED")return L}await new Promise(L=>setTimeout(L,1e4))}catch(d){throw console.error("Error polling task:",d),d}return null},o="https://dashscope.aliyuncs.com/api/v1/tasks",l=n,a=10*60*1e3,s=await i(l,o,a);return s&&s.output.task_status==="SUCCEEDED"?(this.plugin.log(s),s.output.results):(new Fu.Notice("Failed to get image: Task did not succeed or timed out.",3e3),null)}async downloadImageToVault(e,t,n){var i;try{let o=((i=t.split("/").pop())==null?void 0:i.split("?")[0])||"image.png",l=`${n}/${o}`;e.vault.getAbstractFileByPath(n)||await e.vault.createFolder(n);let s=await js(t);if(!s.ok)throw new Error(`Failed to download image: ${s.statusText}`);let u=await s.arrayBuffer();return await e.vault.createBinary(l,u),new Fu.Notice(`Image downloaded successfully to ${l}`),l}catch(o){throw new Fu.Notice(`Failed to download image: ${o}`),o}}};var pp=class{constructor(e,t){this.plugin=e,this.encryptedToken=this.plugin.settings.apiToken,this.vssCacheDir=t,this.aiService=new ju(e)}async cacheFileVectorStore(e){return await this.aiService.vectorizeDocument(e,this.vssCacheDir)}async loadVectorStore(e,t=!1){if(!this.vectorStore){let n=await this.aiService.aiUtils.createOpenAIEmbeddings();this.vectorStore=new uf(n)}for(let n of e)if(t)for(let i of this.vectorStore.memoryVectors)i.metadata.path===n.path&&this.vectorStore.memoryVectors.remove(i);else try{let i=this.plugin.join(this.vssCacheDir,n.path+".json"),o=await this.plugin.app.vault.adapter.read(i),l=JSON.parse(o);for(let a of this.vectorStore.memoryVectors)a.metadata.path===n.path&&this.vectorStore.memoryVectors.remove(a);this.vectorStore.memoryVectors=this.vectorStore.memoryVectors.concat(l)}catch(i){console.error(i)}}async searchSimilarity(e){return await this.aiService.searchSimilarDocuments(e,this.vectorStore)}};var w4="sidellm-view",_p=class extends Er.ItemView{constructor(t,n,i){super(t);this.result="";this.abortController=null;this.chatHistory=[];this.plugin=n,this.vss=i,this.chatService=new pg(n)}getViewType(){return w4}getDisplayText(){return"Personal Assistant Chat"}getIcon(){return"bot-message-square"}async onOpen(){let{containerEl:t}=this;t.empty(),t.classList.add("llm-view");let n=t.createDiv({cls:"llm-chat-container"}),i=t.createDiv({cls:"llm-input"}),o=i.createEl("textarea",{attr:{rows:"4",placeholder:"Type your message here..."}});o.addEventListener("keydown",p=>{((p.ctrlKey||p.metaKey)&&p.key==="Enter"||p.key==="Enter"&&!p.shiftKey)&&(p.preventDefault(),a.click())});let l=i.createDiv({cls:"llm-buttons"}),a=l.createEl("button",{text:"Ask"}),s=l.createEl("button",{text:"Clear Chat"}),u=l.createEl("button",{text:"Add to Editor"}),c=l.createEl("button",{text:"\u2715",cls:"cancel-button cancel-button-hidden"});u.disabled=!0,this.responseDiv=n,c.onclick=()=>{this.abortController&&(this.abortController.abort(),this.abortController=null,c.classList.replace("cancel-button-visible","cancel-button-hidden"),a.classList.replace("send-button-hidden","send-button-visible"),new Er.Notice("Generation cancelled"))};let f=(p,v)=>{let b=this.responseDiv.createDiv({cls:`llm-message ${p.role}`}),C=b.createDiv({cls:"message-role",text:p.role==="user"?"You":"Assistant"}),L=b.createDiv({cls:"message-content"}),S=b.createDiv({cls:"message-actions"}),P=S.createEl("button",{cls:"message-action-button",attr:{"aria-label":"Copy message"}});if((0,Er.setIcon)(P,"copy"),P.onclick=()=>{navigator.clipboard.writeText(p.content).then(()=>{new Er.Notice("Copied to clipboard")}).catch(y=>{console.error("Could not copy text: ",y)})},v!==void 0){let y=S.createEl("button",{cls:"message-action-button",attr:{"aria-label":"Delete message"}});(0,Er.setIcon)(y,"trash"),y.onclick=()=>{this.chatHistory.splice(v,1),this.responseDiv.empty(),this.chatHistory.forEach((z,G)=>{f(z,G)}),new Er.Notice("Message deleted")}}Er.MarkdownRenderer.render(this.plugin.app,p.content,L,"",this.plugin),this.responseDiv.scrollTo({top:this.responseDiv.scrollHeight,behavior:"smooth"}),this.updateClickableLink(L)};a.onclick=async()=>{let p=o.value;if(p){this.chatHistory.push({role:"user",content:p}),f(this.chatHistory[this.chatHistory.length-1],this.chatHistory.length-1),o.value="",u.disabled=!0,c.classList.replace("cancel-button-hidden","cancel-button-visible"),a.classList.replace("send-button-visible","send-button-hidden");try{this.abortController=new AbortController;let v="",b=null,C=null;await this.chatService.streamLLM(p,L=>{if(v=L,!b){b=this.responseDiv.createDiv({cls:"llm-message assistant"});let S=b.createDiv({cls:"message-role",text:"Assistant"});C=b.createDiv({cls:"message-content"});let y=b.createDiv({cls:"message-actions"}).createEl("button",{cls:"message-action-button",attr:{"aria-label":"Copy message"}});(0,Er.setIcon)(y,"copy"),y.onclick=()=>{navigator.clipboard.writeText(v).then(()=>new Er.Notice("Copied to clipboard")).catch(z=>console.error("Could not copy text:",z))}}C&&(C.empty(),Er.MarkdownRenderer.render(this.plugin.app,v,C,"",this.plugin),this.responseDiv.scrollTo({top:this.responseDiv.scrollHeight,behavior:"smooth"})),this.result=L,u.disabled=!1},this.abortController.signal,this.chatHistory),this.chatHistory.push({role:"assistant",content:v}),b&&this.responseDiv.removeChild(b),f({role:"assistant",content:v},this.chatHistory.length-1)}catch(v){v instanceof DOMException&&v.name==="AbortError"?f({role:"assistant",content:"*Generation cancelled*"}):new Er.Notice("Error: "+v)}finally{c.classList.replace("cancel-button-visible","cancel-button-hidden"),a.classList.replace("send-button-hidden","send-button-visible"),this.abortController=null}}},s.onclick=()=>{this.chatHistory=[],this.responseDiv.empty(),u.disabled=!0,new Er.Notice("Chat cleared")},u.onclick=async()=>{let p=this.app.workspace.getMostRecentLeaf();if(!p||!(p.view instanceof Er.MarkdownView)){let v=this.app.workspace.getLeavesOfType("markdown");if(v.length>0)p=v[0];else{new Er.Notice("Please open a markdown file first");return}}if(p&&p.view instanceof Er.MarkdownView&&this.result){await this.app.workspace.setActiveLeaf(p,{focus:!0});let v=p.view.editor,b=v.getCursor();v.replaceRange(this.result,b),new Er.Notice("Added response to editor")}};let h=this.plugin.getVSSFiles(),d=(0,Er.debounce)(async p=>{if(p instanceof Er.TFile)for(let v of h)v.path===p.path&&(await this.vss.cacheFileVectorStore(p),await this.vss.loadVectorStore([p]))},1200,!0);this.app.vault.on("modify",async p=>{d(p)}),this.app.vault.on("delete",async p=>{let v=this.plugin.join(this.plugin.vssCacheDir,p.path+".json");await this.plugin.app.vault.adapter.remove(v),this.plugin.log("delete",v),p instanceof Er.TFile&&await this.vss.loadVectorStore([p],!0)})}updateClickableLink(t){let n=(o,l)=>gp(this.plugin.app,"obsidian-advanced-uri")?["obsidian://advanced-uri?vault=",encodeURIComponent(o.getName()),"&filepath=",encodeURIComponent(l),"&openmode=true"].join(""):["obsidian://open?vault=",encodeURIComponent(o.getName()),"&file=",encodeURIComponent(l)].join("");t.querySelectorAll("a.internal-link").forEach(o=>{if(!o.getAttribute("href"))return;let l=o;l.addEventListener("click",a=>{a.stopPropagation()}),!l.href.startsWith("obsidian://")&&(l.href=n(this.plugin.app.vault,l.getAttribute("href")))})}};var wp=require("obsidian"),fYe=require("@codemirror/view");var bp=class{constructor(e,t,n){this.query="";this.plugin=e,this.editor=t;let i=this.editor.getValue();this.fontmatterInfo=(0,wp.getFrontMatterInfo)(i),this.query=i.slice(this.fontmatterInfo.contentStart),this.view=n.editor.cm,this.markdownView=n,this.aiService=new ju(e)}async generate(){await this.aiService.generateSummary(this.editor,this.markdownView)}},vp=class{constructor(e,t,n,i,o){this.query="";this.selected="";this.plugin=e,this.editor=t;let l=this.editor.getValue();this.fontmatterInfo=(0,wp.getFrontMatterInfo)(l),this.query=l.slice(this.fontmatterInfo.contentStart),this.view=n,this.selected=o,this.tags=Object.keys(i.metadataCache.getTags()),this.aiService=new ju(e)}async assitantTags(){let e=await this.aiService.generateTags(this.editor,this.view,this.plugin.app);return this.view.file&&this.plugin.app.fileManager.processFrontMatter(this.view.file,t=>{let n=t.tags||[];t.tags=n.concat(e)}),e.join(" ")}},Cp=class{constructor(e,t,n,i){this.query="";this.app=e,this.plugin=t,this.editor=n;let o=this.editor.getValue();this.fontmatterInfo=(0,wp.getFrontMatterInfo)(o),this.query=o.slice(this.fontmatterInfo.contentStart),this.view=i,this.log=t.log,this.aiService=new ju(t)}async generate(){await this.aiService.generateFeaturedImage(this.editor,this.view,this.fontmatterInfo)}};var So=require("obsidian");var y4=class extends So.SuggestModal{constructor(t){super(t);this.enabledColor="green";this.disabledColor="red";this.obsidianPlugins=t.plugins}getSuggestions(t){"use strict";let n=[],i=[],o=[];for(let l of Object.keys(this.app.plugins.manifests)){let a={name:this.obsidianPlugins.manifests[l].name,id:this.obsidianPlugins.manifests[l].id,desc:this.obsidianPlugins.manifests[l].description,enbaled:!1};this.obsidianPlugins.enabledPlugins.has(this.obsidianPlugins.manifests[l].id)?(a.enbaled=!0,i.push(a)):(a.enbaled=!1,n.push(a)),o.push(a)}return o.filter(l=>l.name.toLowerCase().includes(t.toLowerCase()))}renderSuggestion(t,n){var l;let i=t.enbaled?this.enabledColor:this.disabledColor;(0,So.addIcon)("SWITCH_ON_STATUS",oi.SWITCH_ON_STATUS),(0,So.addIcon)("SWITCH_OFF_STATUS",oi.SWITCH_OFF_STATUS);let o=n.createEl("div",{attr:{style:`color: ${i}`}});t.enbaled?(0,So.setIcon)(o,"SWITCH_ON_STATUS"):(0,So.setIcon)(o,"SWITCH_OFF_STATUS"),(l=o.querySelector("svg"))==null||l.addClass("plugin-swith-on-off-svg"),o.createSpan({text:t.name,attr:{style:"color: var(--text-normal)"}}),n.createEl("small",{text:t.desc})}onChooseSuggestion(t,n){t.enbaled?this.obsidianPlugins.disablePluginAndSave(t.id)?new So.Notice(`disable plugin[${t.name}] successfully`):new So.Notice(`disable plugin[${t.name}] failed, try it again`):this.obsidianPlugins.enablePluginAndSave(t.id)?new So.Notice(`enable plugin[${t.name}] successfully`):new So.Notice(`enable plugin[${t.name}] failed, try it again`)}};var k4=require("obsidian");var yp=class extends k4.Modal{constructor(e){super(e),this.obsidianPlugins=e.plugins,this.contentEl.createEl("h3",{text:"Batch Plugin Management",attr:{style:"text-align:center;"}});let t=[],n=[],i=[],o=[],l=[];for(let a of Object.keys(this.app.plugins.manifests)){let s={name:this.obsidianPlugins.manifests[a].name,id:this.obsidianPlugins.manifests[a].id,desc:this.obsidianPlugins.manifests[a].description,enbaled:!1};this.obsidianPlugins.enabledPlugins.has(this.obsidianPlugins.manifests[a].id)?(s.enbaled=!0,n.push(s)):(s.enbaled=!1,t.push(s)),i.push(s)}for(let a of i)new k4.Setting(this.contentEl).setName(a.name).setDesc(a.desc).addToggle(s=>{s.setValue(a.enbaled).onChange(async u=>{u?o.push(a):l.push(a)})});new k4.Setting(this.contentEl).addButton(a=>a.setButtonText("OK").setCta().onClick(()=>{for(let s of o)console.log(`enable ${s.name}`),this.obsidianPlugins.enablePlugin(s.id);for(let s of l)console.log(`disable ${s.name}`),this.obsidianPlugins.disablePlugin(s.id);this.close()}))}};var tr=require("obsidian");var cS=function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")},fS=function(){function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),kp=function(){function r(e,t){var n=[],i=!0,o=!1,l=void 0;try{for(var a=e[Symbol.iterator](),s;!(i=(s=a.next()).done)&&(n.push(s.value),!(t&&n.length===t));i=!0);}catch(u){o=!0,l=u}finally{try{!i&&a.return&&a.return()}finally{if(o)throw l}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(r){return this.indexOf(r)===0};String.prototype.padStart=String.prototype.padStart||function(r,e){for(var t=this;t.length<r;)t=e+t;return t};var Mce={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function Ij(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=e>0?r.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):r.toString();return t||"0"}var Ace=function(){function r(e,t,n,i){cS(this,r);var o=this;function l(s){if(s.startsWith("hsl")){var u=s.match(/([\-\d\.e]+)/g).map(Number),c=kp(u,4),f=c[0],h=c[1],d=c[2],p=c[3];p===void 0&&(p=1),f/=360,h/=100,d/=100,o.hsla=[f,h,d,p]}else if(s.startsWith("rgb")){var v=s.match(/([\-\d\.e]+)/g).map(Number),b=kp(v,4),C=b[0],L=b[1],S=b[2],P=b[3];P===void 0&&(P=1),o.rgba=[C,L,S,P]}else s.startsWith("#")?o.rgba=r.hexToRgb(s):o.rgba=r.nameToRgb(s)||r.hexToRgb(s)}if(e!==void 0)if(Array.isArray(e))this.rgba=e;else if(n===void 0){var a=e&&""+e;a&&l(a.toLowerCase())}else this.rgba=[e,t,n,i===void 0?1:i]}return fS(r,[{key:"printRGB",value:function(t){var n=t?this.rgba:this.rgba.slice(0,3),i=n.map(function(o,l){return Ij(o,l===3?3:0)});return t?"rgba("+i+")":"rgb("+i+")"}},{key:"printHSL",value:function(t){var n=[360,100,100,1],i=["","%","%",""],o=t?this.hsla:this.hsla.slice(0,3),l=o.map(function(a,s){return Ij(a*n[s],s===3?3:1)+i[s]});return t?"hsla("+l+")":"hsl("+l+")"}},{key:"printHex",value:function(t){var n=this.hex;return t?n:n.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=r.hslToRgb(this._hsla)},set:function(t){t.length===3&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=r.rgbToHsl(this._rgba)},set:function(t){t.length===3&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var t=this.rgba,n=t.map(function(i,o){return o<3?i.toString(16):Math.round(i*255).toString(16)});return"#"+n.map(function(i){return i.padStart(2,"0")}).join("")},set:function(t){this.rgba=r.hexToRgb(t)}}],[{key:"hexToRgb",value:function(t){var n=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!n.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var i=n.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(o){return parseInt(o,16)});return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(t){var n=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=Mce[n];return i===void 0?i:r.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var n=kp(t,4),i=n[0],o=n[1],l=n[2],a=n[3];i/=255,o/=255,l/=255;var s=Math.max(i,o,l),u=Math.min(i,o,l),c=void 0,f=void 0,h=(s+u)/2;if(s===u)c=f=0;else{var d=s-u;switch(f=h>.5?d/(2-s-u):d/(s+u),s){case i:c=(o-l)/d+(o<l?6:0);break;case o:c=(l-i)/d+2;break;case l:c=(i-o)/d+4;break}c/=6}return[c,f,h,a]}},{key:"hslToRgb",value:function(t){var n=kp(t,4),i=n[0],o=n[1],l=n[2],a=n[3],s=void 0,u=void 0,c=void 0;if(o===0)s=u=c=l;else{var f=function(b,C,L){return L<0&&(L+=1),L>1&&(L-=1),L<.16666666666666666?b+(C-b)*6*L:L<.5?C:L<.6666666666666666?b+(C-b)*(.6666666666666666-L)*6:b},h=l<.5?l*(1+o):l+o-l*o,d=2*l-h;s=f(d,h,i+1/3),u=f(d,h,i),c=f(d,h,i-1/3)}var p=[s*255,u*255,c*255].map(Math.round);return p[3]=a,p}}]),r}(),Pce=function(){function r(){cS(this,r),this._events=[]}return fS(r,[{key:"add",value:function(t,n,i){t.addEventListener(n,i,!1),this._events.push({target:t,type:n,handler:i})}},{key:"remove",value:function(t,n,i){this._events=this._events.filter(function(o){var l=!0;return t&&t!==o.target&&(l=!1),n&&n!==o.type&&(l=!1),i&&i!==o.handler&&(l=!1),l&&r._doRemove(o.target,o.type,o.handler),!l})}},{key:"destroy",value:function(){this._events.forEach(function(t){return r._doRemove(t.target,t.type,t.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(t,n,i){t.removeEventListener(n,i,!1)}}]),r}();function Tce(r){var e=document.createElement("div");return e.innerHTML=r,e.firstElementChild}function aS(r,e,t){var n=!1;function i(s,u,c){return Math.max(u,Math.min(s,c))}function o(s,u,c){if(c&&(n=!0),!!n){s.preventDefault();var f=e.getBoundingClientRect(),h=f.width,d=f.height,p=u.clientX,v=u.clientY,b=i(p-f.left,0,h),C=i(v-f.top,0,d);t(b/h,C/d)}}function l(s,u){var c=s.buttons===void 0?s.which:s.buttons;c===1?o(s,s,u):n=!1}function a(s,u){s.touches.length===1?o(s,s.touches[0],u):n=!1}r.add(e,"mousedown",function(s){l(s,!0)}),r.add(e,"touchstart",function(s){a(s,!0)}),r.add(window,"mousemove",l),r.add(e,"touchmove",a),r.add(window,"mouseup",function(s){n=!1}),r.add(e,"touchend",function(s){n=!1}),r.add(e,"touchcancel",function(s){n=!1})}var Oce=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,Rce=360,zj="keydown",Lp="mousedown",sS="focusin";function Ga(r,e){return(e||document).querySelector(r)}function Hj(r){r.preventDefault(),r.stopPropagation()}function uS(r,e,t,n,i){r.add(e,zj,function(o){t.indexOf(o.key)>=0&&(i&&Hj(o),n(o))})}var hS=function(){function r(e){cS(this,r),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new Pce,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return fS(r,[{key:"setOptions",value:function(t){var n=this;if(!t)return;var i=this.settings;function o(u,c,f){for(var h in u)f&&f.indexOf(h)>=0||(c[h]=u[h])}if(t instanceof HTMLElement)i.parent=t;else{i.parent&&t.parent&&i.parent!==t.parent&&(this._events.remove(i.parent),this._popupInited=!1),o(t,i),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var l=t.color||t.colour;l&&this._setColor(l)}var a=i.parent;if(a&&i.popup&&!this._popupInited){var s=function(c){return n.openHandler(c)};this._events.add(a,"click",s),uS(this._events,a,[" ","Spacebar","Enter"],s),this._popupInited=!0}else t.parent&&!i.popup&&this.show()}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var n=t&&t.type===zj?this._domEdit:this.domElement;setTimeout(function(){return n.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var n=t&&t.type,i=!1;if(!t)i=!0;else if(n===Lp||n===sS){var o=(this.__containedEvent||0)+100;t.timeStamp>o&&(i=!0)}else Hj(t),i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",n!==Lp&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,n){this.closeHandler(),this.setOptions(t),n&&this.openHandler()}},{key:"setColor",value:function(t,n){this._setColor(t,{silent:n})}},{key:"_setColor",value:function(t,n){if(typeof t=="string"&&(t=t.trim()),!!t){n=n||{};var i=void 0;try{i=new Ace(t)}catch(l){if(n.failSilently)return;throw l}if(!this.settings.alpha){var o=i.hsla;o[3]=1,i.hsla=o}this.colour=this.color=i,this._setHSLA(null,null,null,null,n)}}},{key:"setColour",value:function(t,n){this.setColor(t,n)}},{key:"show",value:function(){var t=this.settings.parent;if(!t)return!1;if(this.domElement){var n=this._toggleDOM(!0);return this._setPosition(),n}var i=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',o=Tce(i);return this.domElement=o,this._domH=Ga(".picker_hue",o),this._domSL=Ga(".picker_sl",o),this._domA=Ga(".picker_alpha",o),this._domEdit=Ga(".picker_editor input",o),this._domSample=Ga(".picker_sample",o),this._domOkay=Ga(".picker_done button",o),this._domCancel=Ga(".picker_cancel button",o),o.classList.add("layout_"+this.settings.layout),this.settings.alpha||o.classList.add("no_alpha"),this.settings.editor||o.classList.add("no_editor"),this.settings.cancelButton||o.classList.add("no_cancel"),this._ifPopup(function(){return o.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,n=this,i=this.domElement,o=this._events;function l(u,c,f){o.add(u,c,f)}l(i,"click",function(u){return u.preventDefault()}),aS(o,this._domH,function(u,c){return n._setHSLA(u)}),aS(o,this._domSL,function(u,c){return n._setHSLA(null,u,1-c)}),this.settings.alpha&&aS(o,this._domA,function(u,c){return n._setHSLA(null,null,null,1-c)});var a=this._domEdit;l(a,"input",function(u){n._setColor(this.value,{fromEditor:!0,failSilently:!0})}),l(a,"focus",function(u){var c=this;c.selectionStart===c.selectionEnd&&c.select()}),this._ifPopup(function(){var u=function(h){return t.closeHandler(h)};l(window,Lp,u),l(window,sS,u),uS(o,i,["Esc","Escape"],u);var c=function(h){t.__containedEvent=h.timeStamp};l(i,Lp,c),l(i,sS,c),l(t._domCancel,"click",u)});var s=function(c){t._ifPopup(function(){return t.closeHandler(c)}),t.onDone&&t.onDone(t.colour)};l(this._domOkay,"click",s),uS(o,i,["Enter"],s)}},{key:"_setPosition",value:function(){var t=this.settings.parent,n=this.domElement;t!==n.parentNode&&t.appendChild(n),this._ifPopup(function(i){getComputedStyle(t).position==="static"&&(t.style.position="relative");var o=i===!0?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(l){l===o?n.classList.add(l):n.classList.remove(l)}),n.classList.add(o)})}},{key:"_setHSLA",value:function(t,n,i,o,l){l=l||{};var a=this.colour,s=a.hsla;[t,n,i,o].forEach(function(u,c){(u||u===0)&&(s[c]=u)}),a.hsla=s,this._updateUI(l),this.onChange&&!l.silent&&this.onChange(a)}},{key:"_updateUI",value:function(t){if(!this.domElement)return;t=t||{};var n=this.colour,i=n.hsla,o="hsl("+i[0]*Rce+", 100%, 50%)",l=n.hslString,a=n.hslaString,s=this._domH,u=this._domSL,c=this._domA,f=Ga(".picker_selector",s),h=Ga(".picker_selector",u),d=Ga(".picker_selector",c);function p(z,G,J){G.style.left=J*100+"%"}function v(z,G,J){G.style.top=J*100+"%"}p(s,f,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=o,p(u,h,i[1]),v(u,h,1-i[2]),u.style.color=l,v(c,d,1-i[3]);var b=l,C=b.replace("hsl","hsla").replace(")",", 0)"),L="linear-gradient("+[b,C]+")";if(this._domA.style.background=L+", "+Oce,!t.fromEditor){var S=this.settings.editorFormat,P=this.settings.alpha,y=void 0;switch(S){case"rgb":y=n.printRGB(P);break;case"hsl":y=n.printHSL(P);break;default:y=n.printHex(P)}this._domEdit.value=y}this._domSample.style.color=a}},{key:"_ifPopup",value:function(t,n){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):n&&n()}},{key:"_toggleDOM",value:function(t){var n=this.domElement;if(!n)return!1;var i=t?"":"none",o=n.style.display!==i;return o&&(n.style.display=i),o}}]),r}();Ep=document.createElement("style"),Ep.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(Ep),hS.StyleElement=Ep;var Ep;var d_=require("obsidian");function S4(r){return r+.5|0}var xu=(r,e,t)=>Math.max(Math.min(r,t),e);function L4(r){return xu(S4(r*2.55),0,255)}function qu(r){return xu(S4(r*255),0,255)}function m1(r){return xu(S4(r/2.55)/100,0,1)}function Nj(r){return xu(S4(r*100),0,100)}var il={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},mS=[..."0123456789ABCDEF"],Ice=r=>mS[r&15],zce=r=>mS[(r&240)>>4]+mS[r&15],Sp=r=>(r&240)>>4===(r&15),Hce=r=>Sp(r.r)&&Sp(r.g)&&Sp(r.b)&&Sp(r.a);function Nce(r){var e=r.length,t;return r[0]==="#"&&(e===4||e===5?t={r:255&il[r[1]]*17,g:255&il[r[2]]*17,b:255&il[r[3]]*17,a:e===5?il[r[4]]*17:255}:(e===7||e===9)&&(t={r:il[r[1]]<<4|il[r[2]],g:il[r[3]]<<4|il[r[4]],b:il[r[5]]<<4|il[r[6]],a:e===9?il[r[7]]<<4|il[r[8]]:255})),t}var Vce=(r,e)=>r<255?e(r):"";function Bce(r){var e=Hce(r)?Ice:zce;return r?"#"+e(r.r)+e(r.g)+e(r.b)+Vce(r.a,e):void 0}var Dce=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Zj(r,e,t){let n=e*Math.min(t,1-t),i=(o,l=(o+r/30)%12)=>t-n*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function Zce(r,e,t){let n=(i,o=(i+r/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Fce(r,e,t){let n=Zj(r,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)n[i]*=1-e-t,n[i]+=e;return n}function jce(r,e,t,n,i){return r===i?(e-t)/n+(e<t?6:0):e===i?(t-r)/n+2:(r-e)/n+4}function gS(r){let t=r.r/255,n=r.g/255,i=r.b/255,o=Math.max(t,n,i),l=Math.min(t,n,i),a=(o+l)/2,s,u,c;return o!==l&&(c=o-l,u=a>.5?c/(2-o-l):c/(o+l),s=jce(t,n,i,c,o),s=s*60+.5),[s|0,u||0,a]}function pS(r,e,t,n){return(Array.isArray(e)?r(e[0],e[1],e[2]):r(e,t,n)).map(qu)}function _S(r,e,t){return pS(Zj,r,e,t)}function xce(r,e,t){return pS(Fce,r,e,t)}function qce(r,e,t){return pS(Zce,r,e,t)}function Fj(r){return(r%360+360)%360}function Uce(r){let e=Dce.exec(r),t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?L4(+e[5]):qu(+e[5]));let i=Fj(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?n=xce(i,o,l):e[1]==="hsv"?n=qce(i,o,l):n=_S(i,o,l),{r:n[0],g:n[1],b:n[2],a:t}}function Wce(r,e){var t=gS(r);t[0]=Fj(t[0]+e),t=_S(t),r.r=t[0],r.g=t[1],r.b=t[2]}function Gce(r){if(!r)return;let e=gS(r),t=e[0],n=Nj(e[1]),i=Nj(e[2]);return r.a<255?`hsla(${t}, ${n}%, ${i}%, ${m1(r.a)})`:`hsl(${t}, ${n}%, ${i}%)`}var Vj={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Bj={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Yce(){let r={},e=Object.keys(Bj),t=Object.keys(Vj),n,i,o,l,a;for(n=0;n<e.length;n++){for(l=a=e[n],i=0;i<t.length;i++)o=t[i],a=a.replace(o,Vj[o]);o=parseInt(Bj[l],16),r[a]=[o>>16&255,o>>8&255,o&255]}return r}var Mp;function Kce(r){Mp||(Mp=Yce(),Mp.transparent=[0,0,0,0]);let e=Mp[r.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Jce=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xce(r){let e=Jce.exec(r),t=255,n,i,o;if(e){if(e[7]!==n){let l=+e[7];t=e[8]?L4(l):xu(l*255,0,255)}return n=+e[1],i=+e[3],o=+e[5],n=255&(e[2]?L4(n):xu(n,0,255)),i=255&(e[4]?L4(i):xu(i,0,255)),o=255&(e[6]?L4(o):xu(o,0,255)),{r:n,g:i,b:o,a:t}}}function Qce(r){return r&&(r.a<255?`rgba(${r.r}, ${r.g}, ${r.b}, ${m1(r.a)})`:`rgb(${r.r}, ${r.g}, ${r.b})`)}var dS=r=>r<=.0031308?r*12.92:Math.pow(r,1/2.4)*1.055-.055,Bf=r=>r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4);function $ce(r,e,t){let n=Bf(m1(r.r)),i=Bf(m1(r.g)),o=Bf(m1(r.b));return{r:qu(dS(n+t*(Bf(m1(e.r))-n))),g:qu(dS(i+t*(Bf(m1(e.g))-i))),b:qu(dS(o+t*(Bf(m1(e.b))-o))),a:r.a+t*(e.a-r.a)}}function Ap(r,e,t){if(r){let n=gS(r);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=_S(n),r.r=n[0],r.g=n[1],r.b=n[2]}}function jj(r,e){return r&&Object.assign(e||{},r)}function Dj(r){var e={r:0,g:0,b:0,a:255};return Array.isArray(r)?r.length>=3&&(e={r:r[0],g:r[1],b:r[2],a:255},r.length>3&&(e.a=qu(r[3]))):(e=jj(r,{r:0,g:0,b:0,a:1}),e.a=qu(e.a)),e}function e9e(r){return r.charAt(0)==="r"?Xce(r):Uce(r)}var E4=class r{constructor(e){if(e instanceof r)return e;let t=typeof e,n;t==="object"?n=Dj(e):t==="string"&&(n=Nce(e)||Kce(e)||e9e(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=jj(this._rgb);return e&&(e.a=m1(e.a)),e}set rgb(e){this._rgb=Dj(e)}rgbString(){return this._valid?Qce(this._rgb):void 0}hexString(){return this._valid?Bce(this._rgb):void 0}hslString(){return this._valid?Gce(this._rgb):void 0}mix(e,t){if(e){let n=this.rgb,i=e.rgb,o,l=t===o?.5:t,a=2*l-1,s=n.a-i.a,u=((a*s===-1?a:(a+s)/(1+a*s))+1)/2;o=1-u,n.r=255&u*n.r+o*i.r+.5,n.g=255&u*n.g+o*i.g+.5,n.b=255&u*n.b+o*i.b+.5,n.a=l*n.a+(1-l)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=$ce(this._rgb,e._rgb,t)),this}clone(){return new r(this.rgb)}alpha(e){return this._rgb.a=qu(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=S4(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ap(this._rgb,2,e),this}darken(e){return Ap(this._rgb,2,-e),this}saturate(e){return Ap(this._rgb,1,e),this}desaturate(e){return Ap(this._rgb,1,-e),this}rotate(e){return Wce(this._rgb,e),this}};function Ka(){}var $j=(()=>{let r=0;return()=>r++})();function ar(r){return r==null}function Or(r){if(Array.isArray&&Array.isArray(r))return!0;let e=Object.prototype.toString.call(r);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Jt(r){return r!==null&&Object.prototype.toString.call(r)==="[object Object]"}function jr(r){return(typeof r=="number"||r instanceof Number)&&isFinite(+r)}function Xi(r,e){return jr(r)?r:e}function xt(r,e){return typeof r=="undefined"?e:r}var ex=(r,e)=>typeof r=="string"&&r.endsWith("%")?parseFloat(r)/100*e:+r;function Cr(r,e,t){if(r&&typeof r.call=="function")return r.apply(t,e)}function sr(r,e,t,n){let i,o,l;if(Or(r))if(o=r.length,n)for(i=o-1;i>=0;i--)e.call(t,r[i],i);else for(i=0;i<o;i++)e.call(t,r[i],i);else if(Jt(r))for(l=Object.keys(r),o=l.length,i=0;i<o;i++)e.call(t,r[l[i]],l[i])}function P4(r,e){let t,n,i,o;if(!r||!e||r.length!==e.length)return!1;for(t=0,n=r.length;t<n;++t)if(i=r[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Ip(r){if(Or(r))return r.map(Ip);if(Jt(r)){let e=Object.create(null),t=Object.keys(r),n=t.length,i=0;for(;i<n;++i)e[t[i]]=Ip(r[t[i]]);return e}return r}function tx(r){return["__proto__","prototype","constructor"].indexOf(r)===-1}function t9e(r,e,t,n){if(!tx(r))return;let i=e[r],o=t[r];Jt(i)&&Jt(o)?Zf(i,o,n):e[r]=Ip(o)}function Zf(r,e,t){let n=Or(e)?e:[e],i=n.length;if(!Jt(r))return r;t=t||{};let o=t.merger||t9e,l;for(let a=0;a<i;++a){if(l=n[a],!Jt(l))continue;let s=Object.keys(l);for(let u=0,c=s.length;u<c;++u)o(s[u],r,l,t)}return r}function jf(r,e){return Zf(r,e,{merger:r9e})}function r9e(r,e,t){if(!tx(r))return;let n=e[r],i=t[r];Jt(n)&&Jt(i)?jf(n,i):Object.prototype.hasOwnProperty.call(e,r)||(e[r]=Ip(i))}var xj={"":r=>r,x:r=>r.x,y:r=>r.y};function n9e(r){let e=r.split("."),t=[],n="";for(let i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function i9e(r){let e=n9e(r);return t=>{for(let n of e){if(n==="")break;t=t&&t[n]}return t}}function T4(r,e){return(xj[e]||(xj[e]=i9e(e)))(r)}function Vp(r){return r.charAt(0).toUpperCase()+r.slice(1)}var O4=r=>typeof r!="undefined",g1=r=>typeof r=="function",wS=(r,e)=>{if(r.size!==e.size)return!1;for(let t of r)if(!e.has(t))return!1;return!0};function rx(r){return r.type==="mouseup"||r.type==="click"||r.type==="contextmenu"}var Qr=Math.PI,Ji=2*Qr,o9e=Ji+Qr,zp=Number.POSITIVE_INFINITY,l9e=Qr/180,Ki=Qr/2,tc=Qr/4,qj=Qr*2/3,p1=Math.log10,nc=Math.sign;function xf(r,e,t){return Math.abs(r-e)<t}function yS(r){let e=Math.round(r);r=xf(r,e,r/1e3)?e:r;let t=Math.pow(10,Math.floor(p1(r))),n=r/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function nx(r){let e=[],t=Math.sqrt(r),n;for(n=1;n<t;n++)r%n===0&&(e.push(n),e.push(r/n));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function a9e(r){return typeof r=="symbol"||typeof r=="object"&&r!==null&&!(Symbol.toPrimitive in r||"toString"in r||"valueOf"in r)}function qf(r){return!a9e(r)&&!isNaN(parseFloat(r))&&isFinite(r)}function ix(r,e){let t=Math.round(r);return t-e<=r&&t+e>=r}function kS(r,e,t){let n,i,o;for(n=0,i=r.length;n<i;n++)o=r[n][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function _1(r){return r*(Qr/180)}function Bp(r){return r*(180/Qr)}function LS(r){if(!jr(r))return;let e=1,t=0;for(;Math.round(r*e)/e!==r;)e*=10,t++;return t}function ox(r,e){let t=e.x-r.x,n=e.y-r.y,i=Math.sqrt(t*t+n*n),o=Math.atan2(n,t);return o<-.5*Qr&&(o+=Ji),{angle:o,distance:i}}function Hp(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function s9e(r,e){return(r-e+o9e)%Ji-Qr}function Yi(r){return(r%Ji+Ji)%Ji}function ES(r,e,t,n){let i=Yi(r),o=Yi(e),l=Yi(t),a=Yi(o-i),s=Yi(l-i),u=Yi(i-o),c=Yi(i-l);return i===o||i===l||n&&o===l||a>s&&u<c}function Mo(r,e,t){return Math.max(e,Math.min(t,r))}function lx(r){return Mo(r,-32768,32767)}function oc(r,e,t,n=1e-6){return r>=Math.min(e,t)-n&&r<=Math.max(e,t)+n}function Dp(r,e,t){t=t||(l=>r[l]<e);let n=r.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,t(o)?i=o:n=o;return{lo:i,hi:n}}var Wu=(r,e,t,n)=>Dp(r,t,n?i=>{let o=r[i][e];return o<t||o===t&&r[i+1][e]===t}:i=>r[i][e]<t),ax=(r,e,t)=>Dp(r,t,n=>r[n][e]>=t);function sx(r,e,t){let n=0,i=r.length;for(;n<i&&r[n]<e;)n++;for(;i>n&&r[i-1]>t;)i--;return n>0||i<r.length?r.slice(n,i):r}var ux=["push","pop","shift","splice","unshift"];function cx(r,e){if(r._chartjs){r._chartjs.listeners.push(e);return}Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ux.forEach(t=>{let n="_onData"+Vp(t),i=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...o){let l=i.apply(this,o);return r._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),l}})})}function SS(r,e){let t=r._chartjs;if(!t)return;let n=t.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(ux.forEach(o=>{delete r[o]}),delete r._chartjs)}function fx(r){let e=new Set(r);return e.size===r.length?r:Array.from(e)}var MS=function(){return typeof window=="undefined"?function(r){return r()}:window.requestAnimationFrame}();function AS(r,e){let t=[],n=!1;return function(...i){t=i,n||(n=!0,MS.call(window,()=>{n=!1,r.apply(e,t)}))}}function hx(r,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(r,e,n)):r.apply(this,n),e}}var Zp=r=>r==="start"?"left":r==="end"?"right":"center",Zn=(r,e,t)=>r==="start"?e:r==="end"?t:(e+t)/2,dx=(r,e,t,n)=>r===(n?"left":"right")?t:r==="center"?(e+t)/2:e;function mx(r,e,t){let n=e.length,i=0,o=n;if(r._sorted){let{iScale:l,vScale:a,_parsed:s}=r,u=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null,c=l.axis,{min:f,max:h,minDefined:d,maxDefined:p}=l.getUserBounds();if(d){if(i=Math.min(Wu(s,c,f).lo,t?n:Wu(e,c,l.getPixelForValue(f)).lo),u){let v=s.slice(0,i+1).reverse().findIndex(b=>!ar(b[a.axis]));i-=Math.max(0,v)}i=Mo(i,0,n-1)}if(p){let v=Math.max(Wu(s,l.axis,h,!0).hi+1,t?0:Wu(e,c,l.getPixelForValue(h),!0).hi+1);if(u){let b=s.slice(v-1).findIndex(C=>!ar(C[a.axis]));v+=Math.max(0,b)}o=Mo(v,i,n)-i}else o=n-i}return{start:i,count:o}}function gx(r){let{xScale:e,yScale:t,_scaleRanges:n}=r,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return r._scaleRanges=i,!0;let o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,i),o}var Pp=r=>r===0||r===1,Uj=(r,e,t)=>-(Math.pow(2,10*(r-=1))*Math.sin((r-e)*Ji/t)),Wj=(r,e,t)=>Math.pow(2,-10*r)*Math.sin((r-e)*Ji/t)+1,Df={linear:r=>r,easeInQuad:r=>r*r,easeOutQuad:r=>-r*(r-2),easeInOutQuad:r=>(r/=.5)<1?.5*r*r:-.5*(--r*(r-2)-1),easeInCubic:r=>r*r*r,easeOutCubic:r=>(r-=1)*r*r+1,easeInOutCubic:r=>(r/=.5)<1?.5*r*r*r:.5*((r-=2)*r*r+2),easeInQuart:r=>r*r*r*r,easeOutQuart:r=>-((r-=1)*r*r*r-1),easeInOutQuart:r=>(r/=.5)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2),easeInQuint:r=>r*r*r*r*r,easeOutQuint:r=>(r-=1)*r*r*r*r+1,easeInOutQuint:r=>(r/=.5)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2),easeInSine:r=>-Math.cos(r*Ki)+1,easeOutSine:r=>Math.sin(r*Ki),easeInOutSine:r=>-.5*(Math.cos(Qr*r)-1),easeInExpo:r=>r===0?0:Math.pow(2,10*(r-1)),easeOutExpo:r=>r===1?1:-Math.pow(2,-10*r)+1,easeInOutExpo:r=>Pp(r)?r:r<.5?.5*Math.pow(2,10*(r*2-1)):.5*(-Math.pow(2,-10*(r*2-1))+2),easeInCirc:r=>r>=1?r:-(Math.sqrt(1-r*r)-1),easeOutCirc:r=>Math.sqrt(1-(r-=1)*r),easeInOutCirc:r=>(r/=.5)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1),easeInElastic:r=>Pp(r)?r:Uj(r,.075,.3),easeOutElastic:r=>Pp(r)?r:Wj(r,.075,.3),easeInOutElastic(r){return Pp(r)?r:r<.5?.5*Uj(r*2,.1125,.45):.5+.5*Wj(r*2-1,.1125,.45)},easeInBack(r){return r*r*((1.70158+1)*r-1.70158)},easeOutBack(r){return(r-=1)*r*((1.70158+1)*r+1.70158)+1},easeInOutBack(r){let e=1.70158;return(r/=.5)<1?.5*(r*r*(((e*=1.525)+1)*r-e)):.5*((r-=2)*r*(((e*=1.525)+1)*r+e)+2)},easeInBounce:r=>1-Df.easeOutBounce(1-r),easeOutBounce(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},easeInOutBounce:r=>r<.5?Df.easeInBounce(r*2)*.5:Df.easeOutBounce(r*2-1)*.5+.5};function PS(r){if(r&&typeof r=="object"){let e=r.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function TS(r){return PS(r)?r:new E4(r)}function bS(r){return PS(r)?r:new E4(r).saturate(.5).darken(.1).hexString()}var u9e=["x","y","borderWidth","radius","tension"],c9e=["color","borderColor","backgroundColor"];function f9e(r){r.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),r.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),r.set("animations",{colors:{type:"color",properties:c9e},numbers:{type:"number",properties:u9e}}),r.describe("animations",{_fallback:"animation"}),r.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function h9e(r){r.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Gj=new Map;function d9e(r,e){e=e||{};let t=r+JSON.stringify(e),n=Gj.get(t);return n||(n=new Intl.NumberFormat(r,e),Gj.set(t,n)),n}function Fp(r,e,t){return d9e(e,t).format(r)}var px={values(r){return Or(r)?r:""+r},numeric(r,e,t){if(r===0)return"0";let n=this.chart.options.locale,i,o=r;if(t.length>1){let u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),o=m9e(r,t)}let l=p1(Math.abs(o)),a=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),s={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(s,this.options.ticks.format),Fp(r,n,s)},logarithmic(r,e,t){if(r===0)return"0";let n=t[e].significand||r/Math.pow(10,Math.floor(p1(r)));return[1,2,3,5,10,15].includes(n)||e>.8*t.length?px.numeric.call(this,r,e,t):""}};function m9e(r,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&r!==Math.floor(r)&&(t=r-Math.floor(r)),t}var R4={formatters:px};function g9e(r){r.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:R4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),r.route("scale.ticks","color","","color"),r.route("scale.grid","color","","borderColor"),r.route("scale.border","color","","borderColor"),r.route("scale.title","color","","color"),r.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),r.describe("scales",{_fallback:"scale"}),r.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Gu=Object.create(null),jp=Object.create(null);function M4(r,e){if(!e)return r;let t=e.split(".");for(let n=0,i=t.length;n<i;++n){let o=t[n];r=r[o]||(r[o]=Object.create(null))}return r}function vS(r,e,t){return typeof e=="string"?Zf(M4(r,e),t):Zf(M4(r,""),e)}var CS=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>bS(i.backgroundColor),this.hoverBorderColor=(n,i)=>bS(i.borderColor),this.hoverColor=(n,i)=>bS(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return vS(this,e,t)}get(e){return M4(this,e)}describe(e,t){return vS(jp,e,t)}override(e,t){return vS(Gu,e,t)}route(e,t,n,i){let o=M4(this,e),l=M4(this,n),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let s=this[a],u=l[i];return Jt(s)?Object.assign({},u,s):xt(s,u)},set(s){this[a]=s}}})}apply(e){e.forEach(t=>t(this))}},xr=new CS({_scriptable:r=>!r.startsWith("on"),_indexable:r=>r!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[f9e,h9e,g9e]);function p9e(r){return!r||ar(r.size)||ar(r.family)?null:(r.style?r.style+" ":"")+(r.weight?r.weight+" ":"")+r.size+"px "+r.family}function A4(r,e,t,n,i){let o=e[i];return o||(o=e[i]=r.measureText(i).width,t.push(i)),o>n&&(n=o),n}function _x(r,e,t,n){n=n||{};let i=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},o=n.garbageCollect=[],n.font=e),r.save(),r.font=e;let l=0,a=t.length,s,u,c,f,h;for(s=0;s<a;s++)if(f=t[s],f!=null&&!Or(f))l=A4(r,i,o,l,f);else if(Or(f))for(u=0,c=f.length;u<c;u++)h=f[u],h!=null&&!Or(h)&&(l=A4(r,i,o,l,h));r.restore();let d=o.length/2;if(d>t.length){for(s=0;s<d;s++)delete i[o[s]];o.splice(0,d)}return l}function Yu(r,e,t){let n=r.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*n)/n+i}function OS(r,e){!e&&!r||(e=e||r.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,r.width,r.height),e.restore())}function xp(r,e,t,n){RS(r,e,t,n,null)}function RS(r,e,t,n,i){let o,l,a,s,u,c,f,h,d=e.pointStyle,p=e.rotation,v=e.radius,b=(p||0)*l9e;if(d&&typeof d=="object"&&(o=d.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){r.save(),r.translate(t,n),r.rotate(b),r.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),r.restore();return}if(!(isNaN(v)||v<=0)){switch(r.beginPath(),d){default:i?r.ellipse(t,n,i/2,v,0,0,Ji):r.arc(t,n,v,0,Ji),r.closePath();break;case"triangle":c=i?i/2:v,r.moveTo(t+Math.sin(b)*c,n-Math.cos(b)*v),b+=qj,r.lineTo(t+Math.sin(b)*c,n-Math.cos(b)*v),b+=qj,r.lineTo(t+Math.sin(b)*c,n-Math.cos(b)*v),r.closePath();break;case"rectRounded":u=v*.516,s=v-u,l=Math.cos(b+tc)*s,f=Math.cos(b+tc)*(i?i/2-u:s),a=Math.sin(b+tc)*s,h=Math.sin(b+tc)*(i?i/2-u:s),r.arc(t-f,n-a,u,b-Qr,b-Ki),r.arc(t+h,n-l,u,b-Ki,b),r.arc(t+f,n+a,u,b,b+Ki),r.arc(t-h,n+l,u,b+Ki,b+Qr),r.closePath();break;case"rect":if(!p){s=Math.SQRT1_2*v,c=i?i/2:s,r.rect(t-c,n-s,2*c,2*s);break}b+=tc;case"rectRot":f=Math.cos(b)*(i?i/2:v),l=Math.cos(b)*v,a=Math.sin(b)*v,h=Math.sin(b)*(i?i/2:v),r.moveTo(t-f,n-a),r.lineTo(t+h,n-l),r.lineTo(t+f,n+a),r.lineTo(t-h,n+l),r.closePath();break;case"crossRot":b+=tc;case"cross":f=Math.cos(b)*(i?i/2:v),l=Math.cos(b)*v,a=Math.sin(b)*v,h=Math.sin(b)*(i?i/2:v),r.moveTo(t-f,n-a),r.lineTo(t+f,n+a),r.moveTo(t+h,n-l),r.lineTo(t-h,n+l);break;case"star":f=Math.cos(b)*(i?i/2:v),l=Math.cos(b)*v,a=Math.sin(b)*v,h=Math.sin(b)*(i?i/2:v),r.moveTo(t-f,n-a),r.lineTo(t+f,n+a),r.moveTo(t+h,n-l),r.lineTo(t-h,n+l),b+=tc,f=Math.cos(b)*(i?i/2:v),l=Math.cos(b)*v,a=Math.sin(b)*v,h=Math.sin(b)*(i?i/2:v),r.moveTo(t-f,n-a),r.lineTo(t+f,n+a),r.moveTo(t+h,n-l),r.lineTo(t-h,n+l);break;case"line":l=i?i/2:Math.cos(b)*v,a=Math.sin(b)*v,r.moveTo(t-l,n-a),r.lineTo(t+l,n+a);break;case"dash":r.moveTo(t,n),r.lineTo(t+Math.cos(b)*(i?i/2:v),n+Math.sin(b)*v);break;case!1:r.closePath();break}r.fill(),e.borderWidth>0&&r.stroke()}}function Ya(r,e,t){return t=t||.5,!e||r&&r.x>e.left-t&&r.x<e.right+t&&r.y>e.top-t&&r.y<e.bottom+t}function I4(r,e){r.save(),r.beginPath(),r.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),r.clip()}function z4(r){r.restore()}function bx(r,e,t,n,i){if(!e)return r.lineTo(t.x,t.y);if(i==="middle"){let o=(e.x+t.x)/2;r.lineTo(o,e.y),r.lineTo(o,t.y)}else i==="after"!=!!n?r.lineTo(e.x,t.y):r.lineTo(t.x,e.y);r.lineTo(t.x,t.y)}function vx(r,e,t,n){if(!e)return r.lineTo(t.x,t.y);r.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function _9e(r,e){e.translation&&r.translate(e.translation[0],e.translation[1]),ar(e.rotation)||r.rotate(e.rotation),e.color&&(r.fillStyle=e.color),e.textAlign&&(r.textAlign=e.textAlign),e.textBaseline&&(r.textBaseline=e.textBaseline)}function b9e(r,e,t,n,i){if(i.strikethrough||i.underline){let o=r.measureText(n),l=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,s=t-o.actualBoundingBoxAscent,u=t+o.actualBoundingBoxDescent,c=i.strikethrough?(s+u)/2:u;r.strokeStyle=r.fillStyle,r.beginPath(),r.lineWidth=i.decorationWidth||2,r.moveTo(l,c),r.lineTo(a,c),r.stroke()}}function v9e(r,e){let t=r.fillStyle;r.fillStyle=e.color,r.fillRect(e.left,e.top,e.width,e.height),r.fillStyle=t}function Ku(r,e,t,n,i,o={}){let l=Or(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",s,u;for(r.save(),r.font=i.string,_9e(r,o),s=0;s<l.length;++s)u=l[s],o.backdrop&&v9e(r,o.backdrop),a&&(o.strokeColor&&(r.strokeStyle=o.strokeColor),ar(o.strokeWidth)||(r.lineWidth=o.strokeWidth),r.strokeText(u,t,n,o.maxWidth)),r.fillText(u,t,n,o.maxWidth),b9e(r,t,n,u,o),n+=Number(i.lineHeight);r.restore()}function H4(r,e){let{x:t,y:n,w:i,h:o,radius:l}=e;r.arc(t+l.topLeft,n+l.topLeft,l.topLeft,1.5*Qr,Qr,!0),r.lineTo(t,n+o-l.bottomLeft),r.arc(t+l.bottomLeft,n+o-l.bottomLeft,l.bottomLeft,Qr,Ki,!0),r.lineTo(t+i-l.bottomRight,n+o),r.arc(t+i-l.bottomRight,n+o-l.bottomRight,l.bottomRight,Ki,0,!0),r.lineTo(t+i,n+l.topRight),r.arc(t+i-l.topRight,n+l.topRight,l.topRight,0,-Ki,!0),r.lineTo(t+l.topLeft,n)}var C9e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,w9e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function y9e(r,e){let t=(""+r).match(C9e);if(!t||t[1]==="normal")return e*1.2;switch(r=+t[2],t[3]){case"px":return r;case"%":r/=100;break}return e*r}var k9e=r=>+r||0;function IS(r,e){let t={},n=Jt(e),i=n?Object.keys(e):e,o=Jt(r)?n?l=>xt(r[l],r[e[l]]):l=>r[l]:()=>r;for(let l of i)t[l]=k9e(o(l));return t}function Cx(r){return IS(r,{top:"y",right:"x",bottom:"y",left:"x"})}function lc(r){return IS(r,["topLeft","topRight","bottomLeft","bottomRight"])}function Fn(r){let e=Cx(r);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function an(r,e){r=r||{},e=e||xr.font;let t=xt(r.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=xt(r.style,e.style);n&&!(""+n).match(w9e)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let i={family:xt(r.family,e.family),lineHeight:y9e(xt(r.lineHeight,e.lineHeight),t),size:t,style:n,weight:xt(r.weight,e.weight),string:""};return i.string=p9e(i),i}function N4(r,e,t,n){let i=!0,o,l,a;for(o=0,l=r.length;o<l;++o)if(a=r[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&Or(a)&&(a=a[t%a.length],i=!1),a!==void 0))return n&&!i&&(n.cacheable=!1),a}function wx(r,e,t){let{min:n,max:i}=r,o=ex(e,(i-n)/2),l=(a,s)=>t&&a===0?0:a+s;return{min:l(n,-Math.abs(o)),max:l(i,o)}}function b1(r,e){return Object.assign(Object.create(r),e)}function qp(r,e=[""],t,n,i=()=>r[0]){let o=t||r;typeof n=="undefined"&&(n=Lx("_fallback",r));let l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:r,_rootScopes:o,_fallback:n,_getTarget:i,override:a=>qp([a,...r],e,o,n)};return new Proxy(l,{deleteProperty(a,s){return delete a[s],delete a._keys,delete r[0][s],!0},get(a,s){return yx(a,s,()=>O9e(s,e,r,a))},getOwnPropertyDescriptor(a,s){return Reflect.getOwnPropertyDescriptor(a._scopes[0],s)},getPrototypeOf(){return Reflect.getPrototypeOf(r[0])},has(a,s){return Kj(a).includes(s)},ownKeys(a){return Kj(a)},set(a,s,u){let c=a._storage||(a._storage=i());return a[s]=c[s]=u,delete a._keys,!0}})}function ic(r,e,t,n){let i={_cacheable:!1,_proxy:r,_context:e,_subProxy:t,_stack:new Set,_descriptors:zS(r,n),setContext:o=>ic(r,o,t,n),override:o=>ic(r.override(o),e,t,n)};return new Proxy(i,{deleteProperty(o,l){return delete o[l],delete r[l],!0},get(o,l,a){return yx(o,l,()=>E9e(o,l,a))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(r,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(r,l)},getPrototypeOf(){return Reflect.getPrototypeOf(r)},has(o,l){return Reflect.has(r,l)},ownKeys(){return Reflect.ownKeys(r)},set(o,l,a){return r[l]=a,delete o[l],!0}})}function zS(r,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=r;return{allKeys:i,scriptable:t,indexable:n,isScriptable:g1(t)?t:()=>t,isIndexable:g1(n)?n:()=>n}}var L9e=(r,e)=>r?r+Vp(e):e,HS=(r,e)=>Jt(e)&&r!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function yx(r,e,t){if(Object.prototype.hasOwnProperty.call(r,e)||e==="constructor")return r[e];let n=t();return r[e]=n,n}function E9e(r,e,t){let{_proxy:n,_context:i,_subProxy:o,_descriptors:l}=r,a=n[e];return g1(a)&&l.isScriptable(e)&&(a=S9e(e,a,r,t)),Or(a)&&a.length&&(a=M9e(e,a,r,l.isIndexable)),HS(e,a)&&(a=ic(a,i,o&&o[e],l)),a}function S9e(r,e,t,n){let{_proxy:i,_context:o,_subProxy:l,_stack:a}=t;if(a.has(r))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+r);a.add(r);let s=e(o,l||n);return a.delete(r),HS(r,s)&&(s=NS(i._scopes,i,r,s)),s}function M9e(r,e,t,n){let{_proxy:i,_context:o,_subProxy:l,_descriptors:a}=t;if(typeof o.index!="undefined"&&n(r))return e[o.index%e.length];if(Jt(e[0])){let s=e,u=i._scopes.filter(c=>c!==s);e=[];for(let c of s){let f=NS(u,i,r,c);e.push(ic(f,o,l&&l[r],a))}}return e}function kx(r,e,t){return g1(r)?r(e,t):r}var A9e=(r,e)=>r===!0?e:typeof r=="string"?T4(e,r):void 0;function P9e(r,e,t,n,i){for(let o of e){let l=A9e(t,o);if(l){r.add(l);let a=kx(l._fallback,t,i);if(typeof a!="undefined"&&a!==t&&a!==n)return a}else if(l===!1&&typeof n!="undefined"&&t!==n)return null}return!1}function NS(r,e,t,n){let i=e._rootScopes,o=kx(e._fallback,t,n),l=[...r,...i],a=new Set;a.add(n);let s=Yj(a,l,t,o||t,n);return s===null||typeof o!="undefined"&&o!==t&&(s=Yj(a,l,o,s,n),s===null)?!1:qp(Array.from(a),[""],i,o,()=>T9e(e,t,n))}function Yj(r,e,t,n,i){for(;t;)t=P9e(r,e,t,n,i);return t}function T9e(r,e,t){let n=r._getTarget();e in n||(n[e]={});let i=n[e];return Or(i)&&Jt(t)?t:i||{}}function O9e(r,e,t,n){let i;for(let o of e)if(i=Lx(L9e(o,r),t),typeof i!="undefined")return HS(r,i)?NS(t,n,r,i):i}function Lx(r,e){for(let t of e){if(!t)continue;let n=t[r];if(typeof n!="undefined")return n}}function Kj(r){let e=r._keys;return e||(e=r._keys=R9e(r._scopes)),e}function R9e(r){let e=new Set;for(let t of r)for(let n of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}var I9e=Number.EPSILON||1e-14,Ff=(r,e)=>e<r.length&&!r[e].skip&&r[e],Ex=r=>r==="x"?"y":"x";function z9e(r,e,t,n){let i=r.skip?e:r,o=e,l=t.skip?e:t,a=Hp(o,i),s=Hp(l,o),u=a/(a+s),c=s/(a+s);u=isNaN(u)?0:u,c=isNaN(c)?0:c;let f=n*u,h=n*c;return{previous:{x:o.x-f*(l.x-i.x),y:o.y-f*(l.y-i.y)},next:{x:o.x+h*(l.x-i.x),y:o.y+h*(l.y-i.y)}}}function H9e(r,e,t){let n=r.length,i,o,l,a,s,u=Ff(r,0);for(let c=0;c<n-1;++c)if(s=u,u=Ff(r,c+1),!(!s||!u)){if(xf(e[c],0,I9e)){t[c]=t[c+1]=0;continue}i=t[c]/e[c],o=t[c+1]/e[c],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(l=3/Math.sqrt(a),t[c]=i*l*e[c],t[c+1]=o*l*e[c])}}function N9e(r,e,t="x"){let n=Ex(t),i=r.length,o,l,a,s=Ff(r,0);for(let u=0;u<i;++u){if(l=a,a=s,s=Ff(r,u+1),!a)continue;let c=a[t],f=a[n];l&&(o=(c-l[t])/3,a[`cp1${t}`]=c-o,a[`cp1${n}`]=f-o*e[u]),s&&(o=(s[t]-c)/3,a[`cp2${t}`]=c+o,a[`cp2${n}`]=f+o*e[u])}}function V9e(r,e="x"){let t=Ex(e),n=r.length,i=Array(n).fill(0),o=Array(n),l,a,s,u=Ff(r,0);for(l=0;l<n;++l)if(a=s,s=u,u=Ff(r,l+1),!!s){if(u){let c=u[e]-s[e];i[l]=c!==0?(u[t]-s[t])/c:0}o[l]=a?u?nc(i[l-1])!==nc(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}H9e(r,i,o),N9e(r,o,e)}function Tp(r,e,t){return Math.max(Math.min(r,t),e)}function B9e(r,e){let t,n,i,o,l,a=Ya(r[0],e);for(t=0,n=r.length;t<n;++t)l=o,o=a,a=t<n-1&&Ya(r[t+1],e),o&&(i=r[t],l&&(i.cp1x=Tp(i.cp1x,e.left,e.right),i.cp1y=Tp(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Tp(i.cp2x,e.left,e.right),i.cp2y=Tp(i.cp2y,e.top,e.bottom)))}function Sx(r,e,t,n,i){let o,l,a,s;if(e.spanGaps&&(r=r.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")V9e(r,i);else{let u=n?r[r.length-1]:r[0];for(o=0,l=r.length;o<l;++o)a=r[o],s=z9e(u,a,r[Math.min(o+1,l-(n?0:1))%l],e.tension),a.cp1x=s.previous.x,a.cp1y=s.previous.y,a.cp2x=s.next.x,a.cp2y=s.next.y,u=a}e.capBezierPoints&&B9e(r,t)}function Up(){return typeof window!="undefined"&&typeof document!="undefined"}function Wp(r){let e=r.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Np(r,e,t){let n;return typeof r=="string"?(n=parseInt(r,10),r.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=r,n}var Gp=r=>r.ownerDocument.defaultView.getComputedStyle(r,null);function D9e(r,e){return Gp(r).getPropertyValue(e)}var Z9e=["top","right","bottom","left"];function rc(r,e,t){let n={};t=t?"-"+t:"";for(let i=0;i<4;i++){let o=Z9e[i];n[o]=parseFloat(r[e+"-"+o+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var F9e=(r,e,t)=>(r>0||e>0)&&(!t||!t.shadowRoot);function j9e(r,e){let t=r.touches,n=t&&t.length?t[0]:r,{offsetX:i,offsetY:o}=n,l=!1,a,s;if(F9e(i,o,r.target))a=i,s=o;else{let u=e.getBoundingClientRect();a=n.clientX-u.left,s=n.clientY-u.top,l=!0}return{x:a,y:s,box:l}}function Ju(r,e){if("native"in r)return r;let{canvas:t,currentDevicePixelRatio:n}=e,i=Gp(t),o=i.boxSizing==="border-box",l=rc(i,"padding"),a=rc(i,"border","width"),{x:s,y:u,box:c}=j9e(r,t),f=l.left+(c&&a.left),h=l.top+(c&&a.top),{width:d,height:p}=e;return o&&(d-=l.width+a.width,p-=l.height+a.height),{x:Math.round((s-f)/d*t.width/n),y:Math.round((u-h)/p*t.height/n)}}function x9e(r,e,t){let n,i;if(e===void 0||t===void 0){let o=r&&Wp(r);if(!o)e=r.clientWidth,t=r.clientHeight;else{let l=o.getBoundingClientRect(),a=Gp(o),s=rc(a,"border","width"),u=rc(a,"padding");e=l.width-u.width-s.width,t=l.height-u.height-s.height,n=Np(a.maxWidth,o,"clientWidth"),i=Np(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:n||zp,maxHeight:i||zp}}var Op=r=>Math.round(r*10)/10;function Mx(r,e,t,n){let i=Gp(r),o=rc(i,"margin"),l=Np(i.maxWidth,r,"clientWidth")||zp,a=Np(i.maxHeight,r,"clientHeight")||zp,s=x9e(r,e,t),{width:u,height:c}=s;if(i.boxSizing==="content-box"){let h=rc(i,"border","width"),d=rc(i,"padding");u-=d.width+h.width,c-=d.height+h.height}return u=Math.max(0,u-o.width),c=Math.max(0,n?u/n:c-o.height),u=Op(Math.min(u,l,s.maxWidth)),c=Op(Math.min(c,a,s.maxHeight)),u&&!c&&(c=Op(u/2)),(e!==void 0||t!==void 0)&&n&&s.height&&c>s.height&&(c=s.height,u=Op(Math.floor(c*n))),{width:u,height:c}}function VS(r,e,t){let n=e||1,i=Math.floor(r.height*n),o=Math.floor(r.width*n);r.height=Math.floor(r.height),r.width=Math.floor(r.width);let l=r.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${r.height}px`,l.style.width=`${r.width}px`),r.currentDevicePixelRatio!==n||l.height!==i||l.width!==o?(r.currentDevicePixelRatio=n,l.height=i,l.width=o,r.ctx.setTransform(n,0,0,n,0,0),!0):!1}var Ax=function(){let r=!1;try{let e={get passive(){return r=!0,!1}};Up()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return r}();function BS(r,e){let t=D9e(r,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Uu(r,e,t,n){return{x:r.x+t*(e.x-r.x),y:r.y+t*(e.y-r.y)}}function Px(r,e,t,n){return{x:r.x+t*(e.x-r.x),y:n==="middle"?t<.5?r.y:e.y:n==="after"?t<1?r.y:e.y:t>0?e.y:r.y}}function Tx(r,e,t,n){let i={x:r.cp2x,y:r.cp2y},o={x:e.cp1x,y:e.cp1y},l=Uu(r,i,t),a=Uu(i,o,t),s=Uu(o,e,t),u=Uu(l,a,t),c=Uu(a,s,t);return Uu(u,c,t)}var q9e=function(r,e){return{x(t){return r+r+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},U9e=function(){return{x(r){return r},setWidth(r){},textAlign(r){return r},xPlus(r,e){return r+e},leftForLtr(r,e){return r}}};function ac(r,e,t){return r?q9e(e,t):U9e()}function DS(r,e){let t,n;(e==="ltr"||e==="rtl")&&(t=r.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),r.prevTextDirection=n)}function ZS(r,e){e!==void 0&&(delete r.prevTextDirection,r.canvas.style.setProperty("direction",e[0],e[1]))}function Ox(r){return r==="angle"?{between:ES,compare:s9e,normalize:Yi}:{between:oc,compare:(e,t)=>e-t,normalize:e=>e}}function Jj({start:r,end:e,count:t,loop:n,style:i}){return{start:r%t,end:e%t,loop:n&&(e-r+1)%t===0,style:i}}function W9e(r,e,t){let{property:n,start:i,end:o}=t,{between:l,normalize:a}=Ox(n),s=e.length,{start:u,end:c,loop:f}=r,h,d;if(f){for(u+=s,c+=s,h=0,d=s;h<d&&l(a(e[u%s][n]),i,o);++h)u--,c--;u%=s,c%=s}return c<u&&(c+=s),{start:u,end:c,loop:f,style:r.style}}function FS(r,e,t){if(!t)return[r];let{property:n,start:i,end:o}=t,l=e.length,{compare:a,between:s,normalize:u}=Ox(n),{start:c,end:f,loop:h,style:d}=W9e(r,e,t),p=[],v=!1,b=null,C,L,S,P=()=>s(i,S,C)&&a(i,S)!==0,y=()=>a(o,C)===0||s(o,S,C),z=()=>v||P(),G=()=>!v||y();for(let J=c,te=c;J<=f;++J)L=e[J%l],!L.skip&&(C=u(L[n]),C!==S&&(v=s(C,i,o),b===null&&z()&&(b=a(C,i)===0?J:te),b!==null&&G()&&(p.push(Jj({start:b,end:J,loop:h,count:l,style:d})),b=null),te=J,S=C));return b!==null&&p.push(Jj({start:b,end:f,loop:h,count:l,style:d})),p}function jS(r,e){let t=[],n=r.segments;for(let i=0;i<n.length;i++){let o=FS(n[i],r.points,e);o.length&&t.push(...o)}return t}function G9e(r,e,t,n){let i=0,o=e-1;if(t&&!n)for(;i<e&&!r[i].skip;)i++;for(;i<e&&r[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&r[o%e].skip;)o--;return o%=e,{start:i,end:o}}function Y9e(r,e,t,n){let i=r.length,o=[],l=e,a=r[e],s;for(s=e+1;s<=t;++s){let u=r[s%i];u.skip||u.stop?a.skip||(n=!1,o.push({start:e%i,end:(s-1)%i,loop:n}),e=l=u.stop?s:null):(l=s,a.skip&&(e=s)),a=u}return l!==null&&o.push({start:e%i,end:l%i,loop:n}),o}function Rx(r,e){let t=r.points,n=r.options.spanGaps,i=t.length;if(!i)return[];let o=!!r._loop,{start:l,end:a}=G9e(t,i,o,n);if(n===!0)return Xj(r,[{start:l,end:a,loop:o}],t,e);let s=a<l?a+i:a,u=!!r._fullLoop&&l===0&&a===i-1;return Xj(r,Y9e(t,l,s,u),t,e)}function Xj(r,e,t,n){return!n||!n.setContext||!t?e:K9e(r,e,t,n)}function K9e(r,e,t,n){let i=r._chart.getContext(),o=Qj(r.options),{_datasetIndex:l,options:{spanGaps:a}}=r,s=t.length,u=[],c=o,f=e[0].start,h=f;function d(p,v,b,C){let L=a?-1:1;if(p!==v){for(p+=s;t[p%s].skip;)p-=L;for(;t[v%s].skip;)v+=L;p%s!==v%s&&(u.push({start:p%s,end:v%s,loop:b,style:C}),c=C,f=v%s)}}for(let p of e){f=a?f:p.start;let v=t[f%s],b;for(h=f+1;h<=p.end;h++){let C=t[h%s];b=Qj(n.setContext(b1(i,{type:"segment",p0:v,p1:C,p0DataIndex:(h-1)%s,p1DataIndex:h%s,datasetIndex:l}))),J9e(b,c)&&d(f,h-1,p.loop,c),v=C,c=b}f<h-1&&d(f,h-1,p.loop,c)}return u}function Qj(r){return{backgroundColor:r.backgroundColor,borderCapStyle:r.borderCapStyle,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderJoinStyle:r.borderJoinStyle,borderWidth:r.borderWidth,borderColor:r.borderColor}}function J9e(r,e){if(!e)return!1;let t=[],n=function(i,o){return PS(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(r,n)!==JSON.stringify(e,n)}function Rp(r,e,t){return r.options.clip?r[t]:e[t]}function X9e(r,e){let{xScale:t,yScale:n}=r;return t&&n?{left:Rp(t,e,"left"),right:Rp(t,e,"right"),top:Rp(n,e,"top"),bottom:Rp(n,e,"bottom")}:e}function xS(r,e){let t=e._clip;if(t.disabled)return!1;let n=X9e(e,r.chartArea);return{left:t.left===!1?0:n.left-(t.left===!0?0:t.left),right:t.right===!1?r.width:n.right+(t.right===!0?0:t.right),top:t.top===!1?0:n.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?r.height:n.bottom+(t.bottom===!0?0:t.bottom)}}var XS=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){let o=t.listeners[i],l=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(n-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=MS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;let o=n.items,l=o.length-1,a=!1,s;for(;l>=0;--l)s=o[l],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(o[l]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),o.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let n=t.items,i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},v1=new XS,Ix="transparent",Q9e={boolean(r,e,t){return t>.5?e:r},color(r,e,t){let n=TS(r||Ix),i=n.valid&&TS(e||Ix);return i&&i.valid?i.mix(n,t).hexString():e},number(r,e,t){return r+(e-r)*t}},QS=class{constructor(e,t,n,i){let o=t[n];i=N4([e.to,i,o,e.from]);let l=N4([e.from,o,i]);this._active=!0,this._fn=e.fn||Q9e[e.type||typeof l],this._easing=Df[e.easing]||Df.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);let i=this._target[this._prop],o=n-this._start,l=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=N4([e.to,t,i,e.from]),this._from=N4([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,n=this._duration,i=this._prop,o=this._from,l=this._loop,a=this._to,s;if(this._active=o!==a&&(l||t<n),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=o;return}s=t/n%2,s=l&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(o,a,s)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){let t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}},n_=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Jt(e))return;let t=Object.keys(xr.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let o=e[i];if(!Jt(o))return;let l={};for(let a of t)l[a]=o[a];(Or(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!n.has(a))&&n.set(a,l)})})}_animateOptions(e,t){let n=t.options,i=e5e(e,n);if(!i)return[];let o=this._createAnimations(i,n);return n.$shared&&$9e(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,t){let n=this._properties,i=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),a=Date.now(),s;for(s=l.length-1;s>=0;--s){let u=l[s];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,t));continue}let c=t[u],f=o[u],h=n.get(u);if(f)if(h&&f.active()){f.update(h,c,a);continue}else f.cancel();if(!h||!h.duration){e[u]=c;continue}o[u]=f=new QS(h,e,u,c),i.push(f)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let n=this._createAnimations(e,t);if(n.length)return v1.add(this._chart,n),!0}};function $9e(r,e){let t=[],n=Object.keys(e);for(let i=0;i<n.length;i++){let o=r[n[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function e5e(r,e){if(!e)return;let t=r.options;if(!t){r.options=e;return}return t.$shared&&(r.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function zx(r,e){let t=r&&r.options||{},n=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:n?o:i,end:n?i:o}}function t5e(r,e,t){if(t===!1)return!1;let n=zx(r,t),i=zx(e,t);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function r5e(r){let e,t,n,i;return Jt(r)?(e=r.top,t=r.right,n=r.bottom,i=r.left):e=t=n=i=r,{top:e,right:t,bottom:n,left:i,disabled:r===!1}}function Sq(r,e){let t=[],n=r._getSortedDatasetMetas(e),i,o;for(i=0,o=n.length;i<o;++i)t.push(n[i].index);return t}function Hx(r,e,t,n={}){let i=r.keys,o=n.mode==="single",l,a,s,u;if(e===null)return;let c=!1;for(l=0,a=i.length;l<a;++l){if(s=+i[l],s===t){if(c=!0,n.all)continue;break}u=r.values[s],jr(u)&&(o||e===0||nc(e)===nc(u))&&(e+=u)}return!c&&!n.all?0:e}function n5e(r,e){let{iScale:t,vScale:n}=e,i=t.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",l=Object.keys(r),a=new Array(l.length),s,u,c;for(s=0,u=l.length;s<u;++s)c=l[s],a[s]={[i]:c,[o]:r[c]};return a}function qS(r,e){let t=r&&r.options.stacked;return t||t===void 0&&e.stack!==void 0}function i5e(r,e,t){return`${r.id}.${e.id}.${t.stack||t.type}`}function o5e(r){let{min:e,max:t,minDefined:n,maxDefined:i}=r.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function l5e(r,e,t){let n=r[e]||(r[e]={});return n[t]||(n[t]={})}function Nx(r,e,t,n){for(let i of e.getMatchingVisibleMetas(n).reverse()){let o=r[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function Vx(r,e){let{chart:t,_cachedMeta:n}=r,i=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:a}=n,s=o.axis,u=l.axis,c=i5e(o,l,n),f=e.length,h;for(let d=0;d<f;++d){let p=e[d],{[s]:v,[u]:b}=p,C=p._stacks||(p._stacks={});h=C[u]=l5e(i,c,v),h[a]=b,h._top=Nx(h,l,!0,n.type),h._bottom=Nx(h,l,!1,n.type);let L=h._visualValues||(h._visualValues={});L[a]=b}}function US(r,e){let t=r.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function a5e(r,e){return b1(r,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function s5e(r,e,t){return b1(r,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function V4(r,e){let t=r.controller.index,n=r.vScale&&r.vScale.axis;if(n){e=e||r._parsed;for(let i of e){let o=i._stacks;if(!o||o[n]===void 0||o[n][t]===void 0)return;delete o[n][t],o[n]._visualValues!==void 0&&o[n]._visualValues[t]!==void 0&&delete o[n]._visualValues[t]}}}var WS=r=>r==="reset"||r==="none",Bx=(r,e)=>e?r:Object.assign({},r),u5e=(r,e,t)=>r&&!e.hidden&&e._stacked&&{keys:Sq(t,!0),values:null},cc=class{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=qS(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&V4(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(f,h,d,p)=>f==="x"?h:f==="r"?p:d,o=t.xAxisID=xt(n.xAxisID,US(e,"x")),l=t.yAxisID=xt(n.yAxisID,US(e,"y")),a=t.rAxisID=xt(n.rAxisID,US(e,"r")),s=t.indexAxis,u=t.iAxisID=i(s,o,l,a),c=t.vAxisID=i(s,l,o,a);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&SS(this._data,this),e._stacked&&V4(e)}_dataCheck(){let e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Jt(t)){let i=this._cachedMeta;this._data=n5e(t,i)}else if(n!==t){if(n){SS(n,this);let i=this._cachedMeta;V4(i),i._parsed=[]}t&&Object.isExtensible(t)&&cx(t,this),this._syncList=[],this._data=t}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let t=this._cachedMeta,n=this.getDataset(),i=!1;this._dataCheck();let o=t._stacked;t._stacked=qS(t.vScale,t),t.stack!==n.stack&&(i=!0,V4(t),t.stack=n.stack),this._resyncElements(e),(i||o!==t._stacked)&&(Vx(this,t._parsed),t._stacked=qS(t.vScale,t))}configure(){let e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){let{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:l}=n,a=o.axis,s=e===0&&t===i.length?!0:n._sorted,u=e>0&&n._parsed[e-1],c,f,h;if(this._parsing===!1)n._parsed=i,n._sorted=!0,h=i;else{Or(i[e])?h=this.parseArrayData(n,i,e,t):Jt(i[e])?h=this.parseObjectData(n,i,e,t):h=this.parsePrimitiveData(n,i,e,t);let d=()=>f[a]===null||u&&f[a]<u[a];for(c=0;c<t;++c)n._parsed[c+e]=f=h[c],s&&(d()&&(s=!1),u=f);n._sorted=s}l&&Vx(this,h)}parsePrimitiveData(e,t,n,i){let{iScale:o,vScale:l}=e,a=o.axis,s=l.axis,u=o.getLabels(),c=o===l,f=new Array(i),h,d,p;for(h=0,d=i;h<d;++h)p=h+n,f[h]={[a]:c||o.parse(u[p],p),[s]:l.parse(t[p],p)};return f}parseArrayData(e,t,n,i){let{xScale:o,yScale:l}=e,a=new Array(i),s,u,c,f;for(s=0,u=i;s<u;++s)c=s+n,f=t[c],a[s]={x:o.parse(f[0],c),y:l.parse(f[1],c)};return a}parseObjectData(e,t,n,i){let{xScale:o,yScale:l}=e,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,u=new Array(i),c,f,h,d;for(c=0,f=i;c<f;++c)h=c+n,d=t[h],u[c]={x:o.parse(T4(d,a),h),y:l.parse(T4(d,s),h)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){let i=this.chart,o=this._cachedMeta,l=t[e.axis],a={keys:Sq(i,!0),values:t._stacks[e.axis]._visualValues};return Hx(a,l,o.index,{mode:n})}updateRangeFromParsed(e,t,n,i){let o=n[t.axis],l=o===null?NaN:o,a=i&&n._stacks[t.axis];i&&a&&(i.values=a,l=Hx(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){let n=this._cachedMeta,i=n._parsed,o=n._sorted&&e===n.iScale,l=i.length,a=this._getOtherScale(e),s=u5e(t,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:f}=o5e(a),h,d;function p(){d=i[h];let v=d[a.axis];return!jr(d[e.axis])||c>v||f<v}for(h=0;h<l&&!(!p()&&(this.updateRangeFromParsed(u,e,d,s),o));++h);if(o){for(h=l-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(u,e,d,s);break}}return u}getAllParsedValues(e){let t=this._cachedMeta._parsed,n=[],i,o,l;for(i=0,o=t.length;i<o;++i)l=t[i][e.axis],jr(l)&&n.push(l);return n}getMaxOverflow(){return!1}getLabelAndValue(e){let t=this._cachedMeta,n=t.iScale,i=t.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){let t=this._cachedMeta;this.update(e||"default"),t._clip=r5e(xt(this.options.clip,t5e(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],o=t.chartArea,l=[],a=this._drawStart||0,s=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop,c;for(n.dataset&&n.dataset.draw(e,o,a,s),c=a;c<a+s;++c){let f=i[c];f.hidden||(f.active&&u?l.push(f):f.draw(e,o))}for(c=0;c<l.length;++c)l[c].draw(e,o)}getStyle(e,t){let n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){let i=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let l=this._cachedMeta.data[e];o=l.$context||(l.$context=s5e(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=a5e(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){let i=t==="active",o=this._cachedDataOpts,l=e+"-"+t,a=o[l],s=this.enableOptionSharing&&O4(n);if(a)return Bx(a,s);let u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],h=u.getOptionScopes(this.getDataset(),c),d=Object.keys(xr.elements[e]),p=()=>this.getContext(n,i,t),v=u.resolveNamedOptions(h,d,p,f);return v.$shared&&(v.$shared=s,o[l]=Object.freeze(Bx(v,s))),v}_resolveAnimations(e,t,n){let i=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,a=o[l];if(a)return a;let s;if(i.options.animation!==!1){let c=this.chart.config,f=c.datasetAnimationScopeKeys(this._type,t),h=c.getOptionScopes(this.getDataset(),f);s=c.createResolver(h,this.getContext(e,n,t))}let u=new n_(i,s&&s.animations);return s&&s._cacheable&&(o[l]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||WS(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){let n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,o=this.getSharedOptions(n),l=this.includeOptions(t,o)||o!==i;return this.updateSharedOptions(o,t,n),{sharedOptions:o,includeOptions:l}}updateElement(e,t,n,i){WS(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!WS(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;let o=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let t=this._data,n=this._cachedMeta.data;for(let[a,s,u]of this._syncList)this[a](s,u);this._syncList=[];let i=n.length,o=t.length,l=Math.min(o,i);l&&this.parse(0,l),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,t,n=!0){let i=this._cachedMeta,o=i.data,l=e+t,a,s=u=>{for(u.length+=t,a=u.length-1;a>=l;a--)u[a]=u[a-t]};for(s(o),a=e;a<l;++a)o[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(e,t),n&&this.updateElements(o,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){let n=this._cachedMeta;if(this._parsing){let i=n._parsed.splice(e,t);n._stacked&&V4(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);let n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};ze(cc,"defaults",{}),ze(cc,"datasetElementType",null),ze(cc,"dataElementType",null);var fc=class extends cc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let t=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=t,l=this.chart._animationsDisabled,{start:a,count:s}=mx(t,i,l);this._drawStart=a,this._drawCount=s,gx(t)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!l,options:u},e),this.updateElements(i,a,s,e)}updateElements(e,t,n,i){let o=i==="reset",{iScale:l,vScale:a,_stacked:s,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:f}=this._getSharedOptions(t,i),h=l.axis,d=a.axis,{spanGaps:p,segment:v}=this.options,b=qf(p)?p:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||o||i==="none",L=t+n,S=e.length,P=t>0&&this.getParsed(t-1);for(let y=0;y<S;++y){let z=e[y],G=C?z:{};if(y<t||y>=L){G.skip=!0;continue}let J=this.getParsed(y),te=ar(J[d]),ne=G[h]=l.getPixelForValue(J[h],y),Q=G[d]=o||te?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,J,s):J[d],y);G.skip=isNaN(ne)||isNaN(Q)||te,G.stop=y>0&&Math.abs(J[h]-P[h])>b,v&&(G.parsed=J,G.raw=u.data[y]),f&&(G.options=c||this.resolveDataElementOptions(y,z.active?"active":i)),C||this.updateElement(z,y,G,i),P=J}}getMaxOverflow(){let e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;let o=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,l)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}};ze(fc,"id","line"),ze(fc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ze(fc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function sc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var $S=class r{constructor(e){ze(this,"options");this.options=e||{}}static override(e){Object.assign(r.prototype,e)}init(){}formats(){return sc()}parse(){return sc()}format(){return sc()}add(){return sc()}diff(){return sc()}startOf(){return sc()}endOf(){return sc()}},c5e={_date:$S};function f5e(r,e,t,n){let{controller:i,data:o,_sorted:l}=r,a=i._cachedMeta.iScale,s=r.dataset&&r.dataset.options?r.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&l&&o.length){let u=a._reversePixels?ax:Wu;if(n){if(i._sharedOptions){let c=o[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){let h=u(o,e,t-f),d=u(o,e,t+f);return{lo:h.lo,hi:d.hi}}}}else{let c=u(o,e,t);if(s){let{vScale:f}=i._cachedMeta,{_parsed:h}=r,d=h.slice(0,c.lo+1).reverse().findIndex(v=>!ar(v[f.axis]));c.lo-=Math.max(0,d);let p=h.slice(c.hi).findIndex(v=>!ar(v[f.axis]));c.hi+=Math.max(0,p)}return c}}return{lo:0,hi:o.length-1}}function G4(r,e,t,n,i){let o=r.getSortedVisibleDatasetMetas(),l=t[e];for(let a=0,s=o.length;a<s;++a){let{index:u,data:c}=o[a],{lo:f,hi:h}=f5e(o[a],e,l,i);for(let d=f;d<=h;++d){let p=c[d];p.skip||n(p,u,d)}}}function h5e(r){let e=r.indexOf("x")!==-1,t=r.indexOf("y")!==-1;return function(n,i){let o=e?Math.abs(n.x-i.x):0,l=t?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function GS(r,e,t,n,i){let o=[];return!i&&!r.isPointInArea(e)||G4(r,t,e,function(a,s,u){!i&&!Ya(a,r.chartArea,0)||a.inRange(e.x,e.y,n)&&o.push({element:a,datasetIndex:s,index:u})},!0),o}function d5e(r,e,t,n){let i=[];function o(l,a,s){let{startAngle:u,endAngle:c}=l.getProps(["startAngle","endAngle"],n),{angle:f}=ox(l,{x:e.x,y:e.y});ES(f,u,c)&&i.push({element:l,datasetIndex:a,index:s})}return G4(r,t,e,o),i}function m5e(r,e,t,n,i,o){let l=[],a=h5e(t),s=Number.POSITIVE_INFINITY;function u(c,f,h){let d=c.inRange(e.x,e.y,i);if(n&&!d)return;let p=c.getCenterPoint(i);if(!(!!o||r.isPointInArea(p))&&!d)return;let b=a(e,p);b<s?(l=[{element:c,datasetIndex:f,index:h}],s=b):b===s&&l.push({element:c,datasetIndex:f,index:h})}return G4(r,t,e,u),l}function YS(r,e,t,n,i,o){return!o&&!r.isPointInArea(e)?[]:t==="r"&&!n?d5e(r,e,t,i):m5e(r,e,t,n,i,o)}function Dx(r,e,t,n,i){let o=[],l=t==="x"?"inXRange":"inYRange",a=!1;return G4(r,t,e,(s,u,c)=>{s[l]&&s[l](e[t],i)&&(o.push({element:s,datasetIndex:u,index:c}),a=a||s.inRange(e.x,e.y,i))}),n&&!a?[]:o}var g5e={evaluateInteractionItems:G4,modes:{index(r,e,t,n){let i=Ju(e,r),o=t.axis||"x",l=t.includeInvisible||!1,a=t.intersect?GS(r,i,o,n,l):YS(r,i,o,!1,n,l),s=[];return a.length?(r.getSortedVisibleDatasetMetas().forEach(u=>{let c=a[0].index,f=u.data[c];f&&!f.skip&&s.push({element:f,datasetIndex:u.index,index:c})}),s):[]},dataset(r,e,t,n){let i=Ju(e,r),o=t.axis||"xy",l=t.includeInvisible||!1,a=t.intersect?GS(r,i,o,n,l):YS(r,i,o,!1,n,l);if(a.length>0){let s=a[0].datasetIndex,u=r.getDatasetMeta(s).data;a=[];for(let c=0;c<u.length;++c)a.push({element:u[c],datasetIndex:s,index:c})}return a},point(r,e,t,n){let i=Ju(e,r),o=t.axis||"xy",l=t.includeInvisible||!1;return GS(r,i,o,n,l)},nearest(r,e,t,n){let i=Ju(e,r),o=t.axis||"xy",l=t.includeInvisible||!1;return YS(r,i,o,t.intersect,n,l)},x(r,e,t,n){let i=Ju(e,r);return Dx(r,i,"x",t.intersect,n)},y(r,e,t,n){let i=Ju(e,r);return Dx(r,i,"y",t.intersect,n)}}},Mq=["left","top","right","bottom"];function B4(r,e){return r.filter(t=>t.pos===e)}function Zx(r,e){return r.filter(t=>Mq.indexOf(t.pos)===-1&&t.box.axis===e)}function D4(r,e){return r.sort((t,n)=>{let i=e?n:t,o=e?t:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function p5e(r){let e=[],t,n,i,o,l,a;for(t=0,n=(r||[]).length;t<n;++t)i=r[t],{position:o,options:{stack:l,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&o+l,stackWeight:a});return e}function _5e(r){let e={};for(let t of r){let{stack:n,pos:i,stackWeight:o}=t;if(!n||!Mq.includes(i))continue;let l=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function b5e(r,e){let t=_5e(r),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e,o,l,a;for(o=0,l=r.length;o<l;++o){a=r[o];let{fullSize:s}=a.box,u=t[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*n:s&&e.availableWidth,a.height=i):(a.width=n,a.height=c?c*i:s&&e.availableHeight)}return t}function v5e(r){let e=p5e(r),t=D4(e.filter(u=>u.box.fullSize),!0),n=D4(B4(e,"left"),!0),i=D4(B4(e,"right")),o=D4(B4(e,"top"),!0),l=D4(B4(e,"bottom")),a=Zx(e,"x"),s=Zx(e,"y");return{fullSize:t,leftAndTop:n.concat(o),rightAndBottom:i.concat(s).concat(l).concat(a),chartArea:B4(e,"chartArea"),vertical:n.concat(i).concat(s),horizontal:o.concat(l).concat(a)}}function Fx(r,e,t,n){return Math.max(r[t],e[t])+Math.max(r[n],e[n])}function Aq(r,e){r.top=Math.max(r.top,e.top),r.left=Math.max(r.left,e.left),r.bottom=Math.max(r.bottom,e.bottom),r.right=Math.max(r.right,e.right)}function C5e(r,e,t,n){let{pos:i,box:o}=t,l=r.maxPadding;if(!Jt(i)){t.size&&(r[i]-=t.size);let f=n[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?o.height:o.width),t.size=f.size/f.count,r[i]+=t.size}o.getPadding&&Aq(l,o.getPadding());let a=Math.max(0,e.outerWidth-Fx(l,r,"left","right")),s=Math.max(0,e.outerHeight-Fx(l,r,"top","bottom")),u=a!==r.w,c=s!==r.h;return r.w=a,r.h=s,t.horizontal?{same:u,other:c}:{same:c,other:u}}function w5e(r){let e=r.maxPadding;function t(n){let i=Math.max(e[n]-r[n],0);return r[n]+=i,i}r.y+=t("top"),r.x+=t("left"),t("right"),t("bottom")}function y5e(r,e){let t=e.maxPadding;function n(i){let o={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return n(r?["left","right"]:["top","bottom"])}function j4(r,e,t,n){let i=[],o,l,a,s,u,c;for(o=0,l=r.length,u=0;o<l;++o){a=r[o],s=a.box,s.update(a.width||e.w,a.height||e.h,y5e(a.horizontal,e));let{same:f,other:h}=C5e(e,t,a,n);u|=f&&i.length,c=c||h,s.fullSize||i.push(a)}return u&&j4(i,e,t,n)||c}function Yp(r,e,t,n,i){r.top=t,r.left=e,r.right=e+n,r.bottom=t+i,r.width=n,r.height=i}function jx(r,e,t,n){let i=t.padding,{x:o,y:l}=e;for(let a of r){let s=a.box,u=n[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){let f=e.w*c,h=u.size||s.height;O4(u.start)&&(l=u.start),s.fullSize?Yp(s,i.left,l,t.outerWidth-i.right-i.left,h):Yp(s,e.left+u.placed,l,f,h),u.start=l,u.placed+=f,l=s.bottom}else{let f=e.h*c,h=u.size||s.width;O4(u.start)&&(o=u.start),s.fullSize?Yp(s,o,i.top,h,t.outerHeight-i.bottom-i.top):Yp(s,o,e.top+u.placed,h,f),u.start=o,u.placed+=f,o=s.right}}e.x=o,e.y=l}var ol={addBox(r,e){r.boxes||(r.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},r.boxes.push(e)},removeBox(r,e){let t=r.boxes?r.boxes.indexOf(e):-1;t!==-1&&r.boxes.splice(t,1)},configure(r,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(r,e,t,n){if(!r)return;let i=Fn(r.options.layout.padding),o=Math.max(e-i.width,0),l=Math.max(t-i.height,0),a=v5e(r.boxes),s=a.vertical,u=a.horizontal;sr(r.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});let c=s.reduce((v,b)=>b.box.options&&b.box.options.display===!1?v:v+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/c,hBoxMaxHeight:l/2}),h=Object.assign({},i);Aq(h,Fn(n));let d=Object.assign({maxPadding:h,w:o,h:l,x:i.left,y:i.top},i),p=b5e(s.concat(u),f);j4(a.fullSize,d,f,p),j4(s,d,f,p),j4(u,d,f,p)&&j4(s,d,f,p),w5e(d),jx(a.leftAndTop,d,f,p),d.x+=d.w,d.y+=d.h,jx(a.rightAndBottom,d,f,p),r.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},sr(a.chartArea,v=>{let b=v.box;Object.assign(b,r.chartArea),b.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}},i_=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}},eM=class extends i_{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},t_="$chartjs",k5e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xx=r=>r===null||r==="";function L5e(r,e){let t=r.style,n=r.getAttribute("height"),i=r.getAttribute("width");if(r[t_]={initial:{height:n,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",xx(i)){let o=BS(r,"width");o!==void 0&&(r.width=o)}if(xx(n))if(r.style.height==="")r.height=r.width/(e||2);else{let o=BS(r,"height");o!==void 0&&(r.height=o)}return r}var Pq=Ax?{passive:!0}:!1;function E5e(r,e,t){r&&r.addEventListener(e,t,Pq)}function S5e(r,e,t){r&&r.canvas&&r.canvas.removeEventListener(e,t,Pq)}function M5e(r,e){let t=k5e[r.type]||r.type,{x:n,y:i}=Ju(r,e);return{type:t,chart:e,native:r,x:n!==void 0?n:null,y:i!==void 0?i:null}}function o_(r,e){for(let t of r)if(t===e||t.contains(e))return!0}function A5e(r,e,t){let n=r.canvas,i=new MutationObserver(o=>{let l=!1;for(let a of o)l=l||o_(a.addedNodes,n),l=l&&!o_(a.removedNodes,n);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function P5e(r,e,t){let n=r.canvas,i=new MutationObserver(o=>{let l=!1;for(let a of o)l=l||o_(a.removedNodes,n),l=l&&!o_(a.addedNodes,n);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var U4=new Map,qx=0;function Tq(){let r=window.devicePixelRatio;r!==qx&&(qx=r,U4.forEach((e,t)=>{t.currentDevicePixelRatio!==r&&e()}))}function T5e(r,e){U4.size||window.addEventListener("resize",Tq),U4.set(r,e)}function O5e(r){U4.delete(r),U4.size||window.removeEventListener("resize",Tq)}function R5e(r,e,t){let n=r.canvas,i=n&&Wp(n);if(!i)return;let o=AS((a,s)=>{let u=i.clientWidth;t(a,s),u<i.clientWidth&&t()},window),l=new ResizeObserver(a=>{let s=a[0],u=s.contentRect.width,c=s.contentRect.height;u===0&&c===0||o(u,c)});return l.observe(i),T5e(r,o),l}function KS(r,e,t){t&&t.disconnect(),e==="resize"&&O5e(r)}function I5e(r,e,t){let n=r.canvas,i=AS(o=>{r.ctx!==null&&t(M5e(o,r))},r);return E5e(n,e,i),i}var tM=class extends i_{acquireContext(e,t){let n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(L5e(e,t),n):null}releaseContext(e){let t=e.canvas;if(!t[t_])return!1;let n=t[t_].initial;["height","width"].forEach(o=>{let l=n[o];ar(l)?t.removeAttribute(o):t.setAttribute(o,l)});let i=n.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[t_],!0}addEventListener(e,t,n){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),l={attach:A5e,detach:P5e,resize:R5e}[t]||I5e;i[t]=l(e,t,n)}removeEventListener(e,t){let n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:KS,detach:KS,resize:KS}[t]||S5e)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return Mx(e,t,n,i)}isAttached(e){let t=e&&Wp(e);return!!(t&&t.isConnected)}};function z5e(r){return!Up()||typeof OffscreenCanvas!="undefined"&&r instanceof OffscreenCanvas?eM:tM}var Jl=class{constructor(){ze(this,"x");ze(this,"y");ze(this,"active",!1);ze(this,"options");ze(this,"$animations")}tooltipPosition(e){let{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return qf(this.x)&&qf(this.y)}getProps(e,t){let n=this.$animations;if(!t||!n)return this;let i={};return e.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}};ze(Jl,"defaults",{}),ze(Jl,"defaultRoutes");function H5e(r,e){let t=r.options.ticks,n=N5e(r),i=Math.min(t.maxTicksLimit||n,n),o=t.major.enabled?B5e(e):[],l=o.length,a=o[0],s=o[l-1],u=[];if(l>i)return D5e(e,u,o,l/i),u;let c=V5e(o,e,i);if(l>0){let f,h,d=l>1?Math.round((s-a)/(l-1)):null;for(Kp(e,u,c,ar(d)?0:a-d,a),f=0,h=l-1;f<h;f++)Kp(e,u,c,o[f],o[f+1]);return Kp(e,u,c,s,ar(d)?e.length:s+d),u}return Kp(e,u,c),u}function N5e(r){let e=r.options.offset,t=r._tickSize(),n=r._length/t+(e?0:1),i=r._maxLength/t;return Math.floor(Math.min(n,i))}function V5e(r,e,t){let n=Z5e(r),i=e.length/t;if(!n)return Math.max(i,1);let o=nx(n);for(let l=0,a=o.length-1;l<a;l++){let s=o[l];if(s>i)return s}return Math.max(i,1)}function B5e(r){let e=[],t,n;for(t=0,n=r.length;t<n;t++)r[t].major&&e.push(t);return e}function D5e(r,e,t,n){let i=0,o=t[0],l;for(n=Math.ceil(n),l=0;l<r.length;l++)l===o&&(e.push(r[l]),i++,o=t[i*n])}function Kp(r,e,t,n,i){let o=xt(n,0),l=Math.min(xt(i,r.length),r.length),a=0,s,u,c;for(t=Math.ceil(t),i&&(s=i-n,t=s/Math.floor(s/t)),c=o;c<0;)a++,c=Math.round(o+a*t);for(u=Math.max(o,0);u<l;u++)u===c&&(e.push(r[u]),a++,c=Math.round(o+a*t))}function Z5e(r){let e=r.length,t,n;if(e<2)return!1;for(n=r[0],t=1;t<e;++t)if(r[t]-r[t-1]!==n)return!1;return n}var F5e=r=>r==="left"?"right":r==="right"?"left":r,Ux=(r,e,t)=>e==="top"||e==="left"?r[e]+t:r[e]-t,Wx=(r,e)=>Math.min(e||r,r);function Gx(r,e){let t=[],n=r.length/e,i=r.length,o=0;for(;o<i;o+=n)t.push(r[Math.floor(o)]);return t}function j5e(r,e,t){let n=r.ticks.length,i=Math.min(e,n-1),o=r._startPixel,l=r._endPixel,a=1e-6,s=r.getPixelForTick(i),u;if(!(t&&(n===1?u=Math.max(s-o,l-s):e===0?u=(r.getPixelForTick(1)-s)/2:u=(s-r.getPixelForTick(i-1))/2,s+=i<e?u:-u,s<o-a||s>l+a)))return s}function x5e(r,e){sr(r,t=>{let n=t.gc,i=n.length/2,o;if(i>e){for(o=0;o<i;++o)delete t.data[n[o]];n.splice(0,i)}})}function Z4(r){return r.drawTicks?r.tickLength:0}function Yx(r,e){if(!r.display)return 0;let t=an(r.font,e),n=Fn(r.padding);return(Or(r.text)?r.text.length:1)*t.lineHeight+n.height}function q5e(r,e){return b1(r,{scale:e,type:"scale"})}function U5e(r,e,t){return b1(r,{tick:t,index:e,type:"tick"})}function W5e(r,e,t){let n=Zp(r);return(t&&e!=="right"||!t&&e==="right")&&(n=F5e(n)),n}function G5e(r,e,t,n){let{top:i,left:o,bottom:l,right:a,chart:s}=r,{chartArea:u,scales:c}=s,f=0,h,d,p,v=l-i,b=a-o;if(r.isHorizontal()){if(d=Zn(n,o,a),Jt(t)){let C=Object.keys(t)[0],L=t[C];p=c[C].getPixelForValue(L)+v-e}else t==="center"?p=(u.bottom+u.top)/2+v-e:p=Ux(r,t,e);h=a-o}else{if(Jt(t)){let C=Object.keys(t)[0],L=t[C];d=c[C].getPixelForValue(L)-b+e}else t==="center"?d=(u.left+u.right)/2-b+e:d=Ux(r,t,e);p=Zn(n,l,i),f=t==="left"?-Ki:Ki}return{titleX:d,titleY:p,maxWidth:h,rotation:f}}var dc=class r extends Jl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Xi(e,Number.POSITIVE_INFINITY),t=Xi(t,Number.NEGATIVE_INFINITY),n=Xi(n,Number.POSITIVE_INFINITY),i=Xi(i,Number.NEGATIVE_INFINITY),{min:Xi(e,n),max:Xi(t,i),minDefined:jr(e),maxDefined:jr(t)}}getMinMax(e){let{min:t,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),l;if(i&&o)return{min:t,max:n};let a=this.getMatchingVisibleMetas();for(let s=0,u=a.length;s<u;++s)l=a[s].controller.getMinMax(this,e),i||(t=Math.min(t,l.min)),o||(n=Math.max(n,l.max));return t=o&&t>n?n:t,n=i&&t>n?t:n,{min:Xi(t,Xi(n,t)),max:Xi(n,Xi(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Cr(this.options.beforeUpdate,[this])}update(e,t,n){let{beginAtZero:i,grace:o,ticks:l}=this.options,a=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=wx(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let s=a<this.ticks.length;this._convertTicksToLabels(s?Gx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=H5e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Cr(this.options.afterUpdate,[this])}beforeSetDimensions(){Cr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Cr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Cr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Cr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n],o.label=Cr(t.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Cr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Cr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,n=Wx(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation,l=i,a,s,u;if(!this._isVisible()||!t.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}let c=this._getLabelSizes(),f=c.widest.width,h=c.highest.height,d=Mo(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/n:d/(n-1),f+6>a&&(a=d/(n-(e.offset?.5:1)),s=this.maxHeight-Z4(e.grid)-t.padding-Yx(e.title,this.chart.options.font),u=Math.sqrt(f*f+h*h),l=Bp(Math.min(Math.asin(Mo((c.highest.height+6)/a,-1,1)),Math.asin(Mo(s/u,-1,1))-Math.asin(Mo(h/u,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){Cr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Cr(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:o}}=this,l=this._isVisible(),a=this.isHorizontal();if(l){let s=Yx(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Z4(o)+s):(e.height=this.maxHeight,e.width=Z4(o)+s),n.display&&this.ticks.length){let{first:u,last:c,widest:f,highest:h}=this._getLabelSizes(),d=n.padding*2,p=_1(this.labelRotation),v=Math.cos(p),b=Math.sin(p);if(a){let C=n.mirror?0:b*f.width+v*h.height;e.height=Math.min(this.maxHeight,e.height+C+d)}else{let C=n.mirror?0:v*f.width+b*h.height;e.width=Math.min(this.maxWidth,e.width+C+d)}this._calculatePadding(u,c,b,v)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){let{ticks:{align:o,padding:l},position:a}=this.options,s=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let c=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),h=0,d=0;s?u?(h=i*e.width,d=n*t.height):(h=n*e.height,d=i*t.width):o==="start"?d=t.width:o==="end"?h=e.width:o!=="inner"&&(h=e.width/2,d=t.width/2),this.paddingLeft=Math.max((h-c+l)*this.width/(this.width-c),0),this.paddingRight=Math.max((d-f+l)*this.width/(this.width-f),0)}else{let c=t.height/2,f=e.height/2;o==="start"?(c=0,f=e.height):o==="end"&&(c=t.height,f=0),this.paddingTop=c+l,this.paddingBottom=f+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Cr(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)ar(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=Gx(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){let{ctx:i,_longestTextCache:o}=this,l=[],a=[],s=Math.floor(t/Wx(t,n)),u=0,c=0,f,h,d,p,v,b,C,L,S,P,y;for(f=0;f<t;f+=s){if(p=e[f].label,v=this._resolveTickFontOptions(f),i.font=b=v.string,C=o[b]=o[b]||{data:{},gc:[]},L=v.lineHeight,S=P=0,!ar(p)&&!Or(p))S=A4(i,C.data,C.gc,S,p),P=L;else if(Or(p))for(h=0,d=p.length;h<d;++h)y=p[h],!ar(y)&&!Or(y)&&(S=A4(i,C.data,C.gc,S,y),P+=L);l.push(S),a.push(P),u=Math.max(S,u),c=Math.max(P,c)}x5e(o,t);let z=l.indexOf(u),G=a.indexOf(c),J=te=>({width:l[te]||0,height:a[te]||0});return{first:J(0),last:J(t-1),widest:J(z),highest:J(G),widths:l,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return lx(this._alignToPixels?Yu(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let n=t[e];return n.$context||(n.$context=U5e(this.getContext(),e,n))}return this.$context||(this.$context=q5e(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=_1(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,a=o?o.widest.width+l:0,s=o?o.highest.height+l:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,n=this.chart,i=this.options,{grid:o,position:l,border:a}=i,s=o.offset,u=this.isHorizontal(),f=this.ticks.length+(s?1:0),h=Z4(o),d=[],p=a.setContext(this.getContext()),v=p.display?p.width:0,b=v/2,C=function(be){return Yu(n,be,v)},L,S,P,y,z,G,J,te,ne,Q,ee,se;if(l==="top")L=C(this.bottom),G=this.bottom-h,te=L-b,Q=C(e.top)+b,se=e.bottom;else if(l==="bottom")L=C(this.top),Q=e.top,se=C(e.bottom)-b,G=L+b,te=this.top+h;else if(l==="left")L=C(this.right),z=this.right-h,J=L-b,ne=C(e.left)+b,ee=e.right;else if(l==="right")L=C(this.left),ne=e.left,ee=C(e.right)-b,z=L+b,J=this.left+h;else if(t==="x"){if(l==="center")L=C((e.top+e.bottom)/2+.5);else if(Jt(l)){let be=Object.keys(l)[0],rt=l[be];L=C(this.chart.scales[be].getPixelForValue(rt))}Q=e.top,se=e.bottom,G=L+b,te=G+h}else if(t==="y"){if(l==="center")L=C((e.left+e.right)/2);else if(Jt(l)){let be=Object.keys(l)[0],rt=l[be];L=C(this.chart.scales[be].getPixelForValue(rt))}z=L-b,J=z-h,ne=e.left,ee=e.right}let Pe=xt(i.ticks.maxTicksLimit,f),Te=Math.max(1,Math.ceil(f/Pe));for(S=0;S<f;S+=Te){let be=this.getContext(S),rt=o.setContext(be),Ee=a.setContext(be),Re=rt.lineWidth,nr=rt.color,Xt=Ee.dash||[],Oe=Ee.dashOffset,fe=rt.tickWidth,hr=rt.tickColor,qt=rt.tickBorderDash||[],Mr=rt.tickBorderDashOffset;P=j5e(this,S,s),P!==void 0&&(y=Yu(n,P,Re),u?z=J=ne=ee=y:G=te=Q=se=y,d.push({tx1:z,ty1:G,tx2:J,ty2:te,x1:ne,y1:Q,x2:ee,y2:se,width:Re,color:nr,borderDash:Xt,borderDashOffset:Oe,tickWidth:fe,tickColor:hr,tickBorderDash:qt,tickBorderDashOffset:Mr}))}return this._ticksLength=f,this._borderValue=L,d}_computeLabelItems(e){let t=this.axis,n=this.options,{position:i,ticks:o}=n,l=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:u,padding:c,mirror:f}=o,h=Z4(n.grid),d=h+c,p=f?-c:d,v=-_1(this.labelRotation),b=[],C,L,S,P,y,z,G,J,te,ne,Q,ee,se="middle";if(i==="top")z=this.bottom-p,G=this._getXAxisLabelAlignment();else if(i==="bottom")z=this.top+p,G=this._getXAxisLabelAlignment();else if(i==="left"){let Te=this._getYAxisLabelAlignment(h);G=Te.textAlign,y=Te.x}else if(i==="right"){let Te=this._getYAxisLabelAlignment(h);G=Te.textAlign,y=Te.x}else if(t==="x"){if(i==="center")z=(e.top+e.bottom)/2+d;else if(Jt(i)){let Te=Object.keys(i)[0],be=i[Te];z=this.chart.scales[Te].getPixelForValue(be)+d}G=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")y=(e.left+e.right)/2-d;else if(Jt(i)){let Te=Object.keys(i)[0],be=i[Te];y=this.chart.scales[Te].getPixelForValue(be)}G=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(s==="start"?se="top":s==="end"&&(se="bottom"));let Pe=this._getLabelSizes();for(C=0,L=a.length;C<L;++C){S=a[C],P=S.label;let Te=o.setContext(this.getContext(C));J=this.getPixelForTick(C)+o.labelOffset,te=this._resolveTickFontOptions(C),ne=te.lineHeight,Q=Or(P)?P.length:1;let be=Q/2,rt=Te.color,Ee=Te.textStrokeColor,Re=Te.textStrokeWidth,nr=G;l?(y=J,G==="inner"&&(C===L-1?nr=this.options.reverse?"left":"right":C===0?nr=this.options.reverse?"right":"left":nr="center"),i==="top"?u==="near"||v!==0?ee=-Q*ne+ne/2:u==="center"?ee=-Pe.highest.height/2-be*ne+ne:ee=-Pe.highest.height+ne/2:u==="near"||v!==0?ee=ne/2:u==="center"?ee=Pe.highest.height/2-be*ne:ee=Pe.highest.height-Q*ne,f&&(ee*=-1),v!==0&&!Te.showLabelBackdrop&&(y+=ne/2*Math.sin(v))):(z=J,ee=(1-Q)*ne/2);let Xt;if(Te.showLabelBackdrop){let Oe=Fn(Te.backdropPadding),fe=Pe.heights[C],hr=Pe.widths[C],qt=ee-Oe.top,Mr=0-Oe.left;switch(se){case"middle":qt-=fe/2;break;case"bottom":qt-=fe;break}switch(G){case"center":Mr-=hr/2;break;case"right":Mr-=hr;break;case"inner":C===L-1?Mr-=hr:C>0&&(Mr-=hr/2);break}Xt={left:Mr,top:qt,width:hr+Oe.width,height:fe+Oe.height,color:Te.backdropColor}}b.push({label:P,font:te,textOffset:ee,options:{rotation:v,color:rt,strokeColor:Ee,strokeWidth:Re,textAlign:nr,textBaseline:se,translation:[y,z],backdrop:Xt}})}return b}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-_1(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,l=this._getLabelSizes(),a=e+o,s=l.widest.width,u,c;return t==="left"?i?(c=this.right+o,n==="near"?u="left":n==="center"?(u="center",c+=s/2):(u="right",c+=s)):(c=this.right-a,n==="near"?u="right":n==="center"?(u="center",c-=s/2):(u="left",c=this.left)):t==="right"?i?(c=this.left+o,n==="near"?u="right":n==="center"?(u="center",c-=s/2):(u="left",c-=s)):(c=this.left+a,n==="near"?u="left":n==="center"?(u="center",c+=s/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:n,top:i,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,o,l),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,l,a=(s,u,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(s.x,s.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(t.display)for(o=0,l=i.length;o<l;++o){let s=i[o];t.drawOnChartArea&&a({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),t.drawTicks&&a({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),l=n.display?o.width:0;if(!l)return;let a=i.setContext(this.getContext(0)).lineWidth,s=this._borderValue,u,c,f,h;this.isHorizontal()?(u=Yu(e,this.left,l)-l/2,c=Yu(e,this.right,a)+a/2,f=h=s):(f=Yu(e,this.top,l)-l/2,h=Yu(e,this.bottom,a)+a/2,u=c=s),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(u,f),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let n=this.ctx,i=this._computeLabelArea();i&&I4(n,i);let o=this.getLabelItems(e);for(let l of o){let a=l.options,s=l.font,u=l.label,c=l.textOffset;Ku(n,u,0,c,s,a)}i&&z4(n)}drawTitle(){let{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;let o=an(n.font),l=Fn(n.padding),a=n.align,s=o.lineHeight/2;t==="bottom"||t==="center"||Jt(t)?(s+=l.bottom,Or(n.text)&&(s+=o.lineHeight*(n.text.length-1))):s+=l.top;let{titleX:u,titleY:c,maxWidth:f,rotation:h}=G5e(this,s,t,a);Ku(e,n.text,0,0,o,{color:n.color,maxWidth:f,rotation:h,textAlign:W5e(a,t,i),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,n=xt(e.grid&&e.grid.z,-1),i=xt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==r.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[],o,l;for(o=0,l=t.length;o<l;++o){let a=t[o];a[n]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return an(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Wf=class{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),n;J5e(t)&&(n=this.register(t));let i=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,Y5e(e,l,n),this.override&&xr.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){let t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in xr[i]&&(delete xr[i][n],this.override&&delete Gu[n])}};function Y5e(r,e,t){let n=Zf(Object.create(null),[t?xr.get(t):{},xr.get(e),r.defaults]);xr.set(e,n),r.defaultRoutes&&K5e(e,r.defaultRoutes),r.descriptors&&xr.describe(e,r.descriptors)}function K5e(r,e){Object.keys(e).forEach(t=>{let n=t.split("."),i=n.pop(),o=[r].concat(n).join("."),l=e[t].split("."),a=l.pop(),s=l.join(".");xr.route(o,i,s,a)})}function J5e(r){return"id"in r&&"defaults"in r}var rM=class{constructor(){this.controllers=new Wf(cc,"datasets",!0),this.elements=new Wf(Jl,"elements"),this.plugins=new Wf(Object,"plugins"),this.scales=new Wf(dc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(i=>{let o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):sr(i,l=>{let a=n||this._getRegistryForType(l);this._exec(e,a,l)})})}_exec(e,t,n){let i=Vp(e);Cr(n["before"+i],[],n),t[e](n),Cr(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}},Xa=new rM,nM=class{constructor(){this._init=[]}notify(e,t,n,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(o,e,t,n);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,n,i){i=i||{};for(let o of e){let l=o.plugin,a=l[n],s=[t,i,o.options];if(Cr(a,s,l)===!1&&i.cancelable)return!1}return!0}invalidate(){ar(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let n=e&&e.config,i=xt(n.options&&n.options.plugins,{}),o=X5e(n);return i===!1&&!t?[]:$5e(e,o,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],n=this._cache,i=(o,l)=>o.filter(a=>!l.some(s=>a.plugin.id===s.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}};function X5e(r){let e={},t=[],n=Object.keys(Xa.plugins.items);for(let o=0;o<n.length;o++)t.push(Xa.getPlugin(n[o]));let i=r.plugins||[];for(let o=0;o<i.length;o++){let l=i[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function Q5e(r,e){return!e&&r===!1?null:r===!0?{}:r}function $5e(r,{plugins:e,localIds:t},n,i){let o=[],l=r.getContext();for(let a of e){let s=a.id,u=Q5e(n[s],i);u!==null&&o.push({plugin:a,options:efe(r.config,{plugin:a,local:t[s]},u,l)})}return o}function efe(r,{plugin:e,local:t},n,i){let o=r.pluginScopeKeys(e),l=r.getOptionScopes(n,o);return t&&e.defaults&&l.push(e.defaults),r.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function iM(r,e){let t=xr.datasets[r]||{};return((e.datasets||{})[r]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function tfe(r,e){let t=r;return r==="_index_"?t=e:r==="_value_"&&(t=e==="x"?"y":"x"),t}function rfe(r,e){return r===e?"_index_":"_value_"}function Kx(r){if(r==="x"||r==="y"||r==="r")return r}function nfe(r){if(r==="top"||r==="bottom")return"x";if(r==="left"||r==="right")return"y"}function oM(r,...e){if(Kx(r))return r;for(let t of e){let n=t.axis||nfe(t.position)||r.length>1&&Kx(r[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${r}' axis. Please provide 'axis' or 'position' option.`)}function Jx(r,e,t){if(t[e+"AxisID"]===r)return{axis:e}}function ife(r,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(n=>n.xAxisID===r||n.yAxisID===r);if(t.length)return Jx(r,"x",t[0])||Jx(r,"y",t[0])}return{}}function ofe(r,e){let t=Gu[r.type]||{scales:{}},n=e.scales||{},i=iM(r.type,e),o=Object.create(null);return Object.keys(n).forEach(l=>{let a=n[l];if(!Jt(a))return console.error(`Invalid scale configuration for scale: ${l}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);let s=oM(l,a,ife(l,r),xr.scales[a.type]),u=rfe(s,i),c=t.scales||{};o[l]=jf(Object.create(null),[{axis:s},a,c[s],c[u]])}),r.data.datasets.forEach(l=>{let a=l.type||r.type,s=l.indexAxis||iM(a,e),c=(Gu[a]||{}).scales||{};Object.keys(c).forEach(f=>{let h=tfe(f,s),d=l[h+"AxisID"]||h;o[d]=o[d]||Object.create(null),jf(o[d],[{axis:h},n[d],c[f]])})}),Object.keys(o).forEach(l=>{let a=o[l];jf(a,[xr.scales[a.type],xr.scale])}),o}function Oq(r){let e=r.options||(r.options={});e.plugins=xt(e.plugins,{}),e.scales=ofe(r,e)}function Rq(r){return r=r||{},r.datasets=r.datasets||[],r.labels=r.labels||[],r}function lfe(r){return r=r||{},r.data=Rq(r.data),Oq(r),r}var Xx=new Map,Iq=new Set;function Jp(r,e){let t=Xx.get(r);return t||(t=e(),Xx.set(r,t),Iq.add(t)),t}var F4=(r,e,t)=>{let n=T4(e,t);n!==void 0&&r.add(n)},lM=class{constructor(e){this._config=lfe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Rq(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),Oq(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Jp(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Jp(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Jp(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,n=this.type;return Jp(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let n=this._scopeCache,i=n.get(e);return(!i||t)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){let{options:i,type:o}=this,l=this._cachedScopes(e,n),a=l.get(t);if(a)return a;let s=new Set;t.forEach(c=>{e&&(s.add(e),c.forEach(f=>F4(s,e,f))),c.forEach(f=>F4(s,i,f)),c.forEach(f=>F4(s,Gu[o]||{},f)),c.forEach(f=>F4(s,xr,f)),c.forEach(f=>F4(s,jp,f))});let u=Array.from(s);return u.length===0&&u.push(Object.create(null)),Iq.has(t)&&l.set(t,u),u}chartOptionScopes(){let{options:e,type:t}=this;return[e,Gu[t]||{},xr.datasets[t]||{},{type:t},xr,jp]}resolveNamedOptions(e,t,n,i=[""]){let o={$shared:!0},{resolver:l,subPrefixes:a}=Qx(this._resolverCache,e,i),s=l;if(sfe(l,t)){o.$shared=!1,n=g1(n)?n():n;let u=this.createResolver(e,n,a);s=ic(l,n,u)}for(let u of t)o[u]=s[u];return o}createResolver(e,t,n=[""],i){let{resolver:o}=Qx(this._resolverCache,e,n);return Jt(t)?ic(o,t,void 0,i):o}};function Qx(r,e,t){let n=r.get(e);n||(n=new Map,r.set(e,n));let i=t.join(),o=n.get(i);return o||(o={resolver:qp(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},n.set(i,o)),o}var afe=r=>Jt(r)&&Object.getOwnPropertyNames(r).some(e=>g1(r[e]));function sfe(r,e){let{isScriptable:t,isIndexable:n}=zS(r);for(let i of e){let o=t(i),l=n(i),a=(l||o)&&r[i];if(o&&(g1(a)||afe(a))||l&&Or(a))return!0}return!1}var ufe="4.4.9",cfe=["top","bottom","left","right","chartArea"];function $x(r,e){return r==="top"||r==="bottom"||cfe.indexOf(r)===-1&&e==="x"}function eq(r,e){return function(t,n){return t[r]===n[r]?t[e]-n[e]:t[r]-n[r]}}function tq(r){let e=r.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Cr(t&&t.onComplete,[r],e)}function ffe(r){let e=r.chart,t=e.options.animation;Cr(t&&t.onProgress,[r],e)}function zq(r){return Up()&&typeof r=="string"?r=document.getElementById(r):r&&r.length&&(r=r[0]),r&&r.canvas&&(r=r.canvas),r}var r_={},rq=r=>{let e=zq(r);return Object.values(r_).filter(t=>t.canvas===e).pop()};function hfe(r,e,t){let n=Object.keys(r);for(let i of n){let o=+i;if(o>=e){let l=r[i];delete r[i],(t>0||o>e)&&(r[o+t]=l)}}}function dfe(r,e,t,n){return!t||r.type==="mouseout"?null:n?e:r}var Li=class{static register(...e){Xa.add(...e),nq()}static unregister(...e){Xa.remove(...e),nq()}constructor(e,t){let n=this.config=new lM(t),i=zq(e),o=rq(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let l=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||z5e(i)),this.platform.updateConfig(n);let a=this.platform.acquireContext(i,l.aspectRatio),s=a&&a.canvas,u=s&&s.height,c=s&&s.width;if(this.id=$j(),this.ctx=a,this.canvas=s,this.width=c,this.height=u,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=hx(f=>this.update(f),l.resizeDelay||0),this._dataChanges=[],r_[this.id]=this,!a||!s){console.error("Failed to create chart: can't acquire context from the given item");return}v1.listen(this,"complete",tq),v1.listen(this,"progress",ffe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:o}=this;return ar(e)?t&&o?o:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Xa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():VS(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return OS(this.canvas,this.ctx),this}stop(){return v1.stop(this),this}resize(e,t){v1.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){let n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,t,o),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,VS(this,a,!0)&&(this.notifyPlugins("resize",{size:l}),Cr(n.onResize,[this,l],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){let t=this.options.scales||{};sr(t,(n,i)=>{n.id=i})}buildOrUpdateScales(){let e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((l,a)=>(l[a]=!1,l),{}),o=[];t&&(o=o.concat(Object.keys(t).map(l=>{let a=t[l],s=oM(l,a),u=s==="r",c=s==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),sr(o,l=>{let a=l.options,s=a.id,u=oM(s,a),c=xt(a.type,l.dtype);(a.position===void 0||$x(a.position,u)!==$x(l.dposition))&&(a.position=l.dposition),i[s]=!0;let f=null;if(s in n&&n[s].type===c)f=n[s];else{let h=Xa.getScale(c);f=new h({id:s,type:c,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(a,e)}),sr(i,(l,a)=>{l||delete n[a]}),sr(n,l=>{ol.configure(this,l,l.options),ol.addBox(this,l)})}_updateMetasets(){let e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((i,o)=>i.index-o.index),n>t){for(let i=t;i<n;++i)this._destroyDatasetMeta(i);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(eq("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,i)=>{t.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let e=[],t=this.data.datasets,n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){let o=t[n],l=this.getDatasetMeta(n),a=o.type||this.config.type;if(l.type&&l.type!==a&&(this._destroyDatasetMeta(n),l=this.getDatasetMeta(n)),l.type=a,l.indexAxis=o.indexAxis||iM(a,this.options),l.order=o.order||0,l.index=n,l.label=""+o.label,l.visible=this.isDatasetVisible(n),l.controller)l.controller.updateIndex(n),l.controller.linkScales();else{let s=Xa.getController(a),{datasetElementType:u,dataElementType:c}=xr.datasets[a];Object.assign(s,{dataElementType:Xa.getElement(c),datasetElementType:u&&Xa.getElement(u)}),l.controller=new s(this,n),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){sr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let t=this.config;t.update();let n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let u=0,c=this.data.datasets.length;u<c;u++){let{controller:f}=this.getDatasetMeta(u),h=!i&&o.indexOf(f)===-1;f.buildOrUpdateElements(h),l=Math.max(+f.getMaxOverflow(),l)}l=this._minPadding=n.layout.autoPadding?l:0,this._updateLayout(l),i||sr(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(eq("z","_idx"));let{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){sr(this.scales,e=>{ol.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!wS(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(let{method:n,start:i,count:o}of t){let l=n==="_removeElements"?-o:o;hfe(e,i,l)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let t=this.data.datasets.length,n=o=>new Set(e.filter(l=>l[0]===o).map((l,a)=>a+","+l.splice(1).join(","))),i=n(0);for(let o=1;o<t;o++)if(!wS(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ol.update(this,this.width,this.height,e);let t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],sr(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,g1(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){let n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(v1.has(this)?this.attached&&!v1.running(this)&&v1.start(this):(this.draw(),tq({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let t=this._sortedMetasets,n=[],i,o;for(i=0,o=t.length;i<o;++i){let l=t[i];(!e||l.visible)&&n.push(l)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=xS(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&I4(t,i),e.controller.draw(),i&&z4(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ya(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){let o=g5e.modes[t];return typeof o=="function"?o(this,e,n,i):[]}getDatasetMeta(e){let t=this.data.datasets[e],n=this._metasets,i=n.filter(o=>o&&o._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=b1(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let t=this.data.datasets[e];if(!t)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){let n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){let i=n?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,i);O4(t)?(o.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),l.update(o,{visible:n}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){let t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),v1.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),OS(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete r_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,t=this.platform,n=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},i=(o,l,a)=>{o.offsetX=l,o.offsetY=a,this._eventHandler(o)};sr(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,t=this.platform,n=(s,u)=>{t.addEventListener(this,s,u),e[s]=u},i=(s,u)=>{e[s]&&(t.removeEventListener(this,s,u),delete e[s])},o=(s,u)=>{this.canvas&&this.resize(s,u)},l,a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",o),n("detach",l)};l=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():l()}unbindEvents(){sr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},sr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){let i=n?"set":"remove",o,l,a,s;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=e.length;a<s;++a){l=e[a];let u=l&&this.getDatasetMeta(l.datasetIndex).controller;u&&u[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let t=this._active||[],n=e.map(({datasetIndex:o,index:l})=>{let a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[l],index:l}});!P4(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){let i=this.options.hover,o=(s,u)=>s.filter(c=>!u.some(f=>c.datasetIndex===f.datasetIndex&&c.index===f.index)),l=o(t,e),a=n?e:o(e,t);l.length&&this.updateHoverStyle(l,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){let n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;let o=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(e,t,n){let{_active:i=[],options:o}=this,l=t,a=this._getActiveElements(e,i,n,l),s=rx(e),u=dfe(e,this._lastEvent,n,s);n&&(this._lastEvent=null,Cr(o.onHover,[e,a,this],this),s&&Cr(o.onClick,[e,a,this],this));let c=!P4(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=u,c}_getActiveElements(e,t,n,i){if(e.type==="mouseout")return[];if(!n)return t;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}};ze(Li,"defaults",xr),ze(Li,"instances",r_),ze(Li,"overrides",Gu),ze(Li,"registry",Xa),ze(Li,"version",ufe),ze(Li,"getChart",rq);function nq(){return sr(Li.instances,r=>r._plugins.invalidate())}function Hq(r,e,t=e){r.lineCap=xt(t.borderCapStyle,e.borderCapStyle),r.setLineDash(xt(t.borderDash,e.borderDash)),r.lineDashOffset=xt(t.borderDashOffset,e.borderDashOffset),r.lineJoin=xt(t.borderJoinStyle,e.borderJoinStyle),r.lineWidth=xt(t.borderWidth,e.borderWidth),r.strokeStyle=xt(t.borderColor,e.borderColor)}function mfe(r,e,t){r.lineTo(t.x,t.y)}function gfe(r){return r.stepped?bx:r.tension||r.cubicInterpolationMode==="monotone"?vx:mfe}function Nq(r,e,t={}){let n=r.length,{start:i=0,end:o=n-1}=t,{start:l,end:a}=e,s=Math.max(i,l),u=Math.min(o,a),c=i<l&&o<l||i>a&&o>a;return{count:n,start:s,loop:e.loop,ilen:u<s&&!c?n+u-s:u-s}}function pfe(r,e,t,n){let{points:i,options:o}=e,{count:l,start:a,loop:s,ilen:u}=Nq(i,t,n),c=gfe(o),{move:f=!0,reverse:h}=n||{},d,p,v;for(d=0;d<=u;++d)p=i[(a+(h?u-d:d))%l],!p.skip&&(f?(r.moveTo(p.x,p.y),f=!1):c(r,v,p,h,o.stepped),v=p);return s&&(p=i[(a+(h?u:0))%l],c(r,v,p,h,o.stepped)),!!s}function _fe(r,e,t,n){let i=e.points,{count:o,start:l,ilen:a}=Nq(i,t,n),{move:s=!0,reverse:u}=n||{},c=0,f=0,h,d,p,v,b,C,L=P=>(l+(u?a-P:P))%o,S=()=>{v!==b&&(r.lineTo(c,b),r.lineTo(c,v),r.lineTo(c,C))};for(s&&(d=i[L(0)],r.moveTo(d.x,d.y)),h=0;h<=a;++h){if(d=i[L(h)],d.skip)continue;let P=d.x,y=d.y,z=P|0;z===p?(y<v?v=y:y>b&&(b=y),c=(f*c+P)/++f):(S(),r.lineTo(P,y),p=z,f=0,v=b=y),C=y}S()}function aM(r){let e=r.options,t=e.borderDash&&e.borderDash.length;return!r._decimated&&!r._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?_fe:pfe}function bfe(r){return r.stepped?Px:r.tension||r.cubicInterpolationMode==="monotone"?Tx:Uu}function vfe(r,e,t,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,n)&&i.closePath()),Hq(r,e.options),r.stroke(i)}function Cfe(r,e,t,n){let{segments:i,options:o}=e,l=aM(e);for(let a of i)Hq(r,o,a.style),r.beginPath(),l(r,e,a,{start:t,end:t+n-1})&&r.closePath(),r.stroke()}var wfe=typeof Path2D=="function";function yfe(r,e,t,n){wfe&&!e.options.segment?vfe(r,e,t,n):Cfe(r,e,t,n)}var Kl=class extends Jl{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let i=n.spanGaps?this._loop:this._fullLoop;Sx(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Rx(this,this.options.segment))}first(){let e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){let e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){let n=this.options,i=e[t],o=this.points,l=jS(this,{property:t,start:i,end:i});if(!l.length)return;let a=[],s=bfe(n),u,c;for(u=0,c=l.length;u<c;++u){let{start:f,end:h}=l[u],d=o[f],p=o[h];if(d===p){a.push(d);continue}let v=Math.abs((i-d[t])/(p[t]-d[t])),b=s(d,p,v,n.stepped);b[t]=e[t],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,t,n){return aM(this)(e,this,t,n)}path(e,t,n){let i=this.segments,o=aM(this),l=this._loop;t=t||0,n=n||this.points.length-t;for(let a of i)l&=o(e,this,a,{start:t,end:t+n-1});return!!l}draw(e,t,n,i){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),yfe(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};ze(Kl,"id","line"),ze(Kl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ze(Kl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ze(Kl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function iq(r,e,t,n){let i=r.options,{[t]:o}=r.getProps([t],n);return Math.abs(e-o)<i.radius+i.hitRadius}var hc=class extends Jl{constructor(t){super();ze(this,"parsed");ze(this,"skip");ze(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,i){let o=this.options,{x:l,y:a}=this.getProps(["x","y"],i);return Math.pow(t-l,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,n){return iq(this,t,"x",n)}inYRange(t,n){return iq(this,t,"y",n)}getCenterPoint(t){let{x:n,y:i}=this.getProps(["x","y"],t);return{x:n,y:i}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);let i=n&&t.borderWidth||0;return(n+i)*2}draw(t,n){let i=this.options;this.skip||i.radius<.1||!Ya(this,n,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,xp(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};ze(hc,"id","point"),ze(hc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ze(hc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function kfe(r,e,t){let n=r.segments,i=r.points,o=e.points,l=[];for(let a of n){let{start:s,end:u}=a;u=cM(s,u,i);let c=sM(t,i[s],i[u],a.loop);if(!e.segments){l.push({source:a,target:c,start:i[s],end:i[u]});continue}let f=jS(e,c);for(let h of f){let d=sM(t,o[h.start],o[h.end],h.loop),p=FS(a,i,d);for(let v of p)l.push({source:v,target:h,start:{[t]:oq(c,d,"start",Math.max)},end:{[t]:oq(c,d,"end",Math.min)}})}}return l}function sM(r,e,t,n){if(n)return;let i=e[r],o=t[r];return r==="angle"&&(i=Yi(i),o=Yi(o)),{property:r,start:i,end:o}}function Lfe(r,e){let{x:t=null,y:n=null}=r||{},i=e.points,o=[];return e.segments.forEach(({start:l,end:a})=>{a=cM(l,a,i);let s=i[l],u=i[a];n!==null?(o.push({x:s.x,y:n}),o.push({x:u.x,y:n})):t!==null&&(o.push({x:t,y:s.y}),o.push({x:t,y:u.y}))}),o}function cM(r,e,t){for(;e>r;e--){let n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function oq(r,e,t,n){return r&&e?n(r[t],e[t]):r?r[t]:e?e[t]:0}function Vq(r,e){let t=[],n=!1;return Or(r)?(n=!0,t=r):t=Lfe(r,e),t.length?new Kl({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function lq(r){return r&&r.fill!==!1}function Efe(r,e,t){let i=r[e].fill,o=[e],l;if(!t)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!jr(i))return i;if(l=r[i],!l)return!1;if(l.visible)return i;o.push(i),i=l.fill}return!1}function Sfe(r,e,t){let n=Tfe(r);if(Jt(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return jr(i)&&Math.floor(i)===i?Mfe(n[0],e,i,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Mfe(r,e,t,n){return(r==="-"||r==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function Afe(r,e){let t=null;return r==="start"?t=e.bottom:r==="end"?t=e.top:Jt(r)?t=e.getPixelForValue(r.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Pfe(r,e,t){let n;return r==="start"?n=t:r==="end"?n=e.options.reverse?e.min:e.max:Jt(r)?n=r.value:n=e.getBaseValue(),n}function Tfe(r){let e=r.options,t=e.fill,n=xt(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Ofe(r){let{scale:e,index:t,line:n}=r,i=[],o=n.segments,l=n.points,a=Rfe(e,t);a.push(Vq({x:null,y:e.bottom},n));for(let s=0;s<o.length;s++){let u=o[s];for(let c=u.start;c<=u.end;c++)Ife(i,l[c],a)}return new Kl({points:i,options:{}})}function Rfe(r,e){let t=[],n=r.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){let o=n[i];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function Ife(r,e,t){let n=[];for(let i=0;i<t.length;i++){let o=t[i],{first:l,last:a,point:s}=zfe(o,e,"x");if(!(!s||l&&a)){if(l)n.unshift(s);else if(r.push(s),!a)break}}r.push(...n)}function zfe(r,e,t){let n=r.interpolate(e,t);if(!n)return{};let i=n[t],o=r.segments,l=r.points,a=!1,s=!1;for(let u=0;u<o.length;u++){let c=o[u],f=l[c.start][t],h=l[c.end][t];if(oc(i,f,h)){a=i===f,s=i===h;break}}return{first:a,last:s,point:n}}var l_=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){let{x:i,y:o,radius:l}=this;return t=t||{start:0,end:Ji},e.arc(i,o,l,t.end,t.start,!0),!n.bounds}interpolate(e){let{x:t,y:n,radius:i}=this,o=e.angle;return{x:t+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}};function Hfe(r){let{chart:e,fill:t,line:n}=r;if(jr(t))return Nfe(e,t);if(t==="stack")return Ofe(r);if(t==="shape")return!0;let i=Vfe(r);return i instanceof l_?i:Vq(i,n)}function Nfe(r,e){let t=r.getDatasetMeta(e);return t&&r.isDatasetVisible(e)?t.dataset:null}function Vfe(r){return(r.scale||{}).getPointPositionForValue?Dfe(r):Bfe(r)}function Bfe(r){let{scale:e={},fill:t}=r,n=Afe(t,e);if(jr(n)){let i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function Dfe(r){let{scale:e,fill:t}=r,n=e.options,i=e.getLabels().length,o=n.reverse?e.max:e.min,l=Pfe(t,e,o),a=[];if(n.grid.circular){let s=e.getPointPositionForValue(0,o);return new l_({x:s.x,y:s.y,radius:e.getDistanceFromCenterForValue(l)})}for(let s=0;s<i;++s)a.push(e.getPointPositionForValue(s,l));return a}function JS(r,e,t){let n=Hfe(e),{chart:i,index:o,line:l,scale:a,axis:s}=e,u=l.options,c=u.fill,f=u.backgroundColor,{above:h=f,below:d=f}=c||{},p=i.getDatasetMeta(o),v=xS(i,p);n&&l.points.length&&(I4(r,t),Zfe(r,{line:l,target:n,above:h,below:d,area:t,scale:a,axis:s,clip:v}),z4(r))}function Zfe(r,e){let{line:t,target:n,above:i,below:o,area:l,scale:a,clip:s}=e,u=t._loop?"angle":e.axis;r.save(),u==="x"&&o!==i&&(aq(r,n,l.top),sq(r,{line:t,target:n,color:i,scale:a,property:u,clip:s}),r.restore(),r.save(),aq(r,n,l.bottom)),sq(r,{line:t,target:n,color:o,scale:a,property:u,clip:s}),r.restore()}function aq(r,e,t){let{segments:n,points:i}=e,o=!0,l=!1;r.beginPath();for(let a of n){let{start:s,end:u}=a,c=i[s],f=i[cM(s,u,i)];o?(r.moveTo(c.x,c.y),o=!1):(r.lineTo(c.x,t),r.lineTo(c.x,c.y)),l=!!e.pathSegment(r,a,{move:l}),l?r.closePath():r.lineTo(f.x,t)}r.lineTo(e.first().x,t),r.closePath(),r.clip()}function sq(r,e){let{line:t,target:n,property:i,color:o,scale:l,clip:a}=e,s=kfe(t,n,i);for(let{source:u,target:c,start:f,end:h}of s){let{style:{backgroundColor:d=o}={}}=u,p=n!==!0;r.save(),r.fillStyle=d,Ffe(r,l,a,p&&sM(i,f,h)),r.beginPath();let v=!!t.pathSegment(r,u),b;if(p){v?r.closePath():uq(r,n,h,i);let C=!!n.pathSegment(r,c,{move:v,reverse:!0});b=v&&C,b||uq(r,n,f,i)}r.closePath(),r.fill(b?"evenodd":"nonzero"),r.restore()}}function Ffe(r,e,t,n){let i=e.chart.chartArea,{property:o,start:l,end:a}=n||{};if(o==="x"||o==="y"){let s,u,c,f;o==="x"?(s=l,u=i.top,c=a,f=i.bottom):(s=i.left,u=l,c=i.right,f=a),r.beginPath(),t&&(s=Math.max(s,t.left),c=Math.min(c,t.right),u=Math.max(u,t.top),f=Math.min(f,t.bottom)),r.rect(s,u,c-s,f-u),r.clip()}}function uq(r,e,t,n){let i=e.interpolate(t,n);i&&r.lineTo(i.x,i.y)}var Bq={id:"filler",afterDatasetsUpdate(r,e,t){let n=(r.data.datasets||[]).length,i=[],o,l,a,s;for(l=0;l<n;++l)o=r.getDatasetMeta(l),a=o.dataset,s=null,a&&a.options&&a instanceof Kl&&(s={visible:r.isDatasetVisible(l),index:l,fill:Sfe(a,l,n),chart:r,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=s,i.push(s);for(l=0;l<n;++l)s=i[l],!(!s||s.fill===!1)&&(s.fill=Efe(i,l,t.propagate))},beforeDraw(r,e,t){let n=t.drawTime==="beforeDraw",i=r.getSortedVisibleDatasetMetas(),o=r.chartArea;for(let l=i.length-1;l>=0;--l){let a=i[l].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&JS(r.ctx,a,o))}},beforeDatasetsDraw(r,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let n=r.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){let o=n[i].$filler;lq(o)&&JS(r.ctx,o,r.chartArea)}},beforeDatasetDraw(r,e,t){let n=e.meta.$filler;!lq(n)||t.drawTime!=="beforeDatasetDraw"||JS(r.ctx,n,r.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},cq=(r,e)=>{let{boxHeight:t=e,boxWidth:n=e}=r;return r.usePointStyle&&(t=Math.min(t,e),n=r.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},jfe=(r,e)=>r!==null&&e!==null&&r.datasetIndex===e.datasetIndex&&r.index===e.index,a_=class extends Jl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=Cr(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let n=e.labels,i=an(n.font),o=i.size,l=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=cq(n,o),u,c;t.font=i.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(l,o,a,s)+10):(c=this.maxHeight,u=this._fitCols(l,i,a,s)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){let{ctx:o,maxWidth:l,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],u=this.lineWidths=[0],c=i+a,f=e;o.textAlign="left",o.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((p,v)=>{let b=n+t/2+o.measureText(p.text).width;(v===0||u[u.length-1]+b+2*a>l)&&(f+=c,u[u.length-(v>0?0:1)]=0,d+=c,h++),s[v]={left:0,top:d,row:h,width:b,height:i},u[u.length-1]+=b+a}),f}_fitCols(e,t,n,i){let{ctx:o,maxHeight:l,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],u=this.columnSizes=[],c=l-e,f=a,h=0,d=0,p=0,v=0;return this.legendItems.forEach((b,C)=>{let{itemWidth:L,itemHeight:S}=xfe(n,t,o,b,i);C>0&&d+S+2*a>c&&(f+=h+a,u.push({width:h,height:d}),p+=h+a,v++,h=d=0),s[C]={left:p,top:d,col:v,width:L,height:S},h=Math.max(h,L),d+=S+a}),f+=h,u.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:o}}=this,l=ac(o,this.left,this.width);if(this.isHorizontal()){let a=0,s=Zn(n,this.left+i,this.right-this.lineWidths[a]);for(let u of t)a!==u.row&&(a=u.row,s=Zn(n,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=l.leftForLtr(l.x(s),u.width),s+=u.width+i}else{let a=0,s=Zn(n,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let u of t)u.col!==a&&(a=u.col,s=Zn(n,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=s,u.left+=this.left+i,u.left=l.leftForLtr(l.x(u.left),u.width),s+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;I4(e,this),this._draw(),z4(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:o,labels:l}=e,a=xr.color,s=ac(e.rtl,this.left,this.width),u=an(l.font),{padding:c}=l,f=u.size,h=f/2,d;this.drawTitle(),i.textAlign=s.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;let{boxWidth:p,boxHeight:v,itemHeight:b}=cq(l,f),C=function(z,G,J){if(isNaN(p)||p<=0||isNaN(v)||v<0)return;i.save();let te=xt(J.lineWidth,1);if(i.fillStyle=xt(J.fillStyle,a),i.lineCap=xt(J.lineCap,"butt"),i.lineDashOffset=xt(J.lineDashOffset,0),i.lineJoin=xt(J.lineJoin,"miter"),i.lineWidth=te,i.strokeStyle=xt(J.strokeStyle,a),i.setLineDash(xt(J.lineDash,[])),l.usePointStyle){let ne={radius:v*Math.SQRT2/2,pointStyle:J.pointStyle,rotation:J.rotation,borderWidth:te},Q=s.xPlus(z,p/2),ee=G+h;RS(i,ne,Q,ee,l.pointStyleWidth&&p)}else{let ne=G+Math.max((f-v)/2,0),Q=s.leftForLtr(z,p),ee=lc(J.borderRadius);i.beginPath(),Object.values(ee).some(se=>se!==0)?H4(i,{x:Q,y:ne,w:p,h:v,radius:ee}):i.rect(Q,ne,p,v),i.fill(),te!==0&&i.stroke()}i.restore()},L=function(z,G,J){Ku(i,J.text,z,G+b/2,u,{strikethrough:J.hidden,textAlign:s.textAlign(J.textAlign)})},S=this.isHorizontal(),P=this._computeTitleHeight();S?d={x:Zn(o,this.left+c,this.right-n[0]),y:this.top+c+P,line:0}:d={x:this.left+c,y:Zn(o,this.top+P+c,this.bottom-t[0].height),line:0},DS(this.ctx,e.textDirection);let y=b+c;this.legendItems.forEach((z,G)=>{i.strokeStyle=z.fontColor,i.fillStyle=z.fontColor;let J=i.measureText(z.text).width,te=s.textAlign(z.textAlign||(z.textAlign=l.textAlign)),ne=p+h+J,Q=d.x,ee=d.y;s.setWidth(this.width),S?G>0&&Q+ne+c>this.right&&(ee=d.y+=y,d.line++,Q=d.x=Zn(o,this.left+c,this.right-n[d.line])):G>0&&ee+y>this.bottom&&(Q=d.x=Q+t[d.line].width+c,d.line++,ee=d.y=Zn(o,this.top+P+c,this.bottom-t[d.line].height));let se=s.x(Q);if(C(se,ee,z),Q=dx(te,Q+p+h,S?Q+ne:this.right,e.rtl),L(s.x(Q),ee,z),S)d.x+=ne+c;else if(typeof z.text!="string"){let Pe=u.lineHeight;d.y+=Dq(z,Pe)+c}else d.y+=y}),ZS(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,n=an(t.font),i=Fn(t.padding);if(!t.display)return;let o=ac(e.rtl,this.left,this.width),l=this.ctx,a=t.position,s=n.size/2,u=i.top+s,c,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+u,f=Zn(e.align,f,this.right-h);else{let p=this.columnSizes.reduce((v,b)=>Math.max(v,b.height),0);c=u+Zn(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let d=Zn(a,f,f+h);l.textAlign=o.textAlign(Zp(a)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=n.string,Ku(l,t.text,d,c,n)}_computeTitleHeight(){let e=this.options.title,t=an(e.font),n=Fn(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,o;if(oc(e,this.left,this.right)&&oc(t,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],oc(e,i.left,i.left+i.width)&&oc(t,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){let t=this.options;if(!Wfe(e.type,t))return;let n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,o=jfe(i,n);i&&!o&&Cr(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!o&&Cr(t.onHover,[e,n,this],this)}else n&&Cr(t.onClick,[e,n,this],this)}};function xfe(r,e,t,n,i){let o=qfe(n,r,e,t),l=Ufe(i,n,e.lineHeight);return{itemWidth:o,itemHeight:l}}function qfe(r,e,t,n){let i=r.text;return i&&typeof i!="string"&&(i=i.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+n.measureText(i).width}function Ufe(r,e,t){let n=r;return typeof e.text!="string"&&(n=Dq(e,t)),n}function Dq(r,e){let t=r.text?r.text.length:0;return e*t}function Wfe(r,e){return!!((r==="mousemove"||r==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(r==="click"||r==="mouseup"))}var Zq={id:"legend",_element:a_,start(r,e,t){let n=r.legend=new a_({ctx:r.ctx,options:t,chart:r});ol.configure(r,n,t),ol.addBox(r,n)},stop(r){ol.removeBox(r,r.legend),delete r.legend},beforeUpdate(r,e,t){let n=r.legend;ol.configure(r,n,t),n.options=t},afterUpdate(r){let e=r.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(r,e){e.replay||r.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(r,e,t){let n=e.datasetIndex,i=t.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:r=>r.chart.options.color,boxWidth:40,padding:10,generateLabels(r){let e=r.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:i,color:o,useBorderRadius:l,borderRadius:a}}=r.legend.options;return r._getSortedDatasetMetas().map(s=>{let u=s.controller.getStyle(t?0:void 0),c=Fn(u.borderWidth);return{text:e[s.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!s.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:l&&(a||u.borderRadius),datasetIndex:s.index}},this)}},title:{color:r=>r.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:r=>!r.startsWith("on"),labels:{_scriptable:r=>!["generateLabels","filter","sort"].includes(r)}}},s_=class extends Jl{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=Or(n.text)?n.text.length:1;this._padding=Fn(n.padding);let o=i*an(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:n,bottom:i,right:o,options:l}=this,a=l.align,s=0,u,c,f;return this.isHorizontal()?(c=Zn(a,n,o),f=t+e,u=o-n):(l.position==="left"?(c=n+e,f=Zn(a,i,t),s=Qr*-.5):(c=o-e,f=Zn(a,t,i),s=Qr*.5),u=i-t),{titleX:c,titleY:f,maxWidth:u,rotation:s}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let n=an(t.font),o=n.lineHeight/2+this._padding.top,{titleX:l,titleY:a,maxWidth:s,rotation:u}=this._drawArgs(o);Ku(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:u,textAlign:Zp(t.align),textBaseline:"middle",translation:[l,a]})}};function Gfe(r,e){let t=new s_({ctx:r.ctx,options:e,chart:r});ol.configure(r,t,e),ol.addBox(r,t),r.titleBlock=t}var Fq={id:"title",_element:s_,start(r,e,t){Gfe(r,t)},stop(r){let e=r.titleBlock;ol.removeBox(r,e),delete r.titleBlock},beforeUpdate(r,e,t){let n=r.titleBlock;ol.configure(r,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var x4={average(r){if(!r.length)return!1;let e,t,n=new Set,i=0,o=0;for(e=0,t=r.length;e<t;++e){let a=r[e].element;if(a&&a.hasValue()){let s=a.tooltipPosition();n.add(s.x),i+=s.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((a,s)=>a+s)/n.size,y:i/o}},nearest(r,e){if(!r.length)return!1;let t=e.x,n=e.y,i=Number.POSITIVE_INFINITY,o,l,a;for(o=0,l=r.length;o<l;++o){let s=r[o].element;if(s&&s.hasValue()){let u=s.getCenterPoint(),c=Hp(e,u);c<i&&(i=c,a=s)}}if(a){let s=a.tooltipPosition();t=s.x,n=s.y}return{x:t,y:n}}};function Ja(r,e){return e&&(Or(e)?Array.prototype.push.apply(r,e):r.push(e)),r}function C1(r){return(typeof r=="string"||r instanceof String)&&r.indexOf(`
`)>-1?r.split(`
`):r}function Yfe(r,e){let{element:t,datasetIndex:n,index:i}=e,o=r.getDatasetMeta(n).controller,{label:l,value:a}=o.getLabelAndValue(i);return{chart:r,label:l,parsed:o.getParsed(i),raw:r.data.datasets[n].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:t}}function fq(r,e){let t=r.chart.ctx,{body:n,footer:i,title:o}=r,{boxWidth:l,boxHeight:a}=e,s=an(e.bodyFont),u=an(e.titleFont),c=an(e.footerFont),f=o.length,h=i.length,d=n.length,p=Fn(e.padding),v=p.height,b=0,C=n.reduce((P,y)=>P+y.before.length+y.lines.length+y.after.length,0);if(C+=r.beforeBody.length+r.afterBody.length,f&&(v+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),C){let P=e.displayColors?Math.max(a,s.lineHeight):s.lineHeight;v+=d*P+(C-d)*s.lineHeight+(C-1)*e.bodySpacing}h&&(v+=e.footerMarginTop+h*c.lineHeight+(h-1)*e.footerSpacing);let L=0,S=function(P){b=Math.max(b,t.measureText(P).width+L)};return t.save(),t.font=u.string,sr(r.title,S),t.font=s.string,sr(r.beforeBody.concat(r.afterBody),S),L=e.displayColors?l+2+e.boxPadding:0,sr(n,P=>{sr(P.before,S),sr(P.lines,S),sr(P.after,S)}),L=0,t.font=c.string,sr(r.footer,S),t.restore(),b+=p.width,{width:b,height:v}}function Kfe(r,e){let{y:t,height:n}=e;return t<n/2?"top":t>r.height-n/2?"bottom":"center"}function Jfe(r,e,t,n){let{x:i,width:o}=n,l=t.caretSize+t.caretPadding;if(r==="left"&&i+o+l>e.width||r==="right"&&i-o-l<0)return!0}function Xfe(r,e,t,n){let{x:i,width:o}=t,{width:l,chartArea:{left:a,right:s}}=r,u="center";return n==="center"?u=i<=(a+s)/2?"left":"right":i<=o/2?u="left":i>=l-o/2&&(u="right"),Jfe(u,r,e,t)&&(u="center"),u}function hq(r,e,t){let n=t.yAlign||e.yAlign||Kfe(r,t);return{xAlign:t.xAlign||e.xAlign||Xfe(r,e,t,n),yAlign:n}}function Qfe(r,e){let{x:t,width:n}=r;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function $fe(r,e,t){let{y:n,height:i}=r;return e==="top"?n+=t:e==="bottom"?n-=i+t:n-=i/2,n}function dq(r,e,t,n){let{caretSize:i,caretPadding:o,cornerRadius:l}=r,{xAlign:a,yAlign:s}=t,u=i+o,{topLeft:c,topRight:f,bottomLeft:h,bottomRight:d}=lc(l),p=Qfe(e,a),v=$fe(e,s,u);return s==="center"?a==="left"?p+=u:a==="right"&&(p-=u):a==="left"?p-=Math.max(c,h)+i:a==="right"&&(p+=Math.max(f,d)+i),{x:Mo(p,0,n.width-e.width),y:Mo(v,0,n.height-e.height)}}function Xp(r,e,t){let n=Fn(t.padding);return e==="center"?r.x+r.width/2:e==="right"?r.x+r.width-n.right:r.x+n.left}function mq(r){return Ja([],C1(r))}function ehe(r,e,t){return b1(r,{tooltip:e,tooltipItems:t,type:"tooltip"})}function gq(r,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?r.override(t):r}var jq={beforeTitle:Ka,title(r){if(r.length>0){let e=r[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:Ka,beforeBody:Ka,beforeLabel:Ka,label(r){if(this&&this.options&&this.options.mode==="dataset")return r.label+": "+r.formattedValue||r.formattedValue;let e=r.dataset.label||"";e&&(e+=": ");let t=r.formattedValue;return ar(t)||(e+=t),e},labelColor(r){let t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(r){let t=r.chart.getDatasetMeta(r.datasetIndex).controller.getStyle(r.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ka,afterBody:Ka,beforeFooter:Ka,footer:Ka,afterFooter:Ka};function Qi(r,e,t,n){let i=r[e].call(t,n);return typeof i=="undefined"?jq[e].call(t,n):i}var q4=class extends Jl{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,o=new n_(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=ehe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){let{callbacks:n}=t,i=Qi(n,"beforeTitle",this,e),o=Qi(n,"title",this,e),l=Qi(n,"afterTitle",this,e),a=[];return a=Ja(a,C1(i)),a=Ja(a,C1(o)),a=Ja(a,C1(l)),a}getBeforeBody(e,t){return mq(Qi(t.callbacks,"beforeBody",this,e))}getBody(e,t){let{callbacks:n}=t,i=[];return sr(e,o=>{let l={before:[],lines:[],after:[]},a=gq(n,o);Ja(l.before,C1(Qi(a,"beforeLabel",this,o))),Ja(l.lines,Qi(a,"label",this,o)),Ja(l.after,C1(Qi(a,"afterLabel",this,o))),i.push(l)}),i}getAfterBody(e,t){return mq(Qi(t.callbacks,"afterBody",this,e))}getFooter(e,t){let{callbacks:n}=t,i=Qi(n,"beforeFooter",this,e),o=Qi(n,"footer",this,e),l=Qi(n,"afterFooter",this,e),a=[];return a=Ja(a,C1(i)),a=Ja(a,C1(o)),a=Ja(a,C1(l)),a}_createItems(e){let t=this._active,n=this.chart.data,i=[],o=[],l=[],a=[],s,u;for(s=0,u=t.length;s<u;++s)a.push(Yfe(this.chart,t[s]));return e.filter&&(a=a.filter((c,f,h)=>e.filter(c,f,h,n))),e.itemSort&&(a=a.sort((c,f)=>e.itemSort(c,f,n))),sr(a,c=>{let f=gq(e.callbacks,c);i.push(Qi(f,"labelColor",this,c)),o.push(Qi(f,"labelPointStyle",this,c)),l.push(Qi(f,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=a,a}update(e,t){let n=this.options.setContext(this.getContext()),i=this._active,o,l=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{let a=x4[n.position].call(this,i,this._eventPosition);l=this._createItems(n),this.title=this.getTitle(l,n),this.beforeBody=this.getBeforeBody(l,n),this.body=this.getBody(l,n),this.afterBody=this.getAfterBody(l,n),this.footer=this.getFooter(l,n);let s=this._size=fq(this,n),u=Object.assign({},a,s),c=hq(this.chart,n,u),f=dq(n,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,o={opacity:1,x:f.x,y:f.y,width:s.width,height:s.height,caretX:a.x,caretY:a.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){let o=this.getCaretPosition(e,n,i);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,n){let{xAlign:i,yAlign:o}=this,{caretSize:l,cornerRadius:a}=n,{topLeft:s,topRight:u,bottomLeft:c,bottomRight:f}=lc(a),{x:h,y:d}=e,{width:p,height:v}=t,b,C,L,S,P,y;return o==="center"?(P=d+v/2,i==="left"?(b=h,C=b-l,S=P+l,y=P-l):(b=h+p,C=b+l,S=P-l,y=P+l),L=b):(i==="left"?C=h+Math.max(s,c)+l:i==="right"?C=h+p-Math.max(u,f)-l:C=this.caretX,o==="top"?(S=d,P=S-l,b=C-l,L=C+l):(S=d+v,P=S+l,b=C+l,L=C-l),y=S),{x1:b,x2:C,x3:L,y1:S,y2:P,y3:y}}drawTitle(e,t,n){let i=this.title,o=i.length,l,a,s;if(o){let u=ac(n.rtl,this.x,this.width);for(e.x=Xp(this,n.titleAlign,n),t.textAlign=u.textAlign(n.titleAlign),t.textBaseline="middle",l=an(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=l.string,s=0;s<o;++s)t.fillText(i[s],u.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+a,s+1===o&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,o){let l=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:u}=o,c=an(o.bodyFont),f=Xp(this,"left",o),h=i.x(f),d=s<c.lineHeight?(c.lineHeight-s)/2:0,p=t.y+d;if(o.usePointStyle){let v={radius:Math.min(u,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=i.leftForLtr(h,u)+u/2,C=p+s/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,xp(e,v,b,C),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,xp(e,v,b,C)}else{e.lineWidth=Jt(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;let v=i.leftForLtr(h,u),b=i.leftForLtr(i.xPlus(h,1),u-2),C=lc(l.borderRadius);Object.values(C).some(L=>L!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,H4(e,{x:v,y:p,w:u,h:s,radius:C}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),H4(e,{x:b,y:p+1,w:u-2,h:s-2,radius:C}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,p,u,s),e.strokeRect(v,p,u,s),e.fillStyle=l.backgroundColor,e.fillRect(b,p+1,u-2,s-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){let{body:i}=this,{bodySpacing:o,bodyAlign:l,displayColors:a,boxHeight:s,boxWidth:u,boxPadding:c}=n,f=an(n.bodyFont),h=f.lineHeight,d=0,p=ac(n.rtl,this.x,this.width),v=function(J){t.fillText(J,p.x(e.x+d),e.y+h/2),e.y+=h+o},b=p.textAlign(l),C,L,S,P,y,z,G;for(t.textAlign=l,t.textBaseline="middle",t.font=f.string,e.x=Xp(this,b,n),t.fillStyle=n.bodyColor,sr(this.beforeBody,v),d=a&&b!=="right"?l==="center"?u/2+c:u+2+c:0,P=0,z=i.length;P<z;++P){for(C=i[P],L=this.labelTextColors[P],t.fillStyle=L,sr(C.before,v),S=C.lines,a&&S.length&&(this._drawColorBox(t,e,P,p,n),h=Math.max(f.lineHeight,s)),y=0,G=S.length;y<G;++y)v(S[y]),h=f.lineHeight;sr(C.after,v)}d=0,h=f.lineHeight,sr(this.afterBody,v),e.y-=o}drawFooter(e,t,n){let i=this.footer,o=i.length,l,a;if(o){let s=ac(n.rtl,this.x,this.width);for(e.x=Xp(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",l=an(n.footerFont),t.fillStyle=n.footerColor,t.font=l.string,a=0;a<o;++a)t.fillText(i[a],s.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){let{xAlign:o,yAlign:l}=this,{x:a,y:s}=e,{width:u,height:c}=n,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:p}=lc(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+f,s),l==="top"&&this.drawCaret(e,t,n,i),t.lineTo(a+u-h,s),t.quadraticCurveTo(a+u,s,a+u,s+h),l==="center"&&o==="right"&&this.drawCaret(e,t,n,i),t.lineTo(a+u,s+c-p),t.quadraticCurveTo(a+u,s+c,a+u-p,s+c),l==="bottom"&&this.drawCaret(e,t,n,i),t.lineTo(a+d,s+c),t.quadraticCurveTo(a,s+c,a,s+c-d),l==="center"&&o==="left"&&this.drawCaret(e,t,n,i),t.lineTo(a,s+f),t.quadraticCurveTo(a,s,a+f,s),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){let t=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){let l=x4[e.position].call(this,this._active,this._eventPosition);if(!l)return;let a=this._size=fq(this,e),s=Object.assign({},l,this._size),u=hq(t,e,s),c=dq(e,s,u,t);(i._to!==c.x||o._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){let t=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(t);let i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let l=Fn(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,i,t),DS(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),ZS(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){let n=this._active,i=e.map(({datasetIndex:a,index:s})=>{let u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[s],index:s}}),o=!P4(n,i),l=this._positionChanged(i,t);(o||l)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let i=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,n),a=this._positionChanged(l,e),s=t||!P4(l,o)||a;return s&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}_getActiveElements(e,t,n,i){let o=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);let l=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&l.reverse(),l}_positionChanged(e,t){let{caretX:n,caretY:i,options:o}=this,l=x4[o.position].call(this,e,t);return l!==!1&&(n!==l.x||i!==l.y)}};ze(q4,"positioners",x4);var xq={id:"tooltip",_element:q4,positioners:x4,afterInit(r,e,t){t&&(r.tooltip=new q4({chart:r,options:t}))},beforeUpdate(r,e,t){r.tooltip&&r.tooltip.initialize(t)},reset(r,e,t){r.tooltip&&r.tooltip.initialize(t)},afterDraw(r){let e=r.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(r.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(r.ctx),r.notifyPlugins("afterTooltipDraw",t)}},afterEvent(r,e){if(r.tooltip){let t=e.replay;r.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(r,e)=>e.bodyFont.size,boxWidth:(r,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:jq},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:r=>r!=="filter"&&r!=="itemSort"&&r!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var the=(r,e,t,n)=>(typeof e=="string"?(t=r.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function rhe(r,e,t,n){let i=r.indexOf(e);if(i===-1)return the(r,e,t,n);let o=r.lastIndexOf(e);return i!==o?t:i}var nhe=(r,e)=>r===null?null:Mo(Math.round(r),0,e);function pq(r){let e=this.getLabels();return r>=0&&r<e.length?e[r]:r}var Gf=class extends dc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let t=this._addedLabels;if(t.length){let n=this.getLabels();for(let{index:i,label:o}of t)n[i]===o&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ar(e))return null;let n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:rhe(n,e,xt(t,e),this._addedLabels),nhe(t,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){let e=this.min,t=this.max,n=this.options.offset,i=[],o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let l=e;l<=t;l++)i.push({value:l});return i}getLabelForValue(e){return pq.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}};ze(Gf,"id","category"),ze(Gf,"defaults",{ticks:{callback:pq}});function ihe(r,e){let t=[],{bounds:i,step:o,min:l,max:a,precision:s,count:u,maxTicks:c,maxDigits:f,includeBounds:h}=r,d=o||1,p=c-1,{min:v,max:b}=e,C=!ar(l),L=!ar(a),S=!ar(u),P=(b-v)/(f+1),y=yS((b-v)/p/d)*d,z,G,J,te;if(y<1e-14&&!C&&!L)return[{value:v},{value:b}];te=Math.ceil(b/y)-Math.floor(v/y),te>p&&(y=yS(te*y/p/d)*d),ar(s)||(z=Math.pow(10,s),y=Math.ceil(y*z)/z),i==="ticks"?(G=Math.floor(v/y)*y,J=Math.ceil(b/y)*y):(G=v,J=b),C&&L&&o&&ix((a-l)/o,y/1e3)?(te=Math.round(Math.min((a-l)/y,c)),y=(a-l)/te,G=l,J=a):S?(G=C?l:G,J=L?a:J,te=u-1,y=(J-G)/te):(te=(J-G)/y,xf(te,Math.round(te),y/1e3)?te=Math.round(te):te=Math.ceil(te));let ne=Math.max(LS(y),LS(G));z=Math.pow(10,ar(s)?ne:s),G=Math.round(G*z)/z,J=Math.round(J*z)/z;let Q=0;for(C&&(h&&G!==l?(t.push({value:l}),G<l&&Q++,xf(Math.round((G+Q*y)*z)/z,l,_q(l,P,r))&&Q++):G<l&&Q++);Q<te;++Q){let ee=Math.round((G+Q*y)*z)/z;if(L&&ee>a)break;t.push({value:ee})}return L&&h&&J!==a?t.length&&xf(t[t.length-1].value,a,_q(a,P,r))?t[t.length-1].value=a:t.push({value:a}):(!L||J===a)&&t.push({value:J}),t}function _q(r,e,{horizontal:t,minRotation:n}){let i=_1(n),o=(t?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+r).length;return Math.min(e/o,l)}var Jf=class extends dc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ar(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds(),{min:i,max:o}=this,l=s=>i=t?i:s,a=s=>o=n?o:s;if(e){let s=nc(i),u=nc(o);s<0&&u<0?a(0):s>0&&u>0&&l(0)}if(i===o){let s=o===0?1:Math.abs(o*.05);a(o+s),e||l(i-s)}this.min=i,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,n=this.getTickLimit();n=Math.max(2,n);let i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=ihe(i,o);return e.bounds==="ticks"&&kS(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){let e=this.ticks,t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){let i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Fp(e,this.chart.options.locale,this.options.ticks.format)}},Yf=class extends Jf{determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=jr(e)?e:0,this.max=jr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,n=_1(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}};ze(Yf,"id","linear"),ze(Yf,"defaults",{ticks:{callback:R4.formatters.numeric}});var W4=r=>Math.floor(p1(r)),uc=(r,e)=>Math.pow(10,W4(r)+e);function bq(r){return r/Math.pow(10,W4(r))===1}function vq(r,e,t){let n=Math.pow(10,t),i=Math.floor(r/n);return Math.ceil(e/n)-i}function ohe(r,e){let t=e-r,n=W4(t);for(;vq(r,e,n)>10;)n++;for(;vq(r,e,n)<10;)n--;return Math.min(n,W4(r))}function lhe(r,{min:e,max:t}){e=Xi(r.min,e);let n=[],i=W4(e),o=ohe(e,t),l=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),s=i>o?Math.pow(10,i):0,u=Math.round((e-s)*l)/l,c=Math.floor((e-s)/a/10)*a*10,f=Math.floor((u-c)/Math.pow(10,o)),h=Xi(r.min,Math.round((s+c+f*Math.pow(10,o))*l)/l);for(;h<t;)n.push({value:h,major:bq(h),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(o++,f=2,l=o>=0?1:l),h=Math.round((s+c+f*Math.pow(10,o))*l)/l;let d=Xi(r.max,h);return n.push({value:d,major:bq(d),significand:f}),n}var Qp=class extends dc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let n=Jf.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return jr(n)&&n>0?n:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=jr(e)?Math.max(0,e):null,this.max=jr(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!jr(this._userMin)&&(this.min=e===uc(this.min,0)?uc(this.min,-1):uc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),n=this.min,i=this.max,o=a=>n=e?n:a,l=a=>i=t?i:a;n===i&&(n<=0?(o(1),l(10)):(o(uc(n,-1)),l(uc(i,1)))),n<=0&&o(uc(i,-1)),i<=0&&l(uc(n,1)),this.min=n,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},n=lhe(t,this);return e.bounds==="ticks"&&kS(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Fp(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=p1(e),this._valueRange=p1(this.max)-p1(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(p1(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};ze(Qp,"id","logarithmic"),ze(Qp,"defaults",{ticks:{callback:R4.formatters.logarithmic,major:{enabled:!0}}});function uM(r){let e=r.ticks;if(e.display&&r.display){let t=Fn(e.backdropPadding);return xt(e.font&&e.font.size,xr.font.size)+t.height}return 0}function ahe(r,e,t){return t=Or(t)?t:[t],{w:_x(r,e.string,t),h:t.length*e.lineHeight}}function Cq(r,e,t,n,i){return r===n||r===i?{start:e-t/2,end:e+t/2}:r<n||r>i?{start:e-t,end:e}:{start:e,end:e+t}}function she(r){let e={l:r.left+r._padding.left,r:r.right-r._padding.right,t:r.top+r._padding.top,b:r.bottom-r._padding.bottom},t=Object.assign({},e),n=[],i=[],o=r._pointLabels.length,l=r.options.pointLabels,a=l.centerPointLabels?Qr/o:0;for(let s=0;s<o;s++){let u=l.setContext(r.getPointLabelContext(s));i[s]=u.padding;let c=r.getPointPosition(s,r.drawingArea+i[s],a),f=an(u.font),h=ahe(r.ctx,f,r._pointLabels[s]);n[s]=h;let d=Yi(r.getIndexAngle(s)+a),p=Math.round(Bp(d)),v=Cq(p,c.x,h.w,0,180),b=Cq(p,c.y,h.h,90,270);uhe(t,e,d,v,b)}r.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),r._pointLabelItems=hhe(r,n,i)}function uhe(r,e,t,n,i){let o=Math.abs(Math.sin(t)),l=Math.abs(Math.cos(t)),a=0,s=0;n.start<e.l?(a=(e.l-n.start)/o,r.l=Math.min(r.l,e.l-a)):n.end>e.r&&(a=(n.end-e.r)/o,r.r=Math.max(r.r,e.r+a)),i.start<e.t?(s=(e.t-i.start)/l,r.t=Math.min(r.t,e.t-s)):i.end>e.b&&(s=(i.end-e.b)/l,r.b=Math.max(r.b,e.b+s))}function che(r,e,t){let n=r.drawingArea,{extra:i,additionalAngle:o,padding:l,size:a}=t,s=r.getPointPosition(e,n+i+l,o),u=Math.round(Bp(Yi(s.angle+Ki))),c=ghe(s.y,a.h,u),f=dhe(u),h=mhe(s.x,a.w,f);return{visible:!0,x:s.x,y:c,textAlign:f,left:h,top:c,right:h+a.w,bottom:c+a.h}}function fhe(r,e){if(!e)return!0;let{left:t,top:n,right:i,bottom:o}=r;return!(Ya({x:t,y:n},e)||Ya({x:t,y:o},e)||Ya({x:i,y:n},e)||Ya({x:i,y:o},e))}function hhe(r,e,t){let n=[],i=r._pointLabels.length,o=r.options,{centerPointLabels:l,display:a}=o.pointLabels,s={extra:uM(o)/2,additionalAngle:l?Qr/i:0},u;for(let c=0;c<i;c++){s.padding=t[c],s.size=e[c];let f=che(r,c,s);n.push(f),a==="auto"&&(f.visible=fhe(f,u),f.visible&&(u=f))}return n}function dhe(r){return r===0||r===180?"center":r<180?"left":"right"}function mhe(r,e,t){return t==="right"?r-=e:t==="center"&&(r-=e/2),r}function ghe(r,e,t){return t===90||t===270?r-=e/2:(t>270||t<90)&&(r-=e),r}function phe(r,e,t){let{left:n,top:i,right:o,bottom:l}=t,{backdropColor:a}=e;if(!ar(a)){let s=lc(e.borderRadius),u=Fn(e.backdropPadding);r.fillStyle=a;let c=n-u.left,f=i-u.top,h=o-n+u.width,d=l-i+u.height;Object.values(s).some(p=>p!==0)?(r.beginPath(),H4(r,{x:c,y:f,w:h,h:d,radius:s}),r.fill()):r.fillRect(c,f,h,d)}}function _he(r,e){let{ctx:t,options:{pointLabels:n}}=r;for(let i=e-1;i>=0;i--){let o=r._pointLabelItems[i];if(!o.visible)continue;let l=n.setContext(r.getPointLabelContext(i));phe(t,l,o);let a=an(l.font),{x:s,y:u,textAlign:c}=o;Ku(t,r._pointLabels[i],s,u+a.lineHeight/2,a,{color:l.color,textAlign:c,textBaseline:"middle"})}}function qq(r,e,t,n){let{ctx:i}=r;if(t)i.arc(r.xCenter,r.yCenter,e,0,Ji);else{let o=r.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let l=1;l<n;l++)o=r.getPointPosition(l,e),i.lineTo(o.x,o.y)}}function bhe(r,e,t,n,i){let o=r.ctx,l=e.circular,{color:a,lineWidth:s}=e;!l&&!n||!a||!s||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=s,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),qq(r,t,l,n),o.closePath(),o.stroke(),o.restore())}function vhe(r,e,t){return b1(r,{label:t,index:e,type:"pointLabel"})}var Uf=class extends Jf{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Fn(uM(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=jr(e)&&!isNaN(e)?e:0,this.max=jr(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/uM(this.options))}generateTickLabels(e){Jf.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{let i=Cr(this.options.pointLabels.callback,[t,n],this);return i||i===0?i:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){let e=this.options;e.display&&e.pointLabels.display?she(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){let t=Ji/(this._pointLabels.length||1),n=this.options.startAngle||0;return Yi(e*t+_1(n))}getDistanceFromCenterForValue(e){if(ar(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(ar(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let n=t[e];return vhe(this.getContext(),e,n)}}getPointPosition(e,t,n=0){let i=this.getIndexAngle(e)-Ki+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:n,right:i,bottom:o}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let n=this.ctx;n.save(),n.beginPath(),qq(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:n,grid:i,border:o}=t,l=this._pointLabels.length,a,s,u;if(t.pointLabels.display&&_he(this,l),i.display&&this.ticks.forEach((c,f)=>{if(f!==0||f===0&&this.min<0){s=this.getDistanceFromCenterForValue(c.value);let h=this.getContext(f),d=i.setContext(h),p=o.setContext(h);bhe(this,d,s,l,p)}}),n.display){for(e.save(),a=l-1;a>=0;a--){let c=n.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:h}=c;!h||!f||(e.lineWidth=h,e.strokeStyle=f,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,s=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),u=this.getPointPosition(a,s),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;let i=this.getIndexAngle(0),o,l;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,s)=>{if(s===0&&this.min>=0&&!t.reverse)return;let u=n.setContext(this.getContext(s)),c=an(u.font);if(o=this.getDistanceFromCenterForValue(this.ticks[s].value),u.showLabelBackdrop){e.font=c.string,l=e.measureText(a.label).width,e.fillStyle=u.backdropColor;let f=Fn(u.backdropPadding);e.fillRect(-l/2-f.left,-o-c.size/2-f.top,l+f.width,c.size+f.height)}Ku(e,a.label,0,-o,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}};ze(Uf,"id","radialLinear"),ze(Uf,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:R4.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ze(Uf,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ze(Uf,"descriptors",{angleLines:{_fallback:"grid"}});var u_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},$i=Object.keys(u_);function wq(r,e){return r-e}function yq(r,e){if(ar(e))return null;let t=r._adapter,{parser:n,round:i,isoWeekday:o}=r._parseOpts,l=e;return typeof n=="function"&&(l=n(l)),jr(l)||(l=typeof n=="string"?t.parse(l,n):t.parse(l)),l===null?null:(i&&(l=i==="week"&&(qf(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,i)),+l)}function kq(r,e,t,n){let i=$i.length;for(let o=$i.indexOf(r);o<i-1;++o){let l=u_[$i[o]],a=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(a*l.size))<=n)return $i[o]}return $i[i-1]}function Che(r,e,t,n,i){for(let o=$i.length-1;o>=$i.indexOf(t);o--){let l=$i[o];if(u_[l].common&&r._adapter.diff(i,n,l)>=e-1)return l}return $i[t?$i.indexOf(t):0]}function whe(r){for(let e=$i.indexOf(r)+1,t=$i.length;e<t;++e)if(u_[$i[e]].common)return $i[e]}function Lq(r,e,t){if(!t)r[e]=!0;else if(t.length){let{lo:n,hi:i}=Dp(t,e),o=t[n]>=e?t[n]:t[i];r[o]=!0}}function yhe(r,e,t,n){let i=r._adapter,o=+i.startOf(e[0].value,n),l=e[e.length-1].value,a,s;for(a=o;a<=l;a=+i.add(a,1,n))s=t[a],s>=0&&(e[s].major=!0);return e}function Eq(r,e,t){let n=[],i={},o=e.length,l,a;for(l=0;l<o;++l)a=e[l],i[a]=l,n.push({value:a,major:!1});return o===0||!t?n:yhe(r,n,i,t)}var Kf=class extends dc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){let n=e.time||(e.time={}),i=this._adapter=new c5e._date(e.adapters.date);i.init(t),jf(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:yq(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,t=this._adapter,n=e.time.unit||"day",{min:i,max:o,minDefined:l,maxDefined:a}=this.getUserBounds();function s(u){!l&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!l||!a)&&(s(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&s(this.getMinMax(!1))),i=jr(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),o=jr(o)&&!isNaN(o)?o:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){let e=this.options,t=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);let o=this.min,l=this.max,a=sx(i,o,l);return this._unit=t.unit||(n.autoSkip?kq(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):Che(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:whe(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Eq(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);let l=e.length<3?.5:.25;t=Mo(t,0,l),n=Mo(n,0,l),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){let e=this._adapter,t=this.min,n=this.max,i=this.options,o=i.time,l=o.unit||kq(o.minUnit,t,n,this._getLabelCapacity(t)),a=xt(i.ticks.stepSize,1),s=l==="week"?o.isoWeekday:!1,u=qf(s)||s===!0,c={},f=t,h,d;if(u&&(f=+e.startOf(f,"isoWeek",s)),f=+e.startOf(f,u?"day":l),e.diff(n,t,l)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+l);let p=i.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<n;h=+e.add(h,a,l),d++)Lq(c,h,p);return(h===n||i.bounds==="ticks"||d===1)&&Lq(c,h,p),Object.keys(c).sort(wq).map(v=>+v)}getLabelForValue(e){let t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){let i=this.options.time.displayFormats,o=this._unit,l=t||i[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,n,i){let o=this.options,l=o.ticks.callback;if(l)return Cr(l,[e,t,n],this);let a=o.time.displayFormats,s=this._unit,u=this._majorUnit,c=s&&a[s],f=u&&a[u],h=n[t],d=u&&f&&h&&h.major;return this._adapter.format(e,i||(d?f:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){let t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){let t=this.options.ticks,n=this.ctx.measureText(e).width,i=_1(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(i),l=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*o+a*l,h:n*l+a*o}}_getLabelCapacity(e){let t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,o=this._tickFormatFunction(e,0,Eq(this,[e],this._majorUnit),i),l=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;let i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,n=i.length;t<n;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],t,n;if(e.length)return e;let i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(yq(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return fx(e.sort(wq))}};ze(Kf,"id","time"),ze(Kf,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function $p(r,e,t){let n=0,i=r.length-1,o,l,a,s;t?(e>=r[n].pos&&e<=r[i].pos&&({lo:n,hi:i}=Wu(r,"pos",e)),{pos:o,time:a}=r[n],{pos:l,time:s}=r[i]):(e>=r[n].time&&e<=r[i].time&&({lo:n,hi:i}=Wu(r,"time",e)),{time:o,pos:a}=r[n],{time:l,pos:s}=r[i]);let u=l-o;return u?a+(s-a)*(e-o)/u:a}var e_=class extends Kf{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=$p(t,this.min),this._tableRange=$p(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:n}=this,i=[],o=[],l,a,s,u,c;for(l=0,a=e.length;l<a;++l)u=e[l],u>=t&&u<=n&&i.push(u);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(l=0,a=i.length;l<a;++l)c=i[l+1],s=i[l-1],u=i[l],Math.round((c+s)/2)!==u&&o.push({time:u,pos:l/(a-1)});return o}_generate(){let e=this.min,t=this.max,n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return($p(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return $p(this._table,n*this._tableRange+this._minPos,!0)}};ze(e_,"id","timeseries"),ze(e_,"defaults",Kf.defaults);var Uq=/^on/,Wq=[];Object.keys(globalThis).forEach(r=>{Uq.test(r)&&Wq.push(r.replace(Uq,""))});function Xl(r){let e=Da,t=[];function n(i){q(e,i)}t1(()=>{let i=r();Wq.forEach(i instanceof Element?o=>t.push(j(i,o,n)):o=>t.push(i.$on(o,n)))}),I2(()=>{for(;t.length;)t.pop()()})}function khe(r){let e,t=[r[1]],n={};for(let i=0;i<t.length;i+=1)n=R(n,t[i]);return{c(){e=Ge("canvas"),mn(e,n)},m(i,o){A(i,e,o),r[8](e)},p:I,i:I,o:I,d(i){i&&M(e),r[8](null)}}}function Lhe(r){let{data:e,type:t,options:n,plugins:i,children:o,$$scope:l,$$slots:a,...s}=r;return s}function Ehe(r,e,t){let{type:n}=e,{data:i={datasets:[]}}=e,{options:o={}}=e,{plugins:l=[]}=e,{updateMode:a=void 0}=e,{chart:s=null}=e,u,c=Lhe(e);t1(()=>{t(2,s=new Li(u,{type:n,data:i,options:o,plugins:l}))}),uk(()=>{s&&(t(2,s.data=i,s),Object.assign(s.options,o),s.update(a))}),I2(()=>{s&&s.destroy(),t(2,s=null)}),Xl(()=>u);function f(h){je[h?"unshift":"push"](()=>{u=h,t(0,u)})}return r.$$set=h=>{t(9,e=R(R({},e),x(h))),"type"in h&&t(3,n=h.type),"data"in h&&t(4,i=h.data),"options"in h&&t(5,o=h.options),"plugins"in h&&t(6,l=h.plugins),"updateMode"in h&&t(7,a=h.updateMode),"chart"in h&&t(2,s=h.chart)},e=x(e),[u,c,s,n,i,o,l,a,f]}var fM=class extends H{constructor(e){super(),V(this,e,Ehe,khe,N,{type:3,data:4,options:5,plugins:6,updateMode:7,chart:2})}},Qa=fM;function She(r){let e,t,n,i=[{type:"line"},r[1]];function o(a){r[4](a)}let l={};for(let a=0;a<i.length;a+=1)l=R(l,i[a]);return r[0]!==void 0&&(l.chart=r[0]),e=new Qa({props:l}),r[3](e),je.push(()=>kt(e,"chart",o)),{c(){_e(e.$$.fragment)},m(a,s){ge(e,a,s),n=!0},p(a,[s]){let u=s&2?D(i,[i[0],tt(a[1])]):{};!t&&s&1&&(t=!0,u.chart=a[0],St(()=>t=!1)),e.$set(u)},i(a){n||(re(e.$$.fragment,a),n=!0)},o(a){oe(e.$$.fragment,a),n=!1},d(a){r[3](null),pe(e,a)}}}function Mhe(r,e,t){Li.register(fc);let{chart:n=null}=e,i,o;Xl(()=>o);function l(s){je[s?"unshift":"push"](()=>{o=s,t(2,o)})}function a(s){n=s,t(0,n)}return r.$$set=s=>{t(5,e=R(R({},e),x(s))),"chart"in s&&t(0,n=s.chart)},r.$$.update=()=>{t(1,i=e)},e=x(e),[n,i,o,l,a]}var hM=class extends H{constructor(e){super(),V(this,e,Mhe,She,N,{chart:0})}},c_=hM;function Ahe(r){Ba(r,"svelte-169aap0","#statistics-line-chart.svelte-169aap0{--backgroundColor:rgba(225, 204,230, .4);--backgroundColor-1:rgba(255, 99, 132, 0.2);--borderColor-1:rgb(205, 130, 158);--point-border-color:rgb(205, 130,1 58);--pointBackgroundColor:rgb(255, 255, 255);--pointHoverBackgroundColor:rgb(0, 0, 0);--pointHoverBorderColor:rgba(220, 220, 220,1);--pageDataColor:rgb(255, 136, 0);position:relative;height:100%;width:100%;background-color:rgba(255, 255, 255, 0.9)}")}function Phe(r){let e,t;return e=new c_({props:{data:r[0],options:r[2]}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p:I,i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function The(r){let e,t;return e=new c_({props:{data:r[1],options:r[3]}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p:I,i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Ohe(r){let e,t,n,i,o,l=[The,Phe],a=[];function s(u,c){return u[4]()?0:1}return n=s(r,-1),i=a[n]=l[n](r),{c(){e=Ge("div"),i.c(),k(e,"id","statistics-line-chart"),k(e,"class","svelte-169aap0")},m(u,c){A(u,e,c),a[n].m(e,null),o=!0},p(u,[c]){i.p(u,c)},i(u){o||(re(i),o=!0)},o(u){oe(i),o=!1},d(u){u&&M(e),a[n].d()}}}var Rhe=1e4;function Ihe(r,e,t){let{app:n}=e,{plugin:i}=e,{staticsFileData:o}=e,l=JSON.parse(o),a=[],s=[],u=[],c=[],f=Object.keys(l.history);for(let z of f)a.push({key:z,value:l.history[z].words}),s.push({key:z,value:-l.history[z].pages}),u.push({key:z,value:Number(l.history[z].files)}),c.push({key:z,value:Number(l.history[z].totalPages)});let h=Rhe/f.length,p={x:{type:"number",easing:"linear",duration:h,from:NaN,delay(z){return z.type!=="data"||z.xStarted?0:(z.xStarted=!0,z.index*h)}},y:{type:"number",easing:"linear",duration:h,from:z=>z.index===0?z.chart.scales.y.getPixelForValue(100):z.chart.getDatasetMeta(z.datasetIndex).data[z.index-1].getProps(["y"],!0).y,delay(z){return z.type!=="data"||z.yStarted?0:(z.yStarted=!0,z.index*h)}}},v={tension:{duration:1e3,easing:"linear",from:1,to:0,loop:!0}},b;i.settings.animation?b=p:b=v;let C={datasets:[{label:"Daily Words",fill:!0,data:a,backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)"],borderWidth:1,yAxisID:"y",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"},{label:"Daily Pages",fill:!0,data:s,backgroundColor:["rgba(238, 130, 238, 0.2)"],borderColor:["rgba(238, 130, 238, 1)"],borderWidth:1,yAxisID:"y1",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"}]},L={datasets:[{label:"Total Files",fill:!0,data:u,backgroundColor:["rgba(153, 102, 255, 0.2)"],borderColor:["rgba(153, 102, 255, 1)"],borderWidth:1,yAxisID:"y",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"},{label:"Total Pages",fill:!0,data:c,backgroundColor:["rgba(255, 205, 86, 0.2)"],borderColor:["rgba(255, 205, 86, 1)"],borderWidth:1,yAxisID:"y1",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"}]},S={responsive:!0,interaction:{intersect:!0,mode:"index"},plugins:{title:{display:!0,text:"Statistics of Obsidian Vault",font:{weight:"bold",size:16,family:"Barlow"},color:"rgba(48,48,48,1)"},subtitle:{display:!0,text:"words of vault named as Anthelion",font:{size:14,style:"italic",family:"sans-serif",weight:"bold"},color:"rgba(48,48,48,0.8)"},legend:{labels:{color:"rgba(0,0,0,1)",usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{usePointStyle:!0}},animations:b,scales:{y:{border:{display:!0,width:.8},grid:{display:!0,drawOnChartArea:!0,drawTicks:!0,color:"rgba(59, 59, 59, 0.2)"},title:{display:!0,text:"+words",font:{size:15,style:"italic",weight:"bold"},color:"rgba(255, 99, 132, 1)"},ticks:{color:"rgba(255, 99, 132, 1)",showLabelBackdrop:!1}},y1:{position:"right",border:{display:!0,width:.8},grid:{display:!0,drawOnChartArea:!0,drawTicks:!0,color:"rgba(59, 59, 59, 0.2)"},title:{display:!0,text:"-pages",font:{size:15,style:"italic",weight:"bold"},color:"rgba(238, 130, 238, 1)"},ticks:{color:"rgba(238, 130, 238, 1)",showLabelBackdrop:!1}},x:{border:{display:!1,width:.8},grid:{color:"rgba(59, 59, 59, 0.2)"},ticks:{}}}},P={interaction:{mode:"index",axis:"y"},plugins:{title:{display:!0,text:"Statistics of Obsidian Vault",font:{weight:"bold",size:16,family:"Barlow"}},subtitle:{display:!0,text:"total files/pages of vault named as "+n.vault.getName(),font:{size:14,style:"italic",family:"sans-serif"}},legend:{labels:{color:"rgba(0,0,0,1)",usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{usePointStyle:!0}},animations:b,scales:{y:{border:{display:!0,width:.8},grid:{display:!0,drawOnChartArea:!0,drawTicks:!0,color:"rgba(59, 59, 59, 0.2)"},title:{display:!0,text:"total-files",font:{size:15,style:"italic",weight:"bold",family:"Courier New"},color:"rgba(153, 102, 255, 1)"},ticks:{color:"rgba(153, 102, 255, 0.5)",showLabelBackdrop:!1},suggestedMin:1373},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"total-pages",font:{size:15,style:"italic",weight:"bold",family:"Courier New"},color:"rgba(255, 205, 86, 1)"},ticks:{color:"rgba(255, 205, 86, 1)",showLabelBackdrop:!1},suggestedMin:4045},x:{border:{display:!1,width:.8},grid:{color:"rgba(59, 59, 59, 0.2)"}}}},y=()=>i.settings.statisticsType==="total";return Li.register(Fq,xq,Zq,Kl,Yf,hc,Gf,Bq),r.$$set=z=>{"app"in z&&t(5,n=z.app),"plugin"in z&&t(6,i=z.plugin),"staticsFileData"in z&&t(7,o=z.staticsFileData)},[C,L,S,P,y,n,i,o]}var dM=class extends H{constructor(e){super(),V(this,e,Ihe,Ohe,N,{app:5,plugin:6,staticsFileData:7},Ahe)}},mM=dM;var f_="PluginAST_STAT",gM=new RegExp("%%[\\s\\S]*?(?!%%)[\\s\\S]+?%%","g"),pM=new RegExp("<!--[\\s\\S]*?(?:-->)?<!---+>?|<!(?![dD][oO][cC][tT][yY][pP][eE]|\\[CDATA\\[)[^>]*>?|<[?][^>]*>?","g"),Gq="stats.json";var mc="vault-statistics-preview",h_=class extends d_.ItemView{constructor(e,t,n){super(n),this.app=e,this.plugin=t,this.staticsFileData="",(0,d_.addIcon)(f_,oi[f_])}getViewType(){return mc}getDisplayText(){return"Vault Statistics Preview"}getIcon(){return f_}async onOpen(){let e=this.app.vault.configDir+"/"+Gq;this.staticsFileData=await this.app.vault.adapter.read(e);let t=this.containerEl.getElementsByClassName("view-content");this.component=new mM({target:t[0],props:{app:this.app,plugin:this.plugin,staticsFileData:this.staticsFileData}}),this.containerEl.getElementsByTagName("canvas")[0].setAttribute("style","position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);")}async onClose(){this.component.$destroy()}onResize(){this.component.$destroy();let e=this.containerEl.getElementsByClassName("view-content");this.component=new mM({target:e[0],props:{app:this.app,plugin:this.plugin,staticsFileData:this.staticsFileData}}),this.containerEl.getElementsByTagName("canvas")[0].setAttribute("style","position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);")}};var Kq={debug:!1,targetPath:".",fileFormat:"YYYY-MM-DD",previewLimits:5,previewTags:[],localGraph:{notice:"show current note grah view",type:"popover",depth:2,showTags:!0,showAttach:!0,showNeighbor:!0,collapse:!1,autoColors:!1,resizeStyle:{width:550,height:500}},enableGraphColors:!1,colorGroups:[{query:"path:/",color:{a:1,rgb:6617700}}],enableMetadataUpdating:!1,metadatas:[{key:"modify",value:"YYYY-MM-DD HH:mm:ss",t:"moment"}],metadataExcludePath:[],isEnabledMetadataUpdating:!1,cachePluginRepo:{"personal-assistant":"edonyzpc/personal-assistant"},cacheThemeRepo:{Minimal:"kepano/obsidian-minimal"},statisticsType:"none",statsPath:".obsidian/stats.json",displaySectionCounts:!1,countComments:!1,animation:!1,modelName:"qwen-plus",apiToken:"sk-xxx",featuredImagePath:"9.src",numFeaturedImages:2,vssCacheExcludePath:[".obsidian","8.template","9.src","a.subjects","b.notion"]},Yq={query:"path:/",color:{a:1,rgb:6617700}},m_=class extends tr.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t,this.log=(...n)=>t.log(...n)}display(){let e=this.plugin,{containerEl:t}=this;t.empty(),t.createEl("h1",{text:"Settings for Obsidian Assistant"});let n=document.createElement("a");n.setText("Open GitHub repository"),n.href="https://github.com/edonyzpc/personal-assistant",n.setAttr("style","font-style: italic;"),t.createEl("p",{text:"Obsidian Assistant by Shadow Walker, "}).appendChild(n),new tr.Setting(t).setName("Debug").addToggle(c=>c.setValue(this.plugin.settings.debug).onChange(f=>{this.plugin.settings.debug=f,this.plugin.saveSettings()})),t.createEl("h2",{text:"Settings for Record"}),t.createEl("p",{text:"Obsidian Management for Recording in Specific Path"}).setAttr("style","font-size:14px"),new tr.Setting(t).setName("Target Path").setDesc("Target directory to do recording").addText(c=>c.setPlaceholder(".").setValue(this.plugin.settings.targetPath).onChange(async f=>{this.log("target path: "+f),e.settings.targetPath=f,await this.plugin.saveSettings()}));let i=document.createDocumentFragment();i.createEl("p",void 0,c=>{c.innerText=`File format which is like Diary setting.
For more syntax details, `,c.createEl("a",void 0,f=>{f.innerText="please check moment format.",f.href="https://momentjs.com/docs/#/displaying/format/"})}),new tr.Setting(t).setName("File Format").setDesc(i).addText(c=>c.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.fileFormat).onChange(async f=>{this.log("format setting: "+f),e.settings.fileFormat=f,await this.plugin.saveSettings()})),new tr.Setting(t).setName("Preview Number").setDesc("File numbers to preview").addText(c=>{c.setPlaceholder("5").setValue(this.plugin.settings.previewLimits.toString()).onChange(async f=>{e.settings.previewLimits=parseInt(f),await this.plugin.saveSettings()})}),t.createEl("h2",{text:"Settings for Hover Local Graph"}),t.createEl("p",{text:"Obsidian Management for Hover Local Graph"}).setAttr("style","font-size:14px"),new tr.Setting(t).setName("Type").setDesc("Type of hover").addText(c=>{c.setPlaceholder("popover").setValue(this.plugin.settings.localGraph.type).onChange(async f=>{e.settings.localGraph.type=f,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("Depth").setDesc("Depth of link jumps").addText(c=>{c.setPlaceholder("2").setValue(this.plugin.settings.localGraph.depth.toString()).onChange(async f=>{e.settings.localGraph.depth=parseInt(f),await this.plugin.saveSettings()})}),new tr.Setting(t).setName("Show Tags").setDesc("Show tags in local graph view").addToggle(c=>{c.setValue(this.plugin.settings.localGraph.showTags).onChange(async f=>{e.settings.localGraph.showTags=f,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("Show Attachment").setDesc("Show attachments in local graph view").addToggle(c=>{c.setValue(this.plugin.settings.localGraph.showAttach).onChange(async f=>{e.settings.localGraph.showAttach=f,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("Show Neighbor").setDesc("Show neighbors in local graph view").addToggle(c=>{c.setValue(this.plugin.settings.localGraph.showNeighbor).onChange(async f=>{e.settings.localGraph.showNeighbor=f,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("Collapse").setDesc("Collapse local graph view setting").addToggle(c=>{c.setValue(this.plugin.settings.localGraph.collapse).onChange(async f=>{e.settings.localGraph.collapse=f,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("Auto Local Graph Colors").setDesc("Automatically set colors of local graph view.").addToggle(c=>{c.setValue(e.settings.localGraph.autoColors).onChange(async f=>{e.settings.localGraph.autoColors=f,await e.saveSettings()})}),t.createEl("p",{text:"Graph Resize"}).setAttr("style","font-size:15px");let o=document.createDocumentFragment();o.createEl("span",void 0,c=>{c.innerText="height",c.setAttr("style","margin:18px")});let l=document.createDocumentFragment();l.createEl("span",void 0,c=>{c.innerText="width",c.setAttr("style","margin:18px")}),document.createDocumentFragment().createEl("span",void 0,c=>{c.innerText="top",c.setAttr("style","margin:18px")}),document.createDocumentFragment().createEl("span",void 0,c=>{c.innerText="left",c.setAttr("style","margin:18px")}),new tr.Setting(t).setName(o).addText(c=>{c.setPlaceholder("height").setValue(this.plugin.settings.localGraph.resizeStyle.height.toString()).onChange(async f=>{e.settings.localGraph.resizeStyle.height=parseInt(f),await this.plugin.saveSettings()})}),new tr.Setting(t).setName(l).addText(c=>{c.setPlaceholder("width").setValue(this.plugin.settings.localGraph.resizeStyle.width.toString()).onChange(async f=>{e.settings.localGraph.resizeStyle.width=parseInt(f),await this.plugin.saveSettings()})}),t.createEl("h2",{text:"Graph Colors"}),new tr.Setting(t).setName("Enable Graph Colors").setDesc("Use personal assistant set colors of graph view.").addToggle(c=>{c.setValue(e.settings.enableGraphColors).onChange(async f=>{e.settings.enableGraphColors=f,await e.saveSettings(),this.display()})}),e.settings.enableGraphColors&&(JSON.parse(JSON.stringify(e.settings.colorGroups)).forEach(f=>{let h=this.findGraphColor(f),d=`#${f.color.rgb.toString(16)}`,v=(C=>{let L=parseInt(C.slice(1,3),16),S=parseInt(C.slice(3,5),16),P=parseInt(C.slice(5,7),16);return"rgb("+L+", "+S+", "+P+")"})(d),b=document.createDocumentFragment();b.createSpan({text:"\u25CF",attr:{style:`color: ${d}`}}),b.appendText(` Color for #${f.query}`),new tr.Setting(t).setName(b).setDesc("This will be the Color used in the graph view.").addText(C=>{C.setValue(e.settings.colorGroups[h].query).onChange(async L=>{h>-1&&(e.settings.colorGroups[h].query=L,await this.plugin.saveSettings())})}).addButton(C=>{C.setButtonText("Change Color"),new hS({parent:C.buttonEl,onDone:async L=>{let S=L.hex.split("#")[1];this.log(`origin hex color = ${S}`),S.length===8&&(S=S.substring(0,6)),this.log(`hexColor without alpha ${S}`),h>-1&&(this.plugin.settings.colorGroups[h].color.rgb=parseInt(S,16),await this.plugin.saveSettings(),this.display())},popup:"left",color:v,alpha:!1})}).addExtraButton(C=>{C.setIcon("trash").setTooltip("Remove").onClick(async()=>{h>-1&&(this.log(`removing  ${this.plugin.settings.colorGroups[h]}`),this.plugin.settings.colorGroups.splice(h,1)),await this.plugin.saveSettings(),this.display()})}).addExtraButton(C=>{C.setIcon("reset").setTooltip("Reset to default").onClick(async()=>{h>-1&&(this.log(`resetting ${this.plugin.settings.colorGroups[h]}`),this.plugin.settings.colorGroups[h]=JSON.parse(JSON.stringify(Yq))),await this.plugin.saveSettings(),this.display()})})}),new tr.Setting(t).addButton(f=>{f.setButtonText("Add Color").onClick(async()=>{this.log("adding new color"),this.plugin.settings.colorGroups.push(JSON.parse(JSON.stringify(Yq))),await this.plugin.saveSettings(),this.display()})})),t.createEl("h2",{text:"Metadata Management"});let u=document.createDocumentFragment();if(u.createEl("p",void 0,c=>{c.innerText="Auto updating metadata in frontmatter when file is modified.\nTimestamp format follows `moment.js` and syntax details, ",c.createEl("a",void 0,f=>{f.innerText="please check moment format.",f.href="https://momentjs.com/docs/#/displaying/format/"})}),new tr.Setting(t).setName("Enable Updating Metadata").setDesc(u).addToggle(c=>{c.setValue(e.settings.enableMetadataUpdating).onChange(async f=>{e.settings.enableMetadataUpdating=f,await e.saveSettings(),this.display()})}),e.settings.enableMetadataUpdating){let c=JSON.parse(JSON.stringify(e.settings.metadatas)),f=document.createDocumentFragment();f.createSpan({text:"---"}),new tr.Setting(t).setName(f);for(let b=0;b<c.length;b++){let C=this.findMetadata(c[b].key),L=document.createDocumentFragment();L.appendText(`${c[b].key}: `),new tr.Setting(t).setName(L).addText(S=>{S.setValue(e.settings.metadatas[C].value).onChange(async P=>{C>-1&&(e.settings.metadatas[C].value=P,await this.plugin.saveSettings())})}).addExtraButton(S=>{S.setIcon("trash").setTooltip("Remove").onClick(async()=>{C>-1&&(this.log(`removing  ${this.plugin.settings.metadatas[C]}`),this.plugin.settings.metadatas.splice(C,1)),await this.plugin.saveSettings(),this.display()})})}let h=document.createDocumentFragment();h.createSpan({text:"---"}),new tr.Setting(t).setName(h);let d,p,v;new tr.Setting(t).setName("Add Key:Value in frontmatter").setDesc("Value now only upport formatted timestamp and regular string.").addText(b=>{b.setPlaceholder("key").setValue(d).onChange(async C=>{d=C})}).addText(b=>{b.setPlaceholder("value").setValue(p).onChange(async C=>{p=C})}).addDropdown(b=>{b.addOption("string","1 Regular String"),b.addOption("moment","2 Timestamp"),b.onChange(async C=>{v=C})}).addButton(b=>{b.setButtonText("Add").onClick(async()=>{this.log("adding new frontmatter"),this.plugin.settings.metadatas.push({key:d,value:p,t:v}),await this.plugin.saveSettings(),this.display()})}),new tr.Setting(t).setName("Meta Updating Exclude Path").setDesc("Exclude files in the directory to update metadata").addText(b=>{b.setPlaceholder("path strings with comma as separator, e.g. `tmp/,notes/templates`").setValue(this.plugin.settings.metadataExcludePath.join(",")).onChange(async C=>{e.settings.metadataExcludePath=C.split(","),await this.plugin.saveSettings()})})}t.createEl("h2",{text:"Vault Statistics"}),new tr.Setting(t).setName("Show Statistics").setDesc("Show statistics in the status bar").addDropdown(c=>{this.log(this.plugin.settings.statisticsType);let f=c.addOption("daily","Daily Statistcs"),h=c.addOption("total","Total Statistics");this.plugin.settings.statisticsType==="daily"?(f.setDisabled(!1),c.setValue("daily")):(h.setDisabled(!1),c.setValue("total")),c.onChange(async d=>{this.plugin.log("changing statistics type",d),this.plugin.settings.statisticsType=d,await this.plugin.saveSettings();let p=this.app.workspace.getLeaf("window");await p.setViewState({type:mc,active:!1}),this.app.workspace.revealLeaf(p)})}),new tr.Setting(t).setName("Vault Stats File Path").setDesc("Reload required for change to take effect. The location of the vault statistics file, relative to the vault root.").addText(c=>{c.setPlaceholder(".obsidian/stats.json"),c.setValue(this.plugin.settings.statsPath.toString()),c.onChange(async f=>{this.plugin.settings.statsPath=f,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("Animation").addToggle(c=>c.setValue(this.plugin.settings.animation).onChange(f=>{this.plugin.settings.animation=f,this.plugin.saveSettings()})),t.createEl("h2",{text:"AI Assistant"}),t.createEl("p",{text:"AI Helper Only Support \u901A\u4E49\u5343\u95EE LLM"}).setAttr("style","font-size:15px"),new tr.Setting(t).setName("Set Model Name").setDesc("Select the model name for AI Helper, only support qwen-max, qwen-turbo, qwen-plus").addDropdown(c=>{let f=c.addOption("qwen-max","qwen max"),h=c.addOption("qwen-turbo","qwen turbo"),d=c.addOption("qwen-plus","qwen plus");this.plugin.settings.modelName==="qwen-max"?(f.setDisabled(!1),c.setValue("qwen-max")):this.plugin.settings.modelName==="qwen-turbo"?(h.setDisabled(!1),c.setValue("qwen-turbo")):(d.setDisabled(!1),c.setValue("qwen-plus")),c.onChange(async p=>{this.plugin.log("changing modle provider",p),this.plugin.settings.modelName=p,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("API Token").setDesc("LLM Model related API Token. NOTE: your input token is protected by AES-GCM encryption.").addText(c=>{c.setPlaceholder("llm api token"),c.setValue(this.plugin.settings.apiToken),c.onChange(async f=>{let d=await new Vf().encryptToBase64(f,mp);this.plugin.settings.apiToken=d,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("AI Featured Image Path").setDesc("AI feautured image helper will download the images and save them to this path.").addText(c=>{c.setPlaceholder("9.src"),c.setValue(this.plugin.settings.featuredImagePath.toString()),c.onChange(async f=>{this.plugin.settings.featuredImagePath=f,await this.plugin.saveSettings()})}),new tr.Setting(t).setName("AI Featured Images Generating Number").setDesc("The number of images to generate when using AI Featured Image Helper.").addText(c=>{c.setPlaceholder("2").setValue(this.plugin.settings.numFeaturedImages.toString()).onChange(async f=>{e.settings.numFeaturedImages=parseInt(f),await this.plugin.saveSettings()})}),new tr.Setting(t).setName("VSS Exclude Path").setDesc("Exclude files in the directory to cache vector store").addText(c=>{c.setPlaceholder("path strings with comma as separator, e.g. `tmp/,notes/templates`").setValue(this.plugin.settings.vssCacheExcludePath.join(",")).onChange(async f=>{e.settings.vssCacheExcludePath=f.split(","),await this.plugin.saveSettings()})})}findGraphColor(e){return this.plugin.settings.colorGroups.findIndex(t=>e.query===t.query&&e.color.a===t.color.a&&e.color.rgb===t.color.rgb)}findMetadata(e){return this.plugin.settings.metadatas.findIndex(t=>t.key===e)}};var Xu=require("obsidian");var g_=class{constructor(e,t){this.viewDataType={localGraph:"localgraph"};this.resized=!1,this.log=(...n)=>e.log(...n),this.plugin=e,this.viewType=t}async resize(){if(this.resized)return;let{localGraph:e}=this.plugin.settings,t,n,i,o,l,a=window.innerWidth,s=window.innerHeight;switch(this.viewType){case 0:t=e.resizeStyle.width,n=e.resizeStyle.height,o=s/2-n/2,i=a/2-t/2,o=o+(10+Math.random()*100),i=i+(10+Math.random()*100),l=this.viewDataType.localGraph;break}document.querySelectorAll("body .popover.hover-editor").forEach(c=>{this.log("iterating hovers..."),c.querySelector(`[data-type="${l}"]`)&&(this.log("setting hover editor attribute..."),c.setAttribute("style",`height: ${n}px; width: ${t}px; top: ${o}px; left: ${i}px; cursor: move;`),document.body.style.setProperty("--resize-popover-width",`${t} !important`),c.addClass("resize-popover-width"),this.resized=!0)})}};var p_=class extends g_{constructor(e,t){super(t,0),this.app=e}async startup(){this.resized=!1;let e=this.app.workspace,t=e.getActiveFile();if(t&&(await e.getLeaf(!0).setViewState({type:"localgraph",active:!0,state:{file:t.path}}),await this.syncGlobalToLocal()),Xu.Platform.isDesktop&&this.plugin.settings.localGraph.type==="popover"){if(!await this.app.commands.executeCommandById("obsidian-hover-editor:convert-active-pane-to-popover")){new Xu.Notice("hover local graph failed");return}new Xu.Notice(this.plugin.settings.localGraph.notice)}this.plugin.settings.localGraph.autoColors&&this.plugin.settings.enableGraphColors&&await this.updateGraphColors()}async syncGlobalToLocal(){let e=this.app.vault.configDir;this.log(e);let t=(0,Xu.normalizePath)(e+"/graph.json"),n=await this.app.vault.adapter.read(t),o=JSON.parse(n).colorGroups;this.getLocalGraphLeaves().forEach(l=>{this.setColorGroups(l,o)})}getLocalGraphLeaves(){return this.app.workspace.getLeavesOfType("localgraph")}async setColorGroups(e,t){var i,o,l,a,s,u,c,f;let n=e.getViewState();this.log("view state",n.state),((i=n.state)==null?void 0:i.options).colorGroups=t,((o=n.state)==null?void 0:o.options).localJumps=this.plugin.settings.localGraph.depth,((l=n.state)==null?void 0:l.options).showTags=this.plugin.settings.localGraph.showTags,((a=n.state)==null?void 0:a.options).showAttachments=this.plugin.settings.localGraph.showAttach,((s=n.state)==null?void 0:s.options).localInterlinks=this.plugin.settings.localGraph.showNeighbor,((u=n.state)==null?void 0:u.options).showArrow=!0,((c=n.state)==null?void 0:c.options).close=this.plugin.settings.localGraph.collapse,((f=n.state)==null?void 0:f.options).scale=1,await e.setViewState(n)}async updateGraphColors(){let e=this.app.vault.configDir,t=(0,Xu.normalizePath)(e+"/graph.json"),n=await this.app.vault.adapter.read(t),i=JSON.parse(n),o=this.plugin.settings.colorGroups;o.forEach(l=>i.colorGroups.push(l)),this.app.workspace.getLeavesOfType("localgraph").forEach(async l=>{var s,u;this.plugin.log("setting colors");let a=l.getViewState();this.plugin.log((s=a.state)==null?void 0:s.options),((u=a.state)==null?void 0:u.options).colorGroups=o,await l.setViewState(a)})}};var eh=require("obsidian"),A_=wr(HM());var $a=require("obsidian");var $f=class{constructor(e,t,n){this.log=(...a)=>e.log(...a),this.idNumber=Tj(),this.gridID=`div-${t}-progress-bar-grid-${this.idNumber}`,this.gridDivID=`div-${t}-progress-bar-${this.idNumber}`,this.gridDivSpanID=`span-${t}-progress-bar-${this.idNumber}`,this.gridTextID=`div-${t}-progress-bar-text-${this.idNumber}`,this.totalSteps=n,this.steps=0,this.noticeEl=document.createDocumentFragment();let i=this.noticeEl.createEl("div",{attr:{id:this.gridID}});i.addClass("progress-bar-grid");let o=i.createEl("div",{attr:{id:this.gridDivID}});o.addClass("meter"),o.createEl("span",{attr:{style:"width: 0%",id:this.gridDivSpanID}});let l=i.createEl("div",{attr:{id:this.gridTextID}});l.addClass("progress-bar-number"),l.setText("0%"),(0,$a.addIcon)("PLUGIN_UPDATE_STATUS",oi.PLUGIN_UPDATE_STATUS),(0,$a.addIcon)("PLUGIN_UPDATED_STATUS",oi.PLUGIN_UPDATED_STATUS),(0,$a.addIcon)("SWITCH_ON_STATUS",oi.SWITCH_ON_STATUS),(0,$a.addIcon)("SWITCH_OFF_STATUS",oi.SWITCH_OFF_STATUS)}addDiv(e,t){var i,o;let n=document.getElementById(this.gridID);if(n){let l=(i=n.parentElement)==null?void 0:i.createEl("div",{attr:{style:"color: red",id:`div-${e}-${this.idNumber}`}});l?(l.addClass("progress-bar-items-grid"),(0,$a.setIcon)(l,"SWITCH_OFF_STATUS"),l.createSpan({text:t,attr:{class:"progress-bar-items-text"}}),(o=l.querySelector("svg"))==null||o.addClass("plugin-update-svg")):this.log("fail to find notice DocumentFragment")}else this.log("fail to find plugin updating notice HTML Element")}show(){var t,n;if(this.notice)return;this.notice=new $a.Notice(this.noticeEl,0);let e=document.getElementById(this.gridID);(t=e==null?void 0:e.parentElement)==null||t.setAttribute("id",`progress-bar-${this.idNumber}`),(n=e==null?void 0:e.parentElement)==null||n.addClass("progress-bar-notice")}hide(){this.notice.hide()}stepin(e,t,n){var u;let i=this.totalSteps;n&&(i=n),this.steps++;let o=this.steps>=i?i:this.steps,l=document.getElementById(this.gridDivSpanID);l==null||l.setAttr("style",`width:${(100*(o/i)).toFixed(1)}%`);let a=document.getElementById(this.gridTextID);a==null||a.setText(`${(100*(o/i)).toFixed(1)}%`);let s=document.getElementById(`div-${e}-${this.idNumber}`);if(s){let c=s.getElementsByTagName("span").item(0);c&&s.removeChild(c);let f=s.getElementsByTagName("svg").item(0);f&&s.removeChild(f),(0,$a.setIcon)(s,"SWITCH_ON_STATUS"),s.createSpan({text:t,attr:{class:"progress-bar-items-text"}}),(u=s.querySelector("svg"))==null||u.addClass("plugin-update-svg")}}updateProgress(e){let t=document.getElementById(this.gridDivSpanID);t==null||t.setAttr("style",`width:${e}%`);let n=document.getElementById(this.gridTextID);n==null||n.setText(`${e}%`)}};var M_=class{constructor(e,t){this.TagName="tag_name";this.app=e,this.commandPlugin=t,this.log=(...n)=>t.log(...n),this.URLCDN="https://cdn.jsdelivr.net/gh/obsidianmd/obsidian-releases@master/community-plugins.json",this.items=[];for(let n of Object.values(e.plugins.manifests)){let i={id:n.id,version:n.version};this.items.push(i)}this.totalPlugins=0,this.checkedPlugins=0,this.progressBar=new $f(t,"plugin-updating",this.totalPlugins)}async getCommunityPluginsJson(){try{let e=await(0,eh.request)({url:this.URLCDN});return e==="404: Not Found"?null:e}catch(e){return this.log("error in getCommunityPlugins",e),null}}async getRepo(e){if(this.commandPlugin.settings.cachePluginRepo[e])return this.log(`found ${e} which cached in data.json`),this.commandPlugin.settings.cachePluginRepo[e];if(!this.communityPlugins){let t=await this.getCommunityPluginsJson();if(t)this.communityPlugins=JSON.parse(t);else return this.log("fail to get commnity plugin json file from jsdelivr"),null}for(let t=0;t<this.communityPlugins.length;t++){let{id:n,repo:i}=this.communityPlugins[t];if(n===e)return this.commandPlugin.settings.cachePluginRepo[e]=i,await this.commandPlugin.saveSettings(),i}return this.log("fail to find plugin in community-plugins.json"),null}async getLatestRelease(e){if(!e)return this.log("repo is null"),null;let t=`https://api.github.com/repos/${e}/releases/latest`;try{let n=await(0,eh.request)({url:t});return n==="404: Not Found"?null:await JSON.parse(n)}catch(n){return n!="Error: Request failed, status 404"&&this.log(`error in getLatestRelease for ${t}`,n),null}}getLatestTag(e){if(!e)return this.log("the input JSON for getLatestTag is null"),null;for(let t=0;t<Object.getOwnPropertyNames(e).length;t++)if(this.TagName===Object.getOwnPropertyNames(e)[t])return Object(e)[this.TagName];return this.log(`getLatestTag cannot find the object named ${this.TagName}`),null}async isNeedToUpdate(e,t){if(e){let n=this.getLatestTag(e);if(n){n.startsWith("v")&&(n=n.split("v")[1]),this.log("latest tag: "+n,"current tag: "+t);let i=(0,A_.prerelease)(n);if(i&&i.length>0)return{needUpdate:!1,targetVersion:t};if((0,A_.gt)(n,t))return{needUpdate:!0,targetVersion:n}}}return{needUpdate:!1,targetVersion:t}}async update(){let e=async(i,o,l)=>{let a=`https://github.com/${i}/releases/download/${o}/${l}`;try{let s=await(0,eh.request)({url:a});return s==="Not Found"||s==='{"error":"Not Found"}'?null:s}catch(s){return this.log("error in grabReleaseFileFromRepository",a,s),null}},t=async(i,o)=>{let l=(0,eh.normalizePath)(this.app.vault.configDir+"/plugins/"+i)+"/",a=this.app.vault.adapter;if(!o.mainJs||!o.manifest){this.log("downloaded files are empty");return}(await a.exists(l)===!1||!await a.exists(l+"manifest.json"))&&await a.mkdir(l),await a.write(l+"main.js",o.mainJs),await a.write(l+"manifest.json",o.manifest),o.styles&&await a.write(l+"styles.css",o.styles),this.log(`updated plugin[${i}]`)};this.progressBar.show();for(let i=0;i<this.items.length;i++){let o=this.items[i],l=await this.getRepo(o.id),a=await this.getLatestRelease(l);this.log(`checking updating status for ${o.id}`);let s=await this.isNeedToUpdate(a,o.version);l&&a&&s.needUpdate&&(this.totalPlugins++,this.items[i].toUpdate={needUpdate:s.needUpdate,repo:l,targetVersion:s.targetVersion,isZipFile:!1},this.progressBar.addDiv(o.id,`update ${o.id} to ${s.targetVersion}`))}let n=this.items.map(async i=>{var o;if((o=i.toUpdate)!=null&&o.needUpdate){this.log("updating plugin "+i.id);let l={mainJs:null,manifest:null,styles:null},a=i.toUpdate.repo,s=i.toUpdate.targetVersion;l.mainJs=await e(a,s,"main.js"),l.manifest=await e(a,s,"manifest.json"),l.styles=await e(a,s,"styles.css"),await t(i.id,l),this.app.plugins.enablePluginAndSave(i.id),this.progressBar.stepin(i.id,`update ${i.id} to ${s}`,this.totalPlugins),this.checkedPlugins++}});await Promise.all(n),this.log("All async plugin updating completed"),this.progressBar.updateProgress(100),setInterval(()=>{this.progressBar.hide()},2e3)}};var y1=require("obsidian"),T_=wr(HM());var P_=class r{constructor(e,t){this.TagName="tag_name";this.app=e,this.URLCDN="https://cdn.jsdelivr.net/gh/obsidianmd/obsidian-releases@master/community-css-themes.json",this.commandPlugin=t,this.log=(...n)=>t.log(...n),this.totalThemes=0,this.checkedThemes=0,this.items=[],this.progressBar=new $f(t,"theme-updating",this.totalThemes)}static async init(e,t){let n=new r(e,t);n.items=await n.listThemes(n.app);let i=await n.getCommunityThemesJson();return i?n.communityThemes=JSON.parse(i):new y1.Notice("got some network issue when accessing github.com",500),n}async listThemes(e){let t=[];return(await e.vault.adapter.list(e.vault.configDir+"/themes")).folders.forEach(async i=>{let o=(0,y1.normalizePath)(i+"/manifest.json"),l=await e.vault.adapter.read(o),a=JSON.parse(l);t.push({id:a.name,version:a.version})}),t}async getCommunityThemesJson(){try{let e=await(0,y1.request)({url:this.URLCDN});return e==="404: Not Found"?null:e}catch(e){return this.log("error in getCommunityThemes",e),null}}async getRepo(e){if(this.commandPlugin.settings.cacheThemeRepo[e])return this.log(`found ${e} which cached in data.json`),this.commandPlugin.settings.cacheThemeRepo[e];if(!this.communityThemes){let t=await this.getCommunityThemesJson();if(t)this.communityThemes=JSON.parse(t);else return this.log("fail to get commnity theme json file"),null}for(let t=0;t<this.communityThemes.length;t++){let{name:n,repo:i}=this.communityThemes[t];if(n===e)return this.commandPlugin.settings.cacheThemeRepo[e]=i,await this.commandPlugin.saveSettings(),i}return this.log("fail to find plugin from community-themes.json"),null}async getLatestRelease(e){if(!e)return this.log("repo is null"),null;let t=`https://api.github.com/repos/${e}/releases/latest`;try{let n=await(0,y1.request)({url:t});return n==="404: Not Found"?null:await JSON.parse(n)}catch(n){return n!="Error: Request failed, status 404"&&this.log(`error in getLatestRelease for ${t}`,n),null}}getLatestTag(e){if(!e)return this.log("the input JSON for getLatestTag is null"),null;for(let t=0;t<Object.getOwnPropertyNames(e).length;t++)if(this.TagName===Object.getOwnPropertyNames(e)[t])return Object(e)[this.TagName];return this.log(`getLatestTag cannot find the object named ${this.TagName}`),null}async isNeedToUpdate(e,t){if(e){let n=this.getLatestTag(e),i="";if(n){i=n,n.startsWith("v")&&(i=n.split("v")[1]),this.log("latest tag: "+i,"current tag: "+t);let o=(0,T_.prerelease)(i);if(o&&o.length>0)return{needUpdate:!1,targetVersion:t};if((0,T_.gt)(i,t))return{needUpdate:!0,targetVersion:n}}}return{needUpdate:!1,targetVersion:t}}async onlyHaveZipFile(e){let t=await this.getRepo(e.id);if(t){this.log("checking need to only has zip file for "+t);let n=await this.getLatestRelease(t);if(n){for(let i=0;i<Object.getOwnPropertyNames(n).length;i++)if(Object.getOwnPropertyNames(n)[i]==="assets"&&Object(n).assets.length>0)return!1;return!0}}return!1}async update(){let e=async(o,l,a)=>{let s=`https://github.com/${o}/releases/download/${l}/${a}`;try{let u=await(0,y1.request)({url:s});return u==="Not Found"||u==='{"error":"Not Found"}'?null:u}catch(u){return this.log("error in grabReleaseFileFromRepository",s,u),null}},t=async(o,l)=>{let a=`https://github.com/${o}/archive/refs/tags/${l}.zip`;try{return await Oj(a)}catch(s){return this.log("error in grabReleaseFileFromRepository",a,s),null}},n=async(o,l)=>{let a=(0,y1.normalizePath)(this.app.vault.configDir+"/themes/"+o)+"/",s=this.app.vault.adapter;if(!l.theme||!l.manifest){this.log("downloaded files are empty");return}(await s.exists(a)===!1||!await s.exists(a+"manifest.json"))&&await s.mkdir(a),await s.write(a+"theme.css",l.theme),await s.write(a+"manifest.json",l.manifest),this.log(`updated theme[${o}]`)};this.progressBar.show();for(let o=0;o<this.items.length;o++){let l=this.items[o],a=await this.getRepo(l.id),s=await this.getLatestRelease(a),u=await this.isNeedToUpdate(s,l.version);if(a&&s&&u.needUpdate){this.totalThemes++;let c=await this.onlyHaveZipFile(this.items[o]);this.items[o].toUpdate={needUpdate:u.needUpdate,repo:a,targetVersion:u.targetVersion,isZipFile:c},this.progressBar.addDiv(l.id,`update ${l.id} to ${u.targetVersion}`)}}let i=this.items.map(async o=>{var l;if((l=o.toUpdate)!=null&&l.needUpdate){this.log("updating theme "+o.id);let a={manifest:null,theme:null},s=o.toUpdate.repo,u=o.toUpdate.targetVersion;if(o.toUpdate.isZipFile){let c=await t(s,u);c&&(a.theme=await lS(c,"theme.css"),a.manifest=await lS(c,"manifest.json"))}else a.theme=await e(s,u,"theme.css"),a.manifest=await e(s,u,"manifest.json");await n(o.id,a),this.progressBar.stepin(o.id,`update ${o.id} to ${u}`,this.totalThemes),this.checkedThemes++}});await Promise.all(i),this.log("All async theme updating completed"),this.progressBar.updateProgress(100),setInterval(()=>{this.progressBar.hide()},2e3)}};var ZW=require("obsidian");function FW(r){if(!ZW.Platform.isMobile)return;let e=`${r.manifest.dir}/logs.txt`,t=[],n=i=>(...o)=>{t.push(`
[${i}]`);for(let l of o)t.push(String(l));r.app.vault.adapter.write(e,t.join(" "))};console.debug=n("debug"),console.error=n("error"),console.info=n("info"),console.log=n("log"),console.warn=n("warn")}var Ql=require("obsidian");var A4e=/^\s*rgba?\(\s*([\d.]+%?)\s*[, ]\s*([\d.]+%?)\s*[, ]\s*([\d.]+%?\s*)\)\s*$/i;function jW(r){let e=A4e.exec(r);if(e===null)return null;let t=e.slice(1).map(i=>i.trim()),n=P4e(t);return n===null||n.find(i=>isNaN(i)||i<0||i>255)!==void 0?null:{r:n[0],g:n[1],b:n[2]}}function P4e(r){return r[0].endsWith("%")?r.slice(1,3).find(e=>!e.endsWith("%"))!==void 0?null:r.map(e=>parseFloat(e.substring(0,e.length-1))).map(e=>Math.floor(e*255/100)):r.slice(1,3).find(e=>e.endsWith("%"))!==void 0?null:r.map(e=>parseInt(e,10))}var O_=class extends Ql.SuggestModal{constructor(e,t){super(e),this.plugin=t}getSuggestions(e){var n;let t=(n=this.plugin.calloutManager)==null?void 0:n.getCallouts();return t?t.concat().filter(i=>i.id.toLowerCase().includes(e.toLowerCase())):[{id:"quote",icon:"quote-glyph",color:"158, 158, 158",sources:[{type:"builtin"},{type:"snippet",snippet:"callout"}]}]}renderSuggestion(e,t){let n=t.createEl("div");n.classList.add("calloutmanager-preview-container"),n.setAttribute("data-callout-manager-callout",e.id);let{icon:i,id:o}=e,l=O4e(e);new NM(n,{id:o,icon:i,title:xW(e),color:l!=null?l:void 0})}async onChooseSuggestion(e,t){let n=xW(e),i=`
> [!${e.id}] ${n}
> Contents

`;await navigator.clipboard.writeText(i);let o=this.app.workspace.getActiveViewOfType(Ql.MarkdownView);if(o){if(o.getMode()==="preview"){new Ql.Notice("Tips: please switch to edit mode to insert",5e3);return}let a=o.editor.getCursor();o.editor.replaceRange(i,a),a.line=a.line+4,o.editor.setCursor(a)}else new Ql.Notice("Error: not a editable markdown file",5e3)}},T4e=Symbol(),NM=class r extends Ql.Component{constructor(e,t){super();let{color:n,icon:i,id:o,title:l,content:a}=t,s=document.createDocumentFragment(),u=this.calloutEl=s.createDiv({cls:["callout","calloutmanager-preview"]}),c=u.createDiv({cls:"callout-title"});this.iconEl=c.createDiv({cls:"callout-icon"});let f=this.titleEl=c.createDiv({cls:"callout-title-inner"}),h=this.contentEl=a===void 0?void 0:u.createDiv({cls:"callout-content"});this.setIcon(i),this.setColor(n),this.setCalloutID(o),l==null?f.textContent=o:typeof l=="function"?l(f):typeof l=="string"?f.textContent=l:f.appendChild(l),h!=null&&(typeof a=="function"?a(h):typeof a=="string"?h.textContent=a:h.appendChild(a)),e!=T4e&&r.prototype.attachTo.call(this,e)}setCalloutID(e){let{calloutEl:t}=this;return t.setAttribute("data-callout",e),this}setIcon(e){let{iconEl:t,calloutEl:n}=this;n.style.setProperty("--callout-icon",e),t.empty();let i=(0,Ql.getIcon)(e);return i!=null&&this.iconEl.appendChild(i),this}setColor(e){let{calloutEl:t}=this;return e==null?(t.style.removeProperty("--callout-color"),this):(t.style.setProperty("--callout-color",`${e.r}, ${e.g}, ${e.b}`),this)}attachTo(e){return e.appendChild(this.calloutEl),this}resetStylePropertyOverrides(){let{calloutEl:e}=this;e.style.removeProperty("--callout-color"),e.style.removeProperty("--callout-icon")}};function xW(r){let e=/^(.)(.*)/u.exec(r.id);if(e==null)return r.id;let t=e[1].toLocaleUpperCase(),n=e[2].toLocaleLowerCase().replace(/-+/g," ");return`${t}${n}`}function O4e(r){return jW(`rgb(${r.color})`)}var pc=require("obsidian");var vG=wr(bG(),1),{__extends:xXe,__assign:qXe,__rest:UXe,__decorate:WXe,__param:GXe,__esDecorate:YXe,__runInitializers:KXe,__propKey:JXe,__setFunctionName:XXe,__metadata:QXe,__awaiter:rh,__generator:$Xe,__exportStar:eQe,__createBinding:tQe,__values:rQe,__read:nQe,__spread:iQe,__spreadArrays:oQe,__spreadArray:lQe,__await:aQe,__asyncGenerator:sQe,__asyncDelegator:uQe,__asyncValues:cQe,__makeTemplateObject:fQe,__importStar:hQe,__importDefault:dQe,__classPrivateFieldGet:mQe,__classPrivateFieldSet:gQe,__classPrivateFieldIn:pQe,__addDisposableResource:_Qe,__disposeResources:bQe,__rewriteRelativeImportExtension:vQe}=vG.default;var es=require("obsidian");function R4e(r){Ba(r,"svelte-1njcwce",".recordlist-wrapper.svelte-1njcwce{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;flex-grow:1;width:100%;overflow-y:scroll;gap:8px;scrollbar-width:none}.record-wrapper.svelte-1njcwce{display:flex;flex-direction:column;width:60%;padding:12px 18px;background-color:var(--pa-record-background-color);color:var(--pa-record-font-color);border-radius:8px;border:0.2px solid #f1f1f1}.record-wrapper-mobile.svelte-1njcwce{display:flex;flex-direction:column;width:90%;padding:12px 18px;background-color:var(--pa-record-background-color);color:var(--pa-record-font-color);border-radius:8px;border:0.2px solid #f1f1f1}")}function CG(r,e,t){let n=r.slice();return n[16]=e[t],n[18]=t,n}function wG(r,e,t){let n=r.slice();return n[16]=e[t],n[18]=t,n}function yG(r,e,t){let n=r.slice();return n[16]=e[t],n[18]=t,n}function I4e(r){let e,t=Qo(r[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=kG(wG(r,t,i));return{c(){e=Ge("div");for(let i=0;i<n.length;i+=1)n[i].c();k(e,"class","recordlist-wrapper svelte-1njcwce"),k(e,"id","persoanl-assistant-record-list")},m(i,o){A(i,e,o);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(i,o){if(o&47){t=Qo(i[0]);let l;for(l=0;l<t.length;l+=1){let a=wG(i,t,l);n[l]?n[l].p(a,o):(n[l]=kG(a),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&M(e),Q5(n,i)}}}function z4e(r){let e,t=Qo(r[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=LG(yG(r,t,i));return{c(){e=Ge("div");for(let i=0;i<n.length;i+=1)n[i].c();k(e,"class","recordlist-wrapper svelte-1njcwce"),k(e,"id","persoanl-assistant-record-list")},m(i,o){A(i,e,o);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(i,o){if(o&47){t=Qo(i[0]);let l;for(l=0;l<t.length;l+=1){let a=yG(i,t,l);n[l]?n[l].p(a,o):(n[l]=LG(a),n[l].c(),n[l].m(e,null))}for(;l<n.length;l+=1)n[l].d(1);n.length=t.length}},d(i){i&&M(e),Q5(n,i)}}}function H4e(r){return{c:I,m:I,p:I,d:I}}function N4e(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!1,pending:D4e,then:B4e,catch:V4e};return Fl(e=r[5](r[20],r[3](`record-wrapper-sub-${r[18]}`),r[16],r[1]),n),{c(){n.block.c(),t=et()},m(i,o){n.block.m(i,n.anchor=o),n.mount=()=>t.parentNode,n.anchor=t,A(i,t,o)},p(i,o){r=i,n.ctx=r,o&3&&e!==(e=r[5](r[20],r[3](`record-wrapper-sub-${r[18]}`),r[16],r[1]))&&Fl(e,n)},d(i){i&&M(t),n.block.d(i),n.token=null,n=null}}}function V4e(r){return{c:I,m:I,d:I}}function B4e(r){return{c:I,m:I,d:I}}function D4e(r){return{c:I,m:I,d:I}}function Z4e(r){return{c:I,m:I,p:I,d:I}}function kG(r){let e,t,n,i,o,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Z4e,then:N4e,catch:H4e,value:20};return Fl(o=r[2](r[16]),l),{c(){e=Ge("div"),n=et(),i=U(),l.block.c(),k(e,"class","record-wrapper svelte-1njcwce"),k(e,"id",t="record-wrapper-sub-"+r[18])},m(a,s){A(a,e,s),A(a,n,s),A(a,i,s),l.block.m(a,l.anchor=s),l.mount=()=>i.parentNode,l.anchor=i},p(a,s){r=a,l.ctx=r,s&1&&o!==(o=r[2](r[16]))&&Fl(o,l)||gk(l,r,s)},d(a){a&&(M(e),M(n),M(i)),l.block.d(a),l.token=null,l=null}}}function F4e(r){return{c:I,m:I,p:I,d:I}}function j4e(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!1,pending:U4e,then:q4e,catch:x4e};return Fl(e=r[5](r[20],r[3](`record-wrapper-sub-${r[18]}`),r[16],r[1]),n),{c(){n.block.c(),t=et()},m(i,o){n.block.m(i,n.anchor=o),n.mount=()=>t.parentNode,n.anchor=t,A(i,t,o)},p(i,o){r=i,n.ctx=r,o&3&&e!==(e=r[5](r[20],r[3](`record-wrapper-sub-${r[18]}`),r[16],r[1]))&&Fl(e,n)},d(i){i&&M(t),n.block.d(i),n.token=null,n=null}}}function x4e(r){return{c:I,m:I,d:I}}function q4e(r){return{c:I,m:I,d:I}}function U4e(r){return{c:I,m:I,d:I}}function W4e(r){return{c:I,m:I,p:I,d:I}}function LG(r){let e,t,n,i,o,l={ctx:r,current:null,token:null,hasCatch:!1,pending:W4e,then:j4e,catch:F4e,value:20};return Fl(o=r[2](r[16]),l),{c(){e=Ge("div"),n=et(),i=U(),l.block.c(),k(e,"class","record-wrapper-mobile svelte-1njcwce"),k(e,"id",t="record-wrapper-sub-"+r[18])},m(a,s){A(a,e,s),A(a,n,s),A(a,i,s),l.block.m(a,l.anchor=s),l.mount=()=>i.parentNode,l.anchor=i},p(a,s){r=a,l.ctx=r,s&1&&o!==(o=r[2](r[16]))&&Fl(o,l)||gk(l,r,s)},d(a){a&&(M(e),M(n),M(i)),l.block.d(a),l.token=null,l=null}}}function G4e(r){return{c:I,m:I,d:I}}function Y4e(r){return{c:I,m:I,d:I}}function K4e(r){return{c:I,m:I,d:I}}function EG(r){let e,t,n={ctx:r,current:null,token:null,hasCatch:!1,pending:K4e,then:Y4e,catch:G4e};return Fl(t=r[6](`record-wrapper-sub-${r[18]}`,r[16]),n),{c(){e=U(),n.block.c()},m(i,o){A(i,e,o),n.block.m(i,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e},p(i,o){r=i,n.ctx=r,o&1&&t!==(t=r[6](`record-wrapper-sub-${r[18]}`,r[16]))&&Fl(t,n)},d(i){i&&M(e),n.block.d(i),n.token=null,n=null}}}function J4e(r){let e,t,n,i,o,l;function a(h,d){return h[4]()?z4e:I4e}let u=a(r,-1)(r),c=Qo(r[0]),f=[];for(let h=0;h<c.length;h+=1)f[h]=EG(CG(r,c,h));return{c(){e=Ge("div"),t=Ge("div"),n=Ge("div"),n.innerHTML='<div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div>',i=et(),u.c(),l=et();for(let h=0;h<f.length;h+=1)f[h].c();k(n,"class","markdown-preview-sizer markdown-preview-section"),k(t,"class","markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties"),k(t,"tabindex","-1"),e1(t,"tab-size","4"),k(e,"class","markdown-reading-view"),e1(e,"width","100%"),e1(e,"height","100%")},m(h,d){A(h,e,d),B(e,t),B(t,n),B(t,i),u.m(t,null),B(t,l);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(t,null)},p(h,[d]){if(u.p(h,d),d&65){c=Qo(h[0]);let p;for(p=0;p<c.length;p+=1){let v=CG(h,c,p);f[p]?f[p].p(v,d):(f[p]=EG(v),f[p].c(),f[p].m(t,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=c.length}},i:I,o:I,d(h){h&&M(e),u.d(),Q5(f,h)}}}function X4e(r,e,t){let n=(()=>{let l=t.split("/");return l.pop(),l.join("/")})(),i=e;if(e.startsWith(".")){let l=t.split("/");l.pop();for(let a of e.split("/"))if(a==="..")l.pop();else{if(a===".")continue;l.push(a)}i=l.join("/")}let o=[];for(let l of r.getFiles())if(l.path.endsWith(i)){if(l.path===i)return l.path;o.push(l.path)}return o.sort((l,a)=>l.startsWith(n)&&!a.startsWith(n)?-1:a.startsWith(n)&&!l.startsWith(n)?1:l<=a?-1:1),o?o[0]:e}function Q4e(r,e,t){let{app:n}=e,{fileNames:i}=e,{container:o}=e,{plugin:l}=e;function a(S){return rh(this,void 0,void 0,function*(){return n.vault.adapter.read(S)})}let s=S=>{let P=document.getElementById(S);return P?(l.log("get the element"),P):(l.log("fail over to get parent element"),o)},u=()=>(l.log("this is Mobile",es.Platform.isMobile),es.Platform.isMobile),c=S=>n.plugins.manifests.hasOwnProperty(S)&&n.plugins.enabledPlugins.has(S);var f;(function(S){S.Image="Image",S.Audio="Audio",S.Video="Video",S.PDF="PDF",S.Note="Note",S.Unknown="Unknown"})(f||(f={}));let h={[f.Image]:["png","jpg","jpeg","gif","bmp","svg"],[f.Audio]:["mp3","webm","wav","m4a","ogg","3gp","flac"],[f.Video]:["mp4","webm","ogv","mov","mkv"],[f.PDF]:["pdf"]},d={};Object.keys(h).forEach(S=>{d[S]=new RegExp([".+\\.(",h[S].join("|"),").*"].join(""),"i")});function p(S){let P=S.getAttribute("src");if(!P)return f.Unknown;for(let[y,z]of Object.entries(d))if(P.match(z))return f[y];return f.Note}let v=(S,P,y)=>{let z=X4e(S,P,y);return S.adapter.getResourcePath(z)},b=(S,P)=>c("obsidian-advanced-uri")?["obsidian://advanced-uri?vault=",encodeURIComponent(S.getName()),"&filepath=",encodeURIComponent(P)].join(""):["obsidian://open?vault=",encodeURIComponent(S.getName()),"&file=",encodeURIComponent(P)].join(""),C=(S,P,y,z)=>rh(void 0,void 0,void 0,function*(){let{contentStart:G}=(0,es.getFrontMatterInfo)(S),J=S.slice(G);yield es.MarkdownRenderer.render(n,J,P,y,z),P.querySelectorAll("span.internal-embed").forEach(Q=>{switch(p(Q)){case f.Image:let se=createEl("img");se.src=v(n.vault,Q.getAttribute("src"),y),Q.empty(),Q.appendChild(se);break;case f.Audio:let Pe=createEl("audio");Pe.controls=!0,Pe.src=v(n.vault,Q.getAttribute("src"),y),Q.empty(),Q.appendChild(Pe);break;case f.Video:let Te=createEl("video");Te.controls=!0,Te.src=v(n.vault,Q.getAttribute("src"),y),Q.empty(),Q.appendChild(Te);break;case f.PDF:if(!es.Platform.isDesktop){l.log("Embedded PDFs are only supported on the desktop.");return}let be=createEl("iframe");be.src=v(n.vault,Q.getAttribute("src"),y),be.width="100%",be.height="500px",Q.empty(),Q.appendChild(be);break;case f.Note:l.log("Embedded notes are not perfectly supported.");let rt=Q.getAttribute("src"),Ee=createDiv();Ee.setAttribute("data-callout-metadata",""),Ee.setAttribute("data-callout-fold","-"),Ee.setAttribute("data-callout","abstract"),Ee.addClasses(["callout","is-collapsible","is-collapsed"]);let Re=Ee.createDiv();Re.addClass("callout-title");let nr=Re.createDiv();nr.addClass("callout-icon"),(0,es.setIcon)(nr,"loader");let Xt=Re.createDiv();Xt.addClass("callout-title-inner");let Oe=createEl("a");Oe.target="_blank",Oe.rel="noopener",Oe.addClass("internal-link"),Oe.setText(rt+" \u{1F4A8}"),Oe.href=b(n.vault,rt),Xt.appendChild(Oe),Q.empty(),Q.appendChild(Ee);break;case f.Unknown:default:l.log("Could not determine embedding type for element:"),l.log(Q)}}),P.querySelectorAll("a.internal-link").forEach(Q=>{if(!Q.getAttribute("href"))return;let ee=Q;ee.addEventListener("click",se=>{se.stopPropagation()}),!ee.href.startsWith("obsidian://")&&(ee.href=b(n.vault,ee.getAttribute("href")))})}),L=(S,P)=>rh(void 0,void 0,void 0,function*(){var y;yield Md();let z=document.getElementById(S);if(z){l.log("get the element");let G=(y=P.split("\\").pop())===null||y===void 0?void 0:y.split("/").pop();if(G){let J=b(n.vault,G);z.setAttribute("onclick",`location.href='${J}'`),z.setAttribute("style","cursor:pointer")}}else l.log("fail to find element with ",S)});return r.$$set=S=>{"app"in S&&t(7,n=S.app),"fileNames"in S&&t(0,i=S.fileNames),"container"in S&&t(8,o=S.container),"plugin"in S&&t(1,l=S.plugin)},[i,l,a,s,u,C,L,n,o]}var BM=class extends H{constructor(e){super(),V(this,e,Q4e,J4e,N,{app:7,fileNames:0,container:8,plugin:1},R4e)}},DM=BM;var t7="record-preview",H_=class extends pc.ItemView{constructor(e,t,n){t.log("startup new RecordList"),super(n),(0,pc.addIcon)("PluginAST_PREVIEW",oi.PluginAST_PREVIEW),this.app=e,this.plugin=t,this.files=[]}getViewType(){return t7}getDisplayText(){return"Records Preview"}getIcon(){return"PluginAST_PREVIEW"}async onOpen(){let t=(await this.app.vault.adapter.list(this.plugin.settings.targetPath)).files.sort((l,a)=>{let s=this.app.vault.getAbstractFileByPath(l),u=this.app.vault.getAbstractFileByPath(a);return s instanceof pc.TFile&&u instanceof pc.TFile?s.stat.mtime-u.stat.mtime:l<a?-1:l>a?1:0}),n=t.filter((l,a,s)=>{let c=RegExp(/\[(.*)\]/,"i").exec(this.plugin.settings.fileFormat);if(c&&c.length>1){let f=l.substring(l.lastIndexOf("/")+1);return f.endsWith(".md")&&f.includes(c[1])}else return!1}),i=t.filter((l,a,s)=>l.endsWith(".md")&&!n.contains(l));this.files=n.reverse().concat(...i.reverse());let o=this.plugin.settings.previewLimits;o>this.files.length&&(o=this.files.length),this.component=new DM({target:this.contentEl,props:{app:this.app,plugin:this.plugin,fileNames:this.files.slice(0,o),container:this.containerEl}}),this.app.vault.on("modify",l=>{this.plugin.log(`update preview record for file[${l.path}] changed`),this.files.slice(0,o).contains(l.path)&&(this.component.$destroy(),this.component=new DM({target:this.contentEl,props:{app:this.app,plugin:this.plugin,fileNames:this.files.slice(0,o),container:this.containerEl}}))})}async onClose(){this.component.$destroy()}};var SG=require("obsidian"),_c=wr(xb());function Qu(r){let e=/'A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,t=/\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u4E00-\u9FD5/.source,n=/[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u4E00-\u9FD5]{1}/.source,i=new RegExp([`(?:[0-9]+(?:(?:,|\\.)[0-9]+)*|[\\-${e}])+`,t,n].join("|"),"g");return(r.match(i)||[]).length}function ZM(r){return r.length}function FM(r){let e=r.match(/\[\^\S+](?!:)/g),t=r.match(/\^\[[^^].+?]/g),n=0;return e&&(n+=e.length),t&&(n+=t.length),n}function jM(r){let e=r.match(/@[A-Za-z0-9-]+[,;\]](?!\()/gi);return e?[...new Set(e)].length:0}function xM(r){return((r||"").match(/[^.!?\s][^.!?]*(?:[.!?](?!['"]?\s|$)[^.!?]*)*[.!?]?['"]?(?=\s|$)/gm)||[]).length}function qM(r,e){return parseFloat((Qu(r)/e).toFixed(1))}var r7=class{constructor(e,t){this.vault=e.vault,this.workspace=e.workspace,this.plugin=t,this.today=(0,_c.default)().format("YYYY-MM-DD"),this.vaultStats={history:{},modifiedFiles:{}},this.debounceChange=(0,SG.debounce)(n=>this.change(n),50,!1),this.vault.on("rename",(n,i)=>{if(this.vaultStats.modifiedFiles.hasOwnProperty(i)){let o=this.vaultStats.modifiedFiles[i];delete this.vaultStats.modifiedFiles[i],this.vaultStats.modifiedFiles[n.path]=o}}),this.vault.on("delete",n=>{this.vaultStats.modifiedFiles.hasOwnProperty(n.path)&&delete this.vaultStats.modifiedFiles[n.path]}),this.vault.adapter.exists(this.plugin.settings.statsPath).then(async n=>{if(n){if(this.vaultStats=JSON.parse(await this.vault.adapter.read(this.plugin.settings.statsPath)),!this.vaultStats.hasOwnProperty("history")){let i={history:{},modifiedFiles:{}};await this.vault.adapter.write(this.plugin.settings.statsPath,JSON.stringify(i,null,2))}this.vaultStats=JSON.parse(await this.vault.adapter.read(this.plugin.settings.statsPath))}else{let i={history:{},modifiedFiles:{}};await this.vault.adapter.write(this.plugin.settings.statsPath,JSON.stringify(i,null,2)),this.vaultStats=JSON.parse(await this.vault.adapter.read(this.plugin.settings.statsPath))}await this.updateToday()})}async update(){this.vault.adapter.write(this.plugin.settings.statsPath,JSON.stringify(this.vaultStats,null,2))}async updateToday(){if(this.vaultStats.history.hasOwnProperty((0,_c.default)().format("YYYY-MM-DD"))){this.today=(0,_c.default)().format("YYYY-MM-DD");return}this.today=(0,_c.default)().format("YYYY-MM-DD");let e=0;if(Object.keys(this.vaultStats.history).length>0){let c=Object.keys(this.vaultStats.history);c.sort((f,h)=>{let d=new Date(f),p=new Date(h);return d<p?1:d>p?-1:0}),e=this.vaultStats.history[c[0]].files}else e=0;let n=await this.calcTotalWords(),i=await this.calcTotalCharacters(),o=await this.calcTotalSentences(),l=await this.calcTotalFootnotes(),a=await this.calcTotalCitations(),s=await this.calcTotalPages(),u={words:0,characters:0,sentences:0,pages:0,files:e,footnotes:0,citations:0,totalWords:n,totalCharacters:i,totalSentences:o,totalFootnotes:l,totalCitations:a,totalPages:s};this.vaultStats.modifiedFiles={},this.vaultStats.history[this.today]=u,await this.update()}async change(e){var u;let t=(u=this.workspace.getActiveFile())==null?void 0:u.path,n=Qu(e),i=ZM(e),o=xM(e),l=jM(e),a=FM(e),s=qM(e,300);if(this.vaultStats.history.hasOwnProperty(this.today)&&this.today===(0,_c.default)().format("YYYY-MM-DD")){let c=this.vaultStats.modifiedFiles;if(t===void 0)return;c.hasOwnProperty(t)?(this.vaultStats.history[this.today].totalWords+=n-c[t].words.current,this.vaultStats.history[this.today].totalCharacters+=i-c[t].characters.current,this.vaultStats.history[this.today].totalSentences+=o-c[t].sentences.current,this.vaultStats.history[this.today].totalFootnotes+=o-c[t].footnotes.current,this.vaultStats.history[this.today].totalCitations+=o-c[t].citations.current,this.vaultStats.history[this.today].totalPages+=s-c[t].pages.current,c[t].words.current=n,c[t].characters.current=i,c[t].sentences.current=o,c[t].footnotes.current=a,c[t].citations.current=l,c[t].pages.current=s):c[t]={words:{initial:n,current:n},characters:{initial:i,current:i},sentences:{initial:o,current:o},footnotes:{initial:a,current:a},citations:{initial:l,current:l},pages:{initial:s,current:s}};let f=Object.values(c).map(C=>Math.max(0,C.words.current-C.words.initial)).reduce((C,L)=>C+L,0),h=Object.values(c).map(C=>Math.max(0,C.characters.current-C.characters.initial)).reduce((C,L)=>C+L,0),d=Object.values(c).map(C=>Math.max(0,C.sentences.current-C.sentences.initial)).reduce((C,L)=>C+L,0),p=Object.values(c).map(C=>Math.max(0,C.footnotes.current-C.footnotes.initial)).reduce((C,L)=>C+L,0),v=Object.values(c).map(C=>Math.max(0,C.citations.current-C.citations.initial)).reduce((C,L)=>C+L,0),b=Object.values(c).map(C=>Math.max(0,C.pages.current-C.pages.initial)).reduce((C,L)=>C+L,0);this.vaultStats.history[this.today].words=f,this.vaultStats.history[this.today].characters=h,this.vaultStats.history[this.today].sentences=d,this.vaultStats.history[this.today].footnotes=p,this.vaultStats.history[this.today].citations=v,this.vaultStats.history[this.today].pages=b,this.vaultStats.history[this.today].files=this.getTotalFiles(),await this.update()}else this.updateToday()}async recalcTotals(){if(this.vaultStats)if(this.vaultStats.history.hasOwnProperty(this.today)&&this.today===(0,_c.default)().format("YYYY-MM-DD")){let e=this.vaultStats.history[this.today];e.totalWords=await this.calcTotalWords(),e.totalCharacters=await this.calcTotalCharacters(),e.totalSentences=await this.calcTotalSentences(),e.totalFootnotes=await this.calcTotalFootnotes(),e.totalCitations=await this.calcTotalCitations(),e.totalPages=await this.calcTotalPages(),this.update()}else this.updateToday()}async calcTotalWords(){let e=0,t=this.vault.getFiles();for(let n in t){let i=t[n];i.extension==="md"&&(e+=Qu(await this.vault.cachedRead(i)))}return e}async calcTotalCharacters(){let e=0,t=this.vault.getFiles();for(let n in t){let i=t[n];i.extension==="md"&&(e+=ZM(await this.vault.cachedRead(i)))}return e}async calcTotalSentences(){let e=0,t=this.vault.getFiles();for(let n in t){let i=t[n];i.extension==="md"&&(e+=xM(await this.vault.cachedRead(i)))}return e}async calcTotalPages(){let e=0,t=this.vault.getFiles();for(let n in t){let i=t[n];i.extension==="md"&&(e+=qM(await this.vault.cachedRead(i),300))}return e}async calcTotalFootnotes(){let e=0,t=this.vault.getFiles();for(let n in t){let i=t[n];i.extension==="md"&&(e+=FM(await this.vault.cachedRead(i)))}return e}async calcTotalCitations(){let e=0,t=this.vault.getFiles();for(let n in t){let i=t[n];i.extension==="md"&&(e+=jM(await this.vault.cachedRead(i)))}return e}getDailyWords(){return this.vaultStats.history[this.today].words}getDailyCharacters(){return this.vaultStats.history[this.today].characters}getDailySentences(){return this.vaultStats.history[this.today].sentences}getDailyFootnotes(){return this.vaultStats.history[this.today].footnotes}getDailyCitations(){return this.vaultStats.history[this.today].citations}getDailyPages(){return this.vaultStats.history[this.today].pages}getTotalFiles(){return this.vault.getMarkdownFiles().length}async getTotalWords(){return this.vaultStats?this.vaultStats.history[this.today].totalWords:await this.calcTotalWords()}async getTotalCharacters(){return this.vaultStats?this.vaultStats.history[this.today].totalCharacters:await this.calcTotalCharacters()}async getTotalSentences(){return this.vaultStats?this.vaultStats.history[this.today].totalSentences:await this.calcTotalSentences()}async getTotalFootnotes(){return this.vaultStats?this.vaultStats.history[this.today].totalFootnotes:await this.calcTotalFootnotes()}async getTotalCitations(){return this.vaultStats?this.vaultStats.history[this.today].totalCitations:await this.calcTotalCitations()}async getTotalPages(){return this.vaultStats?this.vaultStats.history[this.today].totalPages:await this.calcTotalPages()}};var ts=require("@codemirror/state"),k1=require("@codemirror/view"),UM=require("@codemirror/language");var nh=ts.StateField.define({create(r){return null},update(r){return r}}),WM=class{constructor(e){this.view=e}update(e){let t=e.transactions[0];if(!t)return;let n=e.view.state.field(nh),i=t.annotation(ts.Transaction.userEvent)===void 0;if((t.isUserEvent("select")||i)&&t.newSelection.ranges[0].from!==t.newSelection.ranges[0].to){let o="",l=t.newSelection.main,a=t.newDoc.iterRange(l.from,l.to);for(;!a.done;)o=o+a.next().value}else if(t.isUserEvent("input")||t.isUserEvent("delete")||t.isUserEvent("move")||t.isUserEvent("undo")||t.isUserEvent("redo")||t.isUserEvent("select")){let o=t.newDoc.iter(),l="";for(;!o.done;)l=l+o.next().value;t.docChanged&&n&&n.statsManager&&n.statsManager.debounceChange(l)}}destroy(){}},MG=k1.ViewPlugin.fromClass(WM),GM=class extends k1.WidgetType{constructor(e){super(),this.data=e}eq(e){let{pos:t,self:n,total:i}=this.data;return t===e.data.pos&&n===e.data.self&&i===e.data.total}getDisplayText(){let{self:e,total:t}=this.data;return e&&e!==t?`${e} / ${t}`:t.toString()}toDOM(){return createSpan({cls:"bwc-section-count",text:this.getDisplayText()})}},YM=class{constructor(e){this.lineCounts=[];let t=e.state.field(nh);if(t&&!t.settings.displaySectionCounts){this.decorations=k1.Decoration.none;return}t&&this.calculateLineCounts(e.state,t),this.decorations=this.mkDeco(e)}calculateLineCounts(e,t){let n=t.settings.countComments,i=e.doc.toString();if(n){let l=(a,s,u)=>{let c="";for(let f=s,h=s+a.length;f<h;f++)/[\r\n]/.test(u[f])&&(c+=u[f]);return c};i=i.replace(gM,l).replace(pM,l)}let o=i.split(e.facet(ts.EditorState.lineSeparator)||/\r\n?|\n/);for(let l=0,a=o.length;l<a;l++){let s=o[l];this.lineCounts.push(Qu(s))}}update(e){let t=e.view.state.field(nh);if(!t)return;let{displaySectionCounts:n,countComments:i}=t.settings,o=!1;if(this.lineCounts.length&&!n){this.lineCounts=[],this.decorations=k1.Decoration.none;return}else!this.lineCounts.length&&n&&(o=!0,t&&this.calculateLineCounts(e.startState,t));if(e.docChanged){let a=e.startState.doc,s=1/0,u=-1/0;if(e.changes.iterChanges((c,f,h,d,p)=>{let v=h,b=h+(f-c),C=v+p.length,L=a.lineAt(v),S=a.lineAt(b);a=a.replace(h,h+(f-c),p);let P=a.lineAt(v),y=a.lineAt(C),z=[];for(let te=P.number;te<=y.number;te++)z.push(Qu(a.line(te).text));let G=L.number-1,J=S.number-L.number+1;s=Math.min(s,G),u=Math.max(u,G+(y.number-P.number+1)),this.lineCounts.splice(G,J,...z)}),i){let c=(0,UM.syntaxTree)(e.state);for(let f=s;f<u;f++){let h=e.state.doc.line(f+1),d="",p=0,v=!1;c.iterate({enter(b){b.name&&/comment/.test(b.name)&&(v=!0,d+=h.text.substring(p,b.from-h.from),p=b.to-h.from)},from:h.from,to:h.to}),v&&(d+=h.text.substring(p),this.lineCounts[f]=Qu(d))}}}(e.docChanged||e.viewportChanged||o)&&(this.decorations=this.mkDeco(e.view))}mkDeco(e){let t=e.state.field(nh),n=new ts.RangeSetBuilder;if(t&&!t.settings.displaySectionCounts)return n.finish();let i=(0,UM.syntaxTree)(e.state),o=h=>{var v;let d=i.resolve(h.from,1);if(/code-?block|math/.test((v=d==null?void 0:d.type)==null?void 0:v.name))return null;let p=h.text.match(/^(#+)[ \t]/);return p?p[1].length:null};if(!e.visibleRanges.length)return n.finish();let{from:l}=e.visibleRanges[0],a=e.state.doc,s=a.lineAt(l),u=a.lines,c=[],f=[];for(let h=s.number;h<=u;h++){let d;h===s.number?d=s:d=a.line(h);let p=o(d),v=f.last();if(p){if(!v||p>v.level)f.push({line:h,level:p,self:0,total:0,pos:d.to});else if(v.level===p){let b=f.pop();b&&c.push(b),f.push({line:h,level:p,self:0,total:0,pos:d.to})}else if(v.level>p)for(let b=f.length-1;b>=0;b--){let C=f[b];if(p<C.level){let L=f.pop();L&&c.push(L),b===0&&f.push({line:h,level:p,self:0,total:0,pos:d.to});continue}if(p===C.level){let L=f.pop();L&&c.push(L),f.push({line:h,level:p,self:0,total:0,pos:d.to});break}if(p>C.level){f.push({line:h,level:p,self:0,total:0,pos:d.to});break}}}else if(f.length){let b=this.lineCounts[h-1];for(let C of f)C===v&&(C.self+=b),C.total+=b}}f.length&&c.push(...f),c.sort((h,d)=>h.line-d.line);for(let h of c)n.add(h.pos,h.pos,k1.Decoration.widget({side:1,widget:new GM(h)}));return n.finish()}},YQe=ts.StateEffect.define(),AG=k1.ViewPlugin.fromClass(YM,{decorations:r=>r.decorations});var lEt=require("obsidian");function $4e(r){let e,t,n=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z"),k(t,"fill","currentColor"),K(e,i)},m(o,l){A(o,e,l),B(e,t)},p(o,l){K(e,i=D(n,[l&1&&{width:o[0]},l&1&&{height:o[0]},l&32&&o[5],l&2&&{role:o[1]},l&8&&{"aria-label":o[3]},{viewBox:"0 0 15 15"},l&4&&{fill:o[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(o){o&&M(e)}}}function e7e(r){let e,t,n,i,o=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],l={};for(let a=0;a<o.length;a+=1)l=R(l,o[a]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z"),k(t,"fill","currentColor"),K(e,l)},m(a,s){A(a,e,s),B(e,t),n||(i=[j(e,"click",r[6]),j(e,"keydown",r[7]),j(e,"keyup",r[8]),j(e,"focus",r[9]),j(e,"blur",r[10]),j(e,"mouseenter",r[11]),j(e,"mouseleave",r[12]),j(e,"mouseover",r[13]),j(e,"mouseout",r[14])],n=!0)},p(a,s){K(e,l=D(o,[s&1&&{width:a[0]},s&1&&{height:a[0]},s&32&&a[5],s&2&&{role:a[1]},s&8&&{"aria-label":a[3]},{viewBox:"0 0 15 15"},s&4&&{fill:a[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(a){a&&M(e),n=!1,Y(i)}}}function t7e(r){let e;function t(o,l){return o[4]?e7e:$4e}let n=t(r,-1),i=n(r);return{c(){i.c(),e=U()},m(o,l){i.m(o,l),A(o,e,l)},p(o,[l]){n===(n=t(o,l))&&i?i.p(o,l):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},i:I,o:I,d(o){o&&M(e),i.d(o)}}}function r7e(r,e,t){var P;let n=["size","role","color","ariaLabel","withEvents"],i=Z(e,n),o=(P=X("iconCtx"))!=null?P:{},{size:l=o.size||"24"}=e,{role:a=o.role||"img"}=e,{color:s=o.color||"currentColor"}=e,{ariaLabel:u="chevron down,"}=e,{withEvents:c=!1}=e;function f(y){q.call(this,r,y)}function h(y){q.call(this,r,y)}function d(y){q.call(this,r,y)}function p(y){q.call(this,r,y)}function v(y){q.call(this,r,y)}function b(y){q.call(this,r,y)}function C(y){q.call(this,r,y)}function L(y){q.call(this,r,y)}function S(y){q.call(this,r,y)}return r.$$set=y=>{e=R(R({},e),x(y)),t(5,i=Z(e,n)),"size"in y&&t(0,l=y.size),"role"in y&&t(1,a=y.role),"color"in y&&t(2,s=y.color),"ariaLabel"in y&&t(3,u=y.ariaLabel),"withEvents"in y&&t(4,c=y.withEvents)},[l,a,s,u,c,i,f,h,d,p,v,b,C,L,S]}var KM=class extends H{constructor(e){super(),V(this,e,r7e,t7e,N,{size:0,role:1,color:2,ariaLabel:3,withEvents:4})}},N_=KM;function n7e(r){let e,t,n=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M9.94969 7.49989C9.94969 8.85288 8.85288 9.94969 7.49989 9.94969C6.14691 9.94969 5.0501 8.85288 5.0501 7.49989C5.0501 6.14691 6.14691 5.0501 7.49989 5.0501C8.85288 5.0501 9.94969 6.14691 9.94969 7.49989ZM10.8632 8C10.6213 9.64055 9.20764 10.8997 7.49989 10.8997C5.79214 10.8997 4.37847 9.64055 4.13662 8H0.5C0.223858 8 0 7.77614 0 7.5C0 7.22386 0.223858 7 0.5 7H4.13659C4.37835 5.35935 5.79206 4.1001 7.49989 4.1001C9.20772 4.1001 10.6214 5.35935 10.8632 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H10.8632Z"),k(t,"fill","currentColor"),K(e,i)},m(o,l){A(o,e,l),B(e,t)},p(o,l){K(e,i=D(n,[l&1&&{width:o[0]},l&1&&{height:o[0]},l&32&&o[5],l&2&&{role:o[1]},l&8&&{"aria-label":o[3]},{viewBox:"0 0 15 15"},l&4&&{fill:o[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(o){o&&M(e)}}}function i7e(r){let e,t,n,i,o=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],l={};for(let a=0;a<o.length;a+=1)l=R(l,o[a]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M9.94969 7.49989C9.94969 8.85288 8.85288 9.94969 7.49989 9.94969C6.14691 9.94969 5.0501 8.85288 5.0501 7.49989C5.0501 6.14691 6.14691 5.0501 7.49989 5.0501C8.85288 5.0501 9.94969 6.14691 9.94969 7.49989ZM10.8632 8C10.6213 9.64055 9.20764 10.8997 7.49989 10.8997C5.79214 10.8997 4.37847 9.64055 4.13662 8H0.5C0.223858 8 0 7.77614 0 7.5C0 7.22386 0.223858 7 0.5 7H4.13659C4.37835 5.35935 5.79206 4.1001 7.49989 4.1001C9.20772 4.1001 10.6214 5.35935 10.8632 7H14.5C14.7761 7 15 7.22386 15 7.5C15 7.77614 14.7761 8 14.5 8H10.8632Z"),k(t,"fill","currentColor"),K(e,l)},m(a,s){A(a,e,s),B(e,t),n||(i=[j(e,"click",r[6]),j(e,"keydown",r[7]),j(e,"keyup",r[8]),j(e,"focus",r[9]),j(e,"blur",r[10]),j(e,"mouseenter",r[11]),j(e,"mouseleave",r[12]),j(e,"mouseover",r[13]),j(e,"mouseout",r[14])],n=!0)},p(a,s){K(e,l=D(o,[s&1&&{width:a[0]},s&1&&{height:a[0]},s&32&&a[5],s&2&&{role:a[1]},s&8&&{"aria-label":a[3]},{viewBox:"0 0 15 15"},s&4&&{fill:a[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(a){a&&M(e),n=!1,Y(i)}}}function o7e(r){let e;function t(o,l){return o[4]?i7e:n7e}let n=t(r,-1),i=n(r);return{c(){i.c(),e=U()},m(o,l){i.m(o,l),A(o,e,l)},p(o,[l]){n===(n=t(o,l))&&i?i.p(o,l):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},i:I,o:I,d(o){o&&M(e),i.d(o)}}}function l7e(r,e,t){var P;let n=["size","role","color","ariaLabel","withEvents"],i=Z(e,n),o=(P=X("iconCtx"))!=null?P:{},{size:l=o.size||"24"}=e,{role:a=o.role||"img"}=e,{color:s=o.color||"currentColor"}=e,{ariaLabel:u="commit,"}=e,{withEvents:c=!1}=e;function f(y){q.call(this,r,y)}function h(y){q.call(this,r,y)}function d(y){q.call(this,r,y)}function p(y){q.call(this,r,y)}function v(y){q.call(this,r,y)}function b(y){q.call(this,r,y)}function C(y){q.call(this,r,y)}function L(y){q.call(this,r,y)}function S(y){q.call(this,r,y)}return r.$$set=y=>{e=R(R({},e),x(y)),t(5,i=Z(e,n)),"size"in y&&t(0,l=y.size),"role"in y&&t(1,a=y.role),"color"in y&&t(2,s=y.color),"ariaLabel"in y&&t(3,u=y.ariaLabel),"withEvents"in y&&t(4,c=y.withEvents)},[l,a,s,u,c,i,f,h,d,p,v,b,C,L,S]}var JM=class extends H{constructor(e){super(),V(this,e,l7e,o7e,N,{size:0,role:1,color:2,ariaLabel:3,withEvents:4})}},XM=JM;function a7e(r){let e,t,n=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z"),k(t,"fill","currentColor"),K(e,i)},m(o,l){A(o,e,l),B(e,t)},p(o,l){K(e,i=D(n,[l&1&&{width:o[0]},l&1&&{height:o[0]},l&32&&o[5],l&2&&{role:o[1]},l&8&&{"aria-label":o[3]},{viewBox:"0 0 15 15"},l&4&&{fill:o[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(o){o&&M(e)}}}function s7e(r){let e,t,n,i,o=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],l={};for(let a=0;a<o.length;a+=1)l=R(l,o[a]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z"),k(t,"fill","currentColor"),K(e,l)},m(a,s){A(a,e,s),B(e,t),n||(i=[j(e,"click",r[6]),j(e,"keydown",r[7]),j(e,"keyup",r[8]),j(e,"focus",r[9]),j(e,"blur",r[10]),j(e,"mouseenter",r[11]),j(e,"mouseleave",r[12]),j(e,"mouseover",r[13]),j(e,"mouseout",r[14])],n=!0)},p(a,s){K(e,l=D(o,[s&1&&{width:a[0]},s&1&&{height:a[0]},s&32&&a[5],s&2&&{role:a[1]},s&8&&{"aria-label":a[3]},{viewBox:"0 0 15 15"},s&4&&{fill:a[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(a){a&&M(e),n=!1,Y(i)}}}function u7e(r){let e;function t(o,l){return o[4]?s7e:a7e}let n=t(r,-1),i=n(r);return{c(){i.c(),e=U()},m(o,l){i.m(o,l),A(o,e,l)},p(o,[l]){n===(n=t(o,l))&&i?i.p(o,l):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},i:I,o:I,d(o){o&&M(e),i.d(o)}}}function c7e(r,e,t){var P;let n=["size","role","color","ariaLabel","withEvents"],i=Z(e,n),o=(P=X("iconCtx"))!=null?P:{},{size:l=o.size||"24"}=e,{role:a=o.role||"img"}=e,{color:s=o.color||"currentColor"}=e,{ariaLabel:u="eye open,"}=e,{withEvents:c=!1}=e;function f(y){q.call(this,r,y)}function h(y){q.call(this,r,y)}function d(y){q.call(this,r,y)}function p(y){q.call(this,r,y)}function v(y){q.call(this,r,y)}function b(y){q.call(this,r,y)}function C(y){q.call(this,r,y)}function L(y){q.call(this,r,y)}function S(y){q.call(this,r,y)}return r.$$set=y=>{e=R(R({},e),x(y)),t(5,i=Z(e,n)),"size"in y&&t(0,l=y.size),"role"in y&&t(1,a=y.role),"color"in y&&t(2,s=y.color),"ariaLabel"in y&&t(3,u=y.ariaLabel),"withEvents"in y&&t(4,c=y.withEvents)},[l,a,s,u,c,i,f,h,d,p,v,b,C,L,S]}var QM=class extends H{constructor(e){super(),V(this,e,c7e,u7e,N,{size:0,role:1,color:2,ariaLabel:3,withEvents:4})}},$M=QM;function f7e(r){let e,t,n=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z"),k(t,"fill","currentColor"),K(e,i)},m(o,l){A(o,e,l),B(e,t)},p(o,l){K(e,i=D(n,[l&1&&{width:o[0]},l&1&&{height:o[0]},l&32&&o[5],l&2&&{role:o[1]},l&8&&{"aria-label":o[3]},{viewBox:"0 0 15 15"},l&4&&{fill:o[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(o){o&&M(e)}}}function h7e(r){let e,t,n,i,o=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],l={};for(let a=0;a<o.length;a+=1)l=R(l,o[a]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z"),k(t,"fill","currentColor"),K(e,l)},m(a,s){A(a,e,s),B(e,t),n||(i=[j(e,"click",r[6]),j(e,"keydown",r[7]),j(e,"keyup",r[8]),j(e,"focus",r[9]),j(e,"blur",r[10]),j(e,"mouseenter",r[11]),j(e,"mouseleave",r[12]),j(e,"mouseover",r[13]),j(e,"mouseout",r[14])],n=!0)},p(a,s){K(e,l=D(o,[s&1&&{width:a[0]},s&1&&{height:a[0]},s&32&&a[5],s&2&&{role:a[1]},s&8&&{"aria-label":a[3]},{viewBox:"0 0 15 15"},s&4&&{fill:a[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(a){a&&M(e),n=!1,Y(i)}}}function d7e(r){let e;function t(o,l){return o[4]?h7e:f7e}let n=t(r,-1),i=n(r);return{c(){i.c(),e=U()},m(o,l){i.m(o,l),A(o,e,l)},p(o,[l]){n===(n=t(o,l))&&i?i.p(o,l):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},i:I,o:I,d(o){o&&M(e),i.d(o)}}}function m7e(r,e,t){var P;let n=["size","role","color","ariaLabel","withEvents"],i=Z(e,n),o=(P=X("iconCtx"))!=null?P:{},{size:l=o.size||"24"}=e,{role:a=o.role||"img"}=e,{color:s=o.color||"currentColor"}=e,{ariaLabel:u="lightning bolt,"}=e,{withEvents:c=!1}=e;function f(y){q.call(this,r,y)}function h(y){q.call(this,r,y)}function d(y){q.call(this,r,y)}function p(y){q.call(this,r,y)}function v(y){q.call(this,r,y)}function b(y){q.call(this,r,y)}function C(y){q.call(this,r,y)}function L(y){q.call(this,r,y)}function S(y){q.call(this,r,y)}return r.$$set=y=>{e=R(R({},e),x(y)),t(5,i=Z(e,n)),"size"in y&&t(0,l=y.size),"role"in y&&t(1,a=y.role),"color"in y&&t(2,s=y.color),"ariaLabel"in y&&t(3,u=y.ariaLabel),"withEvents"in y&&t(4,c=y.withEvents)},[l,a,s,u,c,i,f,h,d,p,v,b,C,L,S]}var eA=class extends H{constructor(e){super(),V(this,e,m7e,d7e,N,{size:0,role:1,color:2,ariaLabel:3,withEvents:4})}},tA=eA;function g7e(r){let e,t,n=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M7.25925 3.16667L4.37036 5.33333V1L7.25925 3.16667ZM1 8.22222L3.88889 6.05555L1 3.88889V8.22222ZM1 14L3.88889 11.8333L1 9.66666V14ZM7.74072 8.22222L10.6296 6.05555L7.74072 3.88889V8.22222ZM14 3.16667L11.1111 5.33333V1L14 3.16667ZM11.1111 11.1111L14 8.94444L11.1111 6.77777V11.1111ZM3.88889 11.1111L1 8.94444L3.88889 6.77777V11.1111ZM4.37036 6.05555L7.25925 8.22222V3.88889L4.37036 6.05555ZM3.88889 5.33333L1 3.16667L3.88889 1V5.33333ZM7.74072 3.16667L10.6296 5.33333V1L7.74072 3.16667ZM14 8.22222L11.1111 6.05555L14 3.88889V8.22222ZM11.1111 11.8333L14 14V9.66666L11.1111 11.8333Z"),k(t,"fill","currentColor"),K(e,i)},m(o,l){A(o,e,l),B(e,t)},p(o,l){K(e,i=D(n,[l&1&&{width:o[0]},l&1&&{height:o[0]},l&32&&o[5],l&2&&{role:o[1]},l&8&&{"aria-label":o[3]},{viewBox:"0 0 15 15"},l&4&&{fill:o[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(o){o&&M(e)}}}function p7e(r){let e,t,n,i,o=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],l={};for(let a=0;a<o.length;a+=1)l=R(l,o[a]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M7.25925 3.16667L4.37036 5.33333V1L7.25925 3.16667ZM1 8.22222L3.88889 6.05555L1 3.88889V8.22222ZM1 14L3.88889 11.8333L1 9.66666V14ZM7.74072 8.22222L10.6296 6.05555L7.74072 3.88889V8.22222ZM14 3.16667L11.1111 5.33333V1L14 3.16667ZM11.1111 11.1111L14 8.94444L11.1111 6.77777V11.1111ZM3.88889 11.1111L1 8.94444L3.88889 6.77777V11.1111ZM4.37036 6.05555L7.25925 8.22222V3.88889L4.37036 6.05555ZM3.88889 5.33333L1 3.16667L3.88889 1V5.33333ZM7.74072 3.16667L10.6296 5.33333V1L7.74072 3.16667ZM14 8.22222L11.1111 6.05555L14 3.88889V8.22222ZM11.1111 11.8333L14 14V9.66666L11.1111 11.8333Z"),k(t,"fill","currentColor"),K(e,l)},m(a,s){A(a,e,s),B(e,t),n||(i=[j(e,"click",r[6]),j(e,"keydown",r[7]),j(e,"keyup",r[8]),j(e,"focus",r[9]),j(e,"blur",r[10]),j(e,"mouseenter",r[11]),j(e,"mouseleave",r[12]),j(e,"mouseover",r[13]),j(e,"mouseout",r[14])],n=!0)},p(a,s){K(e,l=D(o,[s&1&&{width:a[0]},s&1&&{height:a[0]},s&32&&a[5],s&2&&{role:a[1]},s&8&&{"aria-label":a[3]},{viewBox:"0 0 15 15"},s&4&&{fill:a[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(a){a&&M(e),n=!1,Y(i)}}}function _7e(r){let e;function t(o,l){return o[4]?p7e:g7e}let n=t(r,-1),i=n(r);return{c(){i.c(),e=U()},m(o,l){i.m(o,l),A(o,e,l)},p(o,[l]){n===(n=t(o,l))&&i?i.p(o,l):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},i:I,o:I,d(o){o&&M(e),i.d(o)}}}function b7e(r,e,t){var P;let n=["size","role","color","ariaLabel","withEvents"],i=Z(e,n),o=(P=X("iconCtx"))!=null?P:{},{size:l=o.size||"24"}=e,{role:a=o.role||"img"}=e,{color:s=o.color||"currentColor"}=e,{ariaLabel:u="modulz logo,"}=e,{withEvents:c=!1}=e;function f(y){q.call(this,r,y)}function h(y){q.call(this,r,y)}function d(y){q.call(this,r,y)}function p(y){q.call(this,r,y)}function v(y){q.call(this,r,y)}function b(y){q.call(this,r,y)}function C(y){q.call(this,r,y)}function L(y){q.call(this,r,y)}function S(y){q.call(this,r,y)}return r.$$set=y=>{e=R(R({},e),x(y)),t(5,i=Z(e,n)),"size"in y&&t(0,l=y.size),"role"in y&&t(1,a=y.role),"color"in y&&t(2,s=y.color),"ariaLabel"in y&&t(3,u=y.ariaLabel),"withEvents"in y&&t(4,c=y.withEvents)},[l,a,s,u,c,i,f,h,d,p,v,b,C,L,S]}var rA=class extends H{constructor(e){super(),V(this,e,b7e,_7e,N,{size:0,role:1,color:2,ariaLabel:3,withEvents:4})}},nA=rA;function v7e(r){let e,t,n=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],i={};for(let o=0;o<n.length;o+=1)i=R(i,n[o]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M0.849976 1.74998C0.849976 1.25292 1.25292 0.849976 1.74998 0.849976H3.24998C3.74703 0.849976 4.14998 1.25292 4.14998 1.74998V2.04998H10.85V1.74998C10.85 1.25292 11.2529 0.849976 11.75 0.849976H13.25C13.747 0.849976 14.15 1.25292 14.15 1.74998V3.24998C14.15 3.74703 13.747 4.14998 13.25 4.14998H12.95V10.85H13.25C13.747 10.85 14.15 11.2529 14.15 11.75V13.25C14.15 13.747 13.747 14.15 13.25 14.15H11.75C11.2529 14.15 10.85 13.747 10.85 13.25V12.95H4.14998V13.25C4.14998 13.747 3.74703 14.15 3.24998 14.15H1.74998C1.25292 14.15 0.849976 13.747 0.849976 13.25V11.75C0.849976 11.2529 1.25292 10.85 1.74998 10.85H2.04998V4.14998H1.74998C1.25292 4.14998 0.849976 3.74703 0.849976 3.24998V1.74998ZM2.94998 4.14998V10.85H3.24998C3.74703 10.85 4.14998 11.2529 4.14998 11.75V12.05H10.85V11.75C10.85 11.2529 11.2529 10.85 11.75 10.85H12.05V4.14998H11.75C11.2529 4.14998 10.85 3.74703 10.85 3.24998V2.94998H4.14998V3.24998C4.14998 3.74703 3.74703 4.14998 3.24998 4.14998H2.94998ZM2.34998 1.74998H1.74998V2.34998V2.64998V3.24998H2.34998H2.64998H3.24998V2.64998V2.34998V1.74998H2.64998H2.34998ZM5.09998 5.99998C5.09998 5.50292 5.50292 5.09998 5.99998 5.09998H6.99998C7.49703 5.09998 7.89998 5.50292 7.89998 5.99998V6.99998C7.89998 7.03591 7.89787 7.07134 7.89378 7.10618C7.92861 7.10208 7.96405 7.09998 7.99998 7.09998H8.99998C9.49703 7.09998 9.89998 7.50292 9.89998 7.99998V8.99998C9.89998 9.49703 9.49703 9.89998 8.99998 9.89998H7.99998C7.50292 9.89998 7.09998 9.49703 7.09998 8.99998V7.99998C7.09998 7.96405 7.10208 7.92861 7.10618 7.89378C7.07134 7.89787 7.03591 7.89998 6.99998 7.89998H5.99998C5.50292 7.89998 5.09998 7.49703 5.09998 6.99998V5.99998ZM6.09998 5.99998H5.99998V6.09998V6.89998V6.99998H6.09998H6.89998H6.99998V6.89998V6.09998V5.99998H6.89998H6.09998ZM7.99998 7.99998H8.09998H8.89998H8.99998V8.09998V8.89998V8.99998H8.89998H8.09998H7.99998V8.89998V8.09998V7.99998ZM2.64998 11.75H2.34998H1.74998V12.35V12.65V13.25H2.34998H2.64998H3.24998V12.65V12.35V11.75H2.64998ZM11.75 1.74998H12.35H12.65H13.25V2.34998V2.64998V3.24998H12.65H12.35H11.75V2.64998V2.34998V1.74998ZM12.65 11.75H12.35H11.75V12.35V12.65V13.25H12.35H12.65H13.25V12.65V12.35V11.75H12.65Z"),k(t,"fill","currentColor"),K(e,i)},m(o,l){A(o,e,l),B(e,t)},p(o,l){K(e,i=D(n,[l&1&&{width:o[0]},l&1&&{height:o[0]},l&32&&o[5],l&2&&{role:o[1]},l&8&&{"aria-label":o[3]},{viewBox:"0 0 15 15"},l&4&&{fill:o[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(o){o&&M(e)}}}function C7e(r){let e,t,n,i,o=[{width:r[0]},{height:r[0]},r[5],{role:r[1]},{"aria-label":r[3]},{viewBox:"0 0 15 15"},{fill:r[2]},{xmlns:"http://www.w3.org/2000/svg"}],l={};for(let a=0;a<o.length;a+=1)l=R(l,o[a]);return{c(){e=F("svg"),t=F("path"),k(t,"fill-rule","evenodd"),k(t,"clip-rule","evenodd"),k(t,"d","M0.849976 1.74998C0.849976 1.25292 1.25292 0.849976 1.74998 0.849976H3.24998C3.74703 0.849976 4.14998 1.25292 4.14998 1.74998V2.04998H10.85V1.74998C10.85 1.25292 11.2529 0.849976 11.75 0.849976H13.25C13.747 0.849976 14.15 1.25292 14.15 1.74998V3.24998C14.15 3.74703 13.747 4.14998 13.25 4.14998H12.95V10.85H13.25C13.747 10.85 14.15 11.2529 14.15 11.75V13.25C14.15 13.747 13.747 14.15 13.25 14.15H11.75C11.2529 14.15 10.85 13.747 10.85 13.25V12.95H4.14998V13.25C4.14998 13.747 3.74703 14.15 3.24998 14.15H1.74998C1.25292 14.15 0.849976 13.747 0.849976 13.25V11.75C0.849976 11.2529 1.25292 10.85 1.74998 10.85H2.04998V4.14998H1.74998C1.25292 4.14998 0.849976 3.74703 0.849976 3.24998V1.74998ZM2.94998 4.14998V10.85H3.24998C3.74703 10.85 4.14998 11.2529 4.14998 11.75V12.05H10.85V11.75C10.85 11.2529 11.2529 10.85 11.75 10.85H12.05V4.14998H11.75C11.2529 4.14998 10.85 3.74703 10.85 3.24998V2.94998H4.14998V3.24998C4.14998 3.74703 3.74703 4.14998 3.24998 4.14998H2.94998ZM2.34998 1.74998H1.74998V2.34998V2.64998V3.24998H2.34998H2.64998H3.24998V2.64998V2.34998V1.74998H2.64998H2.34998ZM5.09998 5.99998C5.09998 5.50292 5.50292 5.09998 5.99998 5.09998H6.99998C7.49703 5.09998 7.89998 5.50292 7.89998 5.99998V6.99998C7.89998 7.03591 7.89787 7.07134 7.89378 7.10618C7.92861 7.10208 7.96405 7.09998 7.99998 7.09998H8.99998C9.49703 7.09998 9.89998 7.50292 9.89998 7.99998V8.99998C9.89998 9.49703 9.49703 9.89998 8.99998 9.89998H7.99998C7.50292 9.89998 7.09998 9.49703 7.09998 8.99998V7.99998C7.09998 7.96405 7.10208 7.92861 7.10618 7.89378C7.07134 7.89787 7.03591 7.89998 6.99998 7.89998H5.99998C5.50292 7.89998 5.09998 7.49703 5.09998 6.99998V5.99998ZM6.09998 5.99998H5.99998V6.09998V6.89998V6.99998H6.09998H6.89998H6.99998V6.89998V6.09998V5.99998H6.89998H6.09998ZM7.99998 7.99998H8.09998H8.89998H8.99998V8.09998V8.89998V8.99998H8.89998H8.09998H7.99998V8.89998V8.09998V7.99998ZM2.64998 11.75H2.34998H1.74998V12.35V12.65V13.25H2.34998H2.64998H3.24998V12.65V12.35V11.75H2.64998ZM11.75 1.74998H12.35H12.65H13.25V2.34998V2.64998V3.24998H12.65H12.35H11.75V2.64998V2.34998V1.74998ZM12.65 11.75H12.35H11.75V12.35V12.65V13.25H12.35H12.65H13.25V12.65V12.35V11.75H12.65Z"),k(t,"fill","currentColor"),K(e,l)},m(a,s){A(a,e,s),B(e,t),n||(i=[j(e,"click",r[6]),j(e,"keydown",r[7]),j(e,"keyup",r[8]),j(e,"focus",r[9]),j(e,"blur",r[10]),j(e,"mouseenter",r[11]),j(e,"mouseleave",r[12]),j(e,"mouseover",r[13]),j(e,"mouseout",r[14])],n=!0)},p(a,s){K(e,l=D(o,[s&1&&{width:a[0]},s&1&&{height:a[0]},s&32&&a[5],s&2&&{role:a[1]},s&8&&{"aria-label":a[3]},{viewBox:"0 0 15 15"},s&4&&{fill:a[2]},{xmlns:"http://www.w3.org/2000/svg"}]))},d(a){a&&M(e),n=!1,Y(i)}}}function w7e(r){let e;function t(o,l){return o[4]?C7e:v7e}let n=t(r,-1),i=n(r);return{c(){i.c(),e=U()},m(o,l){i.m(o,l),A(o,e,l)},p(o,[l]){n===(n=t(o,l))&&i?i.p(o,l):(i.d(1),i=n(o),i&&(i.c(),i.m(e.parentNode,e)))},i:I,o:I,d(o){o&&M(e),i.d(o)}}}function y7e(r,e,t){var P;let n=["size","role","color","ariaLabel","withEvents"],i=Z(e,n),o=(P=X("iconCtx"))!=null?P:{},{size:l=o.size||"24"}=e,{role:a=o.role||"img"}=e,{color:s=o.color||"currentColor"}=e,{ariaLabel:u="transform,"}=e,{withEvents:c=!1}=e;function f(y){q.call(this,r,y)}function h(y){q.call(this,r,y)}function d(y){q.call(this,r,y)}function p(y){q.call(this,r,y)}function v(y){q.call(this,r,y)}function b(y){q.call(this,r,y)}function C(y){q.call(this,r,y)}function L(y){q.call(this,r,y)}function S(y){q.call(this,r,y)}return r.$$set=y=>{e=R(R({},e),x(y)),t(5,i=Z(e,n)),"size"in y&&t(0,l=y.size),"role"in y&&t(1,a=y.role),"color"in y&&t(2,s=y.color),"ariaLabel"in y&&t(3,u=y.ariaLabel),"withEvents"in y&&t(4,c=y.withEvents)},[l,a,s,u,c,i,f,h,d,p,v,b,C,L,S]}var iA=class extends H{constructor(e){super(),V(this,e,y7e,w7e,N,{size:0,role:1,color:2,ariaLabel:3,withEvents:4})}},oA=iA;var lA=(r,{speed:e=1.2,easing:t})=>{if(!(r.childNodes.length===1&&r.childNodes[0].nodeType===Node.TEXT_NODE))throw new Error("This transition only works on elements with a single text node child");let i=r.textContent,o=i.length/(e*.01);return{easing:t,duration:o,tick:l=>{let a=~~(i.length*l);r.textContent=i.slice(0,a)}}};var WLt=require("obsidian");function k7e(r){let e,t;return e=new $o({props:{color:"blue",size:"xs",variant:"bars",style:"float:left"}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p:I,i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function L7e(r){let e,t,n,i,o,l,a,s,u,c;return t=new Qk({props:{$$slots:{default:[k7e]},$$scope:{ctx:r}}}),o=new Zd({props:{height:8,radius:"xl"}}),a=new Zd({props:{height:8,radius:"xl",override:{marginTop:"8px"}}}),u=new Zd({props:{height:8,width:"70%",radius:"xl",override:{marginTop:"8px"}}}),{c(){e=Ge("div"),_e(t.$$.fragment),n=Ge("br"),i=et(),_e(o.$$.fragment),l=et(),_e(a.$$.fragment),s=et(),_e(u.$$.fragment),k(e,"id","ai-robot-paper-loading")},m(f,h){A(f,e,h),ge(t,e,null),B(e,n),B(e,i),ge(o,e,null),B(e,l),ge(a,e,null),B(e,s),ge(u,e,null),c=!0},p(f,[h]){let d={};h&1&&(d.$$scope={dirty:h,ctx:f}),t.$set(d)},i(f){c||(re(t.$$.fragment,f),re(o.$$.fragment,f),re(a.$$.fragment,f),re(u.$$.fragment,f),c=!0)},o(f){oe(t.$$.fragment,f),oe(o.$$.fragment,f),oe(a.$$.fragment,f),oe(u.$$.fragment,f),c=!1},d(f){f&&M(e),pe(t),pe(o),pe(a),pe(u)}}}var aA=class extends H{constructor(e){super(),V(this,e,null,L7e,N,{})}},PG=aA;function E7e(r){let e;return{c(){e=Zt(r[1])},m(t,n){A(t,e,n)},p(t,n){n&2&&gn(e,t[1])},d(t){t&&M(e)}}}function S7e(r){let e;return{c(){e=Zt("1 second ago")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function M7e(r){let e,t,n,i;return e=new Pn({props:{color:"dimmed",size:"sm",$$slots:{default:[E7e]},$$scope:{ctx:r}}}),n=new Pn({props:{size:"xs",$$slots:{default:[S7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment)},m(o,l){ge(e,o,l),A(o,t,l),ge(n,o,l),i=!0},p(o,l){let a={};l&6&&(a.$$scope={dirty:l,ctx:o}),e.$set(a);let s={};l&4&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){i||(re(e.$$.fragment,o),re(n.$$.fragment,o),i=!0)},o(o){oe(e.$$.fragment,o),oe(n.$$.fragment,o),i=!1},d(o){o&&M(t),pe(e,o),pe(n,o)}}}function A7e(r){let e;return{c(){e=Zt(r[0])},m(t,n){A(t,e,n)},p(t,n){n&1&&gn(e,t[0])},d(t){t&&M(e)}}}function P7e(r){let e;return{c(){e=Zt("7 seconds ago")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function T7e(r){let e,t,n,i;return e=new Pn({props:{color:"dimmed",size:"sm",$$slots:{default:[A7e]},$$scope:{ctx:r}}}),n=new Pn({props:{size:"xs",$$slots:{default:[P7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment)},m(o,l){ge(e,o,l),A(o,t,l),ge(n,o,l),i=!0},p(o,l){let a={};l&5&&(a.$$scope={dirty:l,ctx:o}),e.$set(a);let s={};l&4&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){i||(re(e.$$.fragment,o),re(n.$$.fragment,o),i=!0)},o(o){oe(e.$$.fragment,o),oe(n.$$.fragment,o),i=!1},d(o){o&&M(t),pe(e,o),pe(n,o)}}}function O7e(r){let e;return{c(){e=Zt("Check you Obsidian note")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function R7e(r){let e;return{c(){e=Zt("37 seconds ago")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function I7e(r){let e,t,n,i;return e=new Pn({props:{color:"dimmed",size:"sm",$$slots:{default:[O7e]},$$scope:{ctx:r}}}),n=new Pn({props:{size:"xs",$$slots:{default:[R7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment)},m(o,l){ge(e,o,l),A(o,t,l),ge(n,o,l),i=!0},p(o,l){let a={};l&4&&(a.$$scope={dirty:l,ctx:o}),e.$set(a);let s={};l&4&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){i||(re(e.$$.fragment,o),re(n.$$.fragment,o),i=!0)},o(o){oe(e.$$.fragment,o),oe(n.$$.fragment,o),i=!1},d(o){o&&M(t),pe(e,o),pe(n,o)}}}function z7e(r){let e,t;return e=new $M({props:{size:16}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p:I,i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function H7e(r){let e,t;return e=new Dd({props:{radius:"xl",color:"green",$$slots:{default:[z7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,i){let o={};i&4&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function N7e(r){let e,t,n,i,o,l;return e=new af.Item({props:{bullet:tA,title:"\u901A\u4E49\u5343\u95EE\u521D\u59CB\u5316",$$slots:{default:[M7e]},$$scope:{ctx:r}}}),n=new af.Item({props:{bullet:XM,title:"Qwen-max\u63A8\u7406\u8FC7\u7A0B",$$slots:{default:[T7e]},$$scope:{ctx:r}}}),o=new af.Item({props:{title:"ReAct\u4EFB\u52A1\u68C0\u67E5",$$slots:{bullet:[H7e],default:[I7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment),i=et(),_e(o.$$.fragment)},m(a,s){ge(e,a,s),A(a,t,s),ge(n,a,s),A(a,i,s),ge(o,a,s),l=!0},p(a,s){let u={};s&6&&(u.$$scope={dirty:s,ctx:a}),e.$set(u);let c={};s&5&&(c.$$scope={dirty:s,ctx:a}),n.$set(c);let f={};s&4&&(f.$$scope={dirty:s,ctx:a}),o.$set(f)},i(a){l||(re(e.$$.fragment,a),re(n.$$.fragment,a),re(o.$$.fragment,a),l=!0)},o(a){oe(e.$$.fragment,a),oe(n.$$.fragment,a),oe(o.$$.fragment,a),l=!1},d(a){a&&(M(t),M(i)),pe(e,a),pe(n,a),pe(o,a)}}}function V7e(r){let e,t;return e=new af({props:{active:2,bulletSize:24,lineWidth:2,$$slots:{default:[N7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,[i]){let o={};i&7&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function B7e(r,e,t){let{aiContent:n}=e,{aiRobot:i}=e;return r.$$set=o=>{"aiContent"in o&&t(0,n=o.aiContent),"aiRobot"in o&&t(1,i=o.aiRobot)},[n,i]}var sA=class extends H{constructor(e){super(),V(this,e,B7e,V7e,N,{aiContent:0,aiRobot:1})}},TG=sA;function D7e(r){let e,t;return e=new nA({props:{id:"modulz-log-icon",color:"rgb(134 239 172)"}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p:I,i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Z7e(r){let e,t;return e=new Dd({props:{size:"xl",variant:"gradient",gradient:{from:"red",deg:100},$$slots:{default:[D7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p(n,[i]){let o={};i&1&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}var uA=class extends H{constructor(e){super(),V(this,e,null,Z7e,N,{})}},OG=uA;function F7e(r){Ba(r,"svelte-ao4o2s","#floating-ai-inner.svelte-ao4o2s{display:block;height:100%;width:100%;background-color:rgba(130, 132, 132, 0.2);padding:5px 5px 5px 5px}#ai-robot-selected-item.svelte-ao4o2s{margin:2px 2px 2px 2px}")}function j7e(r){let e,t,n;var i=N_;function o(l,a){return{props:{slot:"rightSection"}}}return i&&(e=pn(i,o(r))),{c(){e&&_e(e.$$.fragment),t=U()},m(l,a){e&&ge(e,l,a),A(l,t,a),n=!0},p(l,a){if(i!==(i=N_)){if(e){wt();let s=e;oe(s.$$.fragment,1,0,()=>{pe(s,1)}),yt()}i?(e=pn(i,o(l,a)),_e(e.$$.fragment),re(e.$$.fragment,1),ge(e,t.parentNode,t)):e=null}},i(l){n||(e&&re(e.$$.fragment,l),n=!0)},o(l){e&&oe(e.$$.fragment,l),n=!1},d(l){l&&M(t),e&&pe(e,l)}}}function x7e(r){let e;return{c(){e=Zt("execute")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function q7e(r){let e;return{c(){e=Zt("cancel")},m(t,n){A(t,e,n)},d(t){t&&M(e)}}}function U7e(r){let e,t,n,i;return e=new cg({props:{ripple:!0,variant:"gradient",gradient:{from:"teal",to:"green",deg:105},$$slots:{default:[x7e]},$$scope:{ctx:r}}}),e.$on("click",r[4]),n=new cg({props:{ripple:!0,variant:"gradient",gradient:{from:"orange",to:"red",deg:85},$$slots:{default:[q7e]},$$scope:{ctx:r}}}),n.$on("click",r[5]),{c(){_e(e.$$.fragment),t=et(),_e(n.$$.fragment)},m(o,l){ge(e,o,l),A(o,t,l),ge(n,o,l),i=!0},p(o,l){let a={};l&16384&&(a.$$scope={dirty:l,ctx:o}),e.$set(a);let s={};l&16384&&(s.$$scope={dirty:l,ctx:o}),n.$set(s)},i(o){i||(re(e.$$.fragment,o),re(n.$$.fragment,o),i=!0)},o(o){oe(e.$$.fragment,o),oe(n.$$.fragment,o),i=!1},d(o){o&&M(t),pe(e,o),pe(n,o)}}}function W7e(r){let e,t,n,i,o,l,a,s,u,c;function f(d){r[12](d)}let h={data:r[2],placeholder:"Pick one",label:"\u9009\u62E9\u4F60\u7684\u52A9\u624B",icon:OG,size:"md",$$slots:{rightSection:[j7e]},$$scope:{ctx:r}};return r[0]!==void 0&&(h.value=r[0]),e=new fL({props:h}),je.push(()=>kt(e,"value",f)),u=new mg({props:{justify:"space-around",$$slots:{default:[U7e]},$$scope:{ctx:r}}}),{c(){_e(e.$$.fragment),n=et(),i=Ge("div"),o=Zt("selected "),l=Zt(r[0]),s=et(),_e(u.$$.fragment),k(i,"id","ai-robot-selected-item"),k(i,"class","svelte-ao4o2s")},m(d,p){ge(e,d,p),A(d,n,p),A(d,i,p),B(i,o),B(i,l),A(d,s,p),ge(u,d,p),c=!0},p(d,p){let v={};p&16384&&(v.$$scope={dirty:p,ctx:d}),!t&&p&1&&(t=!0,v.value=d[0],St(()=>t=!1)),e.$set(v),(!c||p&1)&&gn(l,d[0]);let b={};p&16384&&(b.$$scope={dirty:p,ctx:d}),u.$set(b)},i(d){c||(re(e.$$.fragment,d),a&&a.end(1),re(u.$$.fragment,d),c=!0)},o(d){oe(e.$$.fragment,d),d&&(a=zN(i,lA,{})),oe(u.$$.fragment,d),c=!1},d(d){d&&(M(n),M(i),M(s)),pe(e,d),d&&a&&a.end(),pe(u,d)}}}function G7e(r){let e,t,n,i,o,l,a,s,u,c;return n=new Bd({props:{style:"float: right;"}}),n.$on("click",r[5]),o=new mg({props:{justify:"space-between",direction:"column",$$slots:{default:[W7e]},$$scope:{ctx:r}}}),a=new iL({props:{size:"sm"}}),u=new Jk({props:{id:"ai-robot-paper",shadow:"md",withBorder:!0}}),{c(){e=Ge("div"),t=Ge("div"),_e(n.$$.fragment),i=et(),_e(o.$$.fragment),l=et(),_e(a.$$.fragment),s=et(),_e(u.$$.fragment),k(e,"id","floating-ai-inner"),k(e,"class","svelte-ao4o2s")},m(f,h){A(f,e,h),B(e,t),ge(n,t,null),B(e,i),ge(o,e,null),B(e,l),ge(a,e,null),B(e,s),ge(u,e,null),c=!0},p(f,h){let d={};h&16385&&(d.$$scope={dirty:h,ctx:f}),o.$set(d)},i(f){c||(re(n.$$.fragment,f),re(o.$$.fragment,f),re(a.$$.fragment,f),re(u.$$.fragment,f),c=!0)},o(f){oe(n.$$.fragment,f),oe(o.$$.fragment,f),oe(a.$$.fragment,f),oe(u.$$.fragment,f),c=!1},d(f){f&&M(e),pe(n),pe(o),pe(a),pe(u)}}}function Y7e(r){let e,t,n={id:"ai-button-container",themeObserver:r[3],$$slots:{default:[G7e]},$$scope:{ctx:r}};return e=new Nd({props:n}),r[13](e),{c(){_e(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},p(i,[o]){let l={};o&16385&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(re(e.$$.fragment,i),t=!0)},o(i){oe(e.$$.fragment,i),t=!1},d(i){r[13](null),pe(e,i)}}}function K7e(r,e,t){let{parentRef:n}=e,{plugin:i}=e,{editor:o}=e,{view:l}=e,{app:a}=e,{selectedQuery:s}=e,u=[{label:"\u81EA\u52A8backlink\u7BA1\u7406",value:"AssitantRobotBacklink"},{label:"\u81EA\u52A8\u6807\u7B7E\u7BA1\u7406",value:"AssistantRobot"},{label:"\u5F85\u5B9A...",value:"What is another personal fact that an attacker could easily find with Google?",disabled:!0}],c,f=document.body.hasClass("theme-dark")?"dark":"light",h,d=()=>rh(void 0,void 0,void 0,function*(){if(c==="AssistantRobot"){let C=new vp(i,o,l,a,s),L=document.getElementById("ai-robot-paper"),S;if(L)S=new PG({target:L});else return;let P=yield C.assitantTags();S.$destroy(),new TG({target:L,props:{aiContent:P,aiRobot:c}}),setTimeout(()=>{a.commands.executeCommandById("personal-assistant:local-graph")},5e3)}else return void 0}),p=()=>{h.$destroy(),n.$destroy()};function v(C){c=C,t(0,c)}function b(C){je[C?"unshift":"push"](()=>{h=C,t(1,h)})}return r.$$set=C=>{"parentRef"in C&&t(6,n=C.parentRef),"plugin"in C&&t(7,i=C.plugin),"editor"in C&&t(8,o=C.editor),"view"in C&&t(9,l=C.view),"app"in C&&t(10,a=C.app),"selectedQuery"in C&&t(11,s=C.selectedQuery)},[c,h,u,f,d,p,n,i,o,l,a,s,v,b]}var cA=class extends H{constructor(e){super(),V(this,e,K7e,Y7e,N,{parentRef:6,plugin:7,editor:8,view:9,app:10,selectedQuery:11},F7e)}},RG=cA;function J7e(r){let e,t;return e=new oA({props:{class:"personal-assistant-ai-breathing",size:40}}),{c(){_e(e.$$.fragment)},m(n,i){ge(e,n,i),t=!0},p:I,i(n){t||(re(e.$$.fragment,n),t=!0)},o(n){oe(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function X7e(r){let e,t,n,i,o,l;return t=new Vd({props:{color:"blue",id:"floating-ai-robot-button",size:48,override:{"border-radius":"16px"},$$slots:{default:[J7e]},$$scope:{ctx:r}}}),t.$on("click",r[8]),{c(){e=Ge("div"),_e(t.$$.fragment),k(e,"id","floating-ai"),e1(e,"height","200px"),e1(e,"width","360px")},m(a,s){A(a,e,s),ge(t,e,null),i=!0,o||(l=kr(n=$7e.call(null,e)),o=!0)},p(a,s){let u={};s&1024&&(u.$$scope={dirty:s,ctx:a}),t.$set(u)},i(a){i||(re(t.$$.fragment,a),i=!0)},o(a){oe(t.$$.fragment,a),i=!1},d(a){a&&M(e),pe(t),o=!1,l()}}}function Q7e(r){let e,t,n={themeObserver:r[1],$$slots:{default:[X7e]},$$scope:{ctx:r}};return e=new Nd({props:n}),r[9](e),{c(){_e(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},p(i,[o]){let l={};o&1024&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(re(e.$$.fragment,i),t=!0)},o(i){oe(e.$$.fragment,i),t=!1},d(i){r[9](null),pe(e,i)}}}function $7e(r){let e=!1,t=window.innerWidth/6,n=window.innerHeight/6;r.style.position="absolute",r.style.top=`${n}px`,r.style.left=`${t}px`,r.style.cursor="move",r.style.userSelect="none",r.addEventListener("mousedown",()=>{e=!0}),window.addEventListener("mousemove",i=>{e&&(t+=i.movementX,n+=i.movementY,r.style.top=`${n}px`,r.style.left=`${t}px`)}),window.addEventListener("mouseup",()=>{e=!1})}function e8e(r,e,t){let{plugin:n}=e,{editor:i}=e,{view:o}=e,{app:l}=e,{selectedQuery:a}=e,s,u=document.body.hasClass("theme-dark")?"dark":"light";function c(){let d,p=document.getElementById("floating-ai");if(p?d=p:d=globalThis.document.getElementsByClassName("app-container")[0],document.getElementById("ai-button-container"))return;new RG({target:d,props:{parentRef:s,plugin:n,view:o,editor:i,app:l,selectedQuery:a}});let b=document.getElementById("floating-ai-robot-button");b&&(b.style.display="none")}let f=()=>c();function h(d){je[d?"unshift":"push"](()=>{s=d,t(0,s)})}return r.$$set=d=>{"plugin"in d&&t(3,n=d.plugin),"editor"in d&&t(4,i=d.editor),"view"in d&&t(5,o=d.view),"app"in d&&t(6,l=d.app),"selectedQuery"in d&&t(7,a=d.selectedQuery)},[s,u,c,n,i,o,l,a,f,h]}var fA=class extends H{constructor(e){super(),V(this,e,e8e,Q7e,N,{plugin:3,editor:4,view:5,app:6,selectedQuery:7})}},IG=fA;var t8e=(r,...e)=>{r&&console.log(...e)},V_=class extends Sr.Plugin{constructor(){super(...arguments);this.localGraph=new p_(this.app,this);this.settingTab=new m_(this.app,this);this.vssCacheDir=this.join(this.app.vault.configDir,"plugins/personal-assistant/vss-cache");this.isVssCached=!1;this.cryptoHelper=new Vf;this.token="";this.updateMetadata=t=>{if(t instanceof Sr.TFile&&t.extension==="md"){let n=t.path;for(let o of this.settings.metadataExcludePath)if(o!==""&&t.path.startsWith(o)){this.log(`filtered ${t.path} in ${o}`),n="";break}let i=this.app.metadataCache.getCache(n);i&&i.frontmatter&&this.app.fileManager.processFrontMatter(t,o=>{for(let l of Object.getOwnPropertyNames(o))for(let a of this.settings.metadatas)if(l===a.key){this.log(o[l]);let s;switch(a.t){case"moment":s=(0,hA.default)(new Date(t.stat.mtime)).format(a.value);break;case"string":s=a.value;break;default:s=a.value;break}o[l]=s}setTimeout(()=>{this.updateDebouncer.cancel()},100)})}}}async onload(){await this.loadSettings(),this.settings.debug&&(new Sr.Notice("starting obsidian assistant"),FW(this)),new MutationObserver(l=>{l.forEach(a=>{a.addedNodes.forEach(s=>{s instanceof HTMLElement&&document.querySelectorAll(".popover.hover-popover.hover-editor").forEach(u=>{this.log("observing..."),this.localGraph.resize()})})})}).observe(document.body,{attributes:!0,childList:!0}),(0,Sr.addIcon)("PluginAST",oi.PluginAST),this.addRibbonIcon("PluginAST","Obsidian Assistant",l=>{new y4(this.app).open()}).addClass("plugin-manager-ribbon-class");let i=this.addStatusBarItem();i.addClass("personal-assistant-statusbar"),i.setAttribute("id","personal-assistant-statusbar"),(0,Sr.addIcon)("PluginAST_STATUSBAR",oi.PluginAST_STATUSBAR),(0,Sr.setIcon)(i,"PluginAST_STATUSBAR"),i.onClickEvent(l=>{this.app.setting.open(),this.app.setting.openTabById("personal-assistant")});let o=this.addStatusBarItem();o.addClass("personal-assistant-ai-statusbar"),o.setAttribute("id","personal-assistant-ai-statusbar"),(0,Sr.addIcon)("PLUGIN_AI_BRAIN",oi.PLUGIN_AI_BRAIN),(0,Sr.setIcon)(o,"PLUGIN_AI_BRAIN"),o.onClickEvent(l=>{this.app.commands.executeCommandById("personal-assistant:init-vss")}),await this.app.vault.adapter.exists(this.vssCacheDir)||await this.app.vault.adapter.mkdir(this.vssCacheDir),this.vss=this.initVss(),this.app.workspace.onLayoutReady(async()=>{this.calloutManager=await CA(this),this.registerView(t7,l=>new H_(this.app,this,l)),this.registerView(mc,l=>new h_(this.app,this,l)),this.registerView(w4,l=>new _p(l,this,this.vss))}),this.statsManager=new r7(this.app,this),this.addCommand({id:"startup-recording",name:"Open specific note to record",callback:async()=>{let l=(0,hA.default)().format(this.settings.fileFormat),a=this.settings.targetPath;this.log(a,l),await this.createNewNote(a,l)}}),this.addCommand({id:"local-graph",name:"hover local graph",callback:async()=>{await this.localGraph.startup()}}),this.addCommand({id:"switch-on-or-off-plugin",name:"switch on/off plugin according to its status",callback:()=>{let l=new y4(this.app);l.setPlaceholder("Type plugin name to find it"),l.open()}}),this.addCommand({id:"batch-switch-on-or-off-plugins",name:"Batch switch on/off plugins according to their status",callback:()=>{new yp(this.app).open()}}),this.addCommand({id:"set-local-graph-view-colors",name:"Set graph view colors",callback:async()=>{await this.localGraph.updateGraphColors()}}),this.addCommand({id:"update-plugins",name:"Update plugins with one command",callback:async()=>{await new M_(this.app,this).update()}}),this.addCommand({id:"update-themes",name:"Update themes with one command",callback:async()=>{await(await P_.init(this.app,this)).update()}}),this.addCommand({id:"update-metadata",name:"Update metadata with one command",callback:async()=>{if(this.settings.enableMetadataUpdating)if(this.settings.isEnabledMetadataUpdating){let l=document.getElementById("personal-assistant-statusbar");l==null||l.removeClass("personal-assistant-statusbar-breathing"),this.updateDebouncer=(0,Sr.debounce)(a=>{},100,!0),this.settings.isEnabledMetadataUpdating=!1}else{this.updateDebouncer=(0,Sr.debounce)(this.updateMetadata,100,!0);let l=document.getElementById("personal-assistant-statusbar");l==null||l.addClass("personal-assistant-statusbar-breathing"),this.registerEvent(this.app.workspace.on("file-open",a=>{this.updateDebouncer(a)})),this.settings.isEnabledMetadataUpdating=!0}else new Sr.Notice("update metadata command is not enabled in setting tab")}}),this.addCommand({id:"list-callouts",name:"List callout for quickly insert",callback:()=>{new O_(this.app,this).open()}}),this.addCommand({id:"preview-records",name:"Preview records that are created by `startup-recording` command",callback:async()=>{this.activateView()}}),this.addCommand({id:"show-statistics",name:"Show statistics",callback:async()=>{await this.activeStatView()}}),this.addCommand({id:"ai-assistant-summary",name:"AI Summary",editorCallback:async(l,a)=>{let s=l.getSelection(),u=l.getValue();this.log(`You have selected: ${s}`),this.log(`You have value: ${u}`),a instanceof Sr.MarkdownView&&(this.log("invoking LLM"),await new bp(this,l,a).generate())}}),this.addCommand({id:"ai-assistant-featured-images",name:"AI Featured Images",editorCallback:async(l,a)=>{let s=l.getSelection(),u=l.getValue();this.log(`You have selected: ${s}`),this.log(`You have value: ${u}`),a instanceof Sr.MarkdownView&&(this.log("invoking LLM"),await new Cp(this.app,this,l,a).generate())}}),this.addCommand({id:"ai-assistant-floating",name:"AI Auto Robot",editorCallback:async(l,a)=>{if(document.getElementById("floating-ai")&&this.aiFloatingHelper)this.aiFloatingHelper.$destroy(),this.aiFloatingHelper=void 0;else{let u=l.getSelection();a instanceof Sr.MarkdownView&&(this.aiFloatingHelper=new IG({target:globalThis.document.getElementsByClassName("app-container")[0],props:{plugin:this,editor:l,view:a,app:this.app,selectedQuery:u}}))}}}),this.addCommand({id:"init-vss",name:"Init Vector Store Cache of Current Obisidna Vault",callback:async()=>{await this.cacheVectors();let l=this.getVSSFiles();await this.vss.loadVectorStore(l)}}),this.addCommand({id:"open-chat",name:"Open Chat in Sidebar",callback:async()=>{this.activeChatView()}}),this.registerEditorExtension([nh.init(()=>this),MG,AG]),this.registerEvent(this.app.workspace.on("active-leaf-change",async l=>{this.statsManager&&await this.statsManager.recalcTotals()})),this.registerEvent(this.app.vault.on("delete",async()=>{this.statsManager&&await this.statsManager.recalcTotals()})),this.addSettingTab(this.settingTab)}onunload(){}async loadSettings(){this.settings=Object.assign({},Kq,await this.loadData()),this.log("logging settings...",this.settings)}async saveSettings(){await this.saveData(this.settings)}log(...t){t8e(this.settings.debug,...t)}async createDirectory(t){let{vault:n}=this.app,i=n.getRoot().path,o=this.join(i,t);n.getAbstractFileByPath(o)==null&&await n.createFolder(o)}async createNewNote(t,n){let{vault:i}=this.app,o=i.getRoot().path,l=this.join(o,t),a=this.join(l,`${n}.md`);try{if(this.app.vault.getAbstractFileByPath(a)instanceof Sr.TFile){let c=i.getMarkdownFiles();for(let f of c)if(f.path===a){await this.app.workspace.getLeaf("tab").openFile(f);return}throw new Error(`${a} already exists but fail to open`)}l!==""&&(this.log("creating directory path: ",l),await this.createDirectory(l)),this.log("creating file: ",a);let s=await i.create(a,"");await this.app.workspace.getLeaf("tab").openFile(s)}catch(s){new Sr.Notice(s.toString())}}join(...t){let n=t.map(i=>String(i).trim()).filter(i=>i!=null);return(0,Sr.normalizePath)(n.join("/"))}async activateView(){this.app.workspace.detachLeavesOfType(t7);let t=this.app.workspace.getLeaf("tab");await t.setViewState({type:t7,active:!0}),await this.app.workspace.revealLeaf(t)}async activeStatView(){this.app.workspace.detachLeavesOfType(mc);let t=this.app.workspace.getLeaf("tab");await t.setViewState({type:mc,active:!0}),await this.app.workspace.revealLeaf(t)}async activeChatView(){let{workspace:t}=this.app,n=t.getLeavesOfType(w4)[0];if(!n){let i=t.getRightLeaf(!1);i&&(n=i,await n.setViewState({type:w4,active:!0}))}n&&t.revealLeaf(n)}getVSSFiles(){let t=this.app.vault.getMarkdownFiles(),n=[".obsidian","8.template","9.src","a.subjects","b.notion"],i=[];for(let l of t)for(let a of n)l.path.startsWith(a)&&i.push(l);return t.filter(l=>!i.includes(l))}initVss(){return this.vss?this.vss:new pp(this,this.vssCacheDir)}async cacheVectors(){if(this.vss){let t=document.getElementById("personal-assistant-ai-statusbar");t==null||t.addClass("personal-assistant-ai-breathing");let n=this.getVSSFiles(),i=0;try{for(let o of n)i===15&&(await new Promise(l=>setTimeout(l,1e4)),i=0),await this.vss.cacheFileVectorStore(o)&&i++}catch(o){this.log(o)}this.isVssCached=!0,t==null||t.removeClass("personal-assistant-ai-breathing"),t==null||t.addClass("personal-assistant-ai-statusbar-done")}}async getAPIToken(){if(this.token!=="")return this.token;let t=this.settings.apiToken,n=await this.cryptoHelper.decryptFromBase64(t,mp);return n?(this.token=n,n):(new Sr.Notice("Prepare LLM failed!",3e3),"")}};var r8e=V_;
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.29.4 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)

@langchain/core/dist/utils/fast-json-patch/src/helpers.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   *)

@langchain/core/dist/utils/fast-json-patch/src/duplex.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2013-2021 Joachim Wester
   * MIT license
   *)

mustache/mustache.mjs:
  (*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

@langchain/core/dist/utils/js-sha1/hash.js:
  (*
   * [js-sha1]{@link https://github.com/emn178/js-sha1}
   *
   * @version 0.6.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)

vanilla-picker/dist/vanilla-picker.mjs:
  (*!
   * vanilla-picker v2.12.3
   * https://vanilla-picker.js.org
   *
   * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
   * Released under the ISC license.
   *)

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.dataset.js:
chart.js/dist/chart.js:
  (*!
   * Chart.js v4.4.9
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)
*/

/* nosourcemap */